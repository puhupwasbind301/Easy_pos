(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{125:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a,r,c=n(2),s=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function u(e,t){var n=e.title,u=e.titleId,l=i(e,s);return c.createElement("svg",o({id:"restart-line_1_","data-name":"restart-line(1)",xmlns:"http://www.w3.org/2000/svg",width:21.017,height:21.017,viewBox:"0 0 21.017 21.017",ref:t,"aria-labelledby":u},l),n?c.createElement("title",{id:u},n):null,a||(a=c.createElement("path",{id:"Path_36937","data-name":"Path 36937",d:"M0,0H21.017V21.017H0Z",fill:"none"})),r||(r=c.createElement("path",{id:"Path_36938","data-name":"Path 36938",d:"M16.482,17.384a8.741,8.741,0,1,1,1.448-1.6l-2.794-5.027h2.627a7.006,7.006,0,1,0-2.154,5.055Z",transform:"translate(-0.249 -0.249)",fill:"{props.fill}"})))}var l=c.forwardRef(u);n.p},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o}));var a=n(19),r=n.n(a),c=function(e){var t={headers:{token:localStorage.getItem("token")}};return r.a.get("api/reports/IsPeriodShow/"+e,t).then((function(e){return e.data}))},s=function(e){var t={headers:{token:localStorage.getItem("token")}};return r.a.get("api/reports/GetPeriods/"+e,t).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},o=function(){var e={headers:{token:localStorage.getItem("token")}};return r.a.get("api/usermanagement/getclientid",e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},192:function(e,t,n){},205:function(e,t,n){"use strict";var a=n(2),r=n(1);t.a=function(e){return Object(a.useEffect)((function(){}),[e]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"formBox",children:[Object(r.jsx)("label",{htmlFor:"",children:"Select"}),Object(r.jsxs)("select",{name:"",id:"",disabled:e.disabled,value:e.value,onChange:function(t){return e.onchange(t.target.value)},children:[Object(r.jsx)("option",{value:"",children:"Select"}),e.preiodlist.map((function(e){return Object(r.jsx)("option",{value:e.PeriodId,children:e.PeriodName})}))]})]})})}},223:function(e,t,n){},233:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},250:function(e,t,n){},267:function(e,t,n){"use strict";var a=n(40),r=n(39),c=n(50),s=n(99),o=n(2),i=n.n(o),u=n(274),l=n(466),d=n(275),b=n(74),j=n(473),m=n(478),O=n(467),p=n(468),h=n(476),f=n(469),x=n(470),v=n(479),g=n(471),I=n(474),y=n(477),w=n(472),N=n(1),k=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).PageSettingsModel={pageSize:50},r}return Object(r.a)(n,[{key:"dataBound",value:function(){this.element.querySelector("#"+this.element.getAttribute("id")+"_searchbar").addEventListener("keyup",(function(e){this.closest(".e-grid").ej2_instances[0].search(this.value)}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.reportData,a=e.dataSources,r=e.toolbarClick,c=e.toolbarOptions,s=e.report_header,o=e.aggrt;return Object(N.jsx)("div",{children:!0===t?Object(N.jsx)("div",{style:{textAlign:"center"},children:Object(N.jsx)(u.a,{size:60,thickness:5})}):Object(N.jsx)(N.Fragment,{children:s&&s.length>0?Object(N.jsx)("div",{children:Object(N.jsxs)(l.a,{id:"reportData",ref:n,rowHeight:25,dataSource:a,allowPaging:!0,gridLines:"Both",allowFiltering:!0,filterSettings:{type:"Excel"},allowExcelExport:!0,allowPdfExport:!0,toolbarClick:r,allowGrouping:!0,allowResizing:!0,height:545,allowSorting:!0,allowMultiSorting:!0,allowReordering:!0,enableAltRow:!0,toolbar:c,showColumnChooser:!0,enableVirtualization:!1,allowTextWrap:!0,enableInfiniteScrolling:!0,pageSettings:{pageSize:200},dataBound:this.dataBound,children:[Object(N.jsx)(d.b,{children:s&&s.map((function(e){return Object(N.jsx)(d.a,{field:e.field,headerText:e.headerText,width:e.width,textAlign:e.textAlign,format:e.format?e.format:"",headerTextAlign:"Left"})}))}),o,Object(N.jsx)(b.c,{services:[j.a,m.a,O.a,p.a,h.a,f.a,x.a,v.a,g.a,I.a,y.a,w.a]})]},"report_detail"+this.props.formId)}):""})})}}]),n}(i.a.Component);t.a=k},306:function(e,t,n){},307:function(e,t,n){},328:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){},356:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){},420:function(e,t,n){},421:function(e,t,n){},422:function(e,t,n){},423:function(e,t,n){},424:function(e,t,n){},425:function(e,t,n){},426:function(e,t,n){},427:function(e,t,n){},428:function(e,t,n){},429:function(e,t,n){},430:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){},435:function(e,t,n){},436:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){},439:function(e,t,n){},440:function(e,t,n){},441:function(e,t,n){},442:function(e,t,n){},443:function(e,t,n){},444:function(e,t,n){},445:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){"use strict";n(2)},448:function(e,t,n){},449:function(e,t,n){},450:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(25),s=n.n(c),o=(n(306),n(5)),i=(n(307),n(4)),u=n(7),l=n(9),d=n(3),b=(n(223),n.p+"static/media/logo.d106c961.png"),j=n.p+"static/media/envelope.cd523f12.svg",m=n.p+"static/media/phone-alt.6a8453d5.svg",O=n(19),p=n.n(O),h=n(46),f={globelsetting:"++id,globsettingid,itemkeyname,displayname,value",itemMaster:"++id,Id,new,update,ItemId,ItemCode,ItemName,PrintName,NameInTally,GroupId,UnitName,UnitAltName,Conversion,Denominator,IsLot,IsSerial,BillingUnit,EanCode,WeightInKg,IsActive,IsTaxInclusive,CommodityCode,ScheduleNo,SerialNo,Exciseclassification,ExciseClassificationCode,AbatmentNotificationNo,RateOfExcise,ExciseEvaluatinMethod,MinStock,MaxStock,ReorderLevel,CriticalLevel,EconomicOrderQty,MfgDate,ExpDate,Image,CreatedBy,CreatedOn,EditLog,GSTClassification,IsLotEnable,IsSerialEnable,alteredon",hsnMaster:"++id,Id,new,update,IGST,Code,HsnCode,IsActive,CreatedBy,CreatedByName,EditLog,CreatedOn",itemGroup:"++id,Id,new,update,GroupCode,GroupName,ParentGroupId,ParentGroupCode,ParentGroupName,CreatedBy,CreatedByName,EditLog,CreatedOn",unitMaster:"++id,Id,new,update,UnitSymbol,UnitName,DecimalDigit,CreatedBy,CreatedByName,EditLog,CreatedOn",attributeMaster:"++Id,id,new,update,AttributeName,IsActive,CreatedBy,CreatedByName,EditLog,CreatedOn,Value",attributeMasterDetails:"++Id,AttributeId,SizeCode,Code,PrintName,IsActive",userLogin:"++id,Id,new,update,name,userId,password,valid",customerMaster:"++id,Id,new,update,PartyCode,PartyName,PartyLastName,CompanyCode,GroupId,Address,Address2,CityId,PinCode,Phone1,Phone2,Fax,Email,ContactPerson,SalesPersonName,CstNo,CstDate,LstNo,LstDate,TinNo,TinDate,PAN,GSTNo,BillAddress,LedgerType,Salutation,DOB,Anniversary,Nationality,Gender,Spouse,Remarks,Website,StreetNo,StreetName,IsClosed,DmsLedgerCode,DealerCategory,CreatedBy",stateMaster:"++id,Id,new,update,StateId,StateCode,StateName,CountryId,CountryName,IsActive",cityMaster:"++id,Id,new,update,CityId,CityCode,CityName,StateId,StateName",priceSlabMaster:"++id,Id,SlabCode, SlabName, CreatedBy , CreatedByName, CreatedOn,EditLog,BranchId,SeriesId,SeriesNo,SeriesCode,Remark,alteredon",priceListItem:"++id,SlabItemId,SlabId,ItemId,ItemName,ItemCode,ApplicableFrom,ApplicableTo,InActive,Remarks,InactiveDate",priceListItemDetail:"++id,DetailId,SlabItemId,SlabId,ItemId,ItemName,QtyFrom,QtyTo,LotNo,MRP,Rate,Disc,DiscountAmount,FinalRate,LotSerialId",gstClassificationMap:"++Id,ItemId,HsnId,ApplicableDate,CreatedBy,CreatedOn,EditLog",gstClassificationMaster:"++Id,HsnName,HsnCode,UsedFor,GstCalculation,TaxableType,ApplicableDate",igstMaster:"++Id,ExciseClassificationId,ApplicableDate,Rate",cgstMaster:"++Id,ExciseClassificationId,CessRate,CgstRate,StateId",sgstMaster:"++Id,ExciseClassificationId,CessRate,SgstRate,StateId",stockLotMaster:"++Id,SerialId,TransactionId,TransactionType,TransactionDate,TransactionNo,ItemId,QtyIn,QtyOut,LotNo,BatchNo,MfgDate,ExpDate,Mrp,IsAltRate,AltQtyOut,AltQtyIn",salesInvoice:"++id,Id,new,update,invoiceno,invoicedate,partyid,grossamount,discountamount,taxamount,netamount,receiveamount,branchid,counterid,createdby,createdon,editlog,ishold,iscancelled,alterid,authorizedby,authorizedon,cancelledby,cancelledon,salepersonid,voucherid,seriesid,seriesvouchertype,isauthorized,remarks,discountpermanual,discountamountmanual,finalamount,noofbillprint,billtime,roundoff,totalbillqty,invoicetype,cash_amount,cn_amount,dc_amount,cc_amount,advance_amount,coupon_amount,other_amount,mrp_value,cashtrade,balamt,tallyvoucherid,tallysyncdate,tallyreferenceno,issendtotally,totaligst,totalcgst,totalsgst,billingcountryid,billingstateid,billingaddress,billinggstinno,shippingcountryid,shippingstateid,shippingaddress,shippinggstinno,mobilenumber,influencerid,billingtype,[new+ishold],[update+ishold]",saleInvoiceDetail:"++id,invoiceid,InvoiceDetailId,itemid,quantity,soldBatchSerials,mrp,UnitId,UnitName,stock,storeid,saleprice,grossamount,finaldiscount,taxper,totaltaxamount,finalperrate,totalnetamount,lotno,createdby,createdon,editlog,isvatitem,addtaxrate,addtaxamount,surchargerate,surchargeamount,taxamount,istaxinclusive,altqty,salepersonid,changeindiscount,autodiscountper,autodiscountamount,manualdiscountper,manualdiscountamount,istaxcalculatebeforediscount,lotserialid,itemremark,discount_slab_detail_id,isautodiscountonper,isautodiscountonamount,isaltrate,conversion,denominator,isschemeitem,hsnclassificationid,igstrate,cgstrate,sgstrate,igstamount,cgstamount,sgstamount,manualchangesaleprice,sodetailid,schemecode",IndentMaster:"++id,Id, IndentNo,IndentDate,PartyId,PartyName,CreatedBy,CreatedOn,EditLog,Remarks,SeriesId,SeriesVoucherType,BranchId,new,update",IndentDetail:"++id,IndentId, IndentNo, ItemId, Quantity, ItemRemarks, Priority",purchaseOrder:"++id,Id,PoNumber, PoDate ,PartyId ,PartyName ,CreatedBy ,CreatedByName ,CreatedOn, EditLog ,IsClosed, Remarks ,OrderedBy, SeriesId, SeriesNo, SeriesCode, SeriesVoucherType ,TotalIGST, TotalCGST ,TotalSGST,new,update",purchaseIndentDetail:"++Id, PoDetailId, PoId ,IndentId, IndentDetailId, ItemId ,BaseQty",purchaseDetail:"++id, PoId ,ItemId,IndentId,IndentDetailId ,Rate, Discount ,BaseQty ,AltQty ,GrossTotal ,DiscountAmount, NetTotal, IsAltRate ,Remark, HsnId, IGSTRate ,CGSTRate ,SGSTRate, IGSTAmount, CGSTAmount, SGSTAmount",salesReturn:"++id,Id,InvoiceId, Invoiceno, InvoiceDate,salepersonId,PartyId, GrossAmount, DiscountAmount, RTaxAmount, NetAmount, ReceiveAmount, BranchId, CopunterId, CreatedBy, CreatedOn, EditLog, SeriesId, SeriesVoucherType, IsAuthorized, Remarks, InvoiceType, BillTime, TotalBillQty,Stype,new,update,totalCgst,totalIgst,totalSgst,RounOff,DiscountPer,DiscountPerAmount,AgainstInvoiceId,AgainstInvoiceNo",SaleReturnDetail:"++Id,SaleReturnId,InvoiceId,ItemId, Quantity, MRP, SalePrice, GrossAmount, FinalDiscount, TaxPercentage,TaxPercentageAmt,AdditionalTax,AdditionalTaxAmt,TotalNetAmount,TotalTaxAmount,surchargerate,surchargeamount,AltQuantity, AutoDiscount, AutoDiscountAmount, ManualDiscount, ManualDiscountAmount, ItemRemark, AgainstInvoiceDetailid, AgainstInvoiceId, Hsnid, IgstRate, CgstRate, SgstRate, IgstAmount, CgstAmount, SgstAmount",CreditNoteMaster:"++Id,InvoiceDate,PartyName,InvoiceNo,PartyId,GrossAmount,Remarks,SeriesId,ShippingGstNo,Remark,SeriesVoucherType,CreatedById,CreatedBy,CreatedOn,EditLog,ReferenceType,ReferenceId,DncnAgaintPi,ShippingAddress,ShippingStateId,ShippingCountryId,BillingAddress,BillingGstNo,BillingStateId,BillingCountryId,NetAmount,TaxAmount,DiscountAmount,InvoiceType,ItemDetail,SalesInvoiceNo,new,update",DebitNoteMaster:"++Id,InvoiceDate,PartyName,InvoiceNo,PartyId,GrossAmount,Remarks,SeriesId,ShippingGstNo,Remark,SeriesVoucherType,CreatedById,CreatedBy,CreatedOn,EditLog,ReferenceType,ReferenceId,DncnAgaintPi,ShippingAddress,ShippingStateId,ShippingCountryId,BillingAddress,BillingGstNo,BillingStateId,BillingCountryId,NetAmount,TaxAmount,DiscountAmount,InvoiceType,ItemDetail,SalesInvoiceNo",PR_Master:"++id,Id,Prid,PurchaseReturnNo,InwardNo,GITNo,PurchaseReturnDate,vendorid,IsAuthorized,IsCancelled,DiscountAmount,GrossAmount,DiscountedAmount,NetAmount,AuthorizedBy,AuthorizedOn,HeadauthorizedBy,HeadauthorizedOn,CancelledBy,CancelledOn,Remarks,CreatedBy,CreatedOn,SeriesId,SeriesVoucherType,BranchId,PrType,Manual,new,update",PR_Detail:"++id,Id,PrDetailId,Prid,ItemId,ReturnBaseQty,ReturnAltQty,Rate,InwardDetailId,MRP",purchaseReturn:"++Id,documentno ,documentdate,vendorname,vendorcode,inwardno,gitno ,erpinvoice",AdjustmentMaster:"++id,Id,AdjusmentId,AdjusmentNo,AdjusmentDate,IsAuthorized,AuthorizedBy,AuthorizedOn,IsCancelled,CancelledBy,CancelledOn,CreatedBy,CreatedOn,BranchId,CounterId,SeriesId,SeriesVoucherType,EditLog,Remarks,new,update",AdjustmentDetail:"++id,Id,StockAdjusmentDetailId,stockadjustmentid,ItemId,MRP,QuantityIn,QuantityOut,LotNo",SaleOrder:"++id,Id ,SoNo, SoDate,PartyId,GrandTotal,CreatedBy,CreatedByName,CreatedOn,Remarks,SoDetail,alteredon",stockMaster:"++Id, transactionNo,transactionDate,remarks",stockMasterDetails:"++Id,SmId,itemname,itemcode,baseunit,altunit,mrp,quantityadd,quantityMinus",salesPersonMaster:"++id,Id,SalePersonName,SalePersonCode,Commission,CommissionValue,Target,VendorId,DesginationId,ParentId,EmailId,ContactNo,CreatedBy,CreatedByName,TargetDetail,EditLog,CreatedOn,alteredon,new,update",employeeMaster:"++id,Id,EmployeeName,EmployeeCode,Dob,Doj,Department,DepartmentName,Gender,MaritalStatus,PresentAddress,PresentContactNo,ReportingTo,Designationid,PresentPincode,Email,PanNo,IdCardNo,PermanentAddress,PermanentPincode,IsActive,EditLog,CreatedBy,CreatedByName,reportingper,CreatedOn,contactNo,alteredon,new,update",reasonMaster:"++id,Id,ReasonName,CounterId,ReasonTypeId,ReasonTypeName,EditLog,CreatedBy,CreatedOn,alteredon",reasonTypeMaster:"++id,Id,ReasonTypeName,alteredon",designationMaster:"++id,Id,DesignationCode,DesignationName,alteredon,new,update",GITMaster:"++id,Id,gitid,partyid_ho,partyid_pos,partyname,invoiceno_ho,invoicedate_ho,invoiceid_ho,grandtotal,git_no,git_date,alterid,editlog,authorizedby,authorizedon,headauthorizedby,headauthorizedon,cancelledby,tally_log,tallyreferenceno,tallysyncdate,remarks,createdby,createdon,reference_no,reference_date,isautoentry,invoiceno_erp,invoicedate_erp,gitdetail,alteredon",IC_Master:"++id,Id,InwardId,InwardNo,GIT,billBaseQty,billAltQty,recBaseQty,recAltQty,InwardDate,PartyId,IsAuthorized,DiscountAmount,GrossAmount,DiscountedAmount,NetAmount,EditLog,AuthorizedBy,AuthorizedOn,HeadAuthorizedBy,HeadAuthorizedOn,IsCancelled,Remarks,CreatedBy,CreatedOn,seriesid,voucherid,new,update",IC_Detail:"++id,Id,InwardDetailId,InwardId,InwardNo,ItemId,BilledBaseQty,BilledAltQty,ReceiveBaseQty,ReceiveAltQty,UnitId,Rate,GrossAmount,DiscountPercentage,DiscountAmount,DiscountedAmount,MRP,GitDetailId,shortQty,excessqty,NetAmount",PurchaseInvoice:"++id,Id,InvoiceNo,InvoiceDate,PartyId,invoicetype,[InvoiceNo+invoicetype],grossamount,discountamount,taxamount,netamount,seriesid,seriesvouchertype,billingcountryid,billingstateid,billingaddress,billinggstinno,shippingcountryid,shippingstateid,shippingaddress,shippinggstinno,remark,dncn_against_pi,referencetype,referenceid,CreatedBy,CreatedOn,EditLog,Remarks,new,update,roundOff,totalAmount,igstAmount,cgstAmount",PurchaseInvoiceDetail:"++id,Id,InvoiceId,ItemId,isaltrate,Quantity,altqty,Godown,GodownId,MRP,Rate,Amount,DiscountPer,DiscountAmount,ReferenceNo,ReferenceDate,hsnclassificationid,igstrate,cgstrate,sgstrate,igstamount,cgstamount,sgstamount,icdetailid,referencedetailid,InvoiceDetailId",counterMaster:"++id,Id,CounterName,CounterCode,Remarks,MachineId,CreatedBy,CreatedByName,EditLog,CreatedOn,alteredon,new,update",currencyMaster:"++id,Id,CurrencySymbol,FormalName,DigitAfterDecimal,SymbolForDecimalPortion,DecimalSymbol,GroupingSymbol,CounterId,EditLog,CreatedBy,CreatedOn,alteredon,new,update",voucherMaster:"++Id,voucherName,AppliedOn,tallyVoucherName,shortName,EnableBatch,SetAsDefault,isImeiApplicable,enableDataBackEntry,itemLevelRoundingOff",currencyMasterDetails:"++Id,CurrencyMasterId,Date,Rate",geographicalMaster:"++Id,CountryName,CountryCode",advanceAdjustment:"++id,Id,advanceadjustmentno,advanceadjustmentdate,partyid,advanceadjustmentamount,advanceadjustmentrefundamount,remarks,seriesid,seriesvouchertype,branchid,counterid,createdby,createdon,editlog,amountadjusted,new,update",creditNoteRefund:"++id,Id,creditnoteno,creditnotedate,partyid,creditnoteamount,creditnoterefundamount,remarks,seriesid,seriesvouchertype,branchid,counterid,createdby,createdon,editlog,amountadjusted,referencetype,referenceid,alterid,new,update",CreditNoteMasterDetail:"++id,Id,Amount,DiscountAmount,DiscountPer,InvoiceDetailId,InvoiceId,ItemCode,ItemId,ItemName,Quantity,Rate,ReferenceDate,ReferenceNo,altqty,cgstamount,cgstrate,hsnclassificationid,icdetailid,igstamount,igstrate,isaltrate,referencedetailid,sgstamount,sgstrate",DebitNoteMasterDetail:"++id,Id,Amount,DiscountAmount,DiscountPer,InvoiceDetailId,InvoiceId,ItemCode,ItemId,ItemName,Quantity,Rate,ReferenceDate,ReferenceNo,altqty,cgstamount,cgstrate,hsnclassificationid,icdetailid,igstamount,igstrate,isaltrate,referencedetailid,sgstamount,sgstrate",mastertables:"++id,tablename,alteredon,recordcount,pageindexno,hitcount",seriesMaster:"++id,Id,SeriesName,RestartSeries,DigitPadding,BranchId,IsActive,InactiveDate,CreatedBy,CreatedByName,CreatedOn,EditLog,alteredon",seriesMasterDetail:"++id,CusSeriesId,SeriesId,FieldId,FieldName,FieldValue,Seperator,Sno,alteredon",seriesfieldMaster:"++id,Id,FieldId,FieldName,FieldValue,alteredon",seriesApply:"++id,Id,SeriesId,VoucherId,VoucherName,ItemId,ApplicableFrom,BranchId,CreatedBy,CreatedByName,CreatedOn,EditLog,alteredon,new,update",VoucherFormMaster:"++id,Id,formid,formname,caption,formtype,mnunew,mnuedit,mnuauthorize,mnuview,mnuprint,mnuamendment,mnusendtotally,mnuexporttoexcel,extravalue,formval,isauthorizationreq,mnuclosepending,visible,mnucanceltransaction,formgroupid,allowbackdateentry,isheadauthorizationreq,mnuattachment,mnuviewattachment,bamount_auth_enable,formpath,backdateenddate,saveandprint,saveandauthorize,roundoffitemlevelamt,mnucreatestructure,mnuimport,tb_name,is_from_dll,alteredon",VoucherList:"++id,Id,VoucherName,ApplyOnFormId,IsDefault,ShortName,IsActive,CreatedBy,CreatedByName,EditLog,CreatedOn,alteredon,new,update",formMaster:"++id,Id,formid,formname,caption,formtype,mnunew,mnuedit,mnuauthorize,mnuview,mnuprint,mnuamendment,mnusendtotally,mnuexporttoexcel,extravalue,formval,isauthorizationreq,mnuclosepending,visible,mnucanceltransaction,formgroupid,allowbackdateentry,isheadauthorizationreq,mnuattachment,mnuviewattachment,bamount_auth_enable,formpath,backdateenddate,saveandprint,saveandauthorize,roundoffitemlevelamt,mnucreatestructure,mnuimport,tb_name,is_from_dll,alteredon",formgroupmaster:"++id,formgroupid,formgroupname,alteredon",formmenumaster:"++id,menuid,menuname,haschild,formid,parentid,seqno,alteredon",RoleMaster:"++id,Id,RoleName,Description,CreatedBy,CreatedByName,CreatedOn,IsActive,EditLog,alteredon,Detail,new,update",RoleDetailMaster:"++id,RoleDetailId,RoleId,FormId,AllowNew,AllowEdit,AllowAuthorize,AllowView,AllowPrint,AllowAmendmend,AllowExportToExcel,AllowSendToTally,AllowCancelTransaction,AllowAttachment,AllowViewAttachment,AllowCreateStructure,AllowImport,ModuleName,FormName,FormTypeName",userMaster:"++id,Id,UserName,Password,EmployeeId,EmployeeName,Description,IsActive,IsAuthorized,AuthorizedBy,CreateddBy,Email,EditLog,CreatedOn,AuthorizedOn,alteredon,Branch,new,update",UserMenuMaster:"++id,menuid,formid,menuname,formname,formtype,haschild,parentid,seqno,formval,bshow,userId",salesInvoiceWithSO:"++id,Id,new,update,invoiceno,invoicedate,partyid,grossamount,discountamount,taxamount,netamount,receiveamount,branchid,counterid,createdby,createdon,editlog,ishold,iscancelled,alterid,authorizedby,authorizedon,cancelledby,cancelledon,salepersonid,voucherid,seriesid,seriesvouchertype,isauthorized,remarks,discountpermanual,discountamountmanual,finalamount,noofbillprint,billtime,roundoff,totalbillqty,invoicetype,cash_amount,cn_amount,dc_amount,cc_amount,advance_amount,coupon_amount,other_amount,mrp_value,cashtrade,balamt,tallyvoucherid,tallysyncdate,tallyreferenceno,issendtotally,totaligst,totalcgst,totalsgst,billingcountryid,billingstateid,billingaddress,billinggstinno,shippingcountryid,shippingstateid,shippingaddress,shippinggstinno,mobilenumber,influencerid,billingtype,[new+ishold],[update+ishold]",saleInvoiceDetailWithSO:"++id,invoiceid,InvoiceDetailId,itemid,quantity,mrp,saleprice,grossamount,finaldiscount,taxper,totaltaxamount,finalperrate,totalnetamount,lotno,createdby,createdon,editlog,isvatitem,addtaxrate,addtaxamount,surchargerate,surchargeamount,taxamount,istaxinclusive,altqty,salepersonid,changeindiscount,autodiscountper,autodiscountamount,manualdiscountper,manualdiscountamount,istaxcalculatebeforediscount,lotserialid,itemremark,discount_slab_detail_id,isautodiscountonper,isautodiscountonamount,isaltrate,conversion,denominator,isschemeitem,hsnclassificationid,igstrate,cgstrate,sgstrate,igstamount,cgstamount,sgstamount,manualchangesaleprice,SoDetailId,schemecode,SoNo,SoId",itemTaxStructure:"++id,detailid,taxstructurecode,taxstructurename,itemid,itemcode,ledgerid,ledgercode,effectivefrom,isvatitem,taxper,addtaxper,surcharge,istaxinclusive,itemid_ho,isexempted,istaxcalculatebeforediscount,ho_itemtaxmasterid,itemtaxmasterid,alteredon",getItemStock:"++id,itemid,storeid,lotno,batchno,mfgdate,expdate,mrp,inqty,qtyout,balance,[itemid+storeid]",itemStockIndexdb:"++id,stockDate,transactionTypeId,transactionType,transactionId,ItemId,storeid,qtyIn,qtyOut,IsSyncServer,[ItemId+storeid]",itemSalePrice:"++id,item_standard_id,itemid,rdpprice,effective_from,alteredon",dealerCategory:"++id,dealercategoryid,dealercategorycode,isactive,alteredon",loginbrowserId:"++id,Id",seriesCount:"++id,formcaption,formid,seriesid,totalrecord",billingType:"++id,settingid,settingname,settingvalueid,valuename,isactive,alteredon",Influencer:"++id,influencerid,influencerdmscode,influencercode,influencername,statename,alteredon",GodownMaster:"++id,storeid,Storename,Storecode,Branchid,isdefault,inactive,Storetype,Description,isauthorized,authorizedby,authorizedon,CreatedBy,EditLog,headauthorizedon,headauthorizedby,inactivedate,createdon,updatedby,updatedon",BatchMaster:"++id,batchid,batchno,batchdate,lotno,branchid,itemid,manufacturingdate,expirydate,seriesid,seriesno,seriescode,editlog,iscancelled,createdon,alteredon",BatchDetail:"++id,batchdetailid,batchid,stockid,entrytype,entryid,entrydetailid,itemid,storeid,mrp,inqty,outqty,inaltqty,outaltqty,createdon",SerialMaster:"++id,serialid,serialno,uniqueserialno,manualbatchno,itemid,branchid,warrentydate,expirydate,serialcreatedfrom,seriesid,seriesno,seriescode,editlog,iscancelled,isstock,createdon,alteredon",SerialDetail:"++id,serialdetailid,serialid,batchdetailid,batchid,stockid,entrytype,entryid,entrydetailid,itemid,storeid,isconsumed,createdon",UserPreferedLanguageDictionary:"++id",ProfileMaster:"++id,principalCode,headOfficeCode,locationCode,syncMode.headOfficeName,isActive,address,pinCode,email,contact1,contact2,allowItemCreation,allowItemAlternation,allowLedgerCreation,allowLedgerAlternation",CompanySettings:"++id,companyName,companyShortName,address,city,state,country,pinCode,contact1,contact2,faxNo,currency,registerDate,registerNo,webUrl,licenceNo,email,tallyIP&port,tallyCompanyName,companylogo"};n(232).config();var x=new h.a("posdb");x.version(1).stores(Object(d.a)({},f)),x.open().then((function(e){return console.log("hey creating posdbs",e)})).catch((function(e){return console.log("error on creating posdb",e)}));var v=x,g=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({attributeMaster:f.attributeMaster}),n=[{id:1,AttributeName:"12334",IsActive:!0,CreatedByName:"creditdon",CreatedBy:"02/18/2021",Value:"cskhd287612"},{id:2,AttributeName:"12334",IsActive:!0,CreatedByName:"creditdon",CreatedBy:"02/18/2021",Value:"cskhd287612"}],e.next=6,t.attributeMaster.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncattributeMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({attributeMasterDetails:f.attributeMasterDetails}),n=[{AttributeId:1,SizeCode:"size-01",Code:"105cm",PrintName:"",IsActive:!0},{AttributeId:1,SizeCode:"size-01",Code:"105cm",PrintName:"",IsActive:!0},{AttributeId:1,SizeCode:"size-01",Code:"105cm",PrintName:"",IsActive:!0},{AttributeId:2,SizeCode:"size-01",Code:"105cm",PrintName:"",IsActive:!0},{AttributeId:2,SizeCode:"size-01",Code:"105cm",PrintName:"",IsActive:!0}],e.next=6,t.attributeMasterDetails.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncattributeMasterDetails");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({gstClassificationMap:f.gstClassificationMap}),n=[{Id:1,ItemId:2,HsnId:1,ApplicableDate:w(),CreatedBy:null,CreatedOn:null,EditLog:null},{Id:2,ItemId:3,HsnId:2,ApplicableDate:w(),CreatedBy:null,CreatedOn:null,EditLog:null},{Id:2,ItemId:4,HsnId:3,ApplicableDate:w(),CreatedBy:null,CreatedOn:null,EditLog:null},{Id:3,ItemId:5,HsnId:4,ApplicableDate:w(),CreatedBy:null,CreatedOn:null,EditLog:null},{Id:4,ItemId:566,HsnId:5,ApplicableDate:w(),CreatedBy:null,CreatedOn:null,EditLog:null},{Id:5,ItemId:349,HsnId:6,ApplicableDate:w(),CreatedBy:null,CreatedOn:null,EditLog:null}],e.next=6,t.gstClassificationMap.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncGstClassificationMapMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e="",t="",n="";try{t=("0"+((e=new Date).getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),e=[n,t,e.getFullYear()].join("-")}catch(a){}return e},N=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({gstClassificationMaster:f.gstClassificationMaster}),n=[{Id:1,HsnName:"Sports Goods String",HsnCode:null,UsedFor:4,GstCalculation:1,TaxableType:4,ApplicableDate:"23-Jan-2021"},{Id:2,HsnName:"Sports Goods String",HsnCode:null,UsedFor:4,GstCalculation:1,TaxableType:4,ApplicableDate:"24-Jan-2021"},{Id:3,HsnName:"Sports Goods String",HsnCode:null,UsedFor:4,GstCalculation:1,TaxableType:4,ApplicableDate:"25-Jan-2021"},{Id:4,HsnName:"Sports Goods String",HsnCode:null,UsedFor:4,GstCalculation:1,TaxableType:4,ApplicableDate:"26-Jan-2021"},{Id:5,HsnName:"Sports Goods String",HsnCode:null,UsedFor:4,GstCalculation:1,TaxableType:4,ApplicableDate:"27-Jan-2021"},{Id:6,HsnName:"Sports Goods String",HsnCode:null,UsedFor:4,GstCalculation:1,TaxableType:4,ApplicableDate:"28-Jan-2021"}],e.next=6,t.gstClassificationMaster.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncGstClassificationMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({igstMaster:f.igstMaster}),n=[{Id:1,ExciseClassificationId:1,ApplicableDate:"23-Jan-2021",Rate:12},{Id:2,ExciseClassificationId:2,ApplicableDate:"24-Jan-2021",Rate:12},{Id:3,ExciseClassificationId:3,ApplicableDate:"24-Jan-2021",Rate:12},{Id:4,ExciseClassificationId:4,ApplicableDate:"25-Jan-2021",Rate:12},{Id:5,ExciseClassificationId:5,ApplicableDate:"26-Jan-2021",Rate:12},{Id:6,ExciseClassificationId:6,ApplicableDate:"27-Jan-2021",Rate:12}],e.next=6,t.igstMaster.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncIgstMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({cgstMaster:f.cgstMaster}),n=[{Id:1,ExciseClassificationId:1,CessRate:0,CgstRate:6,StateId:12},{Id:2,ExciseClassificationId:2,CessRate:0,CgstRate:6,StateId:12},{Id:3,ExciseClassificationId:3,CessRate:0,CgstRate:6,StateId:12},{Id:4,ExciseClassificationId:4,CessRate:0,CgstRate:6,StateId:12},{Id:5,ExciseClassificationId:5,CessRate:0,CgstRate:6,StateId:12},{Id:6,ExciseClassificationId:6,CessRate:0,CgstRate:6,StateId:12}],e.next=6,t.cgstMaster.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncCgstMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({sgstMaster:f.sgstMaster}),n=[{Id:1,ExciseClassificationId:1,CessRate:0,SgstRate:6,StateId:12},{Id:2,ExciseClassificationId:2,CessRate:0,SgstRate:6,StateId:12},{Id:3,ExciseClassificationId:3,CessRate:0,SgstRate:6,StateId:12},{Id:4,ExciseClassificationId:4,CessRate:0,CgstRate:6,StateId:12},{Id:5,ExciseClassificationId:5,CessRate:0,SgstRate:6,StateId:12},{Id:6,ExciseClassificationId:6,CessRate:0,SgstRate:6,StateId:12}],e.next=6,t.sgstMaster.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncSgstMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({stockMaster:f.stockMaster}),n=[{Id:1,transactionNo:"SM6378402963",transactionDate:"12/12/2021",remarks:"FHOIGHIO"}],e.next=6,t.stockMaster.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncStockMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({stockMasterDetails:f.stockMasterDetails}),n=[{Id:1,SmId:"SM6378402963",itemname:"new item1",itemcode:"9211",baseunit:"Piece",altunit:"Piece",mrp:9211,quantityadd:1,quantityMinus:12}],e.next=6,t.stockMasterDetails.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncStockMasterDetail");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({currencyMasterDetails:f.currencyMasterDetails}),n=[{CurrencyMasterId:1,Date:"12/12/2021",Rate:1}],e.next=6,t.currencyMasterDetails.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncCurrencyMasterDetails");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new h.a("posdb")).version(1).stores({geographicalMaster:f.geographicalMaster}),n=[{CountryName:"India",CountryCode:"IN",CountryId:5}],e.next=6,t.geographicalMaster.bulkPut(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"syncGeographicalMaster");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),R=n(16),B={ItemId:"",ItemCode:"",ItemName:"",PrintName:"",NameInTally:"",GroupId:"",UnitName:"",UnitAltName:"",Conversion:"",Denominator:"",IsLot:"",IsSerial:"",BillingUnit:"",EanCode:"",WeightInKg:"",IsActive:"",IsTaxInclusive:"",CommodityCode:"",ScheduleNo:"",SerialNo:"",Exciseclassification:"",ExciseClassificationCode:"",AbatmentNotificationNo:"",RateOfExcise:"",ExciseEvaluatinMethod:"",MinStock:"",MaxStock:"",ReorderLevel:"",CriticalLevel:"",EconomicOrderQty:"",MfgDate:"",ExpDate:"",Image:"",CreatedBy:"",CreatedOn:"",EditLog:""},M={ItemId:"",HsnId:"",ApplicableDate:"",CreatedBy:"",CreatedOn:"",EditLog:""},T={ItemMaster:[],UnitMaster:[],AttributeMaster:[],HsnMaster:[],ItemGroup:[]},E=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.globelsetting.where("globsettingid").equals(541).first().then().catch((function(e){return console.log(e)}));case 2:(t=e.sent)&&(n=new Date(Date.now()-24*t.value*60*60*1e3),a={alteredon:q(n),pageindexno:0},L(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t={headers:{token:localStorage.getItem("token")}};p.a.post("/api/SalesInvoice/List",e,t).then((function(e){console.log(e,"respossssssssssssssss");var t=[],n=[];e.data&&e.data.Result&&e.data.Result.map((function(e){var a={Id:e.Id,invoiceno:e.InvoiceNo,invoicedate:new Date(F(e.InvoiceDate)),partyid:e.PartyId,grossamount:e.GrossAmount,netamount:e.NetAmount,discountamount:e.DiscountAmount,taxamount:e.TaxAmount,receiveamount:e.ReceiveAmount,createdby:e.CreatedBy.toString(),CreatedByName:"",seriesid:e.SeriesId,voucherid:e.SeriesVoucherType,createdon:e.CreatedOn,EditLog:null,salepersonid:e.SalesPersonId,roundoff:e.roundoff,billingcountryid:e.billingcountryid,billingstateid:e.billingstateid,billingaddress:e.billingaddress,billinggstinno:e.billinggstinno,shippingcountryid:e.shippingcountryid,shippingstateid:e.shippingstateid,shippingaddress:e.shippingaddress,shippinggstinno:e.shippinggstinno,discountpermanual:e.discountpermanual,discountamountmanual:e.discountamountmanual,remarks:e.Remarks,billtime:e.BillTime,totalbillqty:e.TotalBillQty,totaligst:e.TotalIgst,totalcgst:e.TotalCgst,totalsgst:e.TotalSgst,iscancelled:e.iscancelled,ishold:e.ishold.toString(),isauthorized:e.isauthorized,cancelledby:e.cancelledby,cancelledon:e.cancelledon,update:0,new:0};return t.push(a),e.SalesInvoiceDetail.map((function(e){var t={InvoiceDetailId:e.InvoiceDetailId,invoiceid:e.InvoiceId,itemid:e.ItemId,ItemName:e.ItemName,ItemCode:e.ItemCode,quantity:e.Quantity,mrp:e.MRP,saleprice:e.SalePrice,grossamount:e.GrossAmount,finaldiscount:e.FinalDiscount,totaltaxamount:e.TotalTaxAmount,totalnetamount:e.TotalNetAmount,IsTaxInclusive:e.IsTaxInclusive,AltQuantity:null,AutoDiscount:0,autodiscountamount:e.AutoDiscountAmount,manualdiscountper:e.ManualDiscount,manualdiscountamount:e.ManualDiscountAmount,itemremark:e.ItemRemark,IsAutoDiscountOn:!1,IsAutoDiscountOnAmount:!1,Conversion:1,denominator:e.Denominator,HsnId:e.HsnId,igstrate:e.IGSTRate,cgstrate:e.CGSTRate,sgstrate:e.SGSTRate,igstamount:e.IGSTAmount,cgstamount:e.CGSTAmount,sgstamount:e.SGSTAmount};n.push(t)})),e})),v.salesInvoice.bulkAdd(t).then().catch((function(e){return console.log(e)})),v.saleInvoiceDetail.bulkAdd(n).then().catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))};function F(e){for(var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=e.split("-"),a=n[0],r=n[1],c=n[2],s="",o=0;o<t.length;o++)if(r===t[o]){var i=o+1;s=i<10?"0"+i:i}return c+"-"+s+"-"+a}function q(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear(),c=t.getHours(),s=t.getMinutes(),o=t.getSeconds();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,t.getMonth(),a].join("-")+" "+c+":"+s+":"+o}var G=E;n(232).config();var U=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.globelsetting.toArray().then().catch((function(e){return console.log(e)}));case 3:t=e.sent,n={headers:{token:localStorage.getItem("token")}},"/api/Globalsetting",p.a.get("/api/Globalsetting",n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n,"res res 17"),!(t.length>0)){e.next=6;break}return e.next=4,v.globelsetting.clear().then((function(e){v.globelsetting.bulkAdd(e.data.Result).then().catch()}));case 4:e.next=8;break;case 6:return e.next=8,v.globelsetting.bulkAdd(n.data.Result).then((function(e){return G()}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e,"globalsettinterr")})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0,"globalsetting");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/ItemMaster/List/",p.a.post("/api/ItemMaster/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!((a=t.data&&t.data.Result&&t.data.Result.map((function(e){var t=Object(d.a)(Object(d.a)({},B),{},{Id:e.Id,ItemId:e.Id,ItemCode:e.ItemCode,ItemName:e.ItemName,PrintName:e.PrintName,GroupId:e.GroupId,UnitName:e.UnitId,UnitAltName:-1===e.AltUnitId?e.UnitId:e.AltUnitId,Conversion:e.Conversion,Denominator:e.Denominator,IsLot:e.IsLotEnable,IsActive:e.IsActive,IsTaxInclusive:e.IsTaxInclusive,CreatedBy:e.CreatedBy,CreatedOn:e.CreatedOn,EditLog:e.EditLog,IsLotEnable:e.IsLotEnable,IsSerialEnable:e.IsSerialEnable,alteredon:e.alteredon}),n=e.HSNMapping.map((function(e){return{ItemId:e.ItemId,HsnId:e.HsnId,ApplicableDate:e.ApplicableOn,CreatedBy:e.CreatedBy,CreatedOn:e.CreatedOn,EditLog:""}}));return t.GSTClassification=Object(R.a)(n),t})))&&a.length>0)){e.next=25;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=9,v.mastertables.where("tablename").equals("itemMaster").first().then().catch((function(e){return console.log(e)}));case 9:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=19;break}return e.next=14,v.mastertables.put({id:s.id,tablename:"itemMaster",recordcount:s.recordcount,alteredon:c,pageindexno:parseInt(s.pageindexno)+1,hitcount:s.hitcount});case 14:if(!(s.pageindexno<s.hitcount)){e.next=17;break}return e.next=17,v.itemMaster.bulkAdd(a);case 17:e.next=23;break;case 19:return e.next=21,v.mastertables.add({tablename:"itemMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 21:return e.next=23,v.itemMaster.bulkAdd(a);case 23:e.next=26;break;case 25:console.log("no more itemmaster data");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncItemMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/LedgerMaster/List/1/",p.a.post("/api/LedgerMaster/List/1/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!(t&&t.data&&t.data.Result)){e.next=29;break}if(console.log(t,"second response"),!((a=t.data.Result.map((function(e){return{Id:e.Id,new:0,update:0,PartyCode:e.LedgerCode,PartyName:e.LedgerName,CompanyCode:e.CompanyCode,GroupId:"",Address:e.Address,Address2:e.Address2,CityId:e.Cityid,Pincode:e.Pincode,Phone1:e.Phone1,Phone2:e.Phone2,Fax:e.Fax,Email:e.Email,DmsLedgerCode:e.DmsLedgerCode,DealerCategory:e.DealerCategory,IsClosed:e.IsClosed,ContactPerson:e.ContactPerson,SalesPersonName:"",CstNo:"",CstDate:"",LstNo:"",LstDate:"",TinNo:"",TinDate:"",PAN:e.Panno,GSTNo:e.Gstno,BillAddress:e.Billaddress,LedgerType:e.LedgerType,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("customerMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"customerMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.customerMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"customerMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.customerMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more customerMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncCustomerMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/LedgerMaster/List/2/",p.a.post("/api/LedgerMaster/List/2/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(console.log(t,"third response"),!((a=t.data.Result.map((function(e){return{Id:e.Id,new:0,update:0,PartyCode:e.LedgerCode,PartyName:e.LedgerName,CompanyCode:"",GroupId:"",Address:e.Address,Address2:"",CityId:"",Pincoce:e.Pincode,Phone1:e.Phone1,Phone2:e.Phone2,Fax:"",Email:e.Email,ContactPerson:"",SalesPersonName:"",CstNo:"",CstDate:"",LstNo:"",LstDate:"",TinNo:"",TinDate:"",PAN:"",GSTNo:"",BillAddress:"",LedgerType:e.LedgerType,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("vendorMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"vendorMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.customerMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"vendorMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.customerMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more vendorMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncVendorMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/HsnMaster/List/",p.a.post("/api/HsnMaster/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=26;break}return console.log(t,"fourth response"),a=t.data.Result&&t.data.Result.map((function(e){return e.alteredon})),r=Ce(a),e.next=9,v.mastertables.where("tablename").equals("hsnMaster").first().then().catch((function(e){return console.log(e)}));case 9:if(c=e.sent,s=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!c){e.next=20;break}return o=parseInt(c.pageindexno)+1,e.next=15,v.mastertables.put({id:c.id,tablename:"hsnMaster",recordcount:c.recordcount,alteredon:r,pageindexno:o,hitcount:c.hitcount});case 15:if(!(c.pageindexno<c.hitcount)){e.next=18;break}return e.next=18,v.hsnMaster.bulkAdd(t.data.Result);case 18:e.next=24;break;case 20:return e.next=22,v.mastertables.add({tablename:"hsnMaster",recordcount:t.data.recordcount,alteredon:r,pageindexno:1,hitcount:s<1?0:Math.ceil(s)});case 22:return e.next=24,v.hsnMaster.bulkAdd(t.data.Result);case 24:e.next=26;break;case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncHsnMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/ItemGroup/List/",p.a.post("/api/ItemGroup/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=26;break}return console.log(t,"fifth response"),a=t.data.Result&&t.data.Result.map((function(e){return e.alteredon})),r=Ce(a),e.next=9,v.mastertables.where("tablename").equals("itemGroup").first().then().catch((function(e){return console.log(e)}));case 9:if(c=e.sent,s=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!c){e.next=20;break}return o=parseInt(c.pageindexno)+1,e.next=15,v.mastertables.put({id:c.id,tablename:"itemGroup",recordcount:c.recordcount,alteredon:r,pageindexno:o,hitcount:c.hitcount});case 15:if(!(c.pageindexno<c.hitcount)){e.next=18;break}return e.next=18,v.itemGroup.bulkAdd(t.data.Result);case 18:e.next=24;break;case 20:return e.next=22,v.mastertables.add({tablename:"itemGroup",recordcount:t.data.recordcount,alteredon:r,pageindexno:1,hitcount:s<1?0:Math.ceil(s)});case 22:return e.next=24,v.itemGroup.bulkAdd(t.data.Result);case 24:e.next=26;break;case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncItemGroup")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/UnitMaster/List/",p.a.post("/api/UnitMaster/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"sixth response"),e.next=3,De();case 3:if(n=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=26;break}return a=t.data&&t.data.Result&&t.data.Result.map((function(e){return e.alteredon})),r=Ce(a),e.next=9,v.mastertables.where("tablename").equals("unitMaster").first().then().catch((function(e){return console.log(e)}));case 9:if(c=e.sent,s=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!c){e.next=20;break}return o=parseInt(c.pageindexno)+1,e.next=15,v.mastertables.put({id:c.id,tablename:"unitMaster",recordcount:c.recordcount,alteredon:r,pageindexno:o,hitcount:c.hitcount});case 15:if(!(c.pageindexno<c.hitcount)){e.next=18;break}return e.next=18,v.unitMaster.bulkAdd(t.data.Result);case 18:e.next=24;break;case 20:return e.next=22,v.mastertables.add({tablename:"unitMaster",recordcount:t.data.recordcount,alteredon:r,pageindexno:1,hitcount:s<1?0:Math.ceil(s)});case 22:return e.next=24,v.unitMaster.bulkAdd(t.data.Result);case 24:e.next=27;break;case 26:console.log("no more unitMaster data");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncUnitMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/CityMaster/List/",p.a.post("/api/CityMaster/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=26;break}return console.log(t,"seventh response"),a=t.data&&t.data.Result&&t.data.Result.map((function(e){return e.alteredon})),r=Ce(a),e.next=9,v.mastertables.where("tablename").equals("cityMaster").first().then().catch((function(e){return console.log(e)}));case 9:if(c=e.sent,s=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!c){e.next=20;break}return o=parseInt(c.pageindexno)+1,e.next=15,v.mastertables.put({id:c.id,tablename:"cityMaster",recordcount:c.recordcount,alteredon:r,pageindexno:o,hitcount:c.hitcount});case 15:if(!(c.pageindexno<c.hitcount)){e.next=18;break}return e.next=18,v.cityMaster.bulkAdd(t.data.Result);case 18:e.next=24;break;case 20:return e.next=22,v.mastertables.add({tablename:"cityMaster",recordcount:t.data.recordcount,alteredon:r,pageindexno:1,hitcount:s<1?0:Math.ceil(s)});case 22:return e.next=24,v.cityMaster.bulkAdd(t.data.Result);case 24:e.next=27;break;case 26:console.log("no more cityMaster data");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncCityMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/GetGIT/0",a=[],p.a.post("/api/GetGIT/0",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=28;break}if(console.log(t,"eight response"),!((a=t.data.Result.map((function(e){return{Id:e.gitid,gitid:e.gitid,partyid_ho:e.partyid_ho,partyid_pos:e.partyid_pos,partyname:e.partyname,invoiceno_ho:e.invoiceno_ho,invoicedate_ho:e.invoicedate_ho,invoiceid_ho:e.invoiceid_ho,grandtotal:e.grandtotal,git_no:e.git_no,git_date:e.git_date,alterid:e.alterid,editlog:e.editlog,authorizedby:e.authorizedby,authorizedon:e.authorizedon,headauthorizedby:e.headauthorizedby,headauthorizedon:e.headauthorizedon,cancelledby:e.cancelledby,tally_log:e.tally_log,tallyreferenceno:e.tallyreferenceno,tallysyncdate:e.tallysyncdate,remarks:e.remarks,createdby:e.createdby,createdon:e.createdon,reference_no:e.reference_no,reference_date:e.reference_date,isautoentry:e.isautoentry,invoiceno_erp:e.invoiceno_erp,invoicedate_erp:e.invoicedate_erp,gitdetail:e.gitdetail,alteredon:"1970-01-01 00:00:01"}})))&&a.length>0)){e.next=27;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("GITMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"GITMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:return e.next=19,v.GITMaster.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"GITMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.GITMaster.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more syncGITMaster data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(r){console.log(r,"syncGITMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/StateMaster/List/",p.a.post("/api/StateMaster/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"nine response"),e.next=3,De();case 3:if(n=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=26;break}return a=t.data&&t.data.Result&&t.data.Result.map((function(e){return e.alteredon})),r=Ce(a),e.next=9,v.mastertables.where("tablename").equals("stateMaster").first().then().catch((function(e){return console.log(e)}));case 9:if(c=e.sent,s=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!c){e.next=20;break}return o=parseInt(c.pageindexno)+1,e.next=15,v.mastertables.put({id:c.id,tablename:"stateMaster",recordcount:c.recordcount,alteredon:r,pageindexno:o,hitcount:c.hitcount});case 15:if(!(c.pageindexno<c.hitcount)){e.next=18;break}return e.next=18,v.stateMaster.bulkAdd(t.data.Result);case 18:e.next=24;break;case 20:return e.next=22,v.mastertables.add({tablename:"stateMaster",recordcount:t.data.recordcount,alteredon:r,pageindexno:1,hitcount:s<1?0:Math.ceil(s)});case 22:return e.next=24,v.stateMaster.bulkAdd(t.data.Result);case 24:e.next=27;break;case 26:console.log("no more stateMaster data");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncStateMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/PriceListDiscount/List/",p.a.post("/api/PriceListDiscount/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,d;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"ten response"),e.next=3,De();case 3:if(n=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=37;break}return a=[],r=[],c=[],s=t.data&&t.data.Result&&t.data.Result.map((function(e){var t={Id:e.Id,SlabCode:e.SlabCode,SlabName:e.SlabName,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,CreatedOn:e.CreatedOn,EditLog:e.EditLog,BranchId:e.BranchId,SeriesId:e.SeriesId,SeriesNo:e.SeriesNo,SeriesCode:e.SeriesCode,Remark:e.Remark,alteredon:e.alteredon};return a.push(t),e.PriceListItem.map((function(e){var t={SlabItemId:e.SlabItemId,SlabId:e.SlabId,ItemId:e.ItemId,ItemName:e.ItemName,ItemCode:e.ItemCode,ApplicableFrom:e.ApplicableFrom,ApplicableTo:e.ApplicableTo,InActive:e.InActive,Remarks:e.Remarks,InactiveDate:e.InactiveDate};return r.push(t),e.PriceListItemDetail.map((function(e){var t={DetailId:e.DetailId,SlabItemId:e.SlabItemId,SlabId:e.SlabId,ItemId:e.ItemId,ItemName:e.ItemName,QtyFrom:e.QtyFrom,QtyTo:e.QtyTo,LotNo:e.LotNo,MRP:e.MRP,Rate:e.Rate,DiscountAmount:e.DiscountAmount,FinalRate:e.FinalRate,LotSerialId:e.LotSerialId};return c.push(t),e})),e})),e.alteredon})),o=Ce(s),e.next=12,v.mastertables.where("tablename").equals("priceMaster").first().then().catch((function(e){return console.log(e)}));case 12:if(u=e.sent,l=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!u){e.next=27;break}return d=parseInt(u.pageindexno)+1,e.next=18,v.mastertables.put({id:u.id,tablename:"priceMaster",recordcount:u.recordcount,alteredon:o,pageindexno:d,hitcount:u.hitcount});case 18:if(!(u.pageindexno<u.hitcount)){e.next=25;break}return e.next=21,v.priceSlabMaster.bulkAdd(a);case 21:return e.next=23,v.priceListItem.bulkAdd(r);case 23:return e.next=25,v.priceListItemDetail.bulkAdd(c);case 25:e.next=35;break;case 27:return e.next=29,v.mastertables.add({tablename:"priceMaster",recordcount:t.data.recordcount,alteredon:o,pageindexno:1,hitcount:l<1?0:Math.ceil(l)});case 29:return e.next=31,v.priceSlabMaster.bulkAdd(a);case 31:return e.next=33,v.priceListItem.bulkAdd(r);case 33:return e.next=35,v.priceListItemDetail.bulkAdd(c);case 35:e.next=38;break;case 37:console.log("no more priceMaster data");case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncPriceMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t={headers:{token:localStorage.getItem("token")}},"/api/GetItemStock/0",n=[],p.a.get("/api/GetItemStock/0",t).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"ten response"),e.next=3,De();case 3:if(a=e.sent,!(t.data&&t.data.Result&&t.data.Result.length>0)){e.next=29;break}if(!((n=t.data.Result.map((function(e){return{SerialId:1,TransactionId:1,TransactionType:"IN",TransactionDate:"23-Jan-2021",TransactionNo:1,ItemId:e.itemid,QtyIn:e.inqty,QtyOut:e.qtyout,LotNo:e.lotno,BatchNo:e.batchno,MfgDate:e.mfgdate,ExpDate:e.expdate,Balance:e.balance,Mrp:e.mrp,IsAltRate:1,AltQtyOut:0,AltQtyIn:0,alteredon:e.alteredon}})))&&n.length>0)){e.next=28;break}return r=n&&n.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("stockLotMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(a)?0:t.data.recordcount/parseInt(a),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"stockLotMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.stockLotMaster.bulkAdd(n);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"stockLotMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.stockLotMaster.bulkAdd(n);case 26:e.next=29;break;case 28:console.log("no more stockLotMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"syncStockLotMaster")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/EmployeeMaster/List/",p.a.post("/api/EmployeeMaster/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"eleven response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,EmployeeCode:e.EmployeeCode,EmployeeName:e.EmployeeName,Dob:e.Dob,Doj:e.Doj,Department:e.Department,DepartmentName:e.DepartmentName,Gender:e.Gender,MaritalStatus:e.MaritalStatus,PresentAddress:e.PresentAddress,ReportingTo:e.ReportingTo,PresentContactNo:e.PresentContactNo,PresentPincode:e.PresentPincode,Email:e.Email,PanNo:e.PanNo,IdCardNo:e.IdCardNo,PermanentAddress:e.PermanentAddress,PermanentPincode:e.PermanentPincode,IsActive:e.IsActive,EditLog:e.EditLog,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,CreatedOn:e.CreatedOn,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("employeemaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"employeemaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.employeeMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"employeemaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.employeeMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more employeemaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"employeemaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/DesignationMaster/list",p.a.post("/api/DesignationMaster/list",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twelve response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,DesignationCode:e.DesignationCode,DesignationName:e.DesignationName,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("DesignationMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"DesignationMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.designationMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"DesignationMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.designationMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more DesignationMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"DesignationMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/SalePerson/List/",p.a.post("/api/SalePerson/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"thirteen response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,TargetDetail:e.TargetDetail,SalePersonCode:e.SalePersonCode,SalePersonName:e.SalePersonName,Commission:e.Commission,CommissionValue:e.CommissionValue,Target:e.Target,VendorId:e.VendorId,DesginationId:e.DesginationId,ParentId:e.ParentId,EmailId:e.EmailId,ContactNo:e.ContactNo,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,EditLog:e.EditLog,CreatedOn:e.CreatedOn,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("SalesPersonMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"SalesPersonMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.salesPersonMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"SalesPersonMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.salesPersonMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more employeemaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"salesPersonMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/reasonmaster/List",p.a.post("/api/reasonmaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"fourteen response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,ReasonName:e.ReasonName,CounterId:e.CounterId,ReasonTypeId:e.ReasonTypeId,ReasonTypeName:e.ReasonTypeName,EditLog:e.EditLog,CreatedBy:e.CreatedBy,CreatedOn:e.CreatedOn,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("ReasonMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"ReasonMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.reasonMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"ReasonMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.reasonMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more employeemaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"salesPersonMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/reasontypemaster/List",p.a.post("/api/reasontypemaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"sixteen response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,ReasonTypeName:e.ReasonTypeName,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("ReasonTypeMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"ReasonTypeMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.reasonTypeMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"ReasonTypeMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.reasonTypeMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more employeemaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"salesPersonMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/currencymaster/List",p.a.post("/api/currencymaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"seventeen response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,ExchangeRate:e.ExchangeRate,CurrencySymbol:e.CurrencySymbol,FormalName:e.FormalName,DigitAfterDecimal:e.DigitAfterDecimal,SymbolForDecimalPortion:e.SymbolForDecimalPortion,DecimalSymbol:e.DecimalSymbol,GroupingSymbol:e.GroupingSymbol,CounterId:e.CounterId,EditLog:e.EditLog,CreatedBy:e.CreatedBy,CreatedOn:e.CreatedOn,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("CurrencyMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"CurrencyMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.currencyMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"CurrencyMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.currencyMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more employeemaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"salesPersonMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/CounterMaster/List/",p.a.post("/api/CounterMaster/List/",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twenty response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,CounterName:e.CounterName,CounterCode:e.CounterCode,Remarks:e.Remarks,MachineId:e.MachineId,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,EditLog:e.EditLog,CreatedOn:e.CreatedOn,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("CounterMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"CounterMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.counterMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"CounterMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.counterMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more counterMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"salesPersonMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/seriesmaster/List",p.a.post("/api/seriesmaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twenty one response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=35;break}if(a=t.data.Result.map((function(e){return{Id:e.Id,SeriesName:e.SeriesName,RestartSeries:e.RestartSeries,DigitPadding:e.DigitPadding,BranchId:e.BranchId,IsActive:e.IsActive,InactiveDate:e.InactiveDate,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,CreatedOn:e.CreatedOn,EditLog:e.EditLog,alteredon:e.alteredon}})),r=[],t.data.Result.map((function(e){return r=[].concat(Object(R.a)(r),Object(R.a)(e.SeriesFieldDetail)),e})),!(a&&a.length>0)){e.next=34;break}return c=a.map((function(e){return e.alteredon})),s=Ce(c),e.next=13,v.mastertables.where("tablename").equals("seriesmaster").first().then().catch((function(e){return console.log(e)}));case 13:if(o=e.sent,u=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!o){e.next=26;break}return l=parseInt(o.pageindexno)+1,e.next=19,v.mastertables.put({id:o.id,tablename:"seriesmaster",recordcount:o.recordcount,alteredon:s,pageindexno:l,hitcount:o.hitcount});case 19:if(!(o.pageindexno<o.hitcount)){e.next=24;break}return e.next=22,v.seriesMaster.bulkAdd(a);case 22:return e.next=24,v.seriesMasterDetail.bulkAdd(r);case 24:e.next=32;break;case 26:return e.next=28,v.mastertables.add({tablename:"seriesmaster",recordcount:t.data.recordcount,alteredon:s,pageindexno:1,hitcount:u<1?0:Math.ceil(u)});case 28:return e.next=30,v.seriesMaster.bulkAdd(a);case 30:return e.next=32,v.seriesMasterDetail.bulkAdd(r);case 32:e.next=35;break;case 34:console.log("no more seriesmaster data");case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"seriesmaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/SeriesFieldMaster/List",p.a.post("/api/SeriesFieldMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twenty two response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{FieldId:e.FieldId,FieldName:e.FieldName,FieldValue:e.FieldValue,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("SeriesFieldMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"SeriesFieldMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.seriesfieldMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"seriesmaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.seriesfieldMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more seriesmaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"seriesmaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/SeriesApply/List",p.a.post("/api/SeriesApply/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twenty five response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,SeriesId:e.SeriesId,VoucherId:e.VoucherId,VoucherName:e.VoucherName,ItemId:e.ItemId,ApplicableFrom:e.ApplicableFrom,BranchId:e.BranchId,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,CreatedOn:e.CreatedOn,EditLog:e.EditLog,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("SeriesApply").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"SeriesApply",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.seriesApply.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"SeriesApply",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.seriesApply.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more SeriesApply data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"SeriesApply")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/VoucherFormMaster/List",p.a.post("/api/VoucherFormMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twenty six response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,formid:e.formid,formname:e.formname,caption:e.caption,formtype:e.formtype,mnunew:e.mnunew,mnuedit:e.mnuedit,mnuauthorize:e.mnuauthorize,mnuview:e.mnuview,mnuprint:e.mnuprint,mnuamendment:e.mnuamendment,mnusendtotally:e.mnusendtotally,mnuexporttoexcel:e.mnuexporttoexcel,extravalue:e.extravalue,formval:e.formval,isauthorizationreq:e.isauthorizationreq,mnuclosepending:e.mnuclosepending,visible:e.visible,mnucanceltransaction:e.mnucanceltransaction,formgroupid:e.formgroupid,allowbackdateentry:e.allowbackdateentry,isheadauthorizationreq:e.isheadauthorizationreq,mnuattachment:e.mnuattachment,mnuviewattachment:e.mnuviewattachment,bamount_auth_enable:e.bamount_auth_enable,formpath:e.formpath,backdateenddate:e.backdateenddate,saveandprint:e.saveandprint,saveandauthorize:e.saveandauthorize,roundoffitemlevelamt:e.roundoffitemlevelamt,mnucreatestructure:e.mnucreatestructure,mnuimport:e.mnuimport,tb_name:e.tb_name,is_from_dll:e.is_from_dll,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("VoucherFormMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"VoucherFormMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.VoucherFormMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"VoucherFormMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.VoucherFormMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more VoucherFormMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"VoucherFormMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/voucher/List",p.a.post("/api/voucher/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(console.log(t,"twenty seven response"),!((a=t.data.Result.map((function(e){return{Id:e.Id,VoucherName:e.VoucherName,ApplyOnFormId:e.ApplyOnFormId,IsDefault:e.IsDefault,ShortName:e.ShortName,IsActive:e.IsActive,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,EditLog:e.EditLog,CreatedOn:e.CreatedOn,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("VoucherList").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"VoucherList",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.VoucherList.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"VoucherList",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.VoucherList.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more VoucherList data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"VoucherList")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/SalesOrder/List",p.a.post("/api/SalesOrder/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twenty eight response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,SoNo:e.SoNo,SoDate:e.SoDate,PartyId:e.PartyId,PartyName:e.PartyName,GrandTotal:e.GrandTotal,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,CreatedOn:e.CreatedOn,EditLog:e.EditLog,Remarks:e.Remarks,alteredon:e.alteredon,SoDetail:e.SoDetail}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("SaleOrder").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"SaleOrder",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.SaleOrder.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"SaleOrder",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.SaleOrder.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more SaleOrder data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"SaleOrder")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/FormMaster/List",p.a.post("/api/FormMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"twenty nine response"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,formid:e.formid,formname:e.formname,caption:e.caption,formtype:e.formtype,mnunew:e.mnunew,mnuedit:e.mnuedit,mnuauthorize:e.mnuauthorize,mnuview:e.mnuview,mnuprint:e.mnuprint,mnuamendment:e.mnuamendment,mnusendtotally:e.mnusendtotally,mnuexporttoexcel:e.mnuexporttoexcel,extravalue:e.extravalue,formval:e.formval,isauthorizationreq:e.isauthorizationreq,mnuclosepending:e.mnuclosepending,visible:e.visible,mnucanceltransaction:e.mnucanceltransaction,formgroupid:e.formgroupid,allowbackdateentry:e.allowbackdateentry,isheadauthorizationreq:e.isheadauthorizationreq,mnuattachment:e.mnuattachment,mnuviewattachment:e.mnuviewattachment,bamount_auth_enable:e.bamount_auth_enable,formpath:e.formpath,backdateenddate:e.backdateenddate,saveandprint:e.saveandprint,saveandauthorize:e.saveandauthorize,roundoffitemlevelamt:e.roundoffitemlevelamt,mnucreatestructure:e.mnucreatestructure,mnuimport:e.mnuimport,tb_name:e.tb_name,is_from_dll:e.is_from_dll,alteredon:e.alteredon}})))&&a.length>0)){e.next=28;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("FormMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"FormMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.formMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"FormMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.formMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more FormMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"FormMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/formmenumaster/List",p.a.post("/api/formmenumaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{menuid:e.menuid,menuname:e.menuname,haschild:e.haschild,formid:e.formid,parentid:e.parentid,seqno:e.seqno,alteredon:e.alteredon}})))&&a.length>0)){e.next=27;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("FormMenuMaster").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"FormMenuMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.formmenumaster.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"FormMenuMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.formmenumaster.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more FormMenuMaster data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"FormMenuMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/formgroupmaster/List",p.a.post("/api/formgroupmaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{formgroupid:e.formgroupid,formgroupname:e.formgroupname,alteredon:e.alteredonf}})))&&a.length>0)){e.next=27;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("formgroupmaster").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"formgroupmaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.formgroupmaster.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"formgroupmaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.formgroupmaster.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more formgroupmaster data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"formgroupmaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/RoleMaster/List",p.a.post("/api/RoleMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=34;break}if(a=t.data.Result.map((function(e){return{Id:e.Id,RoleName:e.RoleName,Description:e.Description,CreatedBy:e.CreatedBy,CreatedByName:e.CreatedByName,CreatedOn:e.CreatedOn,IsActive:e.IsActive,EditLog:e.EditLog,alteredon:e.alteredon}})),r=[],t.data.Result.map((function(e){return r=[].concat(Object(R.a)(r),Object(R.a)(e.Detail)),e})),!(a&&a.length>0)){e.next=33;break}return c=a&&a.map((function(e){return e.alteredon})),s=Ce(c),e.next=12,v.mastertables.where("tablename").equals("RoleMaster").first().then().catch((function(e){return console.log(e)}));case 12:if(o=e.sent,u=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!o){e.next=25;break}return l=parseInt(o.pageindexno)+1,e.next=18,v.mastertables.put({id:o.id,tablename:"RoleMaster",recordcount:o.recordcount,alteredon:s,pageindexno:l,hitcount:o.hitcount});case 18:if(!(o.pageindexno<o.hitcount)){e.next=23;break}return e.next=21,v.RoleMaster.bulkAdd(a);case 21:return e.next=23,v.RoleDetailMaster.bulkAdd(r);case 23:e.next=31;break;case 25:return e.next=27,v.mastertables.add({tablename:"RoleMaster",recordcount:t.data.recordcount,alteredon:s,pageindexno:1,hitcount:u<1?0:Math.ceil(u)});case 27:return e.next=29,v.RoleMaster.bulkAdd(a);case 29:return e.next=31,v.RoleDetailMaster.bulkAdd(r);case 31:e.next=34;break;case 33:console.log("no more RoleMaster data");case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"RoleMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/usermaster/List",p.a.post("/api/usermaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{Id:e.Id,UserName:e.UserName,Password:e.Password,EmployeeId:e.EmployeeId,EmployeeName:e.EmployeeName,Description:e.Description,IsActive:e.IsActive,IsAuthorized:e.IsAuthorized,AuthorizedBy:e.AuthorizedBy,CreateddBy:e.CreateddBy,Email:e.Email,EditLog:e.EditLog,CreatedOn:e.CreatedOn,AuthorizedOn:e.AuthorizedOn,alteredon:e.alteredon,Branch:e.Branch}})))&&a.length>0)){e.next=27;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("usermaster").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"usermaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.userMaster.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"usermaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.userMaster.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more usermaster data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"usermaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/ItemTaxStructure/List",p.a.post("/api/ItemTaxStructure/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{detailid:e.detailid,taxstructurecode:e.taxstructurecode,taxstructurename:e.taxstructurename,itemid:e.itemid,itemcode:e.itemcode,ledgerid:e.ledgerid,ledgercode:e.ledgercode,effectivefrom:e.effectivefrom,isvatitem:e.isvatitem,taxper:e.taxper,addtaxper:e.addtaxper,surcharge:e.surcharge,istaxinclusive:e.istaxinclusive,itemid_ho:e.itemid_ho,isexempted:e.isexempted,istaxcalculatebeforediscount:e.istaxcalculatebeforediscount,ho_itemtaxmasterid:e.ho_itemtaxmasterid,itemtaxmasterid:e.itemtaxmasterid,alteredon:e.alteredon}})))&&a.length>0)){e.next=27;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("ItemTaxStructure").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"ItemTaxStructure",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.itemTaxStructure.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"ItemTaxStructure",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.itemTaxStructure.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more itemTaxStructure data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"itemTaxStructure")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/GetItemStock/0",p.a.post("/api/GetItemStock/0",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{itemid:e.itemid,lotno:e.lotno,batchno:e.batchno,mfgdate:e.mfgdate,expdate:e.expdate,mrp:e.mrp,inqty:e.inqty,qtyout:e.qtyout,balance:e.balance,storeid:e.storeid}})))&&a.length>0)){e.next=27;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("getItemStock").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"getItemStock",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.getItemStock.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"getItemStock",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.getItemStock.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more getItemStock data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"getItemStock")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/DealerCategory/List",p.a.post("/api/DealerCategory/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{dealercategoryid:e.dealercategoryid,dealercategorycode:e.dealercategorycode,isactive:e.isactive,alteredon:e.alteredon}})))&&a.length>0)){e.next=27;break}return r=a&&a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("DealerCategory").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"DealerCategory",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.dealerCategory.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"DealerCategory",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.dealerCategory.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more DealerCategory data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"DealerCategory")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/ItemSalePrice/List",p.a.post("/api/ItemSalePrice/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{item_standard_id:e.item_standard_id,itemid:e.itemid,rdpprice:e.rdpprice,effective_from:e.effective_from,alteredon:e.alteredon}})))&&a.length>0)){e.next=27;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("itemSalePrice").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"itemSalePrice",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.itemSalePrice.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"itemSalePrice",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.itemSalePrice.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more itemSalePrice data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"itemSalePrice")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/BillingType/List",p.a.post("/api/BillingType/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{settingid:e.settingid,settingname:e.settingname,settingvalueid:e.settingvalueid,valuename:e.valuename,isactive:e.isactive,alteredon:e.alteredon}})))&&a.length>0)){e.next=27;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("billingtype").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"billingtype",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.billingType.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"billingtype",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.billingType.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more billingtype data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"billingtype")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/Influencer/List",p.a.post("/api/Influencer/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{influencerid:e.influencerid,influencerdmscode:e.influencerdmscode,influencercode:e.influencercode,influencername:e.influencername,statename:e.statename,alteredon:e.alteredon}})))&&a.length>0)){e.next=27;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("Influencer").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"Influencer",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.Influencer.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"Influencer",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.Influencer.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more Influencer data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"Influencer")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/GodownMaster/List",p.a.post("/api/GodownMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=28;break}if(!((a=t.data.Result.map((function(e){return{storeid:e.storeid,Storename:e.Storename,Storecode:e.Storecode,Branchid:e.Branchid,isdefault:e.isdefault,inactive:e.inactive,Storetype:e.Storetype,Description:e.Description,isauthorized:e.isauthorized,authorizedby:e.authorizedby,authorizedon:e.authorizedon,CreatedBy:e.CreatedBy,EditLog:e.EditLog,headauthorizedon:e.headauthorizedon,headauthorizedby:e.headauthorizedby,inactivedate:e.inactivedate,createdon:e.createdon,updatedby:e.updatedby,updatedon:e.updatedon}})))&&a.length>0)){e.next=27;break}return r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=10,v.mastertables.where("tablename").equals("GodownMaster").first().then().catch((function(e){return console.log(e)}));case 10:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=21;break}return u=parseInt(s.pageindexno)+1,e.next=16,v.mastertables.put({id:s.id,tablename:"GodownMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 16:if(!(s.pageindexno<s.hitcount)){e.next=19;break}return e.next=19,v.GodownMaster.bulkAdd(a);case 19:e.next=25;break;case 21:return e.next=23,v.mastertables.add({tablename:"GodownMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 23:return e.next=25,v.GodownMaster.bulkAdd(a);case 25:e.next=28;break;case 27:console.log("no more GodownMaster data");case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"GodownMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/BatchMaster/List",p.a.post("/api/BatchMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"res of BatchMaster api "),e.next=3,De();case 3:if(n=e.sent,console.log(n,"glbCount in BatchMaster api"),!t.data||!t.data.Result){e.next=36;break}if(a=t.data.Result.map((function(e){return{batchid:e.batchid,batchno:e.batchno,batchdate:e.batchdate,lotno:e.lotno,branchid:e.branchid,itemid:e.itemid,manufacturingdate:e.manufacturingdate,expirydate:e.expirydate,seriesid:e.seriesid,seriesno:e.seriesno,seriescode:e.seriescode,editlog:e.editlog,iscancelled:e.iscancelled,createdon:e.createdon,alteredon:e.alteredon}})),r=[],t.data.Result.map((function(e){return r=[].concat(Object(R.a)(r),Object(R.a)(e.BatchDetail)),e})),!(a&&a.length>0)){e.next=35;break}return c=a.map((function(e){return e.alteredon})),s=Ce(c),e.next=14,v.mastertables.where("tablename").equals("BatchMaster").first().then().catch((function(e){return console.log(e)}));case 14:if(o=e.sent,u=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!o){e.next=27;break}return l=parseInt(o.pageindexno)+1,e.next=20,v.mastertables.put({id:o.id,tablename:"BatchMaster",recordcount:o.recordcount,alteredon:s,pageindexno:l,hitcount:o.hitcount});case 20:if(!(o.pageindexno<o.hitcount)){e.next=25;break}return e.next=23,v.BatchMaster.bulkAdd(a);case 23:return e.next=25,v.BatchDetail.bulkAdd(r);case 25:e.next=33;break;case 27:return e.next=29,v.mastertables.add({tablename:"BatchMaster",recordcount:t.data.recordcount,alteredon:s,pageindexno:1,hitcount:u<1?0:Math.ceil(u)});case 29:return e.next=31,v.BatchMaster.bulkAdd(a);case 31:return e.next=33,v.BatchDetail.bulkAdd(r);case 33:e.next=36;break;case 35:console.log("no more BatchMaster data");case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"BatchMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/SerialMaster/List",p.a.post("/api/SerialMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"res of Serial Master API"),e.next=3,De();case 3:if(n=e.sent,!t.data||!t.data.Result){e.next=35;break}if(a=t.data.Result.map((function(e){return{serialid:e.serialid,serialno:e.serialno,uniqueserialno:e.uniqueserialno,manualbatchno:e.manualbatchno,itemid:e.itemid,branchid:e.branchid,warrentydate:e.warrentydate,expirydate:e.expirydate,serialcreatedfrom:e.serialcreatedfrom,seriesid:e.seriesid,seriesno:e.seriesno,seriescode:e.seriescode,editlog:e.editlog,iscancelled:e.iscancelled,isstock:e.isstock,createdon:e.createdon,alteredon:e.alteredon}})),r=[],t.data.Result.map((function(e){return r=[].concat(Object(R.a)(r),Object(R.a)(e.SerialDetail)),e})),!(a&&a.length>0)){e.next=34;break}return c=a.map((function(e){return e.alteredon})),s=Ce(c),e.next=13,v.mastertables.where("tablename").equals("SerialMaster").first().then().catch((function(e){return console.log(e)}));case 13:if(o=e.sent,u=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!o){e.next=26;break}return l=parseInt(o.pageindexno)+1,e.next=19,v.mastertables.put({id:o.id,tablename:"SerialMaster",recordcount:o.recordcount,alteredon:s,pageindexno:l,hitcount:o.hitcount});case 19:if(!(o.pageindexno<o.hitcount)){e.next=24;break}return e.next=22,v.SerialMaster.bulkAdd(a);case 22:return e.next=24,v.SerialDetail.bulkAdd(r);case 24:e.next=32;break;case 26:return e.next=28,v.mastertables.add({tablename:"SerialMaster",recordcount:t.data.recordcount,alteredon:s,pageindexno:1,hitcount:u<1?0:Math.ceil(u)});case 28:return e.next=30,v.SerialMaster.bulkAdd(a);case 30:return e.next=32,v.SerialDetail.bulkAdd(r);case 32:e.next=35;break;case 34:console.log("no more BatchMaster data");case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"BatchMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/ProfileMaster/List",p.a.post("/api/ProfileMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:if(n=e.sent,!t.data||!t.data.Result){e.next=29;break}if(!((a=t.data.Result.map((function(e){return{principalCode:e.Code,headOfficeCode:e.HeadofficeCode,locationCode:e.LocationCode,syncMode:e.Syncmode,headOfficeName:e.HeadofficeName,isActive:e.isactive,address:e.Address,pinCode:e.Pincode,email:e.Email,contact1:e.ContactNo,contact2:e.PhoneNo,allowItemCreation:e.allowItemCreation,allowItemAlternation:e.allowItemAlternation,allowLedgerCreation:e.allowLedgerCreation,allowLedgerAlternation:e.allowLedgerAlternation}})))&&a.length>0)){e.next=28;break}return console.log("data",a),r=a.map((function(e){return e.alteredon})),c=Ce(r),e.next=11,v.mastertables.where("tablename").equals("ProfileMaster").first().then().catch((function(e){return console.log(e)}));case 11:if(s=e.sent,o=t.data.recordcount<parseInt(n)?0:t.data.recordcount/parseInt(n),!s){e.next=22;break}return u=parseInt(s.pageindexno)+1,e.next=17,v.mastertables.put({id:s.id,tablename:"ProfileMaster",recordcount:s.recordcount,alteredon:c,pageindexno:u,hitcount:s.hitcount});case 17:if(!(s.pageindexno<s.hitcount)){e.next=20;break}return e.next=20,v.ProfileMaster.bulkAdd(a);case 20:e.next=26;break;case 22:return e.next=24,v.mastertables.add({tablename:"ProfileMaster",recordcount:t.data.recordcount,alteredon:c,pageindexno:1,hitcount:o<1?0:Math.ceil(o)});case 24:return e.next=26,v.ProfileMaster.bulkAdd(a);case 26:e.next=29;break;case 28:console.log("no more GodownMaster data");case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"ProfileMaster")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n={headers:{token:localStorage.getItem("token")}},"/api/CompanyMaster/List",p.a.post("/api/CompanyMaster/List",t,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.globelsetting.where("globsettingid").equals(540).first();case 2:return n=e.sent,console.log("setting",n),e.next=6,De();case 6:if(a=e.sent,console.log("res.data.Result",t),!t.data||!t.data.Result){e.next=34;break}if(!((r=t.data.Result.map((function(e){return{CompanyName:e.companyname,CompanyShortName:e.companyshortname,Address:e.address,City:e.cityid,State:e.stateid,Country:e.countryid,PinCode:e.pincode,Contact1:e.contactnumber1,Contact2:e.contactnumber2,FaxNo:e.faxnumber,Currency:e.currencyid,RegisterDate:e.registrationdate,RegisterNo:e.registrationnumber,WebUrl:e.url,LicenceNo:e.licenceno,companylogo:e.companylogo,Email:e.emailid,TallyIpAndPort:e.tally_ip,TallyCompanyname:e.tally_company}})))&&r.length>0)){e.next=33;break}return e.next=13,v.mastertables.where("tablename").equals("CompanySettings").first().then().catch((function(e){return console.log(e)}));case 13:if(c=e.sent,s=t.data.recordcount<parseInt(a)?0:t.data.recordcount/parseInt(a),console.log("tbl",c),!c){e.next=26;break}return o=parseInt(c.pageindexno)+1,e.next=20,v.mastertables.put({id:c.id,tablename:"CompanySettings",recordcount:c.recordcount,pageindexno:o,hitcount:c.hitcount});case 20:if(!(c.pageindexno<c.hitcount)){e.next=23;break}return e.next=23,v.CompanySettings.bulkAdd(r);case 23:console.log("tbl2",c),e.next=31;break;case 26:return console.log("res.data.recordcount",t.data),e.next=29,v.mastertables.add({tablename:"CompanySettings",recordcount:t.data.recordcount,pageindexno:1,hitcount:s<1?0:Math.ceil(s)});case 29:return e.next=31,v.CompanySettings.bulkAdd(r);case 31:e.next=34;break;case 33:console.log("no more ProfileSettings data");case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a,"CompanySettings")}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e){var t=e[0],n=new Date(e[0]);return e.forEach((function(e,a){new Date(e)>n&&(t=e,n=new Date(e))})),t},De=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.globelsetting.where("globsettingid").equals(540).first();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",t.value);case 7:return e.abrupt("return",2e3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=n(255),Pe=n.n(_e),Re=n(254),Be=n.n(Re),Me=(n(328),function(e,t){switch(t){case"number":return/^[0-9+]+$/.test(e);case"monumber":return/^[0-9+]+$/.test(e);case"character":return/^[a-z-A-Z]+$/.test(e);case"special":return/^[a-z-A-Z-\s]+$/.test(e);case"varChar":return/^[a-z-A-Z-0-9-_]+$/.test(e);case"varCharSpace":return/^[a-z-A-Z-0-9-_ ]+$/.test(e);case"email":return/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(e);default:return!1}}),Te=n(1),Ee=function(e){var t=Object(a.useState)({h:0,m:0,s:0}),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(e.minute),i=Object(o.a)(s,2),u=i[0],l=i[1],d=function(e){c(function(e){var t=e%3600,n=t%60;return{h:Math.floor(e/3600),m:Math.floor(t/60),s:Math.ceil(n)}}(e)),l(e)};return Object(a.useEffect)((function(){var t=setInterval((function(){var n=u-1;if(n>=0)d(n);else{if(0!==u)return function(){return clearInterval(t)};l(-1),e.resbtn()}}),1e3);return function(){return clearInterval(t)}}),[u,e]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("span",{children:[r.m," : ",r.s]})})},Le=function(e){var t={emailId:"",password:"",confirmpassword:"",AllowLogWithPasswordInResendOTPAttempts:"",OTP:"",otpverify:"",OTPButtonEnableTimeInSec:"",OTPGenerateTime:"",OTPValidityInMin:"",message:"",otpmessage:""},n=Object(a.useState)(t),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!1),u=Object(o.a)(i,2),b=u[0],j=u[1],m=Object(a.useState)(!1),O=Object(o.a)(m,2),h=O[0],f=O[1],x=Object(a.useState)(!1),v=Object(o.a)(x,2),g=v[0],I=v[1],y=Object(a.useState)(1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(t),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(!1),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(!1),T=Object(o.a)(M,2),E=T[0],L=T[1],F=function(e){if(""===e.target.value)s(Object(d.a)(Object(d.a)({},c),{},Object(l.a)({},e.target.name,e.target.value))),D(Object(d.a)(Object(d.a)({},C),{},Object(l.a)({},e.target.name,"")));else{var t=e.target.getAttribute("data-valid");if(t)Me(e.target.value,t)?(s(Object(d.a)(Object(d.a)({},c),{},Object(l.a)({},e.target.name,e.target.value))),D(Object(d.a)(Object(d.a)({},C),{},Object(l.a)({},e.target.name,!1)))):(s(Object(d.a)(Object(d.a)({},c),{},Object(l.a)({},e.target.name,e.target.value))),D(Object(d.a)(Object(d.a)({},C),{},Object(l.a)({},e.target.name,!0))));else s(Object(d.a)(Object(d.a)({},c),{},Object(l.a)({},e.target.name,e.target.value))),D(Object(d.a)(Object(d.a)({},C),{},Object(l.a)({},e.target.name,!1)))}},q=function(){if(""===c.emailId||""===c.password||""===c.confirmpassword)""===c.emailId?D(Object(d.a)(Object(d.a)({},C),{},{emailId:!0})):""===c.password?D(Object(d.a)(Object(d.a)({},C),{},{password:!0})):""===c.confirmpassword&&D(Object(d.a)(Object(d.a)({},C),{},{confirmpassword:!0}));else if(c.password!==c.confirmpassword)alert("Password and confirm password did not match");else{e.lodingProc(!0);var t={EmailId:c.emailId,Password:c.confirmpassword,OTPPassword:""};p.a.post("/api/User/ForgetPassword",t).then((function(t){200===t.data.statuscode?(s(Object(d.a)(Object(d.a)({},c),{},{AllowLogWithPasswordInResendOTPAttempts:t.data.Result.AllowLogWithPasswordInResendOTPAttempts,message:t.data.message,OTP:t.data.Result.OTP,OTPButtonEnableTimeInSec:t.data.Result.OTPButtonEnableTimeInSec,OTPGenerateTime:t.data.Result.OTPGenerateTime,OTPValidityInMin:t.data.Result.OTPValidityInMin,minTosec:parseInt(60*t.data.Result.OTPValidityInMin)})),j(!0),B(!0),e.lodingProc(!1)):400===t.data.statuscode?(s(Object(d.a)(Object(d.a)({},c),{},{message:t.data.message})),B(!1),e.lodingProc(!1)):alert("something went wrong")})).catch((function(e){return console.log(e)}))}},G=function(){I(!1),""===c.otpverify?alert("please enter OTP"):c.OTP===c.otpverify?(!function(){var t={EmailId:c.emailId,Password:c.confirmpassword,OTPPassword:c.otpverify};p.a.post("/api/User/ForgetPassword",t).then((function(t){200===t.data.statuscode?(s(Object(d.a)(Object(d.a)({},c),{},{otpmessage:t.data.message})),L(!0),e.lodingProc(!1)):alert("something went wrong please refresh your page and try again after some time")})).catch((function(e){return console.log(e)}))}(),e.lodingProc(!0)):alert("wrong OTP Value")};return Object(Te.jsx)(Te.Fragment,{children:!1===b?Object(Te.jsxs)("div",{className:"loginBox forgotPassDiv",children:[Object(Te.jsx)("div",{className:"loginTitle",children:"Forgot Password"}),Object(Te.jsx)("div",{className:"message_f error",children:c.message}),Object(Te.jsxs)("div",{className:"loginFormBox",children:[Object(Te.jsx)("div",{className:!0===C.emailId?"loginForm error":"loginForm",children:Object(Te.jsx)("input",{"data-valid":"email",name:"emailId",type:"email",onChange:function(e){return F(e)},placeholder:"Enter Email Id"})}),Object(Te.jsx)("div",{className:!0===C.password?"loginForm error":"loginForm",children:Object(Te.jsx)("input",{type:"password",name:"password",onChange:function(e){return F(e)},autoComplete:"new-password",placeholder:"New Password"})}),Object(Te.jsx)("div",{className:!0===C.confirmpassword?"loginForm error":"loginForm",children:Object(Te.jsx)("input",{type:"password",onChange:function(e){return F(e)},onKeyUp:function(e){return function(e){""===c.password?D(Object(d.a)(Object(d.a)({},C),{},{password:!0})):c.password!==c.confirmpassword?D(Object(d.a)(Object(d.a)({},C),{},Object(l.a)({},e.target.name,!0))):D(Object(d.a)(Object(d.a)({},C),{},Object(l.a)({},e.target.name,!1)))}(e)},name:"confirmpassword",placeholder:"Confirm New Password"})}),Object(Te.jsx)("div",{className:!1===R?"loginForm":"loginForm disable",children:Object(Te.jsx)("button",{onClick:function(){return!1===R?q():function(){return!1}},children:"Submit"})}),Object(Te.jsx)("div",{className:"forgotpass",children:Object(Te.jsx)("button",{onClick:function(){return e.forgotstatus(!1)},className:"forgotpassLink",children:"Login"})})]})]}):Object(Te.jsxs)("div",{className:"loginBox forgotPassDiv",children:[Object(Te.jsx)("div",{className:"loginTitle",children:"Verify Otp "}),!1===E?Object(Te.jsxs)("div",{className:"loginFormBox",children:[Object(Te.jsx)("div",{className:"message_f success",children:c.message}),Object(Te.jsx)("div",{className:!0===C.otp?"loginForm error":"loginForm",children:Object(Te.jsx)("input",{type:"text",onChange:function(e){return F(e)},name:"otpverify",placeholder:"Enter OTP"})}),Object(Te.jsx)("div",{className:"loginForm",children:!1===g?Object(Te.jsx)("button",{onClick:function(){return G()},children:"Verify"}):N>2&&!0===g?Object(Te.jsx)("span",{style:{color:"#f00"},children:"You can't resend OTP again please Try again after some time."}):Object(Te.jsx)("span",{style:{color:"#f00"},children:"OTP has been expired please resend OTP"})}),Object(Te.jsx)("div",{className:"forgotpass",children:Object(Te.jsx)("button",{className:3===N||!1===h?"forgotpassLink disable":"forgotpassLink",onClick:3===N||!1===h?function(){return!1}:function(){return k(N+1),void(N<3&&(f(!1),I(!1),q()))},children:"Resend OTP"})}),Object(Te.jsxs)("div",{className:"validtime",children:["OTP Valid For",!1===h?Object(Te.jsx)(Ee,{resbtn:function(){N<3?(I(!0),f(!0)):I(!0)},count:N,minute:60*parseInt(c.OTPValidityInMin)}):Object(Te.jsx)("span",{children:"0:0"})]})]}):Object(Te.jsxs)("div",{className:"loginFormBox",children:[Object(Te.jsx)("div",{className:"message_f success",children:c.otpmessage}),Object(Te.jsx)("div",{className:"loginForm",children:Object(Te.jsx)("button",{onClick:function(){return window.location.reload()},children:"Contniue Login"})})]})]})})},Fe=function(e,t,n){return console.log(e,t,n,"ddddddddddd"),n*(e*t)/100},qe=function(e,t){return t*e/100},Ge=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[a,["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r].join("-")},Ue=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.VoucherList.where("ApplyOnFormId").equals(t).toArray();case 2:if(!((n=e.sent).length>0)){e.next=13;break}if(!((a=n.filter((function(e){return!0===e.IsActive}))).length>0)){e.next=11;break}return e.next=8,Promise.all(a.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.seriesApply.where("VoucherId").equals(t.Id).first();case 2:if(!(n=e.sent)){e.next=14;break}return e.next=6,v.seriesMaster.where("Id").equals(n.SeriesId).first();case 6:if(!(a=e.sent)||"True"!==a.IsActive&&"true"!==a.IsActive&&!0!==a.IsActive){e.next=11;break}return e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{seriesIsActive:!0}));case 11:case 14:return e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{seriesIsActive:!1}));case 12:e.next=15;break;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return r=e.sent,c=r.filter((function(e){return!0===e.seriesIsActive})),e.abrupt("return",c);case 11:e.next=14;break;case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,d,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.seriesApply.where("VoucherId").equals(t.Id).first();case 2:if(!(n=e.sent)){e.next=27;break}if(i=n.ApplicableFrom,!(!(new Date(i)>new Date)&&(console.log("y"),!0))){e.next=23;break}return e.next=8,v.seriesMaster.where("Id").equals(n.SeriesId).first();case 8:return a=e.sent,console.log(a,"sId"),r=a.Id,e.next=13,v.seriesMasterDetail.where("SeriesId").equals(r).toArray();case 13:if(!(c=e.sent)){e.next=21;break}return s=c.sort((function(e,t){return e.Sno-t.Sno})),o=[],u="",s.map((function(e){return"Serial Number"===e.FieldName?u=e.FieldValue:o.push(e.FieldValue+e.Seperator),e})),l={series:o.join(""),sCount:u,digit:a.DigitPadding,voucherId:t.Id,seriesId:r},e.abrupt("return",l);case 21:e.next=25;break;case 23:return d={series:"",sCount:"00000",digit:void 0,voucherId:t.Id,seriesId:""},e.abrupt("return",d);case 25:e.next=29;break;case 27:return b={series:"",sCount:"00000",digit:void 0,voucherId:t.Id,seriesId:""},e.abrupt("return",b);case 29:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s,o,u,l,d,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.seriesCount.where("formid").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 2:for(a=e.sent,r=a&&a.find((function(e){return e.seriesid===(""===t.seriesId?0:t.seriesId)})),c=0,c=r?0===t.dbcount.length?1+r.totalrecord:t.dbcount.length+1+r.totalrecord:0===t.dbcount.length?1:t.dbcount.length+1,s=c+parseInt(""===t.sCount?0:t.sCount),o=s.toString().length,u=parseInt(t.digit)-o,l="",d=0;d<u;d++)l+="0";return b=l+s.toString(),j=t.series+b,e.abrupt("return",j);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ze=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{token:localStorage.getItem("token")}},e.next=4,p.a.post(t,n,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"respost"),n=We(t),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0,"pusherr"),e.abrupt("return",{msg:"Error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),He=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{token:localStorage.getItem("token")}},e.next=4,p.a.put(t,n,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=We(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{msg:"Error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),We=function(e){return e.data.status?201===e.data.statuscode?{mid:e.data.MasterId,msg:e.data.message,statuscode:e.data.statuscode}:200===e.data.statuscode||202===e.data.statuscode?{msg:e.data.message,statuscode:e.data.statuscode}:void 0:710===e.data.statuscode||711===e.data.statuscode?{msg:"Error",statuscode:e.data.statuscode}:{msg:e.data.message,statuscode:e.data.statuscode}},Ke=function(e){var t=(e+"").split(".")[1];if(t>0){for(var n="1",a=0;a<t.toString().length;a++)n+="0";var r=parseInt(n)-t;if(r.toString().length<t.toString().length){for(var c=t.toString().length-r.toString().length,s="",o=0;o<c;o++)s+="0";var i=s+r.toString();return parseFloat("0."+i)}return parseFloat("0."+r)}return parseFloat("0.00")},Je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s,o,u,l,d,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null===n?"itemid":"[itemid+storeid]",r=null===n?t:[t,n],c=null===n?"ItemId":"[ItemId+storeid]",s=null===n?t:[t,n],e.next=6,v.itemStockIndexdb.where(c).equals(s).toArray().then().catch((function(e){return console.log(e)}));case 6:if(!((o=e.sent).length>0)){e.next=22;break}return e.next=10,v.getItemStock.where(a).equals(r).first().then().catch((function(e){return console.log(e)}));case 10:if(u=e.sent,l=0,d=0,o.map((function(e){return l+=e.qtyIn,d+=e.qtyOut,e})),!u){e.next=19;break}return b=u.balance+l-d,e.abrupt("return",parseInt(b));case 19:return e.abrupt("return",parseInt(l-d));case 20:e.next=30;break;case 22:return e.next=24,v.getItemStock.where(a).equals(r).first().then().catch((function(e){return console.log(e)}));case 24:if(!(j=e.sent)){e.next=29;break}return e.abrupt("return",parseInt(j.balance));case 29:return e.abrupt("return",0);case 30:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("Id").equals(t).first().then().catch((function(e){return console.log(e,"customer")}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("Id").equals(t).first().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.unitMaster.where("Id").equals(t).first().then().catch((function(e){return console.log(e)}));case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n.UnitName);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("Id").equals(t).first().then().catch((function(e){return console.log(e)}));case 2:if(!(a=e.sent)){e.next=6;break}return r=a.Denominator!==a.Conversion?n*a.Denominator/a.Conversion:0,e.abrupt("return",r);case 6:return e.abrupt("return",0);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),et=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=6;break}return e.next=3,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.formMaster.where("formid").equals(t.formId).first().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.abrupt("return",{stockDate:new Date,transactionTypeId:t.formId,transactionType:n.caption,transactionId:t.trId,ItemId:t.ItemId,qtyIn:"stockG"===t.type?t.Inqty:"inqty"===t.type?t.qty:0,qtyOut:"stockG"===t.type?t.Outqty:"outqty"===t.type?t.qty:0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return n=e.sent,e.next=6,v.itemStockIndexdb.bulkAdd(n).then().catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0].formId,a=t[0].trId,e.next=4,v.itemStockIndexdb.get({transactionId:a,transactionTypeId:n});case 4:if(!((r=e.sent)&&r.length>0)){e.next=9;break}return c=r.map((function(e){var n=t.find((function(t){return t.ItemId===e.ItemId}));return n?Object(d.a)(Object(d.a)({},e),{},{qtyIn:"stockG"===n.type?n.Inqty:"inqty"===n.type?n.qty:0,qtyOut:"stockG"===n.type?n.Outqty:"outqty"===n.type?n.qty:0}):e})),e.next=9,v.itemStockIndexdb.bulkPut(c).then().catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.globelsetting.where("globsettingid").equals(t).first().then().catch((function(e){return console.log(e)}));case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n.value);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.UserPreferedLanguageDictionary.where("id").equals(1).first().then().catch((function(e){return console.log(e)}));case 2:if(!(n=e.sent)){e.next=13;break}if(a=Object.keys(n),!a.find((function(e){return e===t}))){e.next=10;break}return e.abrupt("return",t);case 10:case 13:return e.abrupt("return",t);case 11:e.next=14;break;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.PurchaseInvoiceDetail.toArray().then().catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",{batchnumber:t.map((function(e){return e.BatchNumber})),serialnumber:t.map((function(e){return e.SerialNumber}))});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,e.next=3,v.PurchaseInvoiceDetail.toArray().then().catch((function(e){return console.log(e)}));case 3:return(a=e.sent).length>0&&a&&a.map((function(e){(""!==e.SerialNumber&&e.SerialNumber.filter((function(e){return e.serial_number===t}))).length>0&&(n=!0)})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.PurchaseInvoiceDetail.where("ItemId").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.abrupt("return",{batchnumber:n.map((function(e){return e.BatchNumber})),serialnumber:n.map((function(e){return e.SerialNumber}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(e){var t=e.content,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],l=Object(a.useCallback)(Object(u.a)(Object(i.a)().mark((function e(){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(t);case 2:n=e.sent,s(n);case 4:case"end":return e.stop()}}),e)}))),[t]);return Object(a.useEffect)((function(){l()}),[l]),Object(Te.jsx)(Te.Fragment,{children:c})},it={username:"",password:"",WebUrl:"pos",remember:!1,HashKey:"",IsForcfullyLogOut:!1},ut=function(e){var t=Object(a.useState)(it),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),O=Object(o.a)(s,2),f=O[0],w=O[1],R=Object(a.useState)(!1),B=Object(o.a)(R,2),M=B[0],T=B[1],E=Object(a.useState)(!1),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)(!1),Ce=Object(o.a)(G,2),De=Ce[0],_e=Ce[1],Re=Object(a.useState)(),Me=Object(o.a)(Re,2),Ee=Me[0],Fe=Me[1],qe=Object(a.useState)(!1),Ge=Object(o.a)(qe,2),Ue=Ge[0],Qe=Ge[1],Ve=Object(a.useState)(!1),ze=Object(o.a)(Ve,2),He=ze[0],We=ze[1],Ke=Object(a.useState)({status:!1,msg:""}),Je=Object(o.a)(Ke,2),Ye=Je[0],Ze=Je[1],Xe=Object(a.useState)(!1),$e=Object(o.a)(Xe,2),et=$e[0],tt=$e[1],nt=function(e){q(!1);var t=e.target,n=t.name,a=t.value;if("remember"===e.target.name)M&&T(!1),c(Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},n,e.target.checked)));else{if(M&&T(!1),a.length>12)return console.log("The field cannot contain more than 5 characters!"),q("".concat(n," length should be only ",12)),setTimeout((function(){q("")}),2e3),!1;var s=e.target,o=s.name,i=s.value;c(Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},o,i)))}},at=sessionStorage.getItem("loginfailed"),rt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(1e8*Math.random()+1),e.next=3,v.loginbrowserId.toArray();case 3:0===(n=e.sent).length?(v.loginbrowserId.add({Id:t}),c(Object(d.a)(Object(d.a)({},r),{},{HashKey:t}))):c(Object(d.a)(Object(d.a)({},r),{},{HashKey:n[0].Id}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=setInterval((function(){var e=!!navigator.onLine;Fe(e)}),2e3);return function(){return clearInterval(e)}}),[Ee]),Object(a.useEffect)((function(){""!==localStorage.getItem("username")&&(rt(),c(JSON.parse(localStorage.getItem("username")))),setTimeout((function(){JSON.parse(at)>4&&(We(!0),_e("You have exceeded your login attempts"))}),500)}),[at,He]);var ct=function(){var t=Object(u.a)(Object(i.a)().mark((function t(n){var a,s;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(tt(!0),a="/api/AuthLogin/SignIn",t.prev=2,""!==r.username||""!==r.password){t.next=8;break}T("Please enter usename and password"),tt(!1),t.next=32;break;case 8:if(""!==r.password){t.next=13;break}T("Please enter your password "),tt(!1),t.next=32;break;case 13:if(""!==r.username){t.next=18;break}T("Please enter your usename "),tt(!1),t.next=32;break;case 18:if(!Ee){t.next=23;break}console.log("internetConnectionStatus",Ee),p.a.post(a,Object(d.a)(Object(d.a)({},r),{},{IsForcfullyLogOut:n})).then(function(){var t=Object(u.a)(Object(i.a)().mark((function t(n){var a,s,o,u,l,b,j,m,O,p,f,x,w,R,B,M,E,L,F,q,G,Ce,De,_e,Pe,Re,Be,Me,Te,Ee,Le,Fe,qe,Ge,Ue,Qe,Ve,ze,He,We,Ke,Je,Ye,Xe,$e,et,nt,at,rt,ct,st,ot,ut,lt,dt,bt,jt,mt;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n,"login respnse response"),400!==n.data.statuscode){t.next=5;break}Ze({status:!0,msg:n.data.message}),t.next=220;break;case 5:if(!n.headers.token){t.next=211;break}return localStorage.setItem("token",n.headers.token),sessionStorage.setItem("token",n.headers.token),localStorage.setItem("fname",r.username),localStorage.setItem("UserId",n.data.UserId),null!==n.data.UserPreferedLanguageDictionary&&(v.UserPreferedLanguageDictionary.toArray().then().catch((function(e){return console.log(e)})).length>0?v.UserPreferedLanguageDictionary.update(1,n.data.UserPreferedLanguageDictionary):v.UserPreferedLanguageDictionary.add(n.data.UserPreferedLanguageDictionary)),t.next=13,v.seriesCount.toArray().then().catch((function(e){return console.log(e)}));case 13:if(!((a=t.sent).length>0)){t.next=27;break}if(!!!(n.data.Result&&n.data.Result.length>a.length)){t.next=22;break}return s=n.data.Result.map((function(e){var t=a.find((function(t){return t.formid===e.formid}));return t?Object(d.a)(Object(d.a)({},t),{},{totalrecord:e.totalrecord}):e})),t.next=20,v.seriesCount.bulkPut(s);case 20:t.next=25;break;case 22:return o=a.map((function(e){var t=n.data.Result.find((function(t){return t.formid===e.formid}));return t?Object(d.a)(Object(d.a)({},e),{},{totalrecord:t.totalrecord}):e})),t.next=25,v.seriesCount.bulkPut(o);case 25:t.next=29;break;case 27:return t.next=29,v.seriesCount.bulkAdd(n.data.Result);case 29:return t.next=31,U();case 31:return!0===r.remember?localStorage.setItem("username",JSON.stringify(r)):localStorage.setItem("username",""),c(it),t.next=35,new h.a("posdb").open().then((function(e){return!0})).catch((function(e){return console.log(e)}));case 35:if(u=t.sent,console.log(u,"dbstatus............dbstatus"),!u){t.next=207;break}return l={alteredon:"1970-01-01 00:00:01",pageindexno:0},t.next=41,Z(l);case 41:return b=t.sent,t.next=44,J(l);case 44:return j=t.sent,t.next=47,V(l);case 47:return m=t.sent,t.next=50,z(l);case 50:return O=t.sent,t.next=53,K(l);case 53:return p=t.sent,t.next=56,W(l);case 56:return f=t.sent,t.next=59,H(l);case 59:return x=t.sent,t.next=62,Q(l);case 62:return w=t.sent,t.next=65,g();case 65:return R=t.sent,t.next=68,X(l);case 68:return B=t.sent,t.next=71,$();case 71:return M=t.sent,t.next=74,Y(l);case 74:return E=t.sent,t.next=77,ee(l);case 77:return L=t.sent,t.next=80,te(l);case 80:return F=t.sent,t.next=83,ne(l);case 83:return q=t.sent,t.next=86,ae(l);case 86:return G=t.sent,t.next=89,re(l);case 89:return Ce=t.sent,t.next=92,ce(l);case 92:return De=t.sent,t.next=95,se(l);case 95:return _e=t.sent,t.next=98,oe(l);case 98:return Pe=t.sent,t.next=101,ie(l);case 101:return Re=t.sent,t.next=104,ue(l);case 104:return Be=t.sent,t.next=107,be(l);case 107:return Me=t.sent,t.next=110,je(l);case 110:return Te=t.sent,t.next=113,me(l);case 113:return Ee=t.sent,t.next=116,Oe(l);case 116:return Le=t.sent,t.next=119,pe(l);case 119:return Fe=t.sent,t.next=122,he(l);case 122:return qe=t.sent,t.next=125,le(l);case 125:return Ge=t.sent,t.next=128,de(l);case 128:return Ue=t.sent,t.next=131,fe(l);case 131:return Qe=t.sent,t.next=134,xe(l);case 134:return Ve=t.sent,t.next=137,ve(l);case 137:return ze=t.sent,t.next=140,ge(l);case 140:return He=t.sent,t.next=143,Ie(l);case 143:return We=t.sent,t.next=146,ye(l);case 146:return Ke=t.sent,t.next=149,Ne(l);case 149:return Je=t.sent,t.next=152,we(l);case 152:return Ye=t.sent,t.next=155,ke(l);case 155:return Xe=t.sent,t.next=158,Se(l);case 158:return $e=t.sent,t.next=161,Ae(l);case 161:return et=t.sent,t.next=164,y();case 164:return nt=t.sent,t.next=167,S();case 167:return at=t.sent,t.next=170,A();case 170:return rt=t.sent,t.next=173,k();case 173:return ct=t.sent,t.next=176,N();case 176:return st=t.sent,t.next=179,C();case 179:return ot=t.sent,t.next=182,D();case 182:return ut=t.sent,t.next=185,_();case 185:return lt=t.sent,t.next=188,P();case 188:return dt=t.sent,t.next=191,I();case 191:return bt=t.sent,t.next=194,Promise.allSettled([qe,b,j,m,O,p,f,x,w,R,B,M,E,F,q,Pe,Re,Be,Ge,Ue,Qe,Ve,ze,He,We,Ke,Je,Ye,Xe,$e,et,Me,Te,Ee,Le,Fe,nt,at,rt,ct,st,ot,ut,L,G,Ce,_e,De,lt,dt,bt]).then((function(e){return e.forEach((function(e){return"fulfilled"===e.status}))})).catch((function(e){return console.log(e,"err")}));case 194:return t.sent,t.next=197,v.userLogin.where("name").equals(r.username).first().then().catch((function(e){return console.log(e)}));case 197:if(!(jt=t.sent)){t.next=203;break}return t.next=201,v.userLogin.put({id:jt.id,name:r.username,password:r.password,new:n.headers.token,Id:n.data.UserId}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 201:t.next=205;break;case 203:return t.next=205,v.userLogin.add({name:r.username,password:r.password,new:n.headers.token,Id:n.data.UserId}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 205:t.next=208;break;case 207:console.log("not created in login attempt");case 208:e.refresh(),t.next=220;break;case 211:if(!n.data||407!==n.data.statuscode){t.next=217;break}return mt=n.data.message,T(mt),c(it),tt(!1),t.abrupt("return");case 217:tt(!1),T("Oops Something went wrong"),c(it);case 220:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){if(t&&t.response&&t.response.data&&407===t.response.data.statuscode){var n=t.response.data.message;return T(n),c(it),console.log("failed"),tt(!1),void e.loginfailed()}tt(!1),T("Oops Something went wrong"),c(it)})),t.next=32;break;case 23:if(""!==r.username){t.next=27;break}M("Enter User name"),t.next=31;break;case 27:return t.next=29,v.userLogin.where("name").equals(r.username).first();case 29:(s=t.sent)?r.username===s.name&&r.password===s.password?(localStorage.setItem("token",s.new),sessionStorage.setItem("token",s.new),localStorage.setItem("fname",s.name),localStorage.setItem("UserId",s.Id),e.refresh()):(T("invalid login detail"),tt(!1)):(T("first time you can't login Offline you need first time online Login"),tt(!1));case 31:console.log("you are offline");case 32:t.next=36;break;case 34:t.prev=34,t.t0=t.catch(2);case 36:case"end":return t.stop()}}),t,null,[[2,34]])})));return function(e){return t.apply(this,arguments)}}(),st=Object(a.useState)({hide:!0}),ut=Object(o.a)(st,2),lt=ut[0],dt=ut[1],bt=function(){x.delete().then((function(){return console.log("Database successfully deleted"),!0})).catch((function(e){return console.error("Could not delete database"),!1})),window.location.reload()},jt=function(e){return e.preventDefault(),q("Copy ,Paste not allowed"),!1};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("div",{className:"loginContainer",children:Object(Te.jsxs)("div",{className:"loginBg",children:[Object(Te.jsxs)("div",{className:"loginLogo",children:[Object(Te.jsx)("img",{src:b,alt:""}),Object(Te.jsx)("button",{onClick:function(){return bt()},className:"deleteDb",children:"Delete DB"})]}),!1===f?Object(Te.jsx)("div",{className:!1===Ye.status?"loginBox":"loginBox force",children:!1===Ye.status?Object(Te.jsxs)("div",{children:[Object(Te.jsx)("div",{className:"loginTitle",children:Object(Te.jsx)(ot,{content:"Login"})}),Object(Te.jsxs)("div",{className:"loginFormBox",children:[Object(Te.jsx)("div",{className:"loginForm",children:Object(Te.jsx)("input",{type:"text",placeholder:"User Name",name:"username",onChange:nt,value:r&&r.username})}),Object(Te.jsxs)("div",{className:"loginForm",children:[Object(Te.jsx)("input",{type:lt.hide?"password":"input",placeholder:"Password",name:"password",onChange:nt,onPaste:jt,onCopy:jt,value:r&&r.password,className:"form-control"}),Object(Te.jsx)("span",{className:"password__show field-icon",onClick:function(e){dt({hide:!lt.hide})},children:lt.hide?Object(Te.jsx)(Be.a,{}):Object(Te.jsx)(Pe.a,{})})]}),Object(Te.jsxs)("div",{className:"loginForm mb-25",children:[Object(Te.jsx)("input",{checked:r&&!0===r.remember?"checked":"",type:"checkbox",onChange:nt,name:"remember",id:"remember",className:"typeCheck"}),Object(Te.jsx)("label",{htmlFor:"remember",children:Object(Te.jsx)(ot,{content:"Remember"})})]}),M&&Object(Te.jsx)("p",{className:"error",children:M}),Object(Te.jsx)("div",{className:"loginForm mb-15",children:He&&!0===He?Object(Te.jsx)("button",{disabled:!0,children:"Sign in"}):et?Object(Te.jsx)("button",{disabled:!0,children:"Please wait..."}):Object(Te.jsx)("button",{onClick:function(){return ct(!1)},children:Object(Te.jsx)(ot,{content:"Sign in"})})}),Object(Te.jsx)("div",{className:"forgotpass",children:Object(Te.jsx)("button",{onClick:function(){w(!0)},className:"forgotpassLink",children:"Forgot password?"})}),F&&Object(Te.jsx)("p",{className:"error",children:F}),De&&Object(Te.jsx)("p",{className:"error",children:De}),e.errorMsg&&Object(Te.jsx)("p",{className:"error",children:e.errorMsg})]})]}):Object(Te.jsxs)("div",{className:"loginforce",children:[Object(Te.jsx)("div",{className:"msgDiv",children:Ye.msg}),Object(Te.jsxs)("div",{className:"btnDiv",children:[Object(Te.jsx)("button",{className:"lff_btn",onClick:function(){return ct(!0)},children:"Login force fully"}),Object(Te.jsx)("button",{className:"lff_btn Cancel",onClick:function(){return Ze({status:!1,msg:""}),void tt(!1)},children:"Cancel"})]})]})}):Object(Te.jsx)(Le,{lodingProc:function(e){return Qe(e)},forgotstatus:function(e){return w(e)}}),Object(Te.jsxs)("div",{className:"loginFooter",children:[Object(Te.jsxs)("div",{className:"footerMail",children:[Object(Te.jsx)("img",{src:j,alt:""})," info@eazyorder.com"]}),Object(Te.jsxs)("div",{className:"footerNo",children:[Object(Te.jsx)("img",{src:m,alt:""})," +91 123456789"]}),Object(Te.jsx)("div",{className:"copyRight",children:"2020 \xa9 Eazy Business Solutions"})]})]})}),Ue&&Object(Te.jsx)("div",{className:"loding_div",children:Object(Te.jsx)("h1",{"data-text":"Loading...",children:"Loading..."})})]})},lt=(n(332),n(333),function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(),l=Object(o.a)(s,2),j=l[0],m=l[1],O=Object(a.useState)([]),h=Object(o.a)(O,2),f=h[0],x=h[1],g=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(localStorage.getItem("UserId")),e.next=3,v.UserMenuMaster.where("userId").equals(t).toArray();case 3:0===(n=e.sent).length?(a={headers:{token:localStorage.getItem("token")}},"/api/UserMenuMaster/List",r={alteredon:"1970-01-01 00:00:01",pageindexno:0},p.a.post("/api/UserMenuMaster/List",r,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,"res menu"),!t.data||!t.data.Result){e.next=6;break}return n=t.data.Result.map((function(e){return{menuid:e.menuid,menuname:e.menuname,formid:e.formid,formname:e.formname,formtype:e.formtype,haschild:e.haschild,parentid:e.parentid,seqno:e.seqno,formval:e.formval,bshow:e.bshow,userId:parseInt(localStorage.getItem("UserId"))}})),I(n),e.next=6,v.UserMenuMaster.bulkAdd(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):I(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var t=Object(u.a)(Object(i.a)().mark((function t(n){var a,r,c,s,o,u,l,b,j,m,O;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("UserId"),t.next=3,v.userMaster.where("Id").equals(parseInt(a)).first();case 3:if(!(r=t.sent)){t.next=10;break}return c=r.Branch[0].BranchRole[0].RoleId,t.next=8,v.RoleDetailMaster.where("RoleId").equals(parseInt(c)).toArray();case 8:0!==(s=t.sent).length&&n&&(o=n.map((function(e){if(0!==e.formid){var t=s.find((function(t){return t.FormId===e.formid}));return Object(d.a)(Object(d.a)({},e),{},{AllowAmendmend:t.AllowAmendmend,AllowAttachment:t.AllowAttachment,AllowAuthorize:t.AllowAuthorize,AllowCancelTransaction:t.AllowCancelTransaction,AllowCreateStructure:t.AllowCreateStructure,AllowEdit:t.AllowEdit,AllowExportToExcel:t.AllowExportToExcel,AllowImport:t.AllowImport,AllowNew:t.AllowNew,AllowPrint:t.AllowPrint,AllowSendToTally:t.AllowSendToTally,AllowView:t.AllowView,AllowViewAttachment:t.AllowViewAttachment,append:!1,hide:!0})}return e})),u=o.filter((function(e){return 0!==e.formid})),l=u.filter((function(e){return"-"!==e.menuname})),b=o.filter((function(e){return 0===e.formid&&0===e.parentid})),j=o.filter((function(e){return 0===e.formid&&0!==e.parentid})),m=[].concat(Object(R.a)(l),Object(R.a)(j)),O=b.map((function(e){var t=m.filter((function(t){return t.parentid===e.menuid})).map((function(e){var t=m.filter((function(t){return t.parentid===e.menuid}));return Object(d.a)(Object(d.a)({},e),{},{subchild:t})}));return{name:e.menuname,subMenu:t}})),e.getArr(O),x(O),e.lodding(!1));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(){var t=Object(u.a)(Object(i.a)().mark((function t(){var n,a,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.userMaster.toArray();case 2:return n=t.sent,t.next=5,v.RoleDetailMaster.toArray();case 5:if(a=t.sent,!(n.length>0&&a.length>0)){t.next=11;break}g(),console.log("yes"),t.next=13;break;case 11:return r=setTimeout((function(){console.log("no"),e()}),2e3),t.abrupt("return",(function(){return clearTimeout(r)}));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}),[]);var y=f&&f.map((function(t,n){return Object(Te.jsx)(Te.Fragment,{children:t.subMenu.length>0?Object(Te.jsxs)("li",{className:r==="panel_".concat(n)?"active":"",children:[Object(Te.jsxs)("div",{id:"panelHead_".concat(n),onClick:function(){return e="panel_".concat(n),void c(r!==e?e:"");var e},children:[Object(Te.jsx)("i",{className:r==="panel_".concat(n)?"i_".concat(n," active"):"i_".concat(n)},"i_".concat(n)),t.name]},"div_".concat(n)),t.subMenu.length>0?Object(Te.jsx)("ul",{children:t.subMenu.map((function(t,n){return Object(Te.jsxs)("li",{className:j==="lichild_".concat(n)?"active":"",children:[Object(Te.jsx)("span",{class:t.subchild.length>0?"hasSubmenu":"",onClick:function(){return t.subchild.length>0?(a="lichild_".concat(n),void m(j!==a?a:"")):e.navFunction(t);var a},children:t.menuname},"span_".concat(n)),t.subchild.length>0?Object(Te.jsx)("ul",{children:t.subchild.map((function(e,t){return Object(Te.jsx)("li",{children:Object(Te.jsx)("span",{children:e.menuname})})}))}):""]},"lichild_".concat(n))}))},"ul_".concat(n)):""]},n):""})}));return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"leftNavWrapper",children:[Object(Te.jsx)("div",{className:"logo",children:Object(Te.jsx)("img",{src:b,alt:""})}),Object(Te.jsx)("div",{className:"leftNav",children:Object(Te.jsx)("div",{className:"navSection",children:Object(Te.jsx)("ul",{children:y})})})]})})}),dt=(n(334),n.p+"static/media/Mail.be6b6b22.svg"),bt=n.p+"static/media/phone.1787112b.svg",jt=n.p+"static/media/calender.40d4959d.svg",mt="NAV_UPDATE",Ot="RESET",pt=n(133),ht=n(256),ft={test:"",text:"asdfas"},xt=function(e,t){return void 0===e?ft:"TEST"===t.type?(console.log(t.type,"ddddddddddd"),Object(d.a)(Object(d.a)({},e),{},{test:!0,text:"abc"})):e};function vt(e,t){var n=[].concat(Object(R.a)(e),[t]);return console.log("finalprod util",n),n}var gt={productList:[],failedMessage:"",finalProduct:[]},It=function(e,t){if(void 0===e)return gt;switch(t.type){case"GET_ALL_PRODUCT_DATA_SUCCESS":return Object(d.a)(Object(d.a)({},e),t.payload);case"GET_ALL_PRODUCT_DATA_FAILED":return Object(d.a)(Object(d.a)({},e),{},{failedMessage:t.payload});case"GET_PRODUCT_DATA":return Object(d.a)(Object(d.a)({},e),{},{finalProduct:vt(e.finalProduct,t.payload)});default:return e}},yt={navArray:[]},wt=function(e,t){if(void 0===e)return yt;switch(t.type){case mt:return console.log("...state",t.payload),{navArray:t.payload};case Ot:return{navArray:[]};default:return e}},Nt=Object(pt.b)({testReducer:xt,navUpdateReducer:wt,invoiceReducer:It}),kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pt.c,At=Object(pt.d)(Nt,kt(Object(pt.a)(ht.a))),St=function(e){At.dispatch({type:mt,payload:e})},Ct=(n.p,n.p+"static/media/User.174e2775.svg"),Dt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("update").equals(1).first().then().catch((function(e){return console.log(e)}));case 2:if(!(t=e.sent)){e.next=9;break}return n={headers:{token:localStorage.getItem("token")}},a={Id:t.Id,LedgerCode:t.PartyCode,LedgerName:t.PartyName,Address:t.Address,BillAddress:t.BillAddress,Phone1:t.Phone1,Phone2:t.Phone2,CompanyCode:t.CompanyCode,ContactPerson:null,Email:t.Email,Cityid:t.CityId,Fax:t.Fax,IsClosed:t.IsClosed,DmsLedgerCode:t.DmsLedgerCode,DealerCategory:t.DealerCategory,Pincode:t.Pincode,SalesPersonId:null,LedgerGroup:0,LocationCode:null,CreatedBy:t.CreatedBy,Panno:t.PAN,Gstno:t.GSTNo,Website:t.Website,CreatedByName:"",EditLog:null,CreatedOn:"",LedgerType:t.LedgerType},"/api/LedgerMaster",e.next=9,p.a.put("/api/LedgerMaster",a,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==n.data.statuscode){e.next=5;break}return e.next=3,v.customerMaster.update(t.id,{update:0});case 3:e.next=7;break;case 5:console.log("customerMaster update statusCode",n.data.statuscode),console.log("customerMaster update message",n.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_t=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("new").equals(1).first().then().catch((function(e){return console.log(e)}));case 2:if(!(t=e.sent)){e.next=9;break}return n={Id:0,LedgerCode:t.PartyCode,LedgerName:t.PartyName,Address:t.Address,BillAddress:t.BillAddress,Phone1:t.Phone1,Phone2:t.Phone2,CompanyCode:t.CompanyCode,ContactPerson:null,Email:t.Email,Cityid:t.CityId,Fax:t.Fax,IsClosed:t.IsClosed,DmsLedgerCode:t.DmsLedgerCode,DealerCategory:t.DealerCategory,Pincode:t.Pincode,SalesPersonId:null,LedgerGroup:0,LocationCode:null,CreatedBy:t.CreatedBy,CreatedByName:"",Panno:t.PAN,Gstno:t.GSTNo,Website:t.Website,EditLog:null,CreatedOn:"",LedgerType:t.LedgerType},a={headers:{token:localStorage.getItem("token")}},"/api/LedgerMaster",e.next=9,p.a.post("/api/LedgerMaster",n,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==n.data.statuscode){e.next=5;break}return e.next=3,v.customerMaster.update(t.id,{new:0,Id:n.data.MasterId});case 3:e.next=7;break;case 5:console.log("customerMaster new statusCode",n.data.statuscode),console.log("customerMaster new message",n.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="new"===t?"[new+ishold]":"[update+ishold]",e.next=3,v.salesInvoice.where(n).equals(1,"false").first().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,v.saleInvoiceDetail.where({invoiceid:0===n.Id||""===n.Id?n.id:n.Id}).reverse().toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.map((function(e){return{InvoiceDetailId:"edit"===t?e.InvoiceDetailId:0,rowid:e.id,InvoiceId:"edit"===t?e.invoiceid:0,ItemId:e.itemid,ItemName:e.ItemName,ItemCode:e.ItemCode,Quantity:e.quantity,MRP:e.mrp,SalePrice:e.saleprice,GrossAmount:e.grossamount,FinalDiscount:e.finaldiscount,TotalTaxAmount:e.totaltaxamount,TotalNetAmount:e.totalnetamount,IsTaxInclusive:!0,AltQuantity:null,AutoDiscount:0,AutoDiscountAmount:e.autodiscountamount,ManualDiscount:e.manualdiscountper,ManualDiscountAmount:e.manualdiscountamount,ItemRemark:e.itemremark,IsAutoDiscountOn:!1,IsAutoDiscountOnAmount:!1,Conversion:1,Denominator:e.denominator,HsnId:e.HsnId,IGSTRate:e.igstrate,CGSTRate:e.cgstrate,SGSTRate:e.sgstrate,IGSTAmount:e.igstamount,CGSTAmount:e.cgstamount,SGSTAmount:e.sgstamount}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return n.Details=e.sent,e.abrupt("return",n);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(!(a=e.sent).invoiceno){e.next=17;break}if(r={Id:"edit"===t?a.Id:0,InvoiceNo:a.invoiceno,InvoiceDate:Mt(a.invoicedate),PartyId:a.partyid,GrossAmount:a.grossamount,NetAmount:a.netamount,DiscountAmount:a.discountamount,TaxAmount:a.taxamount,ReceiveAmount:a.receiveamount,CreatedBy:a.createdby,CreatedByName:"",SeriesId:a.seriesid,SeriesVoucherType:a.voucherid,CreatedOn:Mt(a.createdon),EditLog:null,SalesPersonId:a.salepersonid,roundoff:a.roundoff,billingcountryid:a.billingcountryid,billingstateid:a.billingstateid,billingaddress:a.billingaddress,billinggstinno:a.billinggstinno,shippingcountryid:a.shippingcountryid,shippingstateid:a.shippingstateid,shippingaddress:a.shippingaddress,shippinggstinno:a.shippinggstinno,discountpermanual:a.discountpermanual,discountamountmanual:a.discountamountmanual,Remarks:a.remarks,BillTime:a.billtime,TotalBillQty:a.totalbillqty,TotalIgst:a.totaligst,TotalCgst:a.totalcgst,TotalSgst:a.totalsgst,iscancelled:a.iscancelled,ishold:a.ishold,isauthorized:a.isauthorized,cancelledby:a.cancelledby,cancelledon:a.cancelledon,SalesInvoiceDetail:a.Details,influencerid:a.influencerid,billingtype:a.billingtype},c={headers:{token:localStorage.getItem("token")}},s="/api/SalesInvoice",!r||!r.InvoiceNo){e.next=17;break}if("edit"!==t){e.next=14;break}return e.next=12,p.a.put(s,r,c).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==t.data.statuscode){e.next=5;break}return e.next=3,v.salesInvoice.update(a.id,{update:0});case 3:e.next=7;break;case 5:console.log("bill pos update statusCode",t.data.statuscode),console.log("bill pos update message",t.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 12:e.next=17;break;case 14:return console.log(r,"item11111111111"),e.next=17,p.a.post(s,r,c).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.data.statuscode){e.next=13;break}return e.next=3,v.salesInvoice.update(a.id,{new:0,Id:t.data.MasterId});case 3:if(!(t.data.MasterId>0)){e.next=11;break}return e.next=6,v.saleInvoiceDetail.where("invoiceid").equals(a.id).toArray().then().catch((function(e){return console.log(e)}));case 6:if(!((n=e.sent).length>0)){e.next=11;break}return r=n.map((function(e){var n=t.data.Result.SalesInvoiceDetail.find((function(t){return t.rowid===e.id}));return n?Object(d.a)(Object(d.a)({},e),{},{invoiceid:t.data.MasterId,InvoiceDetailId:n.InvoiceDetailId}):Object(d.a)(Object(d.a)({},e),{},{invoiceid:t.data.MasterId,InvoiceDetailId:""})})),e.next=11,v.saleInvoiceDetail.bulkPut(r);case 11:e.next=15;break;case 13:console.log("bill pos statusCode",t.data.statuscode),console.log("bill pos message",t.data.message);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="new"===t?"[new+ishold]":"[update+ishold]",e.next=3,v.salesInvoiceWithSO.where(n).equals(1,"false").first().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,v.saleInvoiceDetailWithSO.where({invoiceid:0===n.Id||""===n.Id?n.id:n.Id}).reverse().toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.map((function(e){return{InvoiceDetailId:"edit"===t?e.InvoiceDetailId:0,rowid:e.id,InvoiceId:"edit"===t?e.invoiceid:0,ItemId:e.itemid,ItemName:e.ItemName,ItemCode:e.ItemCode,Quantity:e.quantity,MRP:e.mrp,SalePrice:e.saleprice,GrossAmount:e.grossamount,FinalDiscount:e.finaldiscount,TotalTaxAmount:e.totaltaxamount,TotalNetAmount:e.totalnetamount,IsTaxInclusive:!0,AltQuantity:null,AutoDiscount:0,AutoDiscountAmount:e.autodiscountamount,ManualDiscount:e.manualdiscountper,ManualDiscountAmount:e.manualdiscountamount,ItemRemark:e.itemremark,IsAutoDiscountOn:!1,IsAutoDiscountOnAmount:!1,Conversion:1,Denominator:e.denominator,HsnId:e.HsnId,IGSTRate:e.igstrate,CGSTRate:e.cgstrate,SGSTRate:e.sgstrate,IGSTAmount:e.igstamount,CGSTAmount:e.cgstamount,SGSTAmount:e.sgstamount,SoDetailId:e.SoDetailId,SoId:e.SoId}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return n.Details=e.sent,e.abrupt("return",n);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(!(a=e.sent).invoiceno){e.next=16;break}if(r={Id:"edit"===t?a.Id:0,InvoiceNo:a.invoiceno,InvoiceDate:Mt(a.invoicedate),PartyId:a.partyid,GrossAmount:a.grossamount,NetAmount:a.netamount,DiscountAmount:a.discountamount,TaxAmount:a.taxamount,ReceiveAmount:a.receiveamount,CreatedBy:a.createdby,CreatedByName:"",SeriesId:a.seriesid,SeriesVoucherType:a.voucherid,CreatedOn:Mt(a.createdon),EditLog:null,SalesPersonId:a.salepersonid,roundoff:a.roundoff,billingcountryid:a.billingcountryid,billingstateid:a.billingstateid,billingaddress:a.billingaddress,billinggstinno:a.billinggstinno,shippingcountryid:a.shippingcountryid,shippingstateid:a.shippingstateid,shippingaddress:a.shippingaddress,shippinggstinno:a.shippinggstinno,discountpermanual:a.discountpermanual,discountamountmanual:a.discountamountmanual,Remarks:a.remarks,BillTime:a.billtime,TotalBillQty:a.totalbillqty,TotalIgst:a.totaligst,TotalCgst:a.totalcgst,TotalSgst:a.totalsgst,iscancelled:a.iscancelled,ishold:a.ishold,isauthorized:a.isauthorized,cancelledby:a.cancelledby,cancelledon:a.cancelledon,SalesInvoiceDetail:a.Details,influencerid:a.influencerid,billingtype:a.billingtype},c={headers:{token:localStorage.getItem("token")}},s="/api/SalesInvoice",!r||!r.InvoiceNo){e.next=16;break}if("edit"!==t){e.next=14;break}return e.next=12,p.a.put(s,r,c).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==t.data.statuscode){e.next=5;break}return e.next=3,v.salesInvoiceWithSO.update(a.id,{update:0});case 3:e.next=7;break;case 5:console.log("bill pos with sale order update statusCode",t.data.statuscode),console.log("bill pos with sale order update message",t.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 12:e.next=16;break;case 14:return e.next=16,p.a.post(s,r,c).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.data.statuscode){e.next=13;break}return e.next=3,v.salesInvoiceWithSO.update(a.id,{new:0,Id:t.data.MasterId});case 3:if(!(t.data.MasterId>0)){e.next=11;break}return e.next=6,v.saleInvoiceDetailWithSO.where("invoiceid").equals(a.id).toArray().then().catch((function(e){return console.log(e)}));case 6:if(!((n=e.sent).length>0)){e.next=11;break}return r=n.map((function(e){var n=t.data.Result.SalesInvoiceDetail.find((function(t){return t.rowid===e.id}));return n?Object(d.a)(Object(d.a)({},e),{},{invoiceid:t.data.MasterId,InvoiceDetailId:n.InvoiceDetailId}):Object(d.a)(Object(d.a)({},e),{},{invoiceid:t.data.MasterId,InvoiceDetailId:""})})),e.next=11,v.saleInvoiceDetailWithSO.bulkPut(r);case 11:e.next=15;break;case 13:console.log("bill pos with sale order statusCode",t.data.statuscode),console.log("bill pos with sale order message",t.data.message);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==t){e.next=6;break}return e.next=3,v.IC_Master.where("new").equals(1).first();case 3:e.t0=e.sent,e.next=14;break;case 6:if("edit"!==t){e.next=12;break}return e.next=9,v.IC_Master.where("update").equals(1).first();case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=!1;case 13:e.t0=e.t1;case 14:if(n=e.t0,a={headers:{token:localStorage.getItem("token")}},r="/api/InwardChallan",!n){e.next=34;break}return c=0===n.Id||""===n.Id?n.id:n.Id,e.next=21,v.IC_Detail.where("InwardId").equals(c).toArray();case 21:if(!((s=e.sent)&&s.length>0)){e.next=34;break}if(!(o=s.map((function(e){return{inwarddetailid:"edit"===t?e.InwardDetailId:0,InwardId:"edit"===t?e.InwardId:0,ItemId:e.ItemId,rowid:e.id,ItemName:"",ItemCode:"",BaseQty:e.ReceiveBaseQty,AltQty:e.ReceiveAltQty,MRP:e.MRP,Rate:e.Rate,GrossAmount:e.GrossAmount,NetAmount:e.NetAmount,DiscountPer:e.DiscountPercentage,DiscountAmount:e.DiscountAmount,DiscountedAmount:e.DiscountedAmount,PoDetailId:e.GitDetailId,UnitId:e.UnitId,ShortQty:e.shortQty,ExcessQty:e.excessqty}})))){e.next=34;break}if(l={Id:"edit"===t?n.Id:0,InwardNo:n.InwardNo,InwardDate:Mt(n.InwardDate),PartyId:n.PartyId,PartyName:"",GrossAmount:n.GrossAmount,NetAmount:n.NetAmount,CreatedBy:n.CreatedBy,CreatedByName:"",CreatedOn:Mt(n.InwardDate),EditLog:null,Remarks:n.Remarks,BillBaseQty:n.billBaseQty,BillAltQty:n.billAltQty,RecBaseQty:n.recBaseQty,RecAltQty:n.recAltQty,ReferenceNo:null,ReferenceDate:"",SeriesId:n.seriesid,SeriesVoucherType:n.voucherid,IsGIT:!0,PoId:n.GIT,InwardDetail:o},"new"!==t){e.next=31;break}return e.next=29,p.a.post(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.data.statuscode){e.next=8;break}return e.next=3,v.IC_Master.update(n.id,{new:0,update:0,Id:t.data.MasterId});case 3:return a=s.map((function(e){var n=t.data.Result.InwardDetail.find((function(t){return t.rowid===e.id}));return n?Object(d.a)(Object(d.a)({},e),{},{InwardId:t.data.MasterId,InwardDetailId:n.inwarddetailid}):Object(d.a)(Object(d.a)({},e),{},{InwardId:t.data.MasterId,InwardDetailId:""})})),e.next=6,v.IC_Detail.bulkPut(a).then().catch((function(e){return console.log(e)}));case 6:e.next=10;break;case 8:console.log("inward push statusCode",t.data.statuscode),console.log("inward push message",t.data.message);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 29:e.next=34;break;case 31:if("edit"!==t){e.next=34;break}return e.next=34,p.a.put(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==t.data.statuscode){e.next=5;break}return e.next=3,v.IC_Master.update(n.id,{update:0});case 3:e.next=7;break;case 5:console.log("inward update statusCode",t.data.statuscode),console.log("inward update message",t.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Mt(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[a,["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r].join("-")}var Tt,Et,Lt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IndentMaster.where("new").equals(1).first();case 2:if(t=e.sent,n={headers:{token:localStorage.getItem("token")}},a="api/Indent",!t){e.next=15;break}return e.next=8,v.IndentDetail.where("IndentNo").equals(t.IndentNo).toArray();case 8:if(!((r=e.sent)&&r.length>0)){e.next=15;break}if(!(c=r.map((function(e){return{IndentDetailId:0,IndentId:0,ItemId:e.ItemId,ItemName:"",ItemCode:"",Quantity:e.Quantity,ItemRemarks:e.ItemRemarks,Priority:e.Priority}})))){e.next=15;break}return s={Id:0,IndentNo:t.IndentNo,IndentDate:Mt(t.IndentDate),PartyId:t.PartyId,PartyName:t.PartyName,CreatedBy:t.CreatedBy,CreatedByName:"",CreatedOn:Mt(t.CreatedOn),EditLog:"",Remarks:t.Remarks,SeriesId:t.SeriesId,SeriesVoucherType:t.SeriesVoucherType,BranchId:0,IndentDetail:c},e.next=15,p.a.post(a,s,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data.MasterId){e.next=11;break}return e.next=3,v.IndentMaster.update(t.id,{new:0,update:0,Id:n.data.MasterId});case 3:if(!(n.data.MasterId>0)){e.next=11;break}return e.next=6,v.IndentDetail.where("IndentId").equals(t.id).toArray().then().catch((function(e){return console.log(e)}));case 6:if(!((a=e.sent).length>0)){e.next=11;break}return r=a.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{IndentId:n.data.MasterId})})),e.next=11,v.IndentDetail.bulkPut(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==t){e.next=6;break}return e.next=3,v.PurchaseInvoice.where("new").equals(1).first();case 3:e.t0=e.sent,e.next=14;break;case 6:if("edit"!==t){e.next=12;break}return e.next=9,v.PurchaseInvoice.where("update").equals(1).first();case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=!1;case 13:e.t0=e.t1;case 14:if(n=e.t0,a={headers:{token:localStorage.getItem("token")}},r="api/PurchaseInvoice",!n){e.next=33;break}return c=n.Id>0?n.Id:n.id,e.next=21,v.PurchaseInvoiceDetail.where("InvoiceId").equals(c).toArray();case 21:if(!((s=e.sent)&&s.length>0)){e.next=33;break}if(!(o=s.map((function(e){return{InvoiceDetailId:"new"===t?0:e.InvoiceDetailId,rowid:e.id,InvoiceId:e.InvoiceId,ItemId:e.ItemId,ItemName:"",ItemCode:"",isaltrate:e.isaltrate,Quantity:e.Quantity,altqty:e.altqty,pinwardQuantity:e.pinwardQuantity,pinwardaltqty:e.pinwardaltqty,Rate:e.Rate,Amount:e.Amount,DiscountPer:e.DiscountPer,DiscountAmount:e.DiscountAmount,ReferenceNo:e.ReferenceNo,ReferenceDate:"",hsnclassificationid:e.hsnclassificationid,igstrate:e.igstrate,cgstrate:e.cgstrate,sgstrate:e.sgstrate,igstamount:e.igstamount,cgstamount:e.cgstamount,sgstamount:e.sgstamount,icdetailid:e.icdetailid,referencedetailid:e.referencedetailid}})))){e.next=33;break}if(l={Id:0,InvoiceNo:n.InvoiceNo,InvoiceDate:Mt(n.InvoiceDate),PartyId:n.PartyId,PartyName:"",invoicetype:n.invoicetype,grossamount:n.grossamount,discountamount:n.discountamount,taxamount:n.taxamount,netamount:n.netamount,seriesid:n.seriesid,totalAmount:n.totalAmount,cgstAmount:n.cgstAmount,sgstAmount:n.sgstAmount,igstAmount:n.igstAmount,Rounoff:n.RoundOff,seriesvouchertype:n.seriesvouchertype,billingcountryid:n.billingcountryid,billingstateid:n.billingstateid,billingaddress:n.billingaddress,billinggstinno:n.billinggstinno,shippingcountryid:n.shippingcountryid,shippingstateid:n.shippingstateid,shippingaddress:n.shippingaddress,shippinggstinno:n.shippinggstinno,dncn_against_pi:n.dncn_against_pi,referencetype:n.referencetype,referenceid:n.referenceid,CreatedBy:n.CreatedBy,CreatedByName:"",CreatedOn:Mt(n.InvoiceDate),EditLog:n.EditLog,Remarks:n.remark,PIDetail:o},"edit"!==t){e.next=31;break}return e.next=29,p.a.put(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==t.data.statuscode){e.next=5;break}return e.next=3,v.PurchaseInvoice.update(n.id,{update:0});case 3:e.next=5;break;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 29:e.next=33;break;case 31:return e.next=33,p.a.post(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.data.statuscode){e.next=8;break}return e.next=3,v.PurchaseInvoice.update(n.id,{new:0,update:0,Id:t.data.MasterId});case 3:return a=s.map((function(e){var n=t.data.Result.PIDetail.find((function(t){return t.rowid===e.id}));return n?Object(d.a)(Object(d.a)({},e),{},{InvoiceId:t.data.MasterId,InvoiceDetailId:n.InvoiceDetailId}):Object(d.a)(Object(d.a)({},e),{},{InvoiceId:t.data.MasterId,InvoiceDetailId:""})})),e.next=6,v.PurchaseInvoiceDetail.bulkPut(a).then().catch((function(e){return console.log}));case 6:e.next=8;break;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.AdjustmentMaster.where("new").equals(1).first();case 2:if(t=e.sent,n={headers:{token:localStorage.getItem("token")}},a="api/StockJournal",!t){e.next=15;break}return e.next=8,v.AdjustmentDetail.where("stockadjustmentid").equals(t.id).toArray();case 8:if(!((r=e.sent)&&r.length>0)){e.next=15;break}if(!(c=r.map((function(e){return{AdjustmentDetailId:0,AdjustmentId:0,ItemId:e.ItemId,ItemName:"",ItemCode:"",MRP:e.MRP,QuantityIn:e.QuantityIn,QuantityOut:e.QuantityOut,LotNo:null}})))){e.next=15;break}return s={Id:0,AdjustmentNo:t.AdjusmentNo,StockAdjustmentDate:Mt(new Date),CreatedBy:t.CreatedBy,CreatedByName:"",CreatedOn:Mt(new Date),BranchId:0,EditLog:"",Remark:t.Remarks,DETAIL:c},e.next=15,p.a.post(a,s,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data.MasterId){e.next=6;break}return e.next=3,v.AdjustmentMaster.update(t.id,{new:0,update:0,Id:n.data.MasterId});case 3:return a=r.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{stockadjustmentid:n.data.MasterId})})),e.next=6,v.AdjustmentDetail.bulkPut(a).then().catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==t){e.next=6;break}return e.next=3,v.salesReturn.where("new").equals(1).first();case 3:e.t0=e.sent,e.next=14;break;case 6:if("edit"!==t){e.next=12;break}return e.next=9,v.salesReturn.where("update").equals(1).first();case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=!1;case 13:e.t0=e.t1;case 14:if(n=e.t0,a={headers:{token:localStorage.getItem("token")}},r="api/SaleReturn",!n){e.next=35;break}return c=0===n.Id||""===n.Id?n.id:n.Id,e.next=21,v.SaleReturnDetail.where("InvoiceId").equals(c).toArray();case 21:if(!((s=e.sent)&&s.length>0)){e.next=35;break}if(!(o=s.map((function(e){return{InvoiceDetailId:0,InvoiceId:"edit"===t?e.InvoiceId:0,ItemId:e.ItemId,ItemName:"",ItemCode:"",Quantity:e.Quantity,MRP:e.MRP,SalePrice:e.SalePrice,GrossAmount:e.GrossAmount,FinalDiscount:e.FinalDiscount,TotalTaxAmount:e.TotalTaxAmount,TotalNetAmount:e.TotalNetAmount,IsTaxInclusive:"",AltQuantity:e.AltQuantity,AutoDiscount:e.AutoDiscount,AutoDiscountAmount:e.AutoDiscountAmount,ManualDiscount:e.ManualDiscount,ManualDiscountAmount:e.ManualDiscountAmount,ItemRemark:e.ItemRemark,AgainstInvoiceDetailId:0,AgainstInvoiceId:e.AgainstInvoiceId,HsnId:e.Hsnid,IGSTRate:e.IgstRate,CGSTRate:e.CgstRate,SGSTRate:e.SgstRate,IGSTAmount:e.IgstAmount,CGSTAmount:e.CgstAmount,SGSTAmount:e.SgstAmount}})))){e.next=35;break}if(l={Id:"edit"===t?n.Id:0,InvoiceNo:n.Invoiceno,InvoiceDate:Mt(n.InvoiceDate),PartyId:n.PartyId,PartyName:"",GrossAmount:n.GrossAmount,NetAmount:n.NetAmount,DiscountAmount:n.DiscountPerAmount,TaxAmount:n.TaxAmount,ReceiveAmount:n.ReceiveAmount,CreatedBy:n.CreatedBy,SeriesId:n.SeriesId,SeriesVoucherType:n.SeriesVoucherType,CreatedByName:"",CreatedOn:Mt(n.CreatedOn),EditLog:n.EditLog,SalesPersonId:n.salepersonId,Remarks:n.Remarks,TotalBillQty:n.TotalBillQty,AgainstInvoiceId:n.AgainstInvoiceId,TotalIgst:void 0===n.totalIgst?0:n.totalIgst,TotalCgst:void 0===n.totalCgst?0:n.totalCgst,TotalSgst:void 0===n.totalSgst?0:n.totalSgst,SalesReturnDetail:o},console.log(JSON.stringify(l),"fffffffffff"),"new"!==t){e.next=32;break}return e.next=30,p.a.post(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(201===t.data.statuscode&&t.data.MasterId>0)){e.next=8;break}return e.next=3,v.salesReturn.update(n.id,{new:0,update:0,Id:t.data.MasterId});case 3:return a=s.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{InvoiceId:t.data.MasterId})})),e.next=6,v.SaleReturnDetail.bulkPut(a).then().catch((function(e){return console.log(e)}));case 6:e.next=10;break;case 8:console.log("sales ReturnBill wise statusCode",n.data.statuscode),console.log("sales ReturnBill wise message",n.data.message);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 30:e.next=35;break;case 32:if("edit"!==t){e.next=35;break}return e.next=35,p.a.put(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==t.data.statuscode){e.next=5;break}return e.next=3,v.salesReturn.update(n.id,{update:0});case 3:e.next=7;break;case 5:console.log("sales ReturnBill wise statusCode",n.data.statuscode),console.log("sales ReturnBill wise message",n.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,l,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(n="new"===t?{new:1}:"edit"===t?{update:1}:"")){e.next=26;break}return e.next=4,v.purchaseOrder.get(n).then().catch((function(e){return console.log(e)}));case 4:if(a=e.sent,r={headers:{token:localStorage.getItem("token")}},c="api/PurchaseOrder",!a){e.next=26;break}return s=0===a.Id||void 0===a.Id?a.id:a.Id,e.next=11,v.purchaseDetail.where("PoId").equals(s).toArray();case 11:if(!((o=e.sent)&&o.length>0)){e.next=26;break}if(l=o.map((function(e){return{PoDetailId:0,PoId:"new"===t?0:e.PoId,ItemId:e.ItemId,ItemName:e.ItemName,ItemCode:e.ItemCode,Rate:e.Rate,Discount:e.Discount,BaseQty:parseInt(e.BaseQty),AltQty:e.AltQty,GrossTotal:e.GrossTotal,DiscountAmount:e.DiscountAmount,NetTotal:e.NetTotal,IsAltRate:null,Remark:e.Remark,HsnId:0,IGSTRate:0,CGSTRate:0,SGSTRate:e.SGSTRate,IGSTAmount:0,CGSTAmount:0,SGSTAmount:e.SGSTAmount}})),b=[],o.map((function(e){if(e.IndentId){var n={PoIndentDetailId:0,PoDetailId:0,Poid:"new"===t?0:e.PoId,IndentId:e.IndentId,IndentDetailId:0,ItemId:e.ItemId,BaseQty:parseInt(e.BaseQty)};b.push(n)}return e})),!l){e.next=26;break}if(j={Id:"new"===t?0:a.Id,PoNumber:a.PoNumber,PoDate:Mt(a.PoDate),PartyId:a.PartyId,PartyName:a.PartyName,CreatedBy:a.CreatedBy,CreatedByName:a.CreatedByName,CreatedOn:Mt(new Date),EditLog:"",IsClosed:!1,Remarks:a.Remarks,OrderedBy:a.CreatedBy,SeriesId:a.SeriesId,SeriesNo:null,SeriesCode:null,SeriesVoucherType:a.SeriesVoucherType,TotalIGST:0,TotalCGST:0,TotalSGST:0,PurchaseDetail:l,PurchaseIndentDetail:b},"new"!==t){e.next=23;break}return e.next=21,p.a.post(c,j,r).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==t.data.statuscode){e.next=6;break}return e.next=3,v.purchaseOrder.update(a.id,{new:0,update:0,Id:t.data.MasterId});case 3:return n=o.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{PoId:t.data.MasterId})})),e.next=6,v.purchaseDetail.bulkPut(n).then().catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 21:e.next=26;break;case 23:if("edit"!==t){e.next=26;break}return e.next=26,p.a.put(c,j,r).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==t.data.statuscode){e.next=3;break}return e.next=3,v.purchaseOrder.update(a.id,{update:0});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==t){e.next=6;break}return e.next=3,v.PR_Master.where("new").equals(1).first();case 3:e.t0=e.sent,e.next=14;break;case 6:if("edit"!==t){e.next=12;break}return e.next=9,v.PR_Master.where("update").equals(1).first();case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=!1;case 13:e.t0=e.t1;case 14:if(n=e.t0,a={headers:{token:localStorage.getItem("token")}},r="api/PurchaseReturn",!n){e.next=34;break}return c=0===n.Id||""===n.Id||void 0===n.Id?n.id:n.Id,e.next=21,v.PR_Detail.where("Prid").equals(c).toArray();case 21:if(!((s=e.sent)&&s.length>0)){e.next=34;break}if(!(o=s.map((function(e){return{PrDetailId:0,PrId:"new"===t?0:e.Prid,ItemId:e.ItemId,ItemName:"",ItemCode:0,BaseQty:e.ReturnBaseQty,AltQty:0,MRP:e.MRP,Rate:e.Rate,GrossAmount:0,DiscountPer:0,DiscountAmount:0,DiscountedAmount:0,InwardDetailId:e.InwardDetailId}})))){e.next=34;break}if(l={Id:"edit"===t?n.Id:0,PRNo:n.PurchaseReturnNo,PRDate:Mt(n.PurchaseReturnDate),VendorId:n.vendorid,VendorName:null,GrossAmount:0,NetAmount:0,CreatedBy:n.CreatedBy,CreatedByName:"",SeriesId:n.SeriesId,SeriesVoucherType:n.SeriesVoucherType,CreatedOn:"",EditLog:"",Remarks:null,PrType:n.Manual,PRDetail:o},"new"!==t){e.next=31;break}return e.next=29,p.a.post(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(201===t.data.statuscode&&t.data.MasterId>0)){e.next=8;break}return e.next=3,v.PR_Master.update(n.id,{new:0,update:0,Id:t.data.MasterId});case 3:return a=s.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{Prid:t.data.MasterId})})),e.next=6,v.PR_Detail.bulkPut(a).then().catch((function(e){return console.log(e)}));case 6:e.next=10;break;case 8:console.log("Purchase purchaseReturn",t.data.statuscode),console.log("Purchase purchaseReturn",t.data.message);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 29:e.next=34;break;case 31:if("edit"!==t){e.next=34;break}return e.next=34,p.a.put(r,l,a).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(202!==t.data.statuscode){e.next=5;break}return e.next=3,v.PR_Master.update(n.id,{update:0});case 3:e.next=7;break;case 5:console.log("purchase ReturnBill wise statusCode",n.data.statuscode),console.log("Purchase ReturnBill wise message",n.data.message);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.advanceAdjustment.where("new").equals(1).first();case 2:if(t=e.sent,n={headers:{token:localStorage.getItem("token")}},"api/AdvanceAdjustment",!t){e.next=9;break}return a={Id:0,AdvanceAdjustmentNo:t.advanceadjustmentno,AdvanceAdjustmentDate:Mt(t.advanceadjustmentdate),PartyId:t.partyid,PartyName:"",AdvanceAdjustmentAmount:t.advanceadjustmentrefundamount,Remarks:t.remarks,AdvanceAdjustmentRefunAamount:t.advanceadjustmentrefundamount,AmountAdjusted:t.createdby,CounterId:0,EditLog:"",CreatedBy:0,CreatedOn:Mt(new Date)},e.next=9,p.a.post("api/AdvanceAdjustment",a,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data.MasterId){e.next=3;break}return e.next=3,v.advanceAdjustment.update(t.id,{new:0,update:0,Id:n.data.MasterId});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.creditNoteRefund.where("new").equals(1).first();case 2:if(t=e.sent,n={headers:{token:localStorage.getItem("token")}},"api/CreditNoteRefund",!t){e.next=9;break}return a={Id:0,AdvanceAdjustmentNo:t.creditnoteno,AdvanceAdjustmentDate:Mt(t.creditnotedate),PartyId:t.partyid,PartyName:"",AdvanceAdjustmentAmount:t.creditnoteamount,Remarks:t.remarks,AdvanceAdjustmentRefunAamount:t.creditnoterefundamount,AmountAdjusted:t.createdby,CounterId:0,EditLog:"",CreatedBy:0,CreatedOn:Mt(new Date)},e.next=9,p.a.put("api/CreditNoteRefund",a,n).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.data.MasterId){e.next=3;break}return e.next=3,v.creditNoteRefund.update(t.id,{new:0,update:0,Id:n.data.MasterId});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ht=function(e){var t=e.checkonline,n=e.navToggle,r=Object(a.useState)(),c=Object(o.a)(r,2),s=c[0],l=c[1],d=function(){localStorage.removeItem("token"),sessionStorage.removeItem("token"),At.dispatch({type:Ot}),window.location.reload()},b=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("itemMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&Q({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("customerMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&V({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("vendorMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&z({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("vendorMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&H({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("itemGroup").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&W({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("unitMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&K({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("cityMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&J({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("stateMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&Z({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("priceMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&X({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("stockLotMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&$({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,v.mastertables.where("tablename").equals("GITMaster").first();case 3:(t=e.sent)&&t.pageindexno<t.hitcount&&Y({alteredon:"1970-01-01 00:00:01",pageindexno:parseInt(t.pageindexno)}),e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=setInterval((function(){var e=!!navigator.onLine;l(e),t(e)}),3e3);return function(){return clearInterval(e)}})),Object(a.useEffect)((function(){var e=setInterval((function(){s&&(_t(),Dt(),Pt("new"),Pt("edit"),Rt("new"),Rt("edit"),Bt("new"),Bt("edit"),Qt("new"),Qt("edit"),Lt("edit"),Ft("new"),Ft("edit"),qt(),Gt("new"),Gt("edit"),Ut("new"),Ut("edit"),Vt(),zt())}),1e4);return function(){return clearInterval(e)}}),[s]),Object(a.useEffect)((function(){var e=setInterval((function(){s&&(console.log("get master data"),f(),h(),p(),O(),m(),j(),b(),x(),g(),I(),y())}),2e4);return function(){return clearInterval(e)}}),[s]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("div",{className:"topHeader",children:Object(Te.jsxs)("div",{className:"leftDivide",children:[Object(Te.jsx)("div",{onClick:n,className:"toggleNav",children:Object(Te.jsx)("span",{})}),Object(Te.jsx)("div",{className:"emailSection",children:Object(Te.jsxs)("ul",{children:[Object(Te.jsxs)("li",{children:[Object(Te.jsx)("img",{src:dt,alt:""}),Object(Te.jsx)("span",{children:"info@eazyorder.com "})]}),Object(Te.jsxs)("li",{children:[Object(Te.jsx)("img",{src:bt,alt:""}),Object(Te.jsx)("span",{children:" +91 123456789 "})]})]})}),Object(Te.jsxs)("div",{className:"networkStatus",style:{marginLeft:"auto"},children:[Object(Te.jsx)("span",{className:!0===s?"Online":"Offline"}),!0===s?"Online":"Offline"]}),Object(Te.jsxs)("div",{className:"profileText",children:[Object(Te.jsxs)("ul",{children:[Object(Te.jsxs)("li",{className:"nameText",children:["Hi,",Object(Te.jsx)("b",{children:""!==localStorage.getItem("fname")?localStorage.getItem("fname"):""})]}),Object(Te.jsx)("li",{children:Object(Te.jsx)("div",{className:"ProfileImg",children:Object(Te.jsx)("img",{src:Ct,alt:""})})})]}),Object(Te.jsx)("div",{className:"profileSubMenu",children:Object(Te.jsx)("ul",{children:Object(Te.jsx)("li",{children:Object(Te.jsx)("button",{onClick:function(){return d()},children:"Logout"})})})})]})]})})})},Wt=(n(335),function(e){console.log("props",e);var t=e.navArray&&e.navArray.map((function(t,n){return Object(Te.jsx)("li",{className:0===n?"active":"",onClick:0===n?function(){return!1}:function(){return e.tabFunction(t)},children:0===n?Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("span",{children:t.menuname}),Object(Te.jsx)("button",{className:"closeTab",onClick:function(){return e.tabFunction(t,"true")}})]}):Object(Te.jsx)("span",{children:t.menuname})},n)}));return Object(Te.jsx)("div",{className:"BrowserTabs",children:Object(Te.jsx)("ul",{children:t})})}),Kt=(n(336),["title","titleId"]);function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jt.apply(this,arguments)}function Yt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zt(e,t){var n=e.title,r=e.titleId,c=Yt(e,Kt);return a.createElement("svg",Jt({id:"eye-fill",xmlns:"http://www.w3.org/2000/svg",width:21.017,height:21.017,viewBox:"0 0 21.017 21.017",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,Tt||(Tt=a.createElement("path",{id:"Path_36935","data-name":"Path 36935",d:"M0,0H21.017V21.017H0Z",fill:"none"})),Et||(Et=a.createElement("path",{id:"Path_36936","data-name":"Path 36936",d:"M1.181,10.882a9.635,9.635,0,0,1,18.949,0,9.635,9.635,0,0,1-18.949,0Zm9.474,4.379a4.379,4.379,0,1,0-4.379-4.379A4.379,4.379,0,0,0,10.655,15.26Zm0-1.751a2.627,2.627,0,1,1,2.627-2.627A2.627,2.627,0,0,1,10.655,13.509Z",transform:"translate(-0.147 -0.373)",fill:"{props.fill}"})))}var Xt,$t,en=a.forwardRef(Zt),tn=(n.p,["title","titleId"]);function nn(){return nn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nn.apply(this,arguments)}function an(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rn(e,t){var n=e.title,r=e.titleId,c=an(e,tn);return a.createElement("svg",nn({id:"edit-box-fill",xmlns:"http://www.w3.org/2000/svg",width:21.137,height:21.137,viewBox:"0 0 21.137 21.137",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,Xt||(Xt=a.createElement("path",{id:"Path_36939","data-name":"Path 36939",d:"M0,0H21.137V21.137H0Z",fill:"none"})),$t||($t=a.createElement("path",{id:"Path_36940","data-name":"Path 36940",d:"M15.116,2.893,8.54,9.468l.007,3.74L12.28,13.2l6.573-6.573V17.864a.881.881,0,0,1-.881.881H3.881A.881.881,0,0,1,3,17.864V3.773a.881.881,0,0,1,.881-.881ZM18.4,2.1l1.246,1.247-8.1,8.1-1.244,0,0-1.248Z",transform:"translate(-0.358 -0.251)",fill:"{props.fill}"})))}var cn,sn,on=a.forwardRef(rn),un=(n.p,["title","titleId"]);function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ln.apply(this,arguments)}function dn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bn(e,t){var n=e.title,r=e.titleId,c=dn(e,un);return a.createElement("svg",ln({id:"add-box-fill",xmlns:"http://www.w3.org/2000/svg",width:21.137,height:21.137,viewBox:"0 0 21.137 21.137",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,cn||(cn=a.createElement("path",{id:"Path_36943","data-name":"Path 36943",d:"M0,0H21.137V21.137H0Z",fill:"none"})),sn||(sn=a.createElement("path",{id:"Path_36944","data-name":"Path 36944",d:"M3.881,3H17.972a.881.881,0,0,1,.881.881V17.972a.881.881,0,0,1-.881.881H3.881A.881.881,0,0,1,3,17.972V3.881A.881.881,0,0,1,3.881,3Zm6.165,7.046H6.523v1.761h3.523V15.33h1.761V11.807H15.33V10.046H11.807V6.523H10.046Z",transform:"translate(-0.358 -0.358)",fill:"{props.fill}"})))}var jn,mn,On=a.forwardRef(bn),pn=(n.p,n(125)),hn=["title","titleId"];function fn(){return fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fn.apply(this,arguments)}function xn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vn(e,t){var n=e.title,r=e.titleId,c=xn(e,hn);return a.createElement("svg",fn({id:"save-fill",xmlns:"http://www.w3.org/2000/svg",width:21.137,height:21.137,viewBox:"0 0 21.137 21.137",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,jn||(jn=a.createElement("path",{id:"Path_36941","data-name":"Path 36941",d:"M0,0H21.137V21.137H0Z",fill:"none"})),mn||(mn=a.createElement("path",{id:"Path_36942","data-name":"Path 36942",d:"M16.21,18.853V11.807H5.642v7.046H3.881A.881.881,0,0,1,3,17.972V3.881A.881.881,0,0,1,3.881,3H15.33l3.523,3.523V17.972a.881.881,0,0,1-.881.881Zm-1.761,0H7.4V13.568h7.046Z",transform:"translate(-0.358 -0.358)",fill:"{props.fill}"})))}var gn,In,yn,wn,Nn,kn,An,Sn,Cn,Dn,_n,Pn,Rn,Bn,Mn,Tn,En=a.forwardRef(vn),Ln=(n.p,["title","titleId"]);function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fn.apply(this,arguments)}function qn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gn(e,t){var n=e.title,r=e.titleId,c=qn(e,Ln);return a.createElement("svg",Fn({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"21px",height:"21px",viewBox:"0 0 45 45",style:{enableBackground:"new 0 0 45 45"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,gn||(gn=a.createElement("g",null,a.createElement("path",{d:"M42.5,19.408H40V1.843c0-0.69-0.561-1.25-1.25-1.25H6.25C5.56,0.593,5,1.153,5,1.843v17.563H2.5 c-1.381,0-2.5,1.119-2.5,2.5v20c0,1.381,1.119,2.5,2.5,2.5h40c1.381,0,2.5-1.119,2.5-2.5v-20C45,20.525,43.881,19.408,42.5,19.408z  M32.531,38.094H12.468v-5h20.063V38.094z M37.5,19.408H35c-1.381,0-2.5,1.119-2.5,2.5v5h-20v-5c0-1.381-1.119-2.5-2.5-2.5H7.5 V3.093h30V19.408z M32.5,8.792h-20c-0.69,0-1.25-0.56-1.25-1.25s0.56-1.25,1.25-1.25h20c0.689,0,1.25,0.56,1.25,1.25 S33.189,8.792,32.5,8.792z M32.5,13.792h-20c-0.69,0-1.25-0.56-1.25-1.25s0.56-1.25,1.25-1.25h20c0.689,0,1.25,0.56,1.25,1.25 S33.189,13.792,32.5,13.792z M32.5,18.792h-20c-0.69,0-1.25-0.56-1.25-1.25s0.56-1.25,1.25-1.25h20c0.689,0,1.25,0.56,1.25,1.25 S33.189,18.792,32.5,18.792z"}))),In||(In=a.createElement("g",null)),yn||(yn=a.createElement("g",null)),wn||(wn=a.createElement("g",null)),Nn||(Nn=a.createElement("g",null)),kn||(kn=a.createElement("g",null)),An||(An=a.createElement("g",null)),Sn||(Sn=a.createElement("g",null)),Cn||(Cn=a.createElement("g",null)),Dn||(Dn=a.createElement("g",null)),_n||(_n=a.createElement("g",null)),Pn||(Pn=a.createElement("g",null)),Rn||(Rn=a.createElement("g",null)),Bn||(Bn=a.createElement("g",null)),Mn||(Mn=a.createElement("g",null)),Tn||(Tn=a.createElement("g",null)))}var Un=a.forwardRef(Gn),Qn=(n.p,{view:!0,edit:!0,add:!0,refresh:!1,save:!1,print:!1}),Vn=function(e){var t=e.val,n=e.change_state,r=e.disabledAction,c={view:r&&r.view?r.view:"",add:r&&r.add?r.add:"",edit:r&&r.edit?r.edit:"",refresh:r&&r.refresh?r.refresh:"",save:r&&r.save?r.save:"",print:r&&r.print?r.save:""},s=Object(a.useState)(!0),i=Object(o.a)(s,2),u=i[0],l=i[1],b=Object(a.useState)(Qn),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)(c),h=Object(o.a)(p,2),f=h[0];h[1];return Object(a.useEffect)((function(){var e="view"===t?Object(d.a)(Object(d.a)({},Qn),{},{view:!1,refresh:!0,edit:!1,add:!1,print:!0}):"edit"===t?{add:!1,save:!0,refresh:!0,view:!1,edit:!1,print:!0}:"refresh"===t?Qn:"add"===t?{add:!1,save:!0,refresh:!0,view:!1,edit:!1,print:!1}:Qn;O(e)}),[t]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"commonFormAction",children:[Object(Te.jsxs)("ul",{className:!0===u?"active":"",children:[Object(Te.jsx)("li",{children:Object(Te.jsx)("button",{title:"View",className:!0===m.view&&"disable"!==f.view?"active":"disable",onClick:!0===m.view&&"disable"!==f.view?function(){return n("view")}:function(){return!1},children:Object(Te.jsx)(en,{fill:!0===m.view&&"disable"!==f.view?"#ffffff":"#c7d7eb"})})}),Object(Te.jsx)("li",{children:Object(Te.jsx)("button",{title:"Refresh",className:!0===m.refresh&&"disable"!==f.refresh?"active":"disable",onClick:!0===m.refresh&&"disable"!==f.refresh?function(){return n("refresh")}:function(){return!1},children:Object(Te.jsx)(pn.a,{fill:!0===m.refresh&&"disable"!==f.refresh?"#ffffff":"#c7d7eb"})})}),Object(Te.jsx)("li",{children:Object(Te.jsx)("button",{title:"Edit",className:!0===m.edit&&"disable"!==f.edit?"active":"disable",onClick:!0===m.edit&&"disable"!==f.edit?function(){return n("edit")}:function(){return!1},children:Object(Te.jsx)(on,{fill:!0===m.edit&&"disable"!==f.edit?"#ffffff":"#c7d7eb"})})}),Object(Te.jsx)("li",{children:Object(Te.jsx)("button",{title:"Save",className:!0===m.save&&"disable"!==f.save?"active":"disable",onClick:!0===m.save&&"disable"!==f.save?function(){return n("save")}:function(){return!1},children:Object(Te.jsx)(En,{fill:!0===m.save&&"disable"!==f.save?"#ffffff":"#c7d7eb"})})}),Object(Te.jsx)("li",{children:Object(Te.jsx)("button",{title:"Add",className:!0===m.add&&"disable"!==f.add?"active":"disable",onClick:!0===m.add&&"disable"!==f.add?function(){return n("add")}:function(){return!1},children:Object(Te.jsx)(On,{fill:!0===m.add&&"disable"!==f.add?"#ffffff":"#c7d7eb"})})}),Object(Te.jsx)("li",{children:Object(Te.jsx)("button",{className:!0===m.print&&"disable"!==f.print?"active":"disable",onClick:!0===m.print&&"disable"!==f.print?function(){return n("print")}:function(){return!1},children:Object(Te.jsx)(Un,{fill:!0===m.print&&"disable"!==f.print?"#ffffff":"#c7d7eb"})})})]}),Object(Te.jsx)("button",{className:"linkCloseBtn",onClick:function(){return l(!u)}})]})})},zn=Object(a.memo)(Vn),Hn=(n(337),n(524)),Wn=n(210),Kn=function(e){var t=e.onlinestatus,n=e.pageNav,r={Id:0,DecimalDigit:"",UnitName:"",UnitSymbol:""},c=Object(a.useState)(void 0),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(r),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(null),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(!1),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(!1),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),q=Object(o.a)(F,2),G=q[0],U=(q[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=7;break}if(!t){e.next=6;break}return I(r),e.abrupt("return",j(n));case 6:alert("you are not online please try again after some time when you online");case 7:if("edit"!==n){e.next=13;break}return e.next=10,Q();case 10:return I(r),B(!0),e.abrupt("return",j(n));case 13:if("view"!==n){e.next=19;break}return e.next=16,Q();case 16:return I(r),B(!0),e.abrupt("return",j(n));case 19:if("save"!==n){e.next=32;break}if(a=Object.keys(p),c=Object.values(p),!(c.filter((function(e){return""===e||!0===e})).length>0)){e.next=30;break}return s={},a.forEach((function(e,t){return s[e]=""===c[t]||!0===c[t]})),h(s),e.abrupt("return",!1);case 30:return t?z():alert("you are not online please try again after some time when you online"),e.abrupt("return");case 32:if("refresh"!==n){e.next=36;break}return I(r),h(r),e.abrupt("return",j(n));case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.unitMaster.toArray();case 2:t=e.sent,k(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var t=e.target,n=t.name,a=t.value,c=e.target.getAttribute("data-valid");c&&("UnitSymbol"===n&&""===a?(I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a))),I(r),h(r),B(!0)):Me(e.target.value,c)?(I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},n,!1)))):(I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},n,!0)))))},z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={DecimalDigit:parseInt(g.DecimalDigit),UnitName:g.UnitName,UnitSymbol:g.UnitSymbol},!g.id){e.next=8;break}return e.next=4,He("/api/UnitMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:g.Id}));case 4:202===(n=e.sent).statuscode?v.unitMaster.update(g.id,Object(d.a)(Object(d.a)({},t),{},{Id:g.Id})).then((function(e){alert(n.msg),U("refresh")})):alert(n.msg,"statuscode:",n.statuscode),e.next=12;break;case 8:return e.next=10,ze("/api/UnitMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:0}));case 10:(a=e.sent).mid>0&&null!==a.mid?v.unitMaster.add(Object(d.a)(Object(d.a)({},t),{},{Id:a.mid})).then((function(e){alert(a.msg),U("refresh")})):alert(a.msg,"statuscode:",a.statuscode);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){E&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),D(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[N,b,E]);var H={val:b,change_state:U,disabledAction:G};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},H)),Object(Te.jsxs)("div",{className:"unitMaster",children:[Object(Te.jsxs)("div",{className:p&&!0===p.UnitSymbol?"error marg":"marg",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Short Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),("view"===b||"edit"===b)&&!0===R?Object(Te.jsx)(Hn.a,{options:N,open:C,onChange:function(e,t){return function(e){if(e){D(!1),B(!1);var t={Id:e.Id,id:e.id,UnitName:e.UnitName,UnitSymbol:e.UnitSymbol,DecimalDigit:e.DecimalDigit};h(t),I(t)}}(t)},getOptionLabel:function(e){return e.UnitSymbol},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return L(!0)},onBlur:function(){L(!1),D(!1)}}))}}):Object(Te.jsx)("input",{name:"UnitSymbol",onChange:V,type:"text","data-valid":"varChar",value:g&&g.UnitSymbol,className:p&&!0===p.UnitSymbol?"error":"",readOnly:"view"===b||void 0===b})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Formal Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{name:"UnitName",onChange:V,type:"text","data-valid":"varCharSpace",value:g&&g.UnitName,className:p&&!0===p.UnitName?"error":"",readOnly:"view"===b||void 0===b})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"No. of Decimal Place"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{name:"DecimalDigit",onChange:V,type:"text","data-valid":"varChar",value:g&&g.DecimalDigit,className:p&&!0===p.DecimalDigit?"error":"",readOnly:"view"===b||void 0===b})]})]})]})})},Jn=n(33),Yn=n(100);var Zn=function(e){var t=e.columns,n=e.data,a=e.updateMyData,r=e.itemList,c=e.selectedProduct,s=e.selectedRowId,o=e.getTrProps,i=e.editCoulmn,u=e.boughtBatchSerials;console.log(i,"edit Column");var l=Object(Yn.useTable)({columns:t,data:n,updateMyData:a,itemList:r,selectedProduct:c,selectedRowId:s,boughtBatchSerials:u},Yn.useRowSelect),b=l.getTableProps,j=l.getTableBodyProps,m=l.headerGroups,O=l.rows,p=l.prepareRow;return l.selectedRow,l.selectedFlatRows,Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("div",{style:{width:"100%",overflowX:"scroll"},children:Object(Te.jsxs)("table",Object(d.a)(Object(d.a)({},b()),{},{className:"tableView",children:[Object(Te.jsx)("thead",{children:m.map((function(e){return Object(Te.jsx)("tr",Object(d.a)(Object(d.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(Te.jsx)("th",Object(d.a)(Object(d.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(Te.jsx)("tbody",Object(d.a)(Object(d.a)({},j()),{},{children:O.map((function(e,t){return p(e),Object(Te.jsx)("tr",{className:s&&s===e.id?"selected":"",onClick:function(t){return o(e)},children:e.cells.map((function(e){return Object(Te.jsx)("td",Object(d.a)(Object(d.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))},t)}))}))]}))})})},Xn=(n(233),function(e,t,n){return e>=0&&!(e.length<t||e.length>n)}),$n=n(11),ea=n(522),ta=n(518),na=n(523),aa=n(526),ra=n(95),ca=["onClickOk","bnoi","didBatchListSubmit"],sa=function(e){var t=e.onClickOk,n=e.bnoi,r=e.didBatchListSubmit,c=Object($n.a)(e,ca);Object(a.useRef)([]);return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(ea.a,Object(d.a)(Object(d.a)({},c),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,scrollable:!0,children:[Object(Te.jsx)(ea.a.Header,{closeButton:!0,children:Object(Te.jsx)(ea.a.Title,{id:"contained-modal-title-hcenter",style:{textAlign:"center"},children:"Batch Number List Detail"})}),Object(Te.jsxs)(ea.a.Body,{children:[Object(Te.jsx)("h5",{style:{textAlign:"center"},children:"Batch Popup"}),Object(Te.jsxs)(ta.a,{striped:!0,bordered:!0,hover:!0,children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{children:"#"}),Object(Te.jsx)("th",{children:"Batch No."}),Object(Te.jsx)("th",{children:"Lot No."}),Object(Te.jsx)("th",{children:"Stock"}),Object(Te.jsx)("th",{children:"Qty Out"}),Object(Te.jsx)("th",{children:"Batch Date"}),Object(Te.jsx)("th",{children:"Mfg Date"}),Object(Te.jsx)("th",{children:"Exp. Date"}),Object(Te.jsx)("th",{children:"MRP"})]})}),Object(Te.jsx)("tbody",{children:0!==n.length?n&&n.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:++t}),Object(Te.jsx)("td",{children:e.batch_number}),Object(Te.jsx)("td",{children:e.lot_no}),Object(Te.jsx)("td",{children:e.qty_in}),Object(Te.jsxs)("td",{children:[Object(Te.jsx)(na.a.Control,{type:"number","aria-describedby":"passwordHelpBlock",id:"myInput",placeholder:"Qty Out.",className:"outQty",onChange:function(t){return function(e,t){Number(e.target.value)>Number(t)&&(alert("This batch stock is not available."),e.target.value="")}(t,e.qty_in)}}),Object(Te.jsx)("span",{className:"sn",style:{color:"red",fontSize:"12px"}})]}),Object(Te.jsx)("td",{children:e.batch_date}),Object(Te.jsx)("td",{children:e.mfg_date}),Object(Te.jsx)("td",{children:e.expiry_date}),Object(Te.jsx)("td",{children:e.mrp})]},t)})):Object(Te.jsx)("tr",{children:Object(Te.jsx)("td",{colSpan:9,className:"text-center",children:"No batch is avaiable."})})})]})]}),Object(Te.jsxs)(ea.a.Footer,{children:[Object(Te.jsx)(aa.a,{variant:"secondary",className:"btn btn-success",onClick:function(){return function(e){var n=document.querySelectorAll(".outQty"),a=0;return Array.from(n).map((function(e){e.value&&(a+=Number(e.value))})),t(a),r(!0),c.onHide(!1)}()},children:"OK"}),Object(Te.jsx)(aa.a,{onClick:c.onHide,children:"Close"})]})]}))})},oa=["onClickOk","snoi","checkedSerial"],ia=function(e){var t=e.onClickOk,n=e.snoi,a=e.checkedSerial,r=Object($n.a)(e,oa),c=[];n&&n.map((function(e){e&&e.map((function(e){c.push(e)}))}));return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(ea.a,Object(d.a)(Object(d.a)({},r),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,scrollable:!0,children:[Object(Te.jsx)(ea.a.Header,{closeButton:!0,children:Object(Te.jsx)(ea.a.Title,{id:"contained-modal-title-hcenter",style:{textAlign:"center"},children:"Serial Number List Detail"})}),Object(Te.jsxs)(ea.a.Body,{children:[Object(Te.jsx)("h5",{style:{textAlign:"center"},children:"Serial Popup"}),Object(Te.jsxs)(ta.a,{striped:!0,bordered:!0,hover:!0,scrollable:!0,children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{children:"#"}),Object(Te.jsx)("th",{children:"Serial Number"}),Object(Te.jsx)("th",{children:"AutoGenerated Number"}),Object(Te.jsx)("th",{children:"Batch No."}),Object(Te.jsx)("th",{children:"Warrenty Date"}),Object(Te.jsx)("th",{children:"Expiry Date"}),Object(Te.jsx)("th",{children:"Mannual Batch No."}),Object(Te.jsx)("th",{children:"Is Consumed"})]})}),Object(Te.jsx)("tbody",{children:c&&c.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:t+1}),Object(Te.jsx)("td",{children:e.serial_number}),Object(Te.jsx)("td",{children:e.auto_generated_no}),Object(Te.jsx)("td",{children:e.batch_number}),Object(Te.jsx)("td",{children:e.warrenty_date}),Object(Te.jsx)("td",{children:e.expiry_date}),Object(Te.jsx)("td",{children:e.mannual_fields}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",className:"isConsumed",data_serial_number:e.serial_number,data_auto_generated_no:e.auto_generated_no,data_batch_number:e.batch_number,data_warrenty_date:e.warrenty_date,data_expiry_date:e.expiry_date,data_mannual_fields:e.mannual_fields,data_id:e.id,data_batch_id:e.batch_id})})]},t)}))})]})]}),Object(Te.jsxs)(ea.a.Footer,{children:[Object(Te.jsx)(aa.a,{variant:"secondary",className:"btn btn-success",onClick:function(){return function(){var e=0,n=document.querySelectorAll(".isConsumed"),c=[];return Array.from(n).map((function(t){t.checked&&(e++,c.push({serial_number:t.getAttribute("data_serial_number"),auto_generated_no:t.getAttribute("data_auto_generated_no"),batch_number:t.getAttribute("data_batch_number"),warrenty_date:t.getAttribute("data_warrenty_date"),expiry_date:t.getAttribute("data_expiry_date"),mannual_fields:t.getAttribute("data_mannual_fields"),id:t.getAttribute("data_id"),batch_id:t.getAttribute("data_batch_id")}))})),a(c),t(e),r.onHide(!1)}()},children:"OK"}),Object(Te.jsx)(aa.a,{onClick:r.onHide,children:"Close"})]})]}))})},ua=function(e){var t=e.value,n=e.row.index,c=e.column.id,s=e.data,d=e.updateMyData,b=e.boughtBatchSerials,j=r.a.useState(t),m=Object(o.a)(j,2),O=m[0],p=m[1],h=r.a.useState({}),f=Object(o.a)(h,2),x=f[0],v=f[1],g=r.a.useState(!1),I=Object(o.a)(g,2),y=I[0],w=I[1],N=r.a.useState(!1),k=Object(o.a)(N,2),A=k[0],S=k[1],C=r.a.useState(0),D=Object(o.a)(C,2),_=D[0],P=D[1],R=r.a.useState([]),B=Object(o.a)(R,2),M=B[0],T=B[1],E=r.a.useState([]),L=Object(o.a)(E,2),F=L[0],q=L[1],G=r.a.useState([]),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=r.a.useState(!1),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)([]),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1];r.a.useEffect(Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(s[n].ItemId);case 2:t=e.sent,q(t.batchnumber),V(t.serialnumber);case 5:case"end":return e.stop()}}),e)}))),[]),r.a.useEffect((function(){W&&("true"==s[n].IsSerial&&w(!0),K(!1))}),[W]),r.a.useEffect((function(){"quantity"===c&&("true"==s[n].IsSerial?(p(_),d(n,c,_)):(p(M),d(n,c,_)))}),[_,M]),r.a.useEffect((function(){if(null!=Z){console.log(Z,"checkedSerialData,checkedSerialData"),console.log(F,"batchNumberOfItem,batchNumberOfItem");var e=[],t=[];Z.map((function(t){-1===e.indexOf(t.batch_id)&&e.push(t.batch_id)})),console.log(e,"selected_batch_id,selected_batch_id"),e.map((function(e){t.push(F.find((function(t){return t.batch_id==e})))})),console.log(t,"selected_batch_data selected_batch_data"),b({bought_batch:t,bought_serials:Z})}}),[Z]);var $=function(e){return e?parseFloat(e):e},ee=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(n,c,O);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){console.log(t,"initialValueinitialValueinitialValue"),p(t)}),[t]),Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{children:[Object(Te.jsx)("input",{value:O,onFocus:function(){},onChange:function(e){"Rate"===c?"0"===e.target.value?(v(Object(l.a)({},c+"error","Please enter value greater than 0")),setTimeout((function(){v(Object(l.a)({},c+"error",""))}),2e3),p(s[n].mrp)):Xn(e.target.value,0,17)?s&&s[n].mrp>0&&$(s[n].mrp)>=$(e.target.value)||s&&0===s[n].mrp?(p(e.target.value),v(Object(l.a)({},c+"error",""))):(p(s[n].mrp),alert("sale price should be less than equal to mrp")):(v(Object(l.a)({},c+"error","Please enter number")),setTimeout((function(){v(Object(l.a)({},c+"error",""))}),2e3)):"quantity"===c?"0"===e.target.value?(v(Object(l.a)({},c+"error","Please enter value greater than 0")),setTimeout((function(){v(Object(l.a)({},c+"error",""))}),2e3)):Xn(e.target.value,0,17)?e.target.value>s[n].stock?(p(e.target.value),setTimeout((function(){alert("item quantity out of stock"),p("")}),500)):("true"==s[n].IsLot&&setTimeout((function(){S(!0)}),1e3),p(e.target.value),v(Object(l.a)({},c+"error",""))):(v(Object(l.a)({},c+"error","Please enter number")),setTimeout((function(){v(Object(l.a)({},c+"error",""))}),2e3)):"requiredQty"===c?(console.log(e.target.value,"DDD"),e.target.value.length>0&&p(e.target.value)):p(e.target.value)},onBlur:ee}),Object(Te.jsxs)("span",{style:{color:"red"},children:[" ",x[c+"error"]," "]})]}),Object(Te.jsx)(sa,{show:A,onHide:function(){return S(!1)},bnoi:F,onClickOk:T,didBatchListSubmit:K}),Object(Te.jsx)(ia,{show:y,onHide:function(){return w(!1)},snoi:Q,onClickOk:P,checkedSerial:X})]})},la=function(e){var t=e.value,n=e.row.index,r=e.column.id,c=e.data,s=e.updateMyData;console.log(c,"data in selectCell"),console.log(t,"initialValuee"),console.log(n,"index"),console.log(r,"id");var l=Object(a.useState)(t),d=Object(o.a)(l,2),b=d[0],j=d[1],m=Object(a.useState)(t),O=Object(o.a)(m,2),p=(O[0],O[1]),h=Object(a.useState)([]),f=Object(o.a)(h,2),x=f[0],g=f[1];return Object(a.useEffect)(Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x.length<1)){e.next=5;break}return e.next=3,v.GodownMaster.toArray().then().catch((function(e){return console.log(e)}));case 3:(t=e.sent)&&g(t);case 5:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)((function(){console.log(t,"initialValuee"),console.log(n,"index"),console.log(r,"id"),p(t),j(t)}),[t]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("select",{value:b,onChange:function(e){return function(e){e.preventDefault(),j(e.target.value),console.log(b,"value in select cell"),console.log(e.target.value,"e.target.valuee.target.value in seelct cell"),s(n,r,e.target.value)}(e)},style:{width:"150px"},children:[Object(Te.jsx)("option",{value:"0",children:"select"}),x.map((function(e,t){return Object(Te.jsx)("option",{value:parseInt(e.storeid),children:e.Storename},t)}))]})})};n(269);function da(e){return e>0?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e}var ba=[{Header:"Product Name",accessor:"ItemName",disableFilters:!1,sticky:"left"},{Header:"Product Code",accessor:"ItemCode",sticky:"left"},{Header:"Unit",accessor:"UnitName",cell:"EditInput"},{Header:"Godown",accessor:"storeid",sticky:"left",Cell:la},{Header:"Stock",accessor:"stock",sticky:"left"},{Header:"Qty",accessor:"quantity",Cell:ua,sticky:"right"},{Header:"MRP",accessor:"mrp",right:!0},{Header:"Sale Price",accessor:"Rate",Cell:ua,sticky:"right"},{Header:"Gross Amount",accessor:"grossamount",sticky:"right"},{Header:"Auto Discount (%)",accessor:"autodiscountper",sticky:"right"},{Header:"Auto Discount Amount",accessor:"autodiscountamount",sticky:"right"},{Header:"Manual Discount (%)",accessor:"manualdiscountper",Cell:ua,sticky:"right"},{Header:"Manual Discount Amount",accessor:"manualdiscountamount",sticky:"right"},{Header:"Amount",accessor:"amount",sticky:"right",right:!0,Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:da(e.value)})}},{Header:"Item Remark",accessor:"remark",Cell:ua},{Header:"IGST Rate %",accessor:"igstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:e.value})}},{Header:"IGST Amount",accessor:"igst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:da(e.value)})}},{Header:"CGST Rate %",accessor:"cgstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:e.value})}},{Header:"CGST Amount",accessor:"cgst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:da(e.value)})}},{Header:"SGST Rate %",accessor:"sgstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:da(e.value)})}},{Header:"SGST Amount",accessor:"sgst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:da(e.value)})}},{Header:"Scheme Code",accessor:"schemeCode"}];function ja(e){return e>0?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e}var ma=[{Header:"Product Name",accessor:"ItemName",disableFilters:!1,sticky:"left"},{Header:"Product Code",accessor:"ItemCode",sticky:"left"},{Header:"Unit",accessor:"UnitName"},{Header:"Godown",accessor:"storeid",sticky:"left"},{Header:"Stock",accessor:"stock",sticky:"left"},{Header:"Qty",accessor:"quantity",sticky:"right"},{Header:"MRP",accessor:"mrp",right:!0},{Header:"Sale Price",accessor:"Rate",sticky:"right"},{Header:"Gross Amount",accessor:"grossamount",sticky:"right"},{Header:"Auto Discount (%)",accessor:"autodiscountper",sticky:"right"},{Header:"Auto Discount Amount",accessor:"autodiscountamount",sticky:"right"},{Header:"Manual Discount (%)",accessor:"manualdiscountper",sticky:"right"},{Header:"Manual Discount Amount",accessor:"manualdiscountamount",sticky:"right"},{Header:"Amount",accessor:"amount",sticky:"right",right:!0,Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:ja(e.value)})}},{Header:"Item Remark",accessor:"remark"},{Header:"IGST Rate %",accessor:"igstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:e.value})}},{Header:"IGST Amount",accessor:"igst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:ja(e.value)})}},{Header:"CGST Rate %",accessor:"cgstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:e.value})}},{Header:"CGST Amount",accessor:"cgst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:ja(e.value)})}},{Header:"SGST Rate %",accessor:"sgstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:ja(e.value)})}},{Header:"SGST Amount",accessor:"sgst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:ja(e.value)})}},{Header:"Scheme Code",accessor:"schemeCode"}],Oa=n(28),pa=n.n(Oa),ha=(n(55),function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var e=setInterval((function(){var e=new Date,t=e.getHours()%12,n=e.getHours()>=12?"PM":"AM",a=(12===t?"00":0===t?"12":t)+":"+e.getMinutes()+":"+e.getSeconds()+" "+n;c(a)}),1e3);return function(){clearInterval(e)}}),[]),Object(Te.jsx)("input",{ref:e.reff,id:"demo",type:"text",value:r,readOnly:!0,className:e.className})}),fa=(n(356),function(e){var t=e.name,n=e.optionList,r=e.optionGet,c=e.value,l=Object(a.useState)(c),d=Object(o.a)(l,2),b=d[0],j=d[1],m=Object(a.useState)([]),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(),x=Object(o.a)(f,2),v=x[0],g=x[1],I=Object(a.useState)(!1),y=Object(o.a)(I,2),w=y[0],N=y[1],k=Object(a.useState)(),A=Object(o.a)(k,2),S=A[0],C=A[1],D=Object(a.useState)(""),_=Object(o.a)(D,2),P=_[0],R=_[1],B=Object(a.useRef)(),M=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:!1!==e.sent&&j(n[t]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(a.useCallback)((function(){var e=n&&n.slice(0,200);h(e)}),[n]);Object(a.useEffect)((function(){T()}),[T]);var E=Object(a.useCallback)((function(e){s.a.render(w&&P===t?Object(Te.jsx)("div",{className:"optionList",style:e,children:Object(Te.jsx)("ul",{children:p&&p.length>0?p.map((function(e,n){return Object(Te.jsx)("li",{onClick:function(){return M(e)},children:e[t]},n)})):Object(Te.jsx)("li",{children:"No Item"})})}):"",document.getElementById("options"))}),[t,p,w,P]);return Object(a.useEffect)((function(){v&&E(v);var e=function(e){N(!0)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[E,p,w,v,P]),Object(a.useEffect)((function(){j(c)}),[c]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("input",{type:"text",name:t,value:b,onFocus:function(e){return function(e){R(""),N(!1),C("");var n=B.current.getBoundingClientRect(),a=document.getElementById("options");a&&a.parentNode.removeChild(a);var r=document.createElement("div");r.id="options",document.body.appendChild(r);var c=window.innerHeight,s=n.top,o=!1===s+200>c?s+n.height+window.pageYOffset+5:s-200+window.pageYOffset-5,i={position:"absolute",left:n.left+"px",top:o+"px",width:n.width>200?n.width:"200px"};g(i),E(i),R(t)}()},ref:B,autoComplete:"off",onBlur:function(){return function(){var e=setTimeout((function(){N(!1),R(),S&&j(S)}),500);return function(){return clearTimeout(e)}}()},onChange:function(e){return function(e){j(e.target.value);var t=null===n||void 0===n?void 0:n.filter((function(t){return t[e.target.name].startsWith(e.target.value)}));h(t)}(e)}})})}),xa=function(e){var t=e.name,n=e.value,r=e.onchange,c=e.slOption,s=Object(a.useState)(n),i=Object(o.a)(s,2),u=i[0],l=i[1];return Object(a.useEffect)((function(){}),[r]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("select",{name:t,value:u,onChange:function(e){return function(e){var t=r(e);l(t)}(e)},children:[Object(Te.jsx)("option",{value:"",children:"Select"}),c&&c.map((function(e,t){return Object(Te.jsx)("option",{value:e.value,children:e.label},t)}))]})})},va=function(e){var t=e.name,n=e.value,r=e.onchange,c=Object(a.useState)(n),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){}),[r]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("input",{name:t,value:i,onChange:function(e){return function(e){var t=r(e);u(t)}(e)}})})},ga=function(e){var t=e.name,n=e.value,r=e.onchange,c=Object(a.useState)(n),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){u(n)}),[r,i]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("input",{value:i,name:t,type:"date",onChange:function(e){return function(e){r(e),u(e.target.value)}(e)}})})},Ia=function(e){var t=e.id,n=e.value,r=e.onchange,c=Object(a.useState)(n),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){}),[i,n]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("input",{type:"checkbox",onChange:function(e){return function(e){u(e.target.value),r(e)}(e)},checked:t===n,id:t})})},ya=function(e){var t=e.name,n=e.value,r=e.onchange,c=Object(a.useState)(n),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){}),[i]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("input",{type:"checkbox",className:"checkbox",onChange:function(e){return function(e){u(e.target.checked),r(e)}(e)},checked:i,name:t})})},wa=function(e){var t=e.name,n=e.value;return Object(a.useEffect)((function(){}),[n]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("input",{type:"checkbox",className:"checkbox",checked:n,name:t})})},Na=function(e){var t=e.overFlowScroll,n=e.coulmn,r=e.data,c=e.checkbox,s=e.selectedRows,i=e.selectedTr,u=e.getCheckedItem,l=e.tblInputOnchange,d=e.editColumn,b=e.Footer,j=(e.deleteRow,e.editfunction),m=e.editStatus,O=e.optionList,p=e.getAutocompleteOption,h=e.itemAdd,f=e.refreshTable,x=e.editbtnText,v=e.tableDate,g=e.oncheck,I=e.Viewbtnclick,y=e.filter,w=Object(a.useState)([]),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(c?150*n.length+50:150*n.length),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(0),B=Object(o.a)(P,2),M=B[0],T=B[1],E=Object(a.useState)(100),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)([]),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=Object(a.useState)([]),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(s||[]),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(),re=Object(o.a)(ae,2),ce=re[0],se=re[1],oe=Object(a.useState)(),ie=Object(o.a)(oe,2),ue=ie[0],le=ie[1],de=Object(a.useState)(),be=Object(o.a)(de,2),je=be[0],me=be[1],Oe=Object(a.useState)(),pe=Object(o.a)(Oe,2),he=(pe[0],pe[1]),fe=Object(a.useState)(),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=Object(a.useState)(0),ye=Object(o.a)(Ie,2),we=ye[0],Ne=ye[1],ke=Object(a.useState)(),Ae=Object(o.a)(ke,2),Se=Ae[0],Ce=Ae[1],De=Object(a.useRef)(null),_e=Object(a.useRef)(null),Pe=Object(a.useRef)(null),Re=function(e,t){if(r&&r.length>99){var n=r.slice(e,t);V(n)}else V(r)},Be=function(e,t){ce!==t&&(se(t),ne(e),i(e),me(!1))},Me=function(e){if(e.target.checked){X([].concat(Object(R.a)(Z),[parseInt(e.target.id)]));var t=Q&&Q.find((function(t){return t.ItemId===parseInt(e.target.id)}));K((function(e){return[].concat(Object(R.a)(e),[t])}))}else{var n=Z.filter((function(t){return t!==parseInt(e.target.id)}));X(n);var a=W&&W.filter((function(t){return t.ItemId!==parseInt(e.target.id)}));K(a)}},Ee=function(e){var t=e.target;if(t.scrollTop>t.scrollHeight/1.2){var n=setTimeout((function(){var e=F+1,t=F+100;!function(e,t){var n=r&&r.slice(e,t);n.length>0&&V([].concat(Object(R.a)(Q),Object(R.a)(n)))}(e,t),T(e),q(t)}),100);return function(){return clearTimeout(n)}}},Le=Object(a.useCallback)((function(){var e=Z.map((function(e){return r.filter((function(t){return t.id===e}))[0]}));K(e)}),[Z,r]);Object(a.useEffect)((function(){Le()}),[Le]),Object(a.useEffect)((function(){me(m)}),[m,je]);var Fe=function(e){setTimeout((function(){var t,n=[],a=Object(Jn.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push(r.getBoundingClientRect().height)}}catch(c){a.e(c)}finally{a.f()}le(n[0])}),100)},qe=Object(a.useCallback)((function(e){if(e!==ve){for(var t=[],a=Pe.current.getBoundingClientRect().width,r=0,s=0;s<e.length;s+=1){var o=0;if(c)if(0===s)o=e[s].getBoundingClientRect().width<120?120:e[s].getBoundingClientRect().width>250?250:e[s].getBoundingClientRect().width;else o=void 0!==n[s-1].width?n[s-1].width:e[s].getBoundingClientRect().width<120?120:e[s].getBoundingClientRect().width>250?250:e[s].getBoundingClientRect().width;else o=void 0!==n[s].width?n[s].width:e[s].getBoundingClientRect().width<120?120:e[s].getBoundingClientRect().width>250?250:e[s].getBoundingClientRect().width;t.push(o),r+=o}_(r<a?a:r),A(t)}}),[ve]);Object(a.useEffect)((function(){if(t){var e=_e.current.children[0].children,n=De.current.children[0].children;void 0!==e&&(he(e),Fe(e)),void 0!==n&&(ge(n),qe(n))}}),[Q]),Object(a.useEffect)((function(){if(Re(M,F),t){var e=_e.current.children[0].children,n=De.current.children[0].children;void 0!==e&&(he(e),Fe(e)),void 0!==n&&(ge(n),qe(n))}}),[t,qe,r]),Object(a.useEffect)((function(){u&&u(W)}),[ce,u,W,r]);Object(a.useEffect)((function(){f&&(se(),ne(),i(),me(!1))}),[f]);var Ge=t&&!0===t?Object(Te.jsx)("div",{className:"customTblHead",style:{width:D+"px"},children:Object(Te.jsx)("table",{style:{width:D+"px"},children:Object(Te.jsx)("thead",{ref:_e,children:Object(Te.jsxs)("tr",{children:[c&&Object(Te.jsx)("th",{style:{width:"50px"},children:"\xa0"}),n.map((function(e,t){return Object(Te.jsx)("th",{style:{width:!0===c?k[t+1]+"px":k[t]+"px"},children:Object(Te.jsx)(ot,{content:e.header})},t)}))]})})})}):Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[c&&Object(Te.jsx)("td",{style:{width:"50px"},children:"\xa0"}),n.map((function(e,t){return Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:e.header})},t)}))]})}),Ue=t&&!0===t?Object(Te.jsx)("div",{className:"customTblBody",style:{maxHeight:"350px",marginTop:ue+"px",width:D+"px"},onScroll:function(e){return Ee(e)},children:Object(Te.jsx)("table",{style:{width:D+"px"},children:Object(Te.jsx)("tbody",{ref:De,children:Q&&Q.length>0?Q.map((function(e,t){return Object(Te.jsxs)("tr",{onClick:i&&d?function(n,a){return Be(e,t)}:function(){return!1},className:ce===t&&d?"selected":"",children:[c&&Object(Te.jsx)("td",{style:{width:"50px"},children:Z&&Z.length>0?Object(Te.jsx)(Ia,{id:e.ItemId,value:Z.find((function(t){return parseInt(e.ItemId)===t?e.ItemId:""})),onchange:function(e){return Me(e)}}):Object(Te.jsx)(Ia,{id:e.ItemId,value:"",onchange:function(e){return Me(e)}})}),n.map((function(n,a){return Object(Te.jsx)("td",{style:{width:!0===c?k[a+1]+"px":k[a]+"px"},children:d&&"EditInput"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(va,{name:n.field,value:e[n.field],onchange:l}):d&&"select"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(xa,{value:e[n.field],name:n.field,slOption:n.slOption,onchange:l}):d&&"autocomplete"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(fa,{optionList:O,value:e[n.field],optionGet:p,name:n.field}):d&&"date"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(ga,{name:n.field,value:e[n.field],onchange:v}):d&&"checkbox"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(ya,{name:n.field,value:e[n.field],onchange:g}):"checkbox"===n.cell?Object(Te.jsx)(wa,{name:n.field,value:e[n.field],onchange:g}):!0===n.viewBtn?Object(Te.jsx)("button",{className:"btn btnGreen",onClick:function(){return I(void 0===e.Id||0===e.Id||""===e.Id?e.id:e.Id)},children:n.viewBtntext}):e[n.field]},a)}))]},t)})):Object(Te.jsx)("tr",{children:Object(Te.jsx)("td",{colSpan:n.length,style:{padding:"8px 10px"},children:Object(Te.jsx)(ot,{content:"No Data Available"})})})})})}):Object(Te.jsx)("tbody",{children:Q&&Q.length>0?Q.map((function(e,t){return Object(Te.jsxs)("tr",{onClick:i&&d?function(n,a){return Be(e,t)}:function(){return!1},className:ce===t&&d?"selected":"",children:[c&&Object(Te.jsx)("td",{style:{width:"50px"},children:Z&&Z.length>0?Object(Te.jsx)(Ia,{id:e.ItemId,value:Z.find((function(t){return parseInt(e.ItemId)===t?e.ItemId:""})),onchange:function(e){return Me(e)}}):Object(Te.jsx)(Ia,{id:e.ItemId,value:"",onchange:function(e){return Me(e)}})}),n.map((function(n,a){return Object(Te.jsx)("td",{children:d&&"EditInput"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(va,{name:n.field,value:e[n.field],onchange:l}):d&&"date"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(ga,{name:n.field,value:e[n.field],onchange:v}):"select"===n.cell?Object(Te.jsx)(xa,{value:e[n.field],name:n.field,slOption:n.slOption,onchange:l}):d&&"checkbox"===n.cell&&!0!==je?Object(Te.jsx)(wa,{name:n.field,checked:e[n.field],onchange:g}):d&&"checkbox"===n.cell&&!0===je&&ce===t?Object(Te.jsx)(ya,{name:n.field,checked:e[n.field],onchange:g}):!0===n.viewBtn?Object(Te.jsx)("button",{className:"btn btnGreen",onClick:function(){return I(e.id)},children:n.viewBtntext}):e[n.field]},a)}))]},t)})):Object(Te.jsx)("tr",{children:Object(Te.jsx)("td",{colSpan:n.length,style:{padding:"8px 10px"},children:Object(Te.jsx)(ot,{content:"No Data Available"})})})}),Qe=Object(Te.jsx)("div",{className:"customfooter",children:c&&Object(Te.jsxs)("div",{className:"selectedRow",children:["Selected Row ",Object(Te.jsx)("span",{children:Z&&Z.length})]})}),Ve=h&&!te?Object(Te.jsxs)("div",{className:"col",children:[Object(Te.jsx)("button",{className:"Addbtn",onClick:h,children:"Add Item"}),Q&&Q.length>0?Object(Te.jsx)("span",{className:"addSuggestion",children:"Please select Row for edit"}):""]}):Q&&Q.length>0&&d&&te&&Object(Te.jsxs)("div",{className:"col",children:[Object(Te.jsx)("button",{className:"editBtn",onClick:function(){j()},children:x||"Edit Item"}),h&&Object(Te.jsx)("button",{className:"Addbtn",onClick:h,children:"Add Item"})]});return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"row",children:[Ve,y&&Object(Te.jsxs)("div",{className:"col filter",children:[Object(Te.jsx)("label",{children:"Search By"}),Object(Te.jsx)("select",{value:we,onChange:function(e){return function(e){Ne(e.target.value)}(e)},children:n&&n.map((function(e,t){return Object(Te.jsx)("option",{value:t,children:e.field},t)}))}),Object(Te.jsx)(fa,{optionList:r&&r.length>0?r:[],optionGet:function(e){var t=r&&r.filter((function(t){return t.id===e.id}));Ce(e[n[we].field]),V(t)},value:Se,name:n[we].field}),Object(Te.jsx)("button",{onClick:function(){return Ne(0),Re(0,100),void Ce("")},className:"refreshBtn",title:"Refresh",children:Object(Te.jsx)(pn.a,{fill:"#ffffff"})})]})]}),t&&!0===t?Object(Te.jsxs)("div",{className:"customTbl",ref:Pe,children:[Ge,Ue,!b||Q.length<20?"":Qe]}):Object(Te.jsx)("div",{children:Object(Te.jsxs)("table",{children:[Ge,Ue]})})]})},ka=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(),g=Object(o.a)(x,2),I=g[0],y=(g[1],function(){var t=Object(u.a)(Object(i.a)().mark((function t(){var n,a,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.SerialMaster.where("itemid").equals(e.batchArray[0].itemid).toArray().then().catch((function(e){return console.log(e)}));case 2:if(!((n=t.sent).length>0)){t.next=12;break}return t.next=6,Promise.all(n.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.SerialDetail.where("serialid").equals(t.serialid).first();case 2:return n=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{id:t.serialid,ItemId:t.serialid,expirydate:t.expirydate,warrentydate:t.warrentydate,batchid:n.batchid,batchdetailid:n.batchdetailid,storeid:n.storeid}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:a=t.sent,r=a.filter((function(t){return t.storeid===e.batchArray[0].storeid})),e.selectedBatchArray(e.batchArray),e.setItemSeriralList(r),e.setBatchSts(!1),e.setSerialSts(!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),w=Object(a.useCallback)((function(){if(!0===e.batchSts){console.log(j,"updateBatch"),console.log(r,"SelectRowBatch");var t=e.batchArray.map((function(e){return r.batchid===e.batchid?Object(d.a)(Object(d.a)({},e),j):e}));e.setBatchArray(t),f(!1)}}),[j,e.batchSts]),N=function(){var t=Object(u.a)(Object(i.a)().mark((function t(){var n,a,r,c,s,o,u,l,d;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getcheckedRowsPop.map((function(e){return e.ItemId})),e.setCheckedItemPopup(n),a=[],r=Object(Jn.a)(e.getcheckedRowsPop);try{for(r.s();!(c=r.n()).done;)s=c.value,a.push(s)}catch(i){r.e(i)}finally{r.f()}o=a.filter((function(t){var n=t.ItemId;return!e.product.some((function(e){return e.ItemId===n}))})),u=e.product.filter((function(e){var t=e.ItemId;return!a.some((function(e){return e.ItemId===t}))})),o.length>0?(l=[].concat(Object(R.a)(e.product),Object(R.a)(o)),e.okItemPopBtn(l)):u.length>0&&(d=e.product.filter((function(e){var t=e.ItemId;return!u.some((function(e){return e.ItemId===t}))})))?e.okItemPopBtn(d):e.okItemPopBtn("none");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){console.log("props.itemPopup");var e=function(e){"Enter"===e.key&&(e.preventDefault(),w())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[j,e.batchSts,e.itemPopup,w]),Object(a.useEffect)((function(){}),[]),Object(Te.jsx)(Te.Fragment,{children:!0===e.itemPopup?Object(Te.jsx)("div",{className:"modalPopUp ff",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:[{header:"Group",field:"groupName"},{header:"Item Name",field:"ItemName"},{header:"Item Code",field:"ItemCode"},{header:"Stock",field:"Stock"}],data:e.itemListPopup,overFlowScroll:!0,checkbox:!0,selectedRows:e.checkedItemPopup,getCheckedItem:function(t){return e.getCheckedRowsItemPopup(t)},filter:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{className:"btn btnGreen mr-5 mlAuto",onClick:function(){return N()},children:Object(Te.jsx)(ot,{content:"Ok"})}),Object(Te.jsx)("button",{className:"btn btnRed",onClick:function(){return e.setItemPopup(!1)},children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}):!0===e.batchSts?Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:[{header:"Batch No",field:"batchno"},{header:"Lot No",field:"lotno"},{header:"Stock",field:"stock"},{header:"Qty Out",field:"QtyOut",cell:"EditInput"},{header:"Batch Date",field:"batchdate"},{header:"Mfg. Date",field:"manufacturingdate"},{header:"Exp. Date",field:"expirydate"},{header:"MRP",field:"mrp"}],selectedTr:function(e){return function(e){c(e)}(e)},editColumn:!0,data:e.batchArray,overFlowScroll:!0,editStatus:h,checkbox:!1,editfunction:function(){f(!0)},tblInputOnchange:function(e){return function(e){return e.target.value>parseInt(r.stock)?(m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},e.target.name,""))),""):(m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value)}(e)},editbtnText:"Add OutQty",refreshTable:I}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{className:"btn btnGreen mr-5 mlAuto",onClick:function(){return y()},children:Object(Te.jsx)(ot,{content:"Ok"})}),Object(Te.jsx)("button",{className:"btn btnRed",onClick:function(){return e.setBatchSts(!1)},children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}):!0===e.serialSts?Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[" ",Object(Te.jsx)(Na,{coulmn:[{header:"serialno",field:"serialno"},{header:"Auto Generated",field:"uniqueserialno"},{header:"Warrenty Date",field:"warrentydate"},{header:"Expiry Date",field:"Expiry Date"}],getCheckedItem:function(t){return e.setCheckedItemSerial(t)},data:e.itemSeriralList,selectedRows:e.checkedItemSerial,overFlowScroll:!0,checkbox:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{className:"btn btnGreen mr-5 mlAuto",onClick:function(){return e.OkSerialbtn()},children:Object(Te.jsx)(ot,{content:"Ok"})}),Object(Te.jsx)("button",{className:"btn btnRed",onClick:function(){return e.setSerialSts(!1)},children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}):""})},Aa=["snb"],Sa=function(e){var t=e.snb,n=Object($n.a)(e,Aa);return console.log(t,"snb in modal snb"),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(ea.a,Object(d.a)(Object(d.a)({},n),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,scrollable:!0,children:[Object(Te.jsx)(ea.a.Header,{closeButton:!0,children:Object(Te.jsx)(ea.a.Title,{id:"contained-modal-title-hcenter",style:{textAlign:"center"},children:"Sold Items Serials Numbers."})}),Object(Te.jsxs)(ea.a.Body,{children:[Object(Te.jsx)("h5",{style:{textAlign:"center"},children:"Serial Popup"}),Object(Te.jsxs)(ta.a,{striped:!0,bordered:!0,hover:!0,scrollable:!0,children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{children:"#"}),Object(Te.jsx)("th",{children:"Serial Number"}),Object(Te.jsx)("th",{children:"AutoGenerated Number"}),Object(Te.jsx)("th",{children:"Batch No."}),Object(Te.jsx)("th",{children:"Warrenty Date"}),Object(Te.jsx)("th",{children:"Expiry Date"}),Object(Te.jsx)("th",{children:"Mannual Batch No."})]})}),Object(Te.jsx)("tbody",{children:t&&t.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:t+1}),Object(Te.jsx)("td",{children:e.serial_number}),Object(Te.jsx)("td",{children:e.auto_generated_no}),Object(Te.jsx)("td",{children:e.batch_number}),Object(Te.jsx)("td",{children:e.warrenty_date}),Object(Te.jsx)("td",{children:e.expiry_date}),Object(Te.jsx)("td",{children:e.mannual_fields})]},t)}))})]})]}),Object(Te.jsxs)(ea.a.Footer,{children:[Object(Te.jsx)(aa.a,{variant:"secondary",className:"btn btn-success",children:"OK"}),Object(Te.jsx)(aa.a,{onClick:n.onHide,children:"Close"})]})]}))})},Ca=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("UserId"),e.next=4,v.salesInvoice.where({ishold:"false"}).reverse().toArray();case 4:return n=e.sent,a=n.filter((function(e){return e.createdby===t})),e.next=8,v.saleInvoiceDetail.toArray();case 8:return r=e.sent,e.abrupt("return",{salesInvoice:a,saleInvoiceDetail:r});case 12:e.prev=12,e.t0=e.catch(0),console.log("getInvoiceDetails error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Da=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("UserId"),e.next=4,v.salesInvoice.where({ishold:"false"}).reverse().toArray();case 4:return n=e.sent,a=n.filter((function(e){return e.createdby===t})),e.next=8,v.saleInvoiceDetail.toArray();case 8:return r=e.sent,e.abrupt("return",{salesInvoice:a,saleInvoiceDetail:r});case 12:e.prev=12,e.t0=e.catch(0),console.log("getInvoiceDetails error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_a=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoice.where("id").equals(t).last((function(e){return e})).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=4;break}return e.next=3,v.saleInvoiceDetail.where("invoiceid").equals(t.id).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:t.product=e.sent;case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Pa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoice.orderBy("id").last((function(e){return e})).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=5;break}return n=t.Id>0?t.Id:t.id,e.next=4,v.saleInvoiceDetail.where("invoiceid").equals(n).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:t.product=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ra=function(e,t,n){return e=e.map((function(e){var a={invoiceid:"edit"===n?e.invoiceId:t,itemid:e.ItemId,ItemName:e.ItemName,ItemCode:e.ItemCode,HsnId:e.HsnId,quantity:e.quantity,mrp:e.mrp,UnitId:e.UnitId,UnitName:e.UnitName,storeid:e.storeid,saleprice:e.Rate,grossamount:e.grossamount,taxper:0,totaltaxamount:e.totaltaxamount,finalperrate:0,totalnetamount:e.amount,lotno:"",createdby:1,createdon:"new"===n?new Date:e.createdon,editlog:"",isvatitem:!1,addtaxrate:0,addtaxamount:0,surchargerate:0,surchargeamount:0,taxamount:0,istaxinclusive:e.IsTaxInclusive,altqty:0,salepersonid:0,changeindiscount:0,autodiscountper:0,autodiscountamount:0,manualdiscountper:e.manualdiscountper,manualdiscountamount:e.manualdiscountamount,istaxcalculatebeforediscount:!1,lotserialid:0,itemremark:e.remark,discount_slab_detail_id:0,isautodiscountonper:!1,isautodiscountonamount:!1,isaltrate:0,conversion:e.Conversion,denominator:e.Denominator,isschemeitem:0,hsnclassificationid:0,igstrate:e.igstRate,cgstrate:e.cgstRate,sgstrate:e.sgstRate,igstamount:e.igst,cgstamount:e.cgst,sgstamount:e.sgst,manualchangesaleprice:!1,sodetailid:0,schemecode:e.schemecode};return"edit"===n?Object(d.a)(Object(d.a)({},a),{},{id:e.id}):a}))},Ba=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n,a){var r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t,"object in fnSaveInvoice"),console.log(n,"product in fnSaveInvoice"),console.log(a,"object in fnSaveInvoice"),e.next=6,v.salesInvoice.add(Object(d.a)(Object(d.a)({},t),{},{new:1}));case 6:if(!((r=e.sent)>0)){e.next=14;break}if(!(n&&n.length>0)){e.next=14;break}return n=Ra(n,r,"new"),e.next=12,v.saleInvoiceDetail.bulkAdd(n);case 12:c=n.map((function(e){return{formId:a,trId:r,ItemId:e.itemid,qty:e.quantity,type:"outqty"}})),et(c);case 14:return e.abrupt("return",r);case 17:e.prev=17,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Ma=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n,a){var r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoice.put(Object(d.a)(Object(d.a)({},t),{},{new:t.new,update:1}));case 3:return n=Ra(n,t.id,"edit"),e.next=6,v.saleInvoiceDetail.where("invoiceid").anyOf(t.id).delete().then(Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.saleInvoiceDetail.bulkPut(n);case 2:case"end":return e.stop()}}),e)}))));case 6:return r=e.sent,c=n.map((function(e){return{formId:a,trId:t.id,ItemId:e.itemid,qty:e.quantity,type:"outqty"}})),tt(c),e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Ta=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=3;break}return t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.get({ItemId:t.itemid});case 2:n=e.sent,t.ItemName=n&&n.ItemName,t.ItemCode=n&&n.ItemCode;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ea=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoice.where("id").equals(t).first().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Id>0?t.Id:t.id,e.next=3,v.saleInvoiceDetail.where("invoiceid").equals(n).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return t.product=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),La=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.itemMaster.toArray();case 3:if(!((t=e.sent).length>0)){e.next=29;break}n=[],a=Object(Jn.a)(t),e.prev=7,a.s();case 9:if((r=a.n()).done){e.next=20;break}return c=r.value,e.next=13,Je(c.ItemId,null);case 13:return s=e.sent,e.next=16,v.itemGroup.where("Id").equals(c.GroupId).first().then().catch((function(e){return console.log(e)}));case 16:o=e.sent,s>0&&n.push(Object(d.a)(Object(d.a)({},c),{},{groupName:o.GroupName,Stock:s,id:c.ItemId}));case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(7),a.e(e.t0);case 25:return e.prev=25,a.f(),e.finish(25);case 28:return e.abrupt("return",n);case 29:e.next=33;break;case 31:e.prev=31,e.t1=e.catch(0);case 33:case"end":return e.stop()}}),e,null,[[0,31],[7,22,25,28]])})));return function(){return e.apply(this,arguments)}}(),Fa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.customerMaster.toArray().then((function(e){return e&&e.length>0?e.filter((function(e){return 1===e.LedgerType})):[]}));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function qa(e,t){return Ga.apply(this,arguments)}function Ga(){return(Ga=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a={},e.t0=t,!e.t0){e.next=7;break}return e.next=6,v.itemMaster.get({ItemId:t});case 6:e.t0=e.sent;case 7:if(r=e.t0,console.log(r,"itemMaster"),e.t1=r&&r.GSTClassification&&r.GSTClassification.length>0&&r.GSTClassification[0].HsnId,!e.t1){e.next=14;break}return e.next=13,v.hsnMaster.get({Id:r.GSTClassification[0].HsnId});case 13:e.t1=e.sent;case 14:if(c=e.t1,console.log(c,"gstDetails"),e.t2=t,!e.t2){e.next=21;break}return e.next=20,v.itemTaxStructure.get({itemid:t});case 20:e.t2=e.sent;case 21:return s=e.t2,console.log(s,"itemTaxStructure"),(a=r).amount=0,a.HsnId=r.GSTClassification[0].HsnId,a.salePrice=0,a.mrp=0,a.quantity=0,a.cgstRate=0,a.sgstRate=0,a.igstRate=0,a.remark="",a.schemecode=0,a.Rate=0,a.manualdiscountper=0,a.manualdiscountamount=0,a.istaxinclusive=s&&s.istaxinclusive,a.igstRate=0===c?0:c.IGST[0]&&c.IGST[0].IgstTaxRate?c.IGST[0].IgstTaxRate:0,a.sgstRate=0===c?0:c.IGST[0].CGST[0]&&c.IGST[0].CGST[0].SgstTaxRate?c.IGST[0].CGST[0].SgstTaxRate:0,a.cgstRate=0===c?0:c.IGST[0].CGST[0]&&c.IGST[0].CGST[0].CgstTaxRate?c.IGST[0].CGST[0].CgstTaxRate:0,o=0,u=0,e.next=45,v.getItemStock.where("itemid").equals(t).toArray().then((function(e){return console.log(e.length,"response.length"),1===e.length?(u=e[0].storeid,o=e[0].mrp):(u=0,o=""),e})).catch((function(e){return console.log(e)}));case 45:if(!((l=e.sent)&&l.length>1)){e.next=50;break}e.t3="",e.next=58;break;case 50:if(!l||1!==l.length){e.next=56;break}return e.next=53,Je(t,u);case 53:e.t4=e.sent,e.next=57;break;case 56:e.t4="";case 57:e.t3=e.t4;case 58:return a.stock=e.t3,a.mrp=o,a.storeid=u,e.abrupt("return",a);case 64:e.prev=64,e.t5=e.catch(0),console.log("error itemmasterdetail ",e.t5.message);case 67:case"end":return e.stop()}}),e,null,[[0,64]])})))).apply(this,arguments)}var Ua=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n,a){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t,"items in fnSaveInvoice"),console.log(n,"invoiceId in fnSaveInvoice"),console.log(a,"object in fnSaveInvoice"),n>0&&t&&t.length>0&&(r=t.map((function(e){return{formId:a,trId:n,ItemId:e.ItemId,qty:e.Quantity,type:"inqty"}})),et(r)),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Qa=function(e){var t=e.pageNav,n={bState:"",bCountry:"",bAddress:"",bGSTN:"",sState:"",sCountry:"",sAddress:"",sGSTN:""},r=Object(a.useRef)(),c=Object(a.useState)(n),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)([]),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(!1),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)([]),S=Object(o.a)(A,2),C=S[0],D=(S[1],Object(a.useState)(!1)),_=Object(o.a)(D,2),P=_[0],B=_[1],M=Object(a.useState)([]),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)(0),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)(""),V=Object(o.a)(Q,2),z=V[0],H=V[1],W=Object(a.useState)(""),K=Object(o.a)(W,2),J=K[0],Y=K[1],Z=Object(a.useState)(0),X=Object(o.a)(Z,2),$=X[0],ee=X[1],te=Object(a.useState)(0),ne=Object(o.a)(te,2),ae=ne[0],re=ne[1],ce=Object(a.useState)(),se=Object(o.a)(ce,2),oe=se[0],ie=se[1],ue=Object(a.useState)(),le=Object(o.a)(ue,2),de=le[0],be=le[1],je=Object(a.useState)([]),me=Object(o.a)(je,2),Oe=me[0],pe=me[1],he=Object(a.useState)(),fe=Object(o.a)(he,2),xe=fe[0],ve=fe[1],ge=Object(a.useState)([]),Ie=Object(o.a)(ge,2),ye=Ie[0],we=Ie[1],Ne=Object(a.useState)(!1),ke=Object(o.a)(Ne,2),Ae=ke[0],Se=ke[1],Ce=Object(a.useState)(),De=Object(o.a)(Ce,2),_e=(De[0],De[1]),Pe=Object(a.useState)(),Re=Object(o.a)(Pe,2),Be=(Re[0],Re[1],Object(a.useState)()),Me=Object(o.a)(Be,2),Ee=Me[0],Le=Me[1],Fe=Object(a.useState)(!1),qe=Object(o.a)(Fe,2),Ge=qe[0],ze=qe[1],He=Object(a.useState)([]),We=Object(o.a)(He,2),Ye=We[0],Ze=We[1],Xe=Object(a.useState)(!1),$e=Object(o.a)(Xe,2),et=$e[0],tt=$e[1],at=Object(a.useState)(!1),rt=Object(o.a)(at,2),ct=rt[0],st=rt[1],it=Object(a.useState)([]),ut=Object(o.a)(it,2),lt=ut[0],dt=ut[1],bt=Object(a.useState)(!1),jt=Object(o.a)(bt,2),mt=jt[0],Ot=jt[1],pt=Object(a.useState)(""),ht=Object(o.a)(pt,2),ft=ht[0],xt=ht[1],vt=Object(a.useState)([]),gt=Object(o.a)(vt,2),It=gt[0],yt=gt[1],wt=Object(a.useState)({totalQty:0,mrpValue:0,grossAmount:0,totalDiscount:0,totalTax:0,totalAmount:0,totalDiscountPerc:0,amountDiscPerc:0,roundOff:0,finalAmount:0,receivedAmount:0,balanceAmount:0,cashReceived:0,tender:0,igstAmount:0,sgstAmount:0,cgstAmount:0}),Nt=Object(o.a)(wt,2),kt=Nt[0],At=Nt[1],St=Object(a.useState)([]),Ct=Object(o.a)(St,2),Dt=Ct[0],_t=Ct[1],Pt=Object(a.useState)(null),Rt=Object(o.a)(Pt,2),Bt=Rt[0],Mt=Rt[1],Tt=Object(a.useState)(),Et=Object(o.a)(Tt,2),Lt=Et[0],Ft=Et[1],qt=Object(a.useState)(""),Gt=Object(o.a)(qt,2),Ut=Gt[0],Qt=Gt[1],Vt=Object(a.useState)(!1),zt=Object(o.a)(Vt,2),Ht=zt[0],Wt=zt[1],Kt=Object(a.useState)([]),Jt=Object(o.a)(Kt,2),Yt=Jt[0],Zt=Jt[1],Xt=Object(a.useState)(null),$t=Object(o.a)(Xt,2),en=$t[0],tn=$t[1],nn=Object(a.useState)({mobileError:"",salesPerson:""}),an=Object(o.a)(nn,2),rn=an[0],cn=an[1],sn=Object(a.useState)(""),on=Object(o.a)(sn,2),un=on[0],ln=on[1],dn=Object(a.useState)(null),bn=Object(o.a)(dn,2),jn=(bn[0],bn[1]),mn=Object(a.useState)(""),On=Object(o.a)(mn,2),pn=On[0],hn=On[1],fn=Object(a.useState)({}),xn=Object(o.a)(fn,2),vn=(xn[0],xn[1]),gn=Object(a.useState)(null),In=Object(o.a)(gn,2),yn=In[0],wn=In[1],Nn=Object(a.useState)(""),kn=Object(o.a)(Nn,2),An=kn[0],Sn=kn[1],Cn=Object(a.useState)(""),Dn=Object(o.a)(Cn,2),_n=Dn[0],Pn=Dn[1],Rn=Object(a.useState)({seriesId:"",voucherId:""}),Bn=Object(o.a)(Rn,2),Mn=Bn[0],Tn=Bn[1],En=Object(a.useState)(!1),Ln=Object(o.a)(En,2),Fn=Ln[0],qn=Ln[1],Gn=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),Un=Object(o.a)(Gn,2),Qn=Un[0],Vn=(Un[1],Object(a.useState)(!1)),Kn=Object(o.a)(Vn,2),Yn=Kn[0],Xn=Kn[1],$n=Object(a.useState)([]),ea=Object(o.a)($n,2),ta=ea[0],na=ea[1],aa=Object(a.useState)({slpName:"",slpId:null,slpdropdown:!0}),ra=Object(o.a)(aa,2),ca=ra[0],sa=ra[1],oa=Object(a.useState)({salesInvoice:[],saleInvoiceDetail:[]}),ia=Object(o.a)(oa,2),ua=ia[0],la=ia[1],da=Object(a.useState)([]),ja=Object(o.a)(da,2),Oa=ja[0],fa=ja[1],xa=Object(a.useState)(""),va=Object(o.a)(xa,2),ga=va[0],Ia=va[1],ya=Object(a.useState)([]),wa=Object(o.a)(ya,2),Aa=wa[0],Ra=wa[1],Ta=Object(a.useState)(""),Ga=Object(o.a)(Ta,2),Ua=Ga[0],Qa=Ga[1],Va=Object(a.useState)(null),za=Object(o.a)(Va,2),Ha=za[0],Wa=za[1],Ka=Object(a.useState)(!0),Ja=Object(o.a)(Ka,2),Ya=(Ja[0],Ja[1],Object(a.useState)([])),Za=Object(o.a)(Ya,2),Xa=Za[0],$a=Za[1],er=Object(a.useState)(!1),tr=Object(o.a)(er,2),nr=tr[0],ar=tr[1],rr=Object(a.useState)(!1),cr=Object(o.a)(rr,2),sr=(cr[0],cr[1],Object(a.useState)(!1)),or=Object(o.a)(sr,2),ir=(or[0],or[1],Object(a.useState)([])),ur=Object(o.a)(ir,2),lr=(ur[0],ur[1],Object(a.useState)([])),dr=Object(o.a)(lr,2),br=(dr[0],dr[1],Object(a.useState)([])),jr=Object(o.a)(br,2),mr=(jr[0],jr[1],Object(a.useState)([])),Or=Object(o.a)(mr,2),pr=(Or[0],Or[1],Object(a.useState)([])),hr=Object(o.a)(pr,2),fr=hr[0],xr=hr[1],vr=Object(a.useState)([]),gr=Object(o.a)(vr,2),Ir=(gr[0],gr[1],Object(a.useState)(!1)),yr=Object(o.a)(Ir,2),wr=yr[0],Nr=yr[1],kr=Object(a.useState)([]),Ar=Object(o.a)(kr,2),Sr=Ar[0],Cr=Ar[1],Dr=Object(a.useState)(!1),_r=Object(o.a)(Dr,2),Pr=_r[0],Rr=_r[1],Br=Object(a.useState)([]),Mr=Object(o.a)(Br,2),Tr=Mr[0],Er=Mr[1],Lr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.stateMaster.toArray();case 2:(t=e.sent)&&h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fr=function(e){if("bState"===e.target.name)if(""===e.target.value){var t;j(Object(d.a)(Object(d.a)({},b),{},(t={},Object(l.a)(t,e.target.name,""),Object(l.a)(t,"bCountry",""),t)))}else{var n,a=p.find((function(t){return t.StateId===parseInt(e.target.value)}));j(Object(d.a)(Object(d.a)({},b),{},(n={},Object(l.a)(n,e.target.name,e.target.value),Object(l.a)(n,"bCountry",a.CountryId),n)))}else if("sState"===e.target.name)if(""===e.target.value){var r;j(Object(d.a)(Object(d.a)({},b),{},(r={},Object(l.a)(r,e.target.name,""),Object(l.a)(r,"sCountry",""),r)))}else{var c,s=p.find((function(t){return t.StateId===parseInt(e.target.value)}));j(Object(d.a)(Object(d.a)({},b),{},(c={},Object(l.a)(c,e.target.name,e.target.value),Object(l.a)(c,"sCountry",s.CountryId),c)))}else j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))};Object(a.useEffect)((function(){!function(){var e=jc(1,E);At((function(){return Object(d.a)({},e.footer)})),L(e.products)}()}),[b.bState,b.sState]);var qr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca();case 2:t=e.sent,la(Object(d.a)({},t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Da();case 2:t=e.sent,la(Object(d.a)({},t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ur=Object(a.useState)(null),Qr=Object(o.a)(Ur,2),Vr=Qr[0],zr=Qr[1],Hr=Object(a.useState)({billSeries:"N/A",debitCard:"N/A",creditCard:"N/A",advAmount:"N/A",totalQty:"N/A",couponAmount:"N/A",otherAmount:"N/A",cashAmount:"N/A",billDate:"N/A",netAmount:"N/A",totalMrp:"N/A"}),Wr=Object(o.a)(Hr,2),Kr=Wr[0],Jr=Wr[1],Yr=Object(a.useState)({}),Zr=Object(o.a)(Yr,2),Xr=Zr[0],$r=Zr[1],ec=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesPersonMaster.toArray();case 2:(t=e.sent)&&na(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=18;break}return Ot(!0),sc(),ic(),qn(!1),dc(),Lr(),rc(),cc(),ec(),Bc(),tn(new Date),Rr(!1),e.next=15,v.saleInvoiceDetail.toArray();case 15:return n=e.sent,Er(n),e.abrupt("return",Qt(t));case 18:if("edit"!==t){e.next=32;break}return sc(),ic(),qn(!1),rc(),cc(),Lr(),Gr(),ec(),Bc(),Xn(!0),sa(Object(d.a)(Object(d.a)({},ca),{},{slpdropdown:!1})),Rr(!1),e.abrupt("return",Qt(t));case 32:if("view"!==t){e.next=42;break}return sc(),ic(),Lr(),qr(),Bc(),sa(Object(d.a)(Object(d.a)({},ca),{},{slpdropdown:!1})),Xn(!0),Rr(!0),e.abrupt("return",Qt(t));case 42:if("save"===t&&(P?alert("This bill already cancelled you can not edit it."):Dc("save")),"refresh"!==t){e.next=50;break}return Rr(!1),Xn(!1),qn(!1),Ot(!1),Bc(),e.abrupt("return",Qt(t));case 50:if("print"!==t){e.next=53;break}return Gc(),e.abrupt("return");case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nc=Object(a.useMemo)((function(){return ba}),[]),ac=Object(a.useMemo)((function(){return ma}),[]),rc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(531);case 2:if(!e.sent){e.next=8;break}return e.next=6,v.billingType.toArray().then().catch((function(e){return console.log(e)}));case 6:t=e.sent,fa(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(523);case 2:if(!e.sent){e.next=8;break}return e.next=6,v.Influencer.toArray().then().catch((function(e){return console.log(e)}));case 6:t=e.sent,Ra(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La();case 2:t=e.sent,$a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function oc(){return(oc=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mc();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ic=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa();case 2:t=e.sent,_t(t.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),uc=function(e){var t="",n="",a="";try{e&&(n=("0"+((t=new Date(e)).getMonth()+1)).slice(-2),a=("0"+t.getDate()).slice(-2),t=[a,n,t.getFullYear()].join("-"))}catch(rn){}return t},lc=function(e){J&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),H(J))),"F9"===e.key&&(e.preventDefault(),Lt&&Sc(Lt))},dc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=18;break}if(!(n.length>0)){e.next=9;break}Zt(n),Wt(!0),e.next=18;break;case 9:return e.next=11,v.salesInvoice.where("seriesid").equals(0).toArray();case 11:return a=e.sent,r=a.length>0?a.filter((function(e){return"true"!==e.ishold})):[],c={series:"",seriesId:0,sCount:0,digit:5,dbcount:r},e.next=16,Ve(c,t.formid);case 16:s=e.sent,wn(s);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=23;break}if(""!==r.seriesId){e.next=10;break}return e.next=7,v.salesInvoice.where("seriesid").equals(0).toArray();case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,v.salesInvoice.where("seriesid").equals(r.seriesId).toArray();case 12:e.t0=e.sent;case 13:return c=e.t0,s=c.length>0?c.filter((function(e){return"true"!==e.ishold})):[],o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=18,Ve(o,t.formid);case 18:u=e.sent,wn(u),Tn({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=40;break;case 23:if(""!==r.seriesId){e.next=29;break}return e.next=26,v.salesInvoice.where("seriesid").equals(0).toArray();case 26:e.t1=e.sent,e.next=32;break;case 29:return e.next=31,v.salesInvoice.where("seriesid").equals(r.seriesId).toArray();case 31:e.t1=e.sent;case 32:return l=e.t1,b=l.length>0?l.filter((function(e){return"true"!==e.ishold})):[],j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=37,Ve(j,t.formid);case 37:m=e.sent,wn(m),Tn({seriesId:r.seriesId,voucherId:r.voucherId});case 40:Wt(!1);case 41:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){!function(){oc.apply(this,arguments)}()}),[Ut]),Object(a.useEffect)((function(){return window.addEventListener("keydown",lc),function(){window.removeEventListener("keydown",lc)}}),[J,z,Lt,mt]);var jc=function(e,t,n){try{if(e>0){var a,r=0,c=0,s=0,o=0,i=0,u=0,l=0,d=0,j=0,m=0,O=0,p=0,h=0,f=0,x=!1,v=0,g=[],I=0,y=0,w=0,N=E,k=0,A=0,S=0,C=0,D=0,_=0,P=0,B=0,M=0,T=0,L=0,F=0,q=0,G=0,U=0,Q=0;g=Array.isArray(t)?t:[t];var V=Array.isArray(t)?t:[t],z=N.find((function(t){return t.ItemId===e}));"new"!==n||z&&Object.keys(z).length>0?"new"===n&&z&&Object.keys(z).length>0&&(g=N):g=[].concat(Object(R.a)(N),Object(R.a)(V)),g=g.map((function(t){return t=mc(t,"new"===n,e,N),u=b.sState===b.bState&&t.sgstRate>0?fc(t.sgstRate):0,d=b.sState===b.bState&&t.cgstRate>0?fc(t.cgstRate):0,m=b.sState!==b.bState&&t.igstRate>0?fc(t.igstRate):0,I=t.quantity>0?parseInt(t.quantity):"",y=t.mrp>0?fc(t.mrp):0,r=t.Rate>0?fc(t.Rate):y,c=t.manualdiscountper>0?fc(t.manualdiscountper):0,f=I*fc(r),v=fc(f)*fc(c)/100,fc(f)*fc(0)/100,s=fc(c)+fc(0),x=t.istaxinclusive,o=fc(f)*fc(s)/100,h=x?Oc(f,o,d,u,m):f,i=fc(h)-fc(o),l=pc(u,x?h:i),j=pc(d,x?h:i),O=pc(m,x?h:i),p=fc(l)+fc(j)+fc(O),w=fc(i)+fc(p),S+=I,C+=fc(y)*I,L+=fc(w),B+=fc(o),M+=fc(p),D+=fc(l),_+=fc(j),P+=fc(O),F+=fc(h),q+=0,G+=0,U+=0,Q+=0,t.quantity=I,t.mrp=y,t.grossamount=hc(r*I),t.Rate=hc(r),t.amount=hc(w),t.cgst=hc(j),t.sgst=hc(l),t.igst=hc(O),t.totaltaxamount=hc(j+l+O),t.manualdiscountamount=hc(v),t})),C=hc(C),F=hc(F),B=hc(B),M=hc(M),L=hc(L),A=kt.totalDiscountPerc>0?fc(kt.totalDiscountPerc)*fc(L)/100:0;var H=fc(L)-fc(A);return k=H>0?vc(H):0,T=H+fc(k),T=hc(T),a=hc(kt.totalDiscountPerc),A=hc(A),k=hc(k),T=hc(T),q=hc(q),G=hc(G),U=hc(U),D=hc(D),_=hc(_),P=hc(P),{footer:{totalQty:S,mrpValue:C,grossAmount:F,totalDiscount:B,totalTax:M,totalAmount:L,totalDiscountPerc:a,amountDiscPerc:A,roundOff:k,finalAmount:T,receivedAmount:q,balanceAmount:G,cashReceived:U,tender:Q,sgstAmount:D,cgstAmount:_,igstAmount:P},products:g}}}catch(rn){}},mc=function(e,t,n,a){var r=a.find((function(e){return e.ItemId===n}));return t&&r&&Object.keys(r).length>0&&(e.ItemId===r.ItemId?(e.quantity=parseInt(r.quantity)+1,e.mrp=r.mrp>0?fc(r.mrp):0,e.cgstRate=r.cgstRate>0?fc(r.cgstRate):0,e.sgstRate=r.sgstRate>0?fc(r.sgstRate):0,e.igstRate=r.igstRate>0?fc(r.igstRate):0,e.Rate=r.Rate>0?fc(r.Rate):e.mrp,e.manualDiscountPerc=r.manualdiscountper>0?fc(r.manualdiscountper):0):e.quantity=parseInt(e.quantity?e.quantity:1)),e},Oc=function(e,t,n,a,r){return(e=fc(e))-(t=fc(t))-(e-t)*((n=fc(n))+(a=fc(a))+(r=fc(r)))/(100+n+a+r)},pc=function(e,t){return(e=fc(e))*(t=fc(t))/100},hc=function(e){return e?parseFloat(e).toFixed(2):e},fc=function(e){return e?parseFloat(e):e};function xc(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var vc=function(e){return Ke(e)},gc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(fr,"purchasedBatchSerials  purchasedBatchSerials"),console.log(t,"items in purchasedItemsBatchSerials"),e.next=4,fr.bought_batch.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{id:e.batch_id,ItemName:e.item_name,ItemCode:e.item_code,lotno:e.lot_no,stock:e.qty_in,QtyOut:fr.bought_serials.filter((function(t){return t.batch_id==e.batch_id})).length,manufacturingdate:e.mfg_date,expirydate:e.expiry_date,batchno:e.batch_number,MRP:e.mrp,Remarks:t.find((function(t){return t.ItemCode==e.item_code})).remark})}));case 4:n=e.sent,console.log(n,"boughtBatchesNumber"),Er(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log(ye,"SlbatchArray")}),[ye]);var Ic=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("batchPopUp"),e.next=3,v.BatchMaster.where("itemid").equals(t[0].ItemId).toArray().then().catch((function(e){return console.log(e)}));case 3:if(!((n=e.sent).length>1)){e.next=16;break}return e.next=7,Promise.all(n.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.BatchDetail.where("batchid").equals(n.batchid).first().then().catch((function(e){return console.log(e)}));case 2:return a=e.sent,console.log(a,"stock batchPopup"),e.abrupt("return",Object(d.a)(Object(d.a)({},n),{},{ItemId:n.id,stock:a.inqty,ItemName:t[0].ItemName,ItemCode:t[0].ItemCode,storeid:a.storeid}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:a=e.sent,r=a.filter((function(e){return parseInt(t[0].storeid)===e.storeid})),ar(!1),dt(r),tt(!1),st(!0),xt("Ok"),e.next=16;break;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yc=function(e,t){console.log(t,"aaaaaaaaaaaaaa");var n=jc(e,t);At((function(){return Object(d.a)({},n.footer)})),L(n.products)},wc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n,a){var r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("rowIndex: ",t,"columnIndex: ",n,"value :",a,"value in s updateMyData"),"quantity"!==n){e.next=7;break}r=[],E.map((function(e,n){n===t&&r.push(e)})),!0===r[0].IsLotEnable&&a>0?Ic(r):!0===r[0].IsSerialEnable&&!1===r[0].IsLotEnable||(console.log(a,"value in updateMyData"),(c=E)[t][n]=a,yc(1,c)),e.next=22;break;case 7:if("storeid"!==n){e.next=19;break}return s=[],E.map((function(e,n){n===t&&(e.storeid=a.toString,s.push(e))})),e.next=12,Je(s[0].ItemId,null);case 12:o=e.sent,console.log(o,"getitemstk getitemstk"),u=E.map((function(e,n){return e.itemId===s[0].ItemId&&(e.storeid=a,e.stock=o),n===t?Object(d.a)(Object(d.a)({},e),{},{storeid:parseInt(a),stock:o,quantity:e.quantity>o?"":e.quantity}):e})),console.log(u,"prodwithStock prodwithStock"),yc(1,u),e.next=22;break;case 19:(l=E)[t][n]=a,yc(1,l);case 22:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Nc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=6;break}return e.next=3,Fa();case 3:n=e.sent,(a=n&&n.length>0&&n.find((function(e){return e.Phone1===t})))&&Object.keys(a).length>0&&(ln(a.Phone1),hn(a.PartyName),jn(a),zr(a.Id));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kc=function(e,t){for(var n={timer:"billtime",billDate:"invoiceno",billSeries:"billSeries"},a=0,r={},c=function(){var t=o[s];""===e[t]||null===e[t]||0===e[t]?(Object.keys(n).map((function(e){if(n[e]===t)return r=Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},e,"required"))})),a++):Object.keys(n).map((function(e){n[e]===t&&(r=Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},e,"")))}))},s=0,o=["billSeries","invoicedate","billDate","billtime"];s<o.length;s++)c();return""===pn||null===pn||void 0===pn?(a++,r=Object(d.a)(Object(d.a)({},r),{},{customerName:"required"})):r=Object(d.a)(Object(d.a)({},r),{},{customerName:""}),$r(r),a?(alert("Required fields are empty"),!1):(0===t.length&&(a++,alert("Please select atleast one product")),!a)},Ac=function(e){Mt(e.id),Ft(e)},Sc=function(e){var t=E.filter((function(t){return t.ItemId!==e.original.ItemId}));if(L(t),t&&t.length>0){var n=jc(1,t);At((function(){return Object(d.a)({},n.footer)})),L(n.products)}else At({totalQty:0,mrpValue:0,grossAmount:0,totalDiscount:0,totalTax:0,totalAmount:0,totalDiscountPerc:0,amountDiscPerc:0,roundOff:0,finalAmount:0,receivedAmount:0,balanceAmount:0,cashReceived:0,tender:0,igstAmount:0,sgstAmount:0,cgstAmount:0}),L([])},Cc=function(e){return void 0===e||"refresh"===e||null===e||""===e},Dc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="add"!==Ut&&_n?_n:r.current.value,c={Id:ae,update:0,invoiceno:"hold"===n?"Temp-"+yn:yn,invoicedate:en,partyid:Vr,grossamount:kt.grossAmount,discountamount:kt.totalDiscount,taxamount:kt.totalTax,netamount:kt.totalAmount,receiveamount:kt.receivedAmount,branchid:1,counterid:1,createdby:localStorage.getItem("UserId"),createdon:new Date,editlog:"",ishold:"hold"===n?"true":"false",iscancelled:"",alterid:0,authorizedby:0,authorizedon:"",cancelledby:"",cancelledon:"",salepersonid:ca.slpId,seriesid:""===Mn.seriesId?0:Mn.seriesId,voucherid:Mn.voucherId,seriesvouchertype:0,isauthorized:!1,remarks:An,discountpermanual:kt.totalDiscountPerc,discountamountmanual:kt.amountDiscPerc,finalamount:kt.finalAmount,noofbillprint:0,billtime:a,roundoff:kt.roundOff,totalbillqty:kt.totalQty,invoicetype:0,cash_amount:0,cn_amount:0,dc_amount:0,cc_amount:0,advance_amount:0,coupon_amount:0,other_amount:0,mrp_value:kt.mrpValue,cashtrade:0,balamt:0,tallyvoucherid:0,tallysyncdate:"",tallyreferenceno:"",issendtotally:!1,totaligst:kt.igstAmount,totalcgst:kt.cgstAmount,totalsgst:kt.sgstAmount,billingcountryid:b.bCountry,billingstateid:b.bState,billingaddress:b.bAddress,billinggstinno:b.bGSTN,shippingcountryid:b.sCountry,shippingstateid:b.sState,shippingaddress:b.sAddress,shippinggstinno:b.sGSTN,mobilenumber:un,influencerid:Ha,billingtype:ga,new:G},console.log(E,"product in submit"),!kc(c,E)){e.next=28;break}if(console.log(c,"saleInvoice saleInvoice"),console.log(E,"valid product"),!($>0)){e.next=17;break}return e.next=9,_c(n,c);case 9:return Xn(!1),Bc(),Qt(""),e.next=14,Mc();case 14:alert("updated successfully"),e.next=28;break;case 17:return e.next=19,Ba(c,E,t.formid);case 19:return e.sent,Fn&&Vc(xe[0].id),Xn(!1),Bc(),Qt(""),e.next=26,Mc();case 26:alert("saved successfully"),gc(E);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_c=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=$,e.next=3,Ma(a,E,t.formid);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesInvoice.toArray();case 2:if(!((t=e.sent).length>0)){e.next=15;break}if(!((n=t.filter((function(e){return uc(e.createdon)===uc(new Date)}))).length>0)){e.next=14;break}if(!((a=n.filter((function(e){return"true"!==e.ishold&&"true"!==e.iscancelled}))).length>0)){e.next=11;break}return e.abrupt("return",a);case 11:case 14:case 15:return e.abrupt("return",[]);case 12:e.next=15;break;case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("discard"!==t&&"recall"!==t){e.next=6;break}return e.next=3,v.salesInvoice.where("ishold").equals("true").toArray();case 3:e.t0=e.sent,e.next=14;break;case 6:if("cancel"!==t){e.next=12;break}return e.next=9,Pc();case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=[];case 13:e.t0=e.t1;case 14:if(!((n=e.t0).length>0)){e.next=41;break}a=[],r=Object(Jn.a)(n),e.prev=18,r.s();case 20:if((c=r.n()).done){e.next=29;break}return s=c.value,e.next=24,v.customerMaster.where("Id").equals(s.partyid).first();case 24:o=e.sent,u={BillNo:s.invoiceno,Date:uc(s.createdon),Time:s.billtime,PartyName:o.PartyName,PartyMobileNo:s.mobilenumber,ItemId:s.id},a.push(Object(d.a)(Object(d.a)({},s),u));case 27:e.next=20;break;case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(18),r.e(e.t2);case 34:return e.prev=34,r.f(),e.finish(34);case 37:yt(a),ze(!0),e.next=43;break;case 41:alert("discard"===t||"recall"===t?"You don't have any hold Bill":"you don't have created any bill today");case 43:xt(t);case 44:case"end":return e.stop()}}),e,null,[[18,31,34,37]])})));return function(t){return e.apply(this,arguments)}}(),Bc=function(){re(0),fa([]),Ia(""),Ra([]),Qa(""),Wa(null),L([]),ee(0),na([]),U(0),At({totalQty:0,mrpValue:0,grossAmount:0,totalDiscount:0,totalTax:0,totalAmount:0,totalDiscountPerc:0,amountDiscPerc:0,roundOff:0,finalAmount:0,receivedAmount:0,balanceAmount:0,cashReceived:0,tender:0,igstAmount:0,sgstAmount:0,cgstAmount:0}),B(!1),_t(),Qt(""),tn(null),cn({mobileError:""}),ln(""),jn(null),hn(""),vn({}),wn(null),Sn(""),Pn(""),Xn(!1),la({salesInvoice:[],saleInvoiceDetail:[]}),zr(""),function(){for(var e in Xr)Xr[e]="";$r(Xr)}(),Y(""),H(""),sa({slpName:"",slpId:null,slpdropdown:!0}),Tn({seriesId:"",voucherId:""}),ze(!1),j(n),h([]),I(!1),k(!1),ie(),ve(),xt(""),yt([]),Wt(),Zt([]),Mc()},Mc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa();case 2:if(!((t=e.sent)&&Object.keys(t).length>0&&t.product&&t.product.length>0)){e.next=13;break}return n=t.invoicedate,a=t.invoiceno,e.next=8,qc(t);case 8:t=e.sent,r=jc(1,t),Jr((function(e){return{billSeries:a,debitCard:0,creditCard:0,advAmount:0,totalQty:r.footer.totalQty,couponAmount:0,otherAmount:0,cashAmount:0,billDate:n,netAmount:r.footer.finalAmount,totalMrp:r.footer.mrpValue}})),e.next=14;break;case 13:Jr({billSeries:"N/A",debitCard:"N/A",creditCard:"N/A",advAmount:"N/A",totalQty:"N/A",couponAmount:"N/A",otherAmount:"N/A",cashAmount:"N/A",billDate:"N/A",netAmount:"N/A",totalMrp:"N/A"});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"obj in fnInvoiceUpdate"),re(t.Id),Tn({seriesId:t.seriesid,voucherId:t.voucherid}),e.next=5,v.customerMaster.where("Id").equals(t.partyid).first().then().catch((function(e){return console.log(e)}));case 5:if(n=e.sent,hn(n.PartyName),U(t.new),L([]),!(t&&Object.keys(t).length>0&&t.id>0)){e.next=19;break}return e.next=12,Ea(t.id);case 12:if(a=e.sent,console.log(a,"formData fn_GetSaleInvoiceId"),!(a&&Object.keys(a).length>0)){e.next=17;break}return e.next=17,Lc(a);case 17:gc(a.products),Ot(!0);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ec=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L([]),e.next=3,_a(t);case 3:if(!((n=e.sent)&&Object.keys(n).length>0)){e.next=31;break}if(!n.salepersonid){e.next=12;break}return e.next=8,v.salesPersonMaster.where("Id").equals(parseInt(n.salepersonid)).first();case 8:a=e.sent,sa({slpName:a.SalePersonName,slpId:parseInt(a.Id),slpdropdown:!1}),e.next=13;break;case 12:sa({slpName:"",slpId:null,slpdropdown:!0});case 13:return j({bState:n.billingstateid,bCountry:n.billingcountryid,bAddress:n.billingaddress,bGSTN:n.billinggstinno,sState:n.shippingstateid,sCountry:n.shippingcountryid,sAddress:n.shippingaddress,sGSTN:n.shippinggstinno}),Nc(n.mobilenumber),Xn(!1),zr(n.partyid),ln(n.mobilenumber),tn(n.invoicedate),Sn(n.remarks),At((function(e){return e.totalDiscountPerc=n.discountpermanual,e.amountDiscPerc=n.discountamountmanual,Object(d.a)({},e)})),e.next=23,sc();case 23:if(!(n&&n.product&&n.product.length>0)){e.next=31;break}return e.next=26,qc(n);case 26:n=e.sent,L(n),r=jc(1,n),At((function(e){return Object(d.a)(Object(d.a)({},e),r.footer)})),L(r.products);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,"form data in formatData"),Fc(t),!t.salepersonid){e.next=9;break}return e.next=5,v.salesPersonMaster.where("Id").equals(parseInt(t.salepersonid)).first();case 5:n=e.sent,sa({slpName:n.SalePersonName,slpId:parseInt(n.Id),slpdropdown:!1}),e.next=10;break;case 9:sa({slpName:"",slpId:null,slpdropdown:!0});case 10:if(console.log(t,"formData formData in formatdata before getting product"),!(t&&t.product&&t.product.length>0)){e.next=23;break}return e.next=14,qc(t);case 14:e.sent,console.log(t,"formData in fn formateData"),a=Array.isArray(t.product)?t.product:[t.product],r=[],a.map((function(e){console.log(e," ");var t={id:e.id,invoiceId:e.invoiceid,ItemId:e.itemid,ItemName:e.ItemName,ItemCode:e.ItemCode,mrp:e.mrp,soldBatchSerials:e.soldBatchSerials,quantity:e.quantity,stock:e.balance,storeid:e.storeid,UnitId:e.UnitId,UnitName:e.UnitName,Rate:e.saleprice,taxper:0,totaltaxamount:0,finalperrate:0,totalnetamount:0,lotno:"",createdby:1,createdon:new Date,editlog:"",isvatitem:!1,addtaxrate:0,addtaxamount:0,surchargerate:0,surchargeamount:0,taxamount:0,IsTaxInclusive:e.istaxinclusive,altqty:0,salepersonid:0,changeindiscount:0,autodiscountper:0,autodiscountamount:0,manualdiscountper:e.manualdiscountper,manualdiscountamount:e.manualdiscountamount,istaxcalculatebeforediscount:!1,lotserialid:0,remark:e.itemremark,discount_slab_detail_id:0,isautodiscountonper:!1,isautodiscountonamount:!1,isaltrate:0,Conversion:e.conversion,Denominator:e.denominator,isschemeitem:0,hsnclassificationid:0,igstRate:e.igstrate,cgstRate:e.cgstrate,sgstRate:e.sgstrate,igst:e.igstamount,cgst:e.cgstamount,sgst:e.sgstamount,manualchangesaleprice:!1,sodetailid:0,schemecode:e.schemecode,mobileNumber:e.mobilenumber,istaxinclusive:e.istaxinclusive};console.log(t,"itemObj itemObj"),r.push(t)})),L(r),c=jc(1,r),At((function(e){return Object(d.a)(Object(d.a)({},e),c.footer)})),L(c.products);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,"formData formData fnBindPage"),!t.salepersonid){e.next=6;break}return e.next=4,v.salesPersonMaster.where("Id").equals(parseInt(t.salepersonid)).first();case 4:n=e.sent,sa({slpName:n.SalePersonName,slpId:parseInt(n.Id),slpdropdown:!1});case 6:j({bState:t.billingstateid,bCountry:t.billingcountryid,bAddress:t.billingaddress,bGSTN:t.billinggstinno,sState:t.shippingstateid,sCountry:t.shippingcountryid,sAddress:t.shippingaddress,sGSTN:t.shippinggstinno}),ee(t.id),B("true"===t.iscancelled),Nc(t.mobilenumber),Xn(!1),zr(t.partyid),Pn(t.billtime),wn(t.invoiceno),ln(t.mobilenumber),tn(t.invoicedate),Sn(t.remarks),At((function(e){return e.totalDiscountPerc=t.discountpermanual,e.amountDiscPerc=t.discountamountmanual,Object(d.a)({},e)}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(Jn.a)(t.product),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=13;break}return c=r.value,e.next=8,v.getItemStock.where("itemid").equals(c.itemid).first().then().catch((function(e){return alert("somthing went wrong")}));case 8:s=e.sent,console.log(s,"st st st st st"),n.push({id:c.id,invoiceId:c.invoiceid,ItemId:c.itemid,quantity:c.quantity,ItemName:c.ItemName,ItemCode:c.ItemCode,mrp:c.mrp,stock:c.balance,Rate:c.saleprice,taxper:0,totaltaxamount:0,finalperrate:0,totalnetamount:0,lotno:"",createdby:1,createdon:new Date,editlog:"",isvatitem:!1,addtaxrate:0,addtaxamount:0,surchargerate:0,surchargeamount:0,taxamount:0,IsTaxInclusive:c.istaxinclusive,altqty:0,salepersonid:0,changeindiscount:0,autodiscountper:0,autodiscountamount:0,manualdiscountper:c.manualdiscountper,manualdiscountamount:c.manualdiscountamount,istaxcalculatebeforediscount:!1,lotserialid:0,remark:c.itemremark,discount_slab_detail_id:0,isautodiscountonper:!1,isautodiscountonamount:!1,isaltrate:0,Conversion:c.conversion,Denominator:c.denominator,isschemeitem:0,hsnclassificationid:0,igstRate:c.igstrate,cgstRate:c.cgstrate,sgstRate:c.sgstrate,igst:c.igstamount,cgst:c.cgstamount,sgst:c.sgstamount,manualchangesaleprice:!1,sodetailid:0,schemecode:c.schemecode,mobileNumber:c.mobilenumber,istaxinclusive:c.istaxinclusive});case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return console.log(n,"productlist productlist"),e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),Gc=function(){if(E&&E.length>0&&yn&&yn.length>0){var e=document.getElementById("divcontents"),t=document.getElementById("ifmcontentstoprint").contentWindow;t.document.open(),t.document.write(e.innerHTML),t.document.close(),t.focus(),t.print()}else alert("Please select invoice",yn)},Uc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==t){e.next=4;break}ar(!1),e.next=33;break;case 4:n=[],a=Object(Jn.a)(t),e.prev=6,a.s();case 8:if((r=a.n()).done){e.next=22;break}return c=r.value,e.next=12,qa(c.ItemId,uc(en));case 12:return s=e.sent,e.next=15,v.unitMaster.where("Id").equals(s.UnitName).first();case 15:o=e.sent,s.UnitId=s.UnitName,s.UnitName=o.UnitName,console.log(s,"itemMasterDetail"),n.push(s);case 20:e.next=8;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(6),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:console.log(n,"in OK popup"),Qc(n),ar(!1);case 33:case"end":return e.stop()}}),e,null,[[6,24,27,30]])})));return function(t){return e.apply(this,arguments)}}(),Qc=function(e){var t=jc(1,e);At((function(){return Object(d.a)({},t.footer)})),L(t.products)},Vc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.saleInvoiceDetail.where("invoiceid").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 2:if(!((n=e.sent).length>0)){e.next=10;break}return a=n.map((function(e){return e.id})),e.next=7,v.salesInvoice.delete(t);case 7:return e.next=9,v.saleInvoiceDetail.bulkDelete(a).then().catch((function(e){return console.log(e)}));case 9:qn(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("discard"!==t){e.next=32;break}if(!(xe.length>0)){e.next=29;break}if(!((n=xe.map((function(e){return e.id}))).length>0)){e.next=27;break}a=[],r=Object(Jn.a)(n),e.prev=6,r.s();case 8:if((c=r.n()).done){e.next=16;break}return s=c.value,e.next=12,v.saleInvoiceDetail.where("invoiceid").equals(s).toArray().then().catch((function(e){return console.log(e)}));case 12:o=e.sent,a=[].concat(Object(R.a)(a),Object(R.a)(o));case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return u=a.map((function(e){return e.id})),e.next=27,v.salesInvoice.bulkDelete(n).then((function(e){return v.saleInvoiceDetail.bulkDelete(u).then((function(e){alert("successfully discard"),Bc()})).catch((function(e){return alert("something went wrong")}))})).catch((function(e){return alert("something went wrong")}));case 27:e.next=30;break;case 29:alert("Please select bill");case 30:e.next=43;break;case 32:if("cancel"!==t){e.next=42;break}if(!(xe.length>0)){e.next=39;break}return l=xe.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{cancelledby:localStorage.getItem("UserId"),cancelledon:new Date,iscancelled:"true",update:1})})),e.next=37,v.salesInvoice.bulkPut(l).then((function(e){alert("successfully canceled"),Bc()})).catch((function(e){return alert("something went wrong")}));case 37:e.next=40;break;case 39:alert("Please select bill");case 40:e.next=43;break;case 42:"recall"===t&&(xe.length>0?xe.length>1?alert("Please select only one bill"):(Ec(xe[0].id),qn(!0),yt([]),ze(!1)):alert("Please select bill"));case 43:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),Hc={change_state:tc,val:Ut,disabledAction:Qn};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Hc)),Object(Te.jsxs)("div",{className:"billSection",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w75",children:Object(Te.jsxs)("div",{className:"box grayBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w33 autoComp billno",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Bill No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Yn?Object(Te.jsx)(Hn.a,{open:"billno"===z&&!Cc(Ut),onChange:function(e,t){return Tc(t)},options:ua.salesInvoice,getOptionLabel:function(e){return e.invoiceno},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Y("billno")},onBlur:function(){Y(""),H("")}}))},className:Xr.billSeries}):Object(Te.jsx)("select",{name:"billSeries",id:"",className:Xr.billSeries,children:yn&&Object(Te.jsx)("option",{value:yn,children:yn})})]})}),Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Bill Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{name:"billDate",selected:en,onChange:function(e){return tn(e)},readOnly:Cc(Ut),className:Xr.billDate})]})}),Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Time"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===Ut||!Cc(Ut)&&!_n?Object(Te.jsx)(ha,{reff:r,className:Xr.timer}):Object(Te.jsx)("input",{readOnly:!0,value:_n,className:Xr.timer})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Mobile No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{type:"text",maxLength:"10",name:"mobileNumber",value:un,onChange:function(e){try{$r({mobileNumber:""}),e.target.value>=0?(ln(e.target.value),10===e.target.value.length&&(e.target.value===/^[a-z-A-Z-\s]+$/&&cn({mobileError:"Please enter Numbers only"}),Nc(e.target.value))):(cn({mobileError:"Please enter number"}),setTimeout((function(){cn({mobileError:""})}),1e3)),Nc(e.target.value)}catch(rn){}},onKeyDown:function(e){32===e.keyCode&&(e.preventDefault(),cn(Object(d.a)(Object(d.a)({},rn),{},{mobileError:"Space Not Allowed"})),setTimeout((function(){cn(Object(d.a)(Object(d.a)({},rn),{},{mobileError:""}))}),1e3))},readOnly:""!==pn,className:Xr.mobileNumber}),rn.mobileError?Object(Te.jsx)("span",{style:{color:"red",fontSize:"15px"},children:rn.mobileError}):null]})}),Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Customer Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),""===pn&&!0===mt?Object(Te.jsx)(Hn.a,{open:"customer"===z&&!Cc(Ut),options:Dt,onChange:function(e,t){return(n=t)&&(ln(n.Phone1),hn(n.PartyName),jn(n),zr(n.Id)),Y(""),void H("");var n},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Y("customer")},onBlur:function(){Y(""),H("")}}))}}):Object(Te.jsx)("input",{type:"text",onChange:function(e){return hn(e.target.value)},className:Xr.customerName,value:pn,readOnly:"view"===Ut||void 0===Ut})]})}),Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Sale Person"})}),!0===ca.slpdropdown?Object(Te.jsx)(Hn.a,{open:"saleperson"===z&&!Cc(Ut),options:ta,onChange:function(e,t){return function(e){e&&sa({slpName:e.SalePersonName,slpId:e.Id,slpdropdown:!1}),Y(""),H("")}(t)},getOptionLabel:function(e){return e.SalePersonName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Y("saleperson")},onBlur:function(){Y(""),H("")}}))}}):Object(Te.jsx)("input",{type:"text","data-valid":"special",value:ca.slpName,onChange:function(e){sa({slpName:"",slpId:null,slpdropdown:!0}),Y(""),H("")},readOnly:"view"===Ut})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Aa.length>0?Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Influencers"})}),""===Ua?Object(Te.jsx)(Hn.a,{options:Aa,onChange:function(e,t){Qa(t.influencername),Wa(t.influencerid)},getOptionLabel:function(e){return e.influencername},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)({},e))}}):Object(Te.jsx)("input",{type:"text",value:Ua,onChange:function(e){""===e.target.value?(Qa(e.target.value),Wa()):Qa(e.target.value)}})]})}):"",Oa.length>0?Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Billing Type"})}),""===ga?Object(Te.jsx)(Hn.a,{options:Oa,onChange:function(e,t){return Ia(t.valuename)},getOptionLabel:function(e){return e.valuename},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)({},e))}}):Object(Te.jsx)("input",{type:"text",value:ga,onChange:function(e){return Ia(e.target.value)}})]})}):"",Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsx)("div",{className:"invoiceAction",children:Object(Te.jsx)("button",{className:"add"===Ut||"edit"===Ut?"green":"grey",style:{margin:"0",height:"39px",marginTop:"9px"},onClick:"add"===Ut||"edit"===Ut?function(){ar(!0)}:function(){return!1},children:"Item List"})})})]})]})}),Object(Te.jsx)("div",{className:"col w25",children:P&&Object(Te.jsx)("div",{className:"cancelsts",children:Object(Te.jsx)(ot,{content:"Canceled"})})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Pr?Object(Te.jsx)(Zn,{columns:ac,data:E,itemList:C,selectedProduct:E,updateMyData:wc,getTrProps:Ac,selectedRowId:Bt,boughtBatchSerials:xr}):Object(Te.jsx)(Zn,{columns:nc,data:E,itemList:C,selectedProduct:E,updateMyData:wc,getTrProps:Ac,selectedRowId:Bt,boughtBatchSerials:xr})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsxs)("div",{className:"col w100",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w75",children:Object(Te.jsxs)("div",{className:"privInvoiceDetail",children:[Object(Te.jsx)("div",{className:"title",children:Object(Te.jsx)(ot,{content:"Previous Invoice Detail"})}),Object(Te.jsx)("div",{className:"invoiceDetail",children:Object(Te.jsx)("table",{children:Object(Te.jsxs)("tbody",{children:[Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Bill No"}),":"]}),Object(Te.jsx)("td",{children:Kr.billSeries}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Debit Card"})," :"]}),Object(Te.jsx)("td",{children:Kr.debitCard}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Credit Card"})," :"]}),Object(Te.jsx)("td",{children:Kr.creditCard}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Adv Amount"})," :"]}),Object(Te.jsx)("td",{children:Kr.advAmount})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Total Qty"})," :"]}),Object(Te.jsx)("td",{children:xc(Kr.totalQty)}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Coupon Amount"})," :"]}),Object(Te.jsx)("td",{children:Kr.couponAmount}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Other Amount"})," :"]}),Object(Te.jsx)("td",{children:Kr.otherAmount}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Cash Amount"}),":"]}),Object(Te.jsx)("td",{children:Kr.cashAmount})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Bill Date"}),":"]}),Object(Te.jsx)("td",{children:Kr.billDate&&"N/A"!==Kr.billDate?uc(Kr.billDate):"N/A"}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Net Amount"})," :"]}),Object(Te.jsx)("td",{children:xc(Kr.netAmount)}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Total MRP"})," :"]}),Object(Te.jsx)("td",{children:xc(Kr.totalMrp)}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{})]})]})})})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsx)("div",{className:"amountDetail",children:Object(Te.jsx)("table",{children:Object(Te.jsxs)("tbody",{children:[Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Gross Amount"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:xc(kt.grossAmount)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Ammount Without Tax"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:xc(kt.grossAmount)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Net Tax Amount"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:xc(kt.totalTax)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Net Amount"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:xc(kt.finalAmount)})]})]})})})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"invoiceAction",children:[Object(Te.jsx)("button",{className:Cc(Ut)||"view"===Ut?"grey":"darkBlue",onClick:Cc(Ut)||"view"===Ut?function(){return!1}:function(){return Rc("discard")},children:Object(Te.jsx)(ot,{content:"Discard Bill"})}),Object(Te.jsx)("button",{className:Cc(Ut)||"view"===Ut?"grey":"red",onClick:Cc(Ut)||"view"===Ut?function(){return!1}:function(){return Rc("cancel")},children:Object(Te.jsx)(ot,{content:"Cancel Bill"})}),Object(Te.jsx)("button",{className:Cc(Ut)||"view"===Ut?"grey":"blue",onClick:Cc(Ut)||"view"===Ut?function(){return!1}:function(){return Rc("recall")},children:Object(Te.jsx)(ot,{content:"Recall Bill"})}),Object(Te.jsx)("button",{className:"billinfoBtn",onClick:function(){k(!0),I(!1)},children:Object(Te.jsx)(ot,{content:"Billing Info"})}),Object(Te.jsx)("button",{className:"taxinfoBtn",onClick:function(){I(!0),k(!1)},children:Object(Te.jsx)(ot,{content:"Tax Info"})}),Object(Te.jsx)("button",{className:"lotbatchBtn",onClick:function(){Se(!0)},children:Object(Te.jsx)(ot,{content:"Lot / Batch Detail"})})]})})})]})}),Object(Te.jsx)(Sa,{show:wr,onHide:function(){return Nr(!1)},snb:Sr}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-2 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"Write Remarks here \u2026.",value:An,onChange:function(e){return Sn(e.target.value)},readOnly:Cc(Ut)})]})})})]}),Ht&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:Yt.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return bc(t,e)},children:e.VoucherName})}))})]})})]}),g&&Object(Te.jsx)("div",{className:"rightOverlaySec",children:Object(Te.jsxs)("div",{className:"taxInfo",children:[Object(Te.jsxs)("div",{className:"title",children:[Object(Te.jsx)(ot,{content:"Tax Info"}),Object(Te.jsx)("button",{className:"closebtn",onClick:function(){return I(!1)}})]}),Object(Te.jsx)("div",{className:"taxinfoD",children:Object(Te.jsx)("table",{children:Object(Te.jsxs)("tbody",{children:[Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Qty"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.totalQty),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"MRP Value"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.mrpValue),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Gross Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.grossAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Discount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.totalDiscount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Tax"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.totalTax),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.totalAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Dis"})," %"]}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:kt.totalDiscountPerc,onChange:function(e){var t=e.target.value;At((function(e){e.totalDiscountPerc=t;var n=fc(t>0?t:0)*fc(e.totalAmount)/100,a=fc(e.totalAmount)-n;return e.roundOff=vc(hc(a)),a=fc(vc(a))+a,e.amountDiscPerc=hc(n),e.finalAmount=hc(a),Object(d.a)({},e)}))},readOnly:!(!Cc(Ut)&&"view"!==Ut)})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Dis Amount"})," :"]}),Object(Te.jsx)("td",{children:xc(kt.amountDiscPerc)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Round OFF"})}),Object(Te.jsx)("td",{children:kt.roundOff})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Final Amount"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.finalAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Recd Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.receivedAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Balance Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.balanceAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Cash Recived"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.cashReceived),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Tender"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:kt.tender,readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"SGST Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.sgstAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"CGST Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.cgstAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"IGST Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:xc(kt.igstAmount),readOnly:!0})})]})]})})})]})}),N&&Object(Te.jsx)("div",{className:"rightOverlaySec",children:Object(Te.jsxs)("div",{className:"BillingInfo",children:[Object(Te.jsxs)("div",{className:"title",children:[Object(Te.jsx)(ot,{content:"Billing Info"}),Object(Te.jsx)("button",{className:"closebtn",onClick:function(){return k(!1)}})]}),Object(Te.jsxs)("div",{className:"billingInfoD",children:[Object(Te.jsx)("h4",{children:Object(Te.jsx)(ot,{content:"Billing Detail"})}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsxs)("select",{onChange:function(e){return Fr(e)},name:"bState",value:b.bState,disabled:Cc(Ut)||"view"===Ut?"disabled":"",children:[Object(Te.jsx)("option",{value:"",children:"None"}),p.map((function(e,t){return Object(Te.jsx)("option",{value:e.StateId,children:e.StateName},t)}))]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsxs)("select",{disabled:"disabled",name:"bCountry",value:b.bCountry,children:[Object(Te.jsx)("option",{children:"None"}),Object(Te.jsx)("option",{value:"5",children:"India"})]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Billing Address"})}),Object(Te.jsx)("input",{type:"text",name:"bAddress",value:b.bAddress,onChange:function(e){return Fr(e)},readOnly:!(!Cc(Ut)&&"view"!==Ut)})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Billing GSTN no"})}),Object(Te.jsx)("input",{type:"text",name:"bGSTN",value:b.bGSTN,onChange:function(e){return Fr(e)},readOnly:!(!Cc(Ut)&&"view"!==Ut)})]}),Object(Te.jsx)("h4",{children:Object(Te.jsx)(ot,{content:"Shipping Detail"})}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsxs)("select",{onChange:function(e){return Fr(e)},name:"sState",value:b.sState,disabled:Cc(Ut)||"view"===Ut?"disabled":"",children:[Object(Te.jsx)("option",{value:"",children:"None"}),p.map((function(e,t){return Object(Te.jsx)("option",{value:e.StateId,children:e.StateName},t)}))]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsxs)("select",{disabled:"disabled",name:"sCountry",value:b.sCountry,children:[Object(Te.jsx)("option",{children:"None"}),Object(Te.jsx)("option",{value:"5",children:"India"})]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Shipping Address"})}),Object(Te.jsx)("input",{type:"text",name:"sAddress",value:b.sAddress,onChange:function(e){return Fr(e)},readOnly:!(!Cc(Ut)&&"view"!==Ut)})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Shipping GSTN no"})}),Object(Te.jsx)("input",{type:"text",name:"sGSTN",value:b.sGSTN,onChange:function(e){return Fr(e)},readOnly:!(!Cc(Ut)&&"view"!==Ut)})]}),Object(Te.jsx)("div",{className:"invoiceAction",children:Object(Te.jsx)("button",{onClick:function(){return k(!1)},className:"red",style:{width:"200px",marginLeft:"auto"},children:Object(Te.jsx)(ot,{content:"Close Billing Info"})})})]})]})}),console.log(lt,"batchArray batchArray "),console.log(E,"product product"),Object(Te.jsx)(ka,{itemListPopup:Xa,getcheckedRowsPop:Ee,setCheckedItemPopup:function(e){return pe(e)},getCheckedRowsItemPopup:function(e){return function(e){Le(e)}(e)},checkedItemPopup:Oe,okItemPopBtn:function(e){return Uc(e)},serialSts:et,itemSeriralList:Ye,setItemSeriralList:function(e){return Ze(e)},setSerialSts:function(e){return tt(e)},batchSts:ct,setBatchSts:function(e){return st(e)},batchArray:lt,setBatchArray:function(e){return dt(e)},checkedItemSerial:de,setCheckedItemSerial:function(e){return be(e)},itemPopup:nr,selectedBatchArray:function(e){return function(e){if(ye.length>0){var t=e.filter((function(e){var t=e.batchid;return!ye.some((function(e){return e.batchid===t}))}));if(ye.filter((function(t){var n=t.batchid;return!e.some((function(e){return e.batchid===n}))})),t.length>0){var n=[].concat(Object(R.a)(ye),Object(R.a)(t));we(n),console.log(t,"arrayA"),console.log(n,"arrayC")}}else we(e)}(e)},setItemPopup:function(e){return ar(e)},OkSerialbtn:function(){return function(){tt(!1);var e=ye.map((function(e){var t=de.find((function(t){return e.itemid===t.itemid}));if(!t)return e;if(e.itemid==t.itemid){var n=de.filter((function(t){return e.batchid===t.batchid}));return Object(d.a)(Object(d.a)({},e),{},{QtyOut:n.length,serialDetail:n})}}));E.map((function(t){if(e.find((function(e){return e.itemid===t.itemid})).length>0){var n=e.filter((function(e){return e.itemid===t.itemid}));console.log(n,"lllllllllllllllllllllllll")}})),we(e),be([]),_e([])}()},product:E}),Ae&&Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:[{header:"Item Code",field:"ItemCode"},{header:"Item Name",field:"ItemName"},{header:"Batch No",field:"batchno"},{header:"Lot No",field:"lotno"},{header:"Stock",field:"stock"},{header:"Out Qty",field:"QtyOut"},{header:"Mfg Date",field:"manufacturingdate"},{header:"Exp. Date",field:"expirydate"},{header:"MRP",field:"MRP"},{header:"Remarks",field:"Remarks"},{header:"Serial Detail",viewBtn:!0,viewBtntext:"View Item"}],Viewbtnclick:function(e){return t=e,Nr(!wr),void(fr.bought_serials&&Cr(fr.bought_serials.filter((function(e){return e.batch_id==t}))));var t},data:Tr,overFlowScroll:!0,Footer:!1,filter:!1}),Object(Te.jsx)("div",{className:"popupButton",children:Object(Te.jsx)("button",{className:"btn btnRed",style:{marginLeft:"auto"},onClick:function(){return Se(!1)},children:Object(Te.jsx)(ot,{content:"Close"})})})]})}),Ge&&Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:[{header:"Bill No",field:"BillNo"},{header:"Date",field:"Date"},{header:"Time",field:"Time"},{header:"Party Name",field:"PartyName"},{header:"Mobile No",field:"PartyMobileNo"}],data:It,overFlowScroll:!0,checkbox:!0,selectedRows:oe,getCheckedItem:function(e){return function(e){ve(e)}(e)},Footer:!0,filter:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{className:"btn btnGreen mr-5 mlAuto",onClick:"discard"===ft?function(){return zc("discard")}:"recall"===ft?function(){return zc("recall")}:"cancel"===ft?function(){return zc("cancel")}:function(){return!1},children:"discard"===ft?Object(Te.jsx)(ot,{content:"Discard Bill"}):"recall"===ft?Object(Te.jsx)(ot,{content:"Recall Bill"}):"cancel"===ft?Object(Te.jsx)(ot,{content:"Cancel Bill"}):"Ok"===ft?Object(Te.jsx)(ot,{content:"Ok"}):""}),Object(Te.jsx)("button",{className:"btn btnRed",onClick:function(){return yt([]),void ze(!1)},children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})})]})},Va=(n(412),n(19)),za=function(e){var t=e.pageNav,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(null),u=Object(o.a)(i,2),b=u[0],j=u[1],m=Object(a.useState)("add"),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),x=Object(o.a)(f,2),v=x[0],g=(x[1],function(e){s(Object(d.a)(Object(d.a)({},c),{},Object(l.a)({},e.target.name,e.target.value))),j("")});Object(a.useEffect)((function(){}),[c]);var I={val:p,change_state:function(e){if(console.log(e,"rrrrrr"),"save"===e)if(c.newPassword===c.ConfirmPass){var t={headers:{token:localStorage.getItem("token")}},n={UserName:c.userName,oldPassword:c.oldPassword,NewPassword:c.newPassword};console.log(n),Va.post("/api/User/Forget",n,t).then((function(e){j(e.data.result.message)})).catch((function(e){j("Internet Connections are not available ")}))}else j("Old Password And New Password Not MAtched ");"refresh"===e&&(console.log("RRR"),s(""),h("add"))},disabledAction:v};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"changePasswordBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},I)),Object(Te.jsx)("div",{className:"changePasswordSection mt-2",children:Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Username"})}),Object(Te.jsx)("input",{type:"text",value:c&&c.userName,name:"userName",onChange:function(e){return g(e)}})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Old Password"})}),Object(Te.jsx)("input",{type:"text",value:c&&c.oldPassword,name:"oldPassword",onChange:function(e){return g(e)}})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"New Password"})}),Object(Te.jsx)("input",{type:"text",value:c&&c.newPassword,name:"newPassword",onChange:function(e){return g(e)}})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Confirm Password"})}),Object(Te.jsx)("input",{name:"ConfirmPass",onChange:function(e){return g(e)},value:c&&c.ConfirmPass,type:"text"})]})})]}),b?Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"errorShow",children:b})})}):""]})})]})})},Ha=n(147),Wa=(n(413),n(414),n(264),n(265),n(519),n(136),n(246),function(e){console.log(e,"props");var t=e&&e.idb.AttributeMaster.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:e.AttributeName}),Object(Te.jsx)("td",{children:Object(Te.jsxs)("select",{children:[Object(Te.jsx)("option",{children:"Select"}),e.Value.map((function(e,t){return Object(Te.jsx)("option",{children:e.ValueName},t)}))]})})]},t)}));return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("div",{className:"customersTable",children:Object(Te.jsxs)("table",{className:"table",children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{style:{backgroundColor:"#1A5F9E"},children:[Object(Te.jsx)("th",{style:{width:"30%"},children:"Field"}),Object(Te.jsx)("th",{children:"Value"})]})}),Object(Te.jsx)("tbody",{children:t})]})})})}),Ka=function(e){return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("div",{className:"customersTable",children:Object(Te.jsxs)("table",{className:"table",children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{style:{backgroundColor:"#1A5F9E"},children:[Object(Te.jsx)("th",{style:{width:"30%"},children:"HSN Code"}),Object(Te.jsx)("th",{children:"HSN Name"}),Object(Te.jsx)("th",{children:"Applicable Date"})]})}),Object(Te.jsx)("tbody",{children:e.data.length>0?e.data.map((function(e){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:e.HSNCode}),Object(Te.jsx)("td",{children:e.HSNName}),Object(Te.jsx)("td",{children:e.ApplicableDate})]})})):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{})]})]})})]})})})},Ja=(n(247),n(279)),Ya=n(461),Za=function(e){return console.log("props in box form",e),Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"InexclusiveCheck",children:Object(Te.jsx)(Ya.a,{control:Object(Te.jsx)(Ja.a,{color:"default",checked:e.val?e.data.IsTaxInclusive:"",onChange:e.changeData,name:"IsTaxInclusive",value:!e.data.IsTaxInclusive||""}),label:"Inclusive of Tax"})})})}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Serial No."}),Object(Te.jsx)("input",{readOnly:!e.val,type:"text",onChange:e.changeData,name:"SerialNo","data-valid":"number",value:e.data.SerialNo,className:!0===e.serialnoerror?"error":""})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Schedule No"}),Object(Te.jsx)("input",{readOnly:!e.val,type:"text",onChange:e.changeData,name:"ScheduleNo",value:e.data.ScheduleNo})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Commodity Code"}),Object(Te.jsx)("input",{readOnly:!e.val,type:"text",onChange:e.changeData,name:"CommodityCode",value:e.data.CommodityCode})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Excise Classification"}),Object(Te.jsx)("input",{readOnly:!e.val,type:"text",onChange:e.changeData,name:"Exciseclassification",value:e.data.Exciseclassification})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Excise Classification Code"}),Object(Te.jsx)("input",{readOnly:!e.val,type:"text",onChange:e.changeData,name:"ExciseClassificationCode",value:e.data.ExciseClassificationCode})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Abatment Notificaiton No "}),Object(Te.jsx)("input",{readOnly:!e.val,type:"text",onChange:e.changeData,name:"AbatmentNotificationNo",value:e.data.AbatmentNotificationNo})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:" Rate of Excise "}),Object(Te.jsx)("input",{readOnly:!e.val,type:"number",onChange:e.changeData,name:"RateOfExcise",value:e.data.RateOfExcise})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:" Excise valuation Method "}),Object(Te.jsxs)("select",{disabled:!e.val,onChange:e.changeData,name:"ExciseEvaluatinMethod",value:e.data.ExciseEvaluatinMethod,children:[Object(Te.jsx)("option",{value:""}),Object(Te.jsx)("option",{value:"Ad Quantum",children:"Ad Quantum"}),Object(Te.jsx)("option",{value:"Ad Valorem",children:"Ad Valorem"}),Object(Te.jsx)("option",{value:"MRP",children:"MRP"})]})]})})]})]})},Xa=function(e){var t=Object(a.useState)(new Date),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),u=i[0],l=i[1],d=function(e){e.preventDefault()};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Minimum Stock Qty"}),Object(Te.jsx)("input",{readOnly:!e.val,type:"Number",onChange:e.changeData,name:"MinStock",value:e.data.MinStock,onBlur:e.checkInvalid})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:"Maximum Stock Qty"}),Object(Te.jsx)("input",{readOnly:!e.val,type:"Number",onChange:e.changeData,name:"MaxStock",value:e.data.MaxStock,onBlur:e.checkInvalid})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Reorder Level Qty"})}),Object(Te.jsx)("input",{readOnly:!e.val,type:"number",onChange:e.changeData,name:"ReorderLevel",value:e.data.ReorderLevel,onBlur:e.checkInvalid})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Critical Level Qty"})}),Object(Te.jsx)("input",{readOnly:!e.val,type:"number",onChange:e.changeData,name:"CriticalLevel",value:e.data.CriticalLevel,onBlur:e.checkInvalid})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Economic Order Qty"})}),Object(Te.jsx)("input",{readOnly:!e.val,type:"number",onChange:e.changeData,name:"EconomicOrderQty",value:e.data.EconomicOrderQty,onBlur:e.checkInvalid})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{children:[" ",Object(Te.jsx)(ot,{content:"Manufacturing Date"})]}),Object(Te.jsx)(pa.a,{selected:r,onChange:function(e){return c(e)},onChangeRaw:function(e){return d(e)}}),Object(Te.jsx)("div",{className:"CalenderForm",children:Object(Te.jsx)("img",{src:jt,alt:""})})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Expiry Date"})}),Object(Te.jsx)(pa.a,{selected:u,onChange:function(e){return l(e)},onChangeRaw:function(e){return d(e)},minDate:r}),Object(Te.jsx)("div",{className:"CalenderForm",children:Object(Te.jsx)("img",{src:jt,alt:""})})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"formBox"})})]})]})},$a=(n(415),function(){var e=Object(a.useState)({image:""}),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"ItemImage",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:" col w35",children:Object(Te.jsxs)("div",{className:"file",children:[Object(Te.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files[0]&&r({image:URL.createObjectURL(e.target.files[0])})},className:"filetype",id:"img",name:"img",accept:"image/*"}),"              ",Object(Te.jsx)("p",{children:"Select Image "})]})}),Object(Te.jsx)("div",{className:" col w35",children:Object(Te.jsx)(Ya.a,{control:Object(Te.jsx)(Ja.a,{name:"checkedB",color:"default"}),label:"Remove"})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:" col w100",children:Object(Te.jsx)("div",{className:"imgHeight",children:Object(Te.jsx)("img",{src:n.image})})})})]})})}),er=function(e){console.log(e,"props in ItemMaster_form");var t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),u=i[0],l=i[1],b=Object(a.useState)(!1),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)(!1),h=Object(o.a)(p,2),f=h[0],x=h[1],v=Object(a.useState)("Attributes"),g=Object(o.a)(v,2),I=g[0],y=g[1],w=Object(a.useState)({itemnumerror:"",itemcoderror:""}),N=Object(o.a)(w,2),k=N[0],A=N[1],S=function(e){e.ctrlKey&&("l"===e.key||"L"===e.key)&&r&&(e.preventDefault(),l(!0),c(!1)),e.ctrlKey&&("l"===e.key||"L"===e.key)&&m&&(e.preventDefault(),x(!0),O(!1))},C=function(t){"uniq123"!==t.target.name&&(u||f)&&e.idb.ItemMaster[0]&&e.sett(e.idb.ItemMaster[0])},D=function(e){32===e.keyCode&&(e.preventDefault(),"ItemCode"===e.target.name?(A(Object(d.a)(Object(d.a)({},k),{},{itemcoderror:"Space Not Allowed"})),setTimeout((function(){A(Object(d.a)(Object(d.a)({},k),{},{itemcoderror:""}))}),1e3)):"ItemName"===e.target.name&&(A(Object(d.a)(Object(d.a)({},k),{},{itemnumerror:"Space Not Allowed"})),setTimeout((function(){A(Object(d.a)(Object(d.a)({},k),{},{itemnumerror:""}))}),1e3)))},_=function(e){y(e)};return Object(a.useEffect)((function(){return window.addEventListener("keydown",S),document.body.addEventListener("click",C),""===e.method&&(l(!1),x(!1)),function(){document.body.removeEventListener("click",C),window.removeEventListener("keydown",S)}})),Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"tabBox",children:[Object(Te.jsx)(zn,Object(d.a)({},e.para)),Object(Te.jsxs)("div",{className:"box",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:e.errorObj&&!0===e.errorObj.ItemCode?"formBox autoComp error":"formBox autoComp",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Item Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"view_edit"===e.method?u?Object(Te.jsx)(Hn.a,{open:!0,onChange:function(t,n){return e.sett(n)},options:e.idb.ItemMaster,getOptionLabel:function(e){return e.ItemCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({name:"uniq123"},e),{},{variant:"outlined"}))}}):Object(Te.jsx)("input",{readOnly:!0,placeholder:"Press Ctrl+L",onFocus:function(){return c(!0)},onBlur:function(){return c(!1)}}):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("input",{readOnly:!e.para.val,type:"text",name:"ItemCode","data-valid":"number",onKeyDown:D,className:e.errorObj&&!0===e.errorObj.ItemCode?"error":"",value:e.data.ItemCode,onChange:e.changeData}),k.itemcoderror?Object(Te.jsx)("span",{style:{color:"red",fontSize:"15px"},children:k.itemcoderror}):null]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:e.errorObj&&!0===e.errorObj.ItemName?"formBox autoComp error":"formBox autoComp",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Item Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"view_edit"===e.method?f?Object(Te.jsx)(Hn.a,{open:!0,onChange:function(t,n){return e.sett(n)},options:e.idb.ItemMaster,getOptionLabel:function(e){return e.ItemName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({name:"uniq123"},e),{},{variant:"outlined"}))}}):Object(Te.jsx)("input",{readOnly:!0,placeholder:"Press Ctrl+L",onFocus:function(){return O(!0)},onBlur:function(){return O(!1)}}):Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsx)("input",{readOnly:!e.para.val,type:"text",name:"ItemName",onKeyDown:D,"data-valid":"varCharSpace",className:e.errorObj&&!0===e.errorObj.ItemName?"error":"",value:e.data.ItemName,onChange:e.changeData}),k.itemnumerror?Object(Te.jsx)("span",{style:{color:"red",fontSize:"15px"},children:k.itemnumerror}):null]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Print Name"})}),Object(Te.jsx)("input",{readOnly:!e.para.val,type:"text",name:"PrintName",value:e.data.PrintName,onChange:e.changeData})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Name in Tally"})}),Object(Te.jsx)("input",{readOnly:!e.para.val,type:"text",name:"NameInTally",value:e.data.NameInTally,onChange:e.changeData})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Base Unit"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsxs)("select",{name:"UnitName",value:e.data.UnitName,onChange:e.changeData,children:[Object(Te.jsx)("option",{value:""}),e.idb.UnitMaster.map((function(e){return Object(Te.jsx)("option",{value:e.UnitSymbol,children:e.UnitSymbol})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Alternate Unit"})}),Object(Te.jsxs)("select",{name:"UnitAltName",value:e.data.UnitAltName,onChange:e.changeData,children:[Object(Te.jsx)("option",{value:""}),e.idb.UnitMaster.map((function(e){return Object(Te.jsx)("option",{value:e.UnitSymbol,children:e.UnitSymbol})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Where"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsxs)("div",{children:[Object(Te.jsx)("input",{readOnly:!e.para.val,type:"number",name:"Denominator",className:e.errorObj&&!0===e.errorObj.Denominator?"error":"","data-valid":"number",value:e.data.Denominator,onChange:e.changeData,style:{width:"70%",marginRight:"13px"},onBlur:function(t){return e.checkEqual(t)}}),Object(Te.jsx)("input",{readOnly:!e.para.val,style:{width:"Calc(30% - 13px)"},type:"text",value:e.data.UnitAltName})]})]})}),Object(Te.jsxs)("div",{className:"col",children:[Object(Te.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAKCAYAAACuaZ5oAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU0QTc1REQzNTNDRTExRUI5MUY3ODQ0RDg1MDk5MDc3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU0QTc1REQ0NTNDRTExRUI5MUY3ODQ0RDg1MDk5MDc3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTRBNzVERDE1M0NFMTFFQjkxRjc4NDREODUwOTkwNzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTRBNzVERDI1M0NFMTFFQjkxRjc4NDREODUwOTkwNzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7bKHJ0AAAAKklEQVR42mKUlZX9z0BDwMRAYzD0LWD8////0PYBi5yc3GgqGlgLAAIMAAHcBcG35IikAAAAAElFTkSuQmCC",alt:"",style:{position:"absolute",left:"-9px",top:"34px",width:"17px"}}),Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Conversion"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsxs)("div",{children:[Object(Te.jsx)("input",{readOnly:!e.para.val,type:"number",name:"Conversion",className:e.errorObj&&!0===e.errorObj.Conversion?"error":"",style:{width:"70%",marginRight:"13px"},"data-valid":"number",onBlur:function(t){return e.checkEqual(t)},value:e.data.Conversion,onChange:e.changeData}),Object(Te.jsx)("input",{readOnly:!e.para.val,style:{width:"Calc(30% - 13px)"},type:"text",value:e.data.UnitName})]})]})]})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Group Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsxs)("select",{name:"GroupId",value:e.data.GroupId,onChange:e.changeData,className:!0===e.groupiderror?"error":"custom-select",children:[Object(Te.jsx)("option",{value:""}),e.idb.ItemGroup.map((function(e){return Object(Te.jsx)("option",{value:e.GroupName,children:e.GroupName})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"EAN Code"})}),Object(Te.jsx)("input",{readOnly:!e.para.val,type:"text",onChange:e.changeData,name:"EanCode",value:e.data.EanCode})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Billing Unit"})}),Object(Te.jsxs)("select",{name:"BillingUnit",value:e.data.BillingUnit,onChange:e.changeData,children:[Object(Te.jsx)("option",{value:""}),Object(Te.jsx)("option",{value:e.data.UnitName,children:e.data.UnitName}),")",Object(Te.jsx)("option",{value:e.data.UnitAltName,children:e.data.UnitAltName}),")"]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Weight (KG)"})}),Object(Te.jsx)("input",{readOnly:!e.para.val,type:"number",onChange:e.changeData,name:"WeightInKg",value:e.data.WeightInKg})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsxs)("div",{className:"col",children:[Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{disabled:!e.para.val,type:"checkbox",id:"checkboxOne",checked:e.data.IsLot,onChange:e.changeData,name:"IsLot",value:!e.data.IsLot||""}),Object(Te.jsx)("label",{htmlFor:"checkboxOne",children:Object(Te.jsx)(ot,{content:"Enable Batch"})})]}),Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{disabled:!e.para.val,type:"checkbox",id:"checkboxTow",checked:e.data.IsSerial,onChange:e.changeData,name:"IsSerial",value:!e.data.IsSerial||""}),Object(Te.jsx)("label",{htmlFor:"checkboxTow",children:Object(Te.jsx)(ot,{content:"Enable Seriel"})})]}),Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{disabled:!e.para.val,type:"checkbox",id:"checkboxThree",checked:e.data.IsActive,onChange:e.changeData,name:"IsActive",value:!e.data.IsActive||""}),Object(Te.jsx)("label",{htmlFor:"checkboxThree",children:"Is Active"})]}),Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{disabled:!0,type:"checkbox",id:"checkboxFour"}),Object(Te.jsx)("label",{htmlFor:"checkboxFour",children:Object(Te.jsx)(ot,{content:"Is For Service Item"})})]})]})})]})]}),Object(Te.jsx)("div",{className:"subtabview",children:Object(Te.jsxs)("ul",{children:[Object(Te.jsx)("li",{className:"Attributes"===I?"active":"",onClick:function(e){return _("Attributes")},children:"Attributes"}),Object(Te.jsx)("li",{className:"Statutory Information"===I?"active":"",onClick:function(e){return _("Statutory Information")},children:"Statutory Information"}),Object(Te.jsx)("li",{className:"Reorder Level"===I?"active":"",onClick:function(e){return _("Reorder Level")},children:"Reorder Level"}),Object(Te.jsx)("li",{className:"Item Image"===I?"active":"",onClick:function(e){return _("Item Image")},children:"Item Image"}),Object(Te.jsx)("li",{className:"GST Classifications"===I?"active":"",onClick:function(e){return _("GST Classifications")},children:"GST Classifications"})]})}),Object(Te.jsxs)("div",{className:"tabBox withsubtab",children:[Object(Te.jsx)("div",{className:"box",style:{display:"Attributes"===I?"block":"none"},children:Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)(Wa,Object(d.a)({},e))})})}),Object(Te.jsx)("div",{className:"box",style:{display:"Statutory Information"===I?"block":"none"},children:Object(Te.jsx)(Za,Object(d.a)(Object(d.a)({},e),{},{val:e.para.val}))}),Object(Te.jsx)("div",{className:"box",style:{display:"Reorder Level"===I?"block":"none"},children:Object(Te.jsx)(Xa,Object(d.a)(Object(d.a)({},e),{},{val:e.para.val}))}),Object(Te.jsx)("div",{className:"box",style:{display:"Item Image"===I?"block":"none"},children:Object(Te.jsx)($a,{})}),Object(Te.jsxs)("div",{className:"box",style:{display:"GST Classifications"===I?"block":"none"},children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"GST Classifications"})," "]}),Object(Te.jsxs)("select",{disabled:!e.para.val,name:"HsnId",value:e.gst_data.HsnId,onChange:e.changeGstData,children:[Object(Te.jsx)("option",{value:""}),e.idb.HsnMaster.map((function(e){return Object(Te.jsx)("option",{value:e.Code,children:e.Code})}))]})]})}),Object(Te.jsx)("div",{className:"col w35",style:{position:"relative"},children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Applicable From"})," "]}),Object(Te.jsx)("input",{readOnly:!e.para.val,type:"date",onChange:e.changeGstData,name:"ApplicableDate",value:e.gst_data.ApplicableDate}),Object(Te.jsx)("div",{className:"CalenderForm",children:Object(Te.jsx)("img",{src:jt,alt:""})})]})})]}),Object(Te.jsx)(Ka,{data:e.gst_table,method:e.method})]})]})]})},tr=function(e){var t=e.pageNav,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],b={ItemCode:"",ItemName:"",UnitName:"",Denominator:"",Conversion:"",GroupId:""},j=Object(a.useState)(""),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)(b),f=Object(o.a)(h,2),x=f[0],g=f[1],I=Object(a.useState)(T),y=Object(o.a)(I,2),w=y[0],N=y[1],k=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),A=Object(o.a)(k,2),S=A[0],C=(A[1],Object(a.useState)(B)),D=Object(o.a)(C,2),_=D[0],P=D[1],E=Object(a.useState)(M),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)([]),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.unitMaster.toArray();case 2:return t=e.sent,w=Object(d.a)(Object(d.a)({},w),{},{UnitMaster:t}),e.next=6,v.hsnMaster.toArray();case 6:return t=e.sent,w=Object(d.a)(Object(d.a)({},w),{},{HsnMaster:t}),e.next=10,v.itemGroup.toArray();case 10:return t=e.sent,w=Object(d.a)(Object(d.a)({},w),{},{ItemGroup:t}),e.next=14,v.itemMaster.toArray();case 14:t=e.sent,w=Object(d.a)(Object(d.a)({},w),{},{ItemMaster:t}),N(Object(d.a)({},w)),console.log(t);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){if("add"===e)return p(e),P(B),z(),void g(b);if("edit"===e)return p(e),P(B),z(),s("view_edit"),void g(b);if("view"===e)return p(e),P(B),z(),s("view_edit"),void g(b);if("save"===e){console.log(x,"object");var t,n=Object.keys(x),a=Object.values(x);if(a.filter((function(e){return""===e||!0===e})).length>0){var r={};return n.forEach((function(e,t){return r[e]=""===a[t]||!0===a[t]})),g(r),!1}if(_.BillingUnit=_.UnitAltName===_.BillingUnit?1:0,t=w.ItemGroup.find((function(e){return e.GroupName===_.GroupId})),_.GroupId=t.Id,t=w.UnitMaster.find((function(e){return e.UnitSymbol===_.UnitName})),_.UnitName=t.Id,t=w.UnitMaster.find((function(e){return e.UnitSymbol===_.UnitAltName})),_.UnitAltName=t?t.Id:_.UnitName,F.HsnId&&(t=w.HsnMaster.find((function(e){return e.Code==F.HsnId})),F.HsnId=t.Id,F.ItemId=_.ItemId),_.GSTClassification)return _=_.new?F.HsnId?Object(d.a)(Object(d.a)({},_),{},{GSTClassification:[].concat(Object(R.a)(_.GSTClassification),[Object(d.a)({},F)])}):_:F.HsnId?Object(d.a)(Object(d.a)({},_),{},{update:"true",GSTClassification:[].concat(Object(R.a)(_.GSTClassification),[Object(d.a)({},F)])}):Object(d.a)(Object(d.a)({},_),{},{update:"true"}),P(Object(d.a)({},_)),void W();var c=w.ItemMaster.map((function(e){return e.Id}));return c=c.sort((function(e,t){return t-e})),_=F.HsnId?Object(d.a)(Object(d.a)({},_),{},{new:"true",Id:c.length>0?c[0]+1:1,GSTClassification:[Object(d.a)({},F)]}):Object(d.a)(Object(d.a)({},_),{},{new:"true",Id:c.length>0?c[0]+1:1,GSTClassification:[]}),P(Object(d.a)({},_)),void K()}return"refresh"===e?(p(""),s(""),P(B),q(M),V([]),N(T),void g(b)):void 0},W=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("update"),_.update=1,e.next=4,v.itemMaster.put(_);case 4:H("refresh");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new"),_.new=1,_.update=0,e.next=5,v.itemMaster.add(_);case 5:H("refresh");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J={para:{val:O,change_state:H,disabledAction:S},data:_,gst_data:F,changeData:function(e){var t=e.target,n=t.name,a=t.value,r=e.target.getAttribute("data-valid");r?(Me(e.target.value,r)?(P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},n,a))),g(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},n,!1)))):(P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},n,a))),g(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},n,!0)))),"ItemCode"!==e.target.name&&"ItemName"!==e.target.name||e.target.value||s("view_edit")):("GroupId"!==n&&"UnitName"!==n||("select"===a||""===a||"Select"===a?(P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},n,a))),g(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},n,!0)))):(P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},n,a))),g(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},n,!1))))),P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},n,a))))},changeGstData:function(e){var t=e.target,n=t.name,a=t.value;q(Object(d.a)(Object(d.a)({},F),{},Object(l.a)({},n,a)))},idb:w,method:c,gst_table:Q,sett:function(e){console.log(e,"item_master in item_master_form sett function for itemcode value");var t=Object.keys(x),n={};t.forEach((function(t){return n[t]=""===e[t]})),g(n),console.log("RRRR");var a,r=e;a=w.ItemGroup.find((function(e){return e.Id===r.GroupId})),r.GroupId=a.GroupName,a=w.UnitMaster.find((function(e){return e.Id===r.UnitName})),r.UnitName=a.UnitSymbol,a=w.UnitMaster.find((function(e){return e.Id===r.UnitAltName})),r.UnitAltName=a.UnitSymbol,r.BillingUnit=1===r.BillingUnit?r.UnitAltName:r.UnitName,Q=r.GSTClassification.map((function(e){var t={HSNCode:"",HSNName:"",ApplicableDate:e.ApplicableDate},n=w.HsnMaster.find((function(t){return t.Id===e.HsnId})),a=n.HsnName,r=n.Code;return t.HSNCode=r,t.HSNName=a,t})),V(Object(R.a)(Q)),s(""),P(Object(d.a)({},r))},errorObj:x,checkEqual:function(e){if(e.target.value<0)alert("invalid value"),P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},e.target.name,"")));else{var t="Denominator"===e.target.name?_.Conversion:_.Denominator;e.target.value===t&&""!==e.target.value&&(alert("Where value and Conversion value can't be same"),P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},e.target.name,""))))}},checkInvalid:function(e){e.target.value<0&&(alert("invalid value"),P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},e.target.name,""))))}};return Object(Te.jsx)("div",{style:{display:!0===t.hide?"none":"block"},children:Object(Te.jsx)(er,Object(d.a)({},J))})},nr=(n(416),[{header:"Country Code",field:"CountryCode",cell:"EditInput"},{header:"Country Name",field:"CountryName",cell:"EditInput"}]),ar=[{header:"State Code",field:"StateCode",cell:"EditInput"},{header:"State Name",field:"StateName",cell:"EditInput"}],rr=[{header:"City Code",field:"CityCode",cell:"EditInput"},{header:"City Name",field:"CityName",cell:"EditInput"}],cr=function(e){var t=e.pageNav,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],b=Object(a.useState)([]),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)([]),h=Object(o.a)(p,2),f=h[0],x=h[1],g=Object(a.useState)([]),I=Object(o.a)(g,2),y=I[0],w=I[1],N=Object(a.useState)({}),k=Object(o.a)(N,2),A=k[0],S=k[1],C=Object(a.useState)({}),D=Object(o.a)(C,2),_=D[0],P=D[1],B=Object(a.useState)({}),M=Object(o.a)(B,2),T=M[0],E=M[1],L=Object(a.useState)(!0),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)(!0),Q=Object(o.a)(U,2),V=Q[0],z=Q[1],H=Object(a.useState)(!0),W=Object(o.a)(H,2),K=W[0],J=W[1],Y=Object(a.useState)(),Z=Object(o.a)(Y,2),X=Z[0],$=Z[1],ee=Object(a.useState)(),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(),ce=Object(o.a)(re,2),se=ce[0],oe=ce[1],ie=Object(a.useState)(),ue=Object(o.a)(ie,2),le=ue[0],de=ue[1],be=Object(a.useState)(),je=Object(o.a)(be,2),me=je[0],Oe=je[1],pe=Object(a.useState)(),he=Object(o.a)(pe,2),fe=he[0],xe=he[1],ve=Object(a.useState)(1),ge=Object(o.a)(ve,2),Ie=ge[0],ye=ge[1],we=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),Ne=Object(o.a)(we,2),ke=Ne[0],Ae=(Ne[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=14;break}return e.next=3,Se();case 3:return Ce(),de(!0),Oe(!0),xe(!0),$(),$(),$(),G(!0),z(!0),J(!0),e.abrupt("return",s(t));case 14:if("edit"!==t){e.next=21;break}return e.next=17,Se();case 17:return G(!0),z(!0),J(!0),e.abrupt("return",s(t));case 21:if("view"!==t){e.next=25;break}return e.next=24,Se();case 24:return e.abrupt("return",s(t));case 25:if("save"===t&&console.log(m,y,f),"refresh"!==t){e.next=34;break}return E(),P(),S(),O([]),w([]),x([]),e.abrupt("return",s(t));case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.geographicalMaster.toArray();case 2:return t=e.sent,e.next=5,v.stateMaster.toArray();case 5:(n=e.sent).sort((function(e,t){var n=e.StateName.toLowerCase(),a=t.StateName.toLowerCase();return n<a?-1:n>a?1:0})),O(t),x(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e="SO";e+=Date.now(),ye(e)},De=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(t),!t){e.next=6;break}return e.next=4,v.stateMaster.where("CountryId").equals(t.CountryId).toArray();case 4:n=e.sent,x(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae(t),!t){e.next=7;break}return e.next=4,v.cityMaster.where("StateId").equals(t.StateId).toArray();case 4:(n=e.sent).sort((function(e,t){var n=e.CityName.toLowerCase(),a=t.CityName.toLowerCase();return n<a?-1:n>a?1:0})),w(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(e){oe(e)},Re=function(){var e=m.map((function(e){return e.Id===X.Id?Object(d.a)(Object(d.a)({},e),A):e}));O(e),S()},Be=function(){var e=f.map((function(e){return e.id===ne.id?Object(d.a)(Object(d.a)({},e),_):e}));x(e),P()},Me=function(){var e=y.map((function(e){return e.id===se.id?Object(d.a)(Object(d.a)({},e),T):e}));w(e),E()};Object(a.useEffect)(Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){"Enter"===e.key&&Pe&&(e.preventDefault(),Me(),xe(!1)),"Enter"===e.key&&De&&(e.preventDefault(),Re(),de(!1)),"Enter"===e.key&&_e&&(e.preventDefault(),Be(),Oe(!1))},window.addEventListener("keydown",t),e.abrupt("return",(function(){window.removeEventListener("keydown",t)}));case 3:case"end":return e.stop()}}),e)}))),[m,f,y,X,ne,se,T,_,A,fe,me,le]);var Ee={val:c,change_state:Ae,disabledAction:ke};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"geographicalLocationBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Ee)),Object(Te.jsxs)("div",{className:"geographicalLocation",children:[Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w50",style:{margin:"25px 0px"},children:Object(Te.jsx)("div",{className:"tableBox",style:{width:"450px"},children:Object(Te.jsx)(Na,{coulmn:nr,overFlowScroll:!0,data:m,selectedTr:function(e){return De(e)},editColumn:q,editfunction:function(){return console.log("editing not allowed")},tblInputOnchange:function(e){return function(e){return S(Object(d.a)(Object(d.a)({},A),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},addLine:function(){return Ce(),!(m.filter((function(e){return""===e.CountryCode||""===e.CountryName})).length>0)&&void O([].concat(Object(R.a)(m),[{Id:Ie,CountryId:Ie,CountryCode:"",CountryName:""}]))}})})})}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w50",children:[Object(Te.jsx)("div",{className:"boxTitle",children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsx)("div",{className:"tableBox",style:{width:"450px"},children:Object(Te.jsx)(Na,{coulmn:ar,overFlowScroll:!0,data:f,selectedTr:function(e){return _e(e)},editColumn:V,editfunction:function(){return console.log("editing not allowed")},tblInputOnchange:function(e){return function(e){return P(Object(d.a)(Object(d.a)({},_),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},addLine:function(){return Ce(),!(f.filter((function(e){return""===e.Date||""===e.Rate})).length>0)&&void x([].concat(Object(R.a)(f),[{Id:Ie,Date:"",Rate:""}]))}})})]}),Object(Te.jsxs)("div",{className:"col w50",children:[Object(Te.jsx)("div",{className:"boxTitle",children:Object(Te.jsx)(ot,{content:" City"})}),Object(Te.jsx)("div",{className:"tableBox",style:{width:"450px"},children:Object(Te.jsx)(Na,{coulmn:rr,overFlowScroll:!0,data:y,selectedTr:function(e){return Pe(e)},editColumn:K,editfunction:function(){return console.log("editing not allowed")},tblInputOnchange:function(e){return function(e){return E(Object(d.a)(Object(d.a)({},T),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},addLine:function(){return Ce(),!(y.filter((function(e){return""===e.CityName||""===e.CityCode})).length>0)&&void w([].concat(Object(R.a)(y),[{Id:Ie,Date:"",Rate:""}]))}})})]})]})]})]})})},sr=(n(248),n(417),function(e){return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("div",{className:"messagePopup",children:Object(Te.jsxs)("div",{className:"popup",children:[Object(Te.jsxs)("div",{className:"popHead",children:["Message",Object(Te.jsx)("button",{onClick:function(){return e.closePopup()},className:"closePop"})]}),Object(Te.jsx)("div",{className:"popBody",children:e.message})]})})})}),or=function(e){var t=e.pageNav,n={code:"",firstName:"",companyName:"",city:"",state:"",country:"",Panno:"",GSTNo:"",Address1:"",BillAddress:"",pinCode:"",Phone:"",mobile:"",fax:"",email:"",IsClosed:!1,DmsLedgerCode:"",category:"",website:""},r={code:"",firstName:"",mobile:"",email:""},c=Object(a.useState)(n),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(r),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)({mobilerror:"",phonerror:""}),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(null),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)("This is mandatory field"),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(""),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)(),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)(),V=Object(o.a)(Q,2),z=V[0],H=V[1],W=Object(a.useState)(!1),K=Object(o.a)(W,2),J=K[0],Y=K[1],Z=Object(a.useState)(!1),X=Object(o.a)(Z,2),$=X[0],ee=X[1],te=Object(a.useState)(!1),ne=Object(o.a)(te,2),ae=ne[0],re=ne[1],ce=Object(a.useState)(),se=Object(o.a)(ce,2),oe=se[0],ie=se[1],ue=Object(a.useState)([]),le=Object(o.a)(ue,2),de=le[0],be=le[1],je=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),me=Object(o.a)(je,2),Oe=me[0],pe=(me[1],function(e){if("city"===e.target.name){var t=R.find((function(t){return t.CityId===parseInt(e.target.value)}));L(void 0===t?"":t),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))}else if("code"===e.target.name){var n=e.target.getAttribute("data-valid");if(n)Me(e.target.value,n)?(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))):(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!0))),D("This is mandatory field"));else j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))}else if("mobile"===e.target.name||"Phone"===e.target.name){var a=e.target.getAttribute("data-valid");if(a)if(Me(e.target.value,a))e.target.value.length<=10&&(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1))));else h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!0))),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,"")));else h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1))),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))}else{var r=e.target.getAttribute("data-valid");if(r)Me(e.target.value,r)?(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))):(h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!0))),""===e.target.value?j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,""))):"email"===e.target.name&&j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))));else h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1))),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))}}),he=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.dealerCategory.toArray();case 2:t=e.sent,be(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(n),e.next=3,v.customerMaster.where("LedgerType").equals(1).toArray();case 3:t=e.sent,k(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cityMaster.toArray();case 2:t=e.sent,B(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={new:1,update:0,PartyCode:void 0===t.code?"":t.code,PartyName:void 0===t.firstName?"":t.firstName,CompanyCode:void 0===t.companyName?"":t.companyName,CityId:void 0===t.city?"":parseInt(t.city),PAN:void 0===t.Panno?"":t.Panno,GSTNo:void 0===t.GSTNo?"":t.GSTNo,Address:void 0===t.Address1?"":t.Address1,BillAddress:void 0===t.BillAddress?"":t.BillAddress,Pincode:void 0===t.pinCode?"":t.pinCode,Phone2:void 0===t.Phone?"":t.Phone,Phone1:void 0===t.mobile?"":t.mobile,Fax:void 0===t.fax?"":t.fax,Email:void 0===t.email?"":t.email,IsClosed:void 0===t.IsClosed?"":!0===t.IsClosed?1:0,DmsLedgerCode:void 0===t.DmsLedgerCode?"":t.DmsLedgerCode,DealerCategory:void 0===t.category?"":t.category,LedgerType:1,CreatedBy:localStorage.getItem("UserId"),Website:void 0===t.website?"":t.website},!G){e.next=7;break}return a.update=1,e.next=5,v.customerMaster.update(G,a).then((function(e){e?(ie("Data Updated Successfully"),re(!0),j(n)):console.log("")}));case 5:e.next=11;break;case 7:return a.update=0,a.new=1,e.next=11,v.customerMaster.add(a).then((function(e){e?(ie("Data Save Successfully"),re(!0),j(n)):console.log("")}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge={val:z,change_state:function(e){switch(e){case"edit":return fe(),he(),void H(e);case"refresh":return j(n),h(r),L(""),void H(e);case"view":return fe(),j(n),he(),L(""),void H(e);case"add":return U(""),he(),void H(e);case"save":var t=Object.keys(p),a={};return t.forEach((function(e){return a[e]=""===b[e]||null===b[e]||!0===p[e]})),h(a),void(Object.values(a).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):(ve(b),H(e),h(r)));default:return e}},disabledAction:Oe},Ie=function(e){[8,9,33,34,35,36,37,38,39,40,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105].includes(e.keyCode)||(e.preventDefault(),"mobile"===e.target.name?(I(Object(d.a)(Object(d.a)({},g),{},{mobilerror:"Special chars not allowed"})),setTimeout((function(){I(Object(d.a)(Object(d.a)({},g),{},{mobilerror:""}))}),1e3)):"Phone"===e.target.name&&(I(Object(d.a)(Object(d.a)({},g),{},{phonerror:"Special chars not allowed"})),setTimeout((function(){I(Object(d.a)(Object(d.a)({},g),{},{phonerror:""}))}),1e3)))},ye=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("PartyCode").equals(t.target.value).first();case 2:(n=e.sent)&&(h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},t.target.name,!0))),D("Code is already used")),console.log(n,"user");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){xe();var e=function(e){$&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),Y(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[b,N,z,E,$,p]);return Object(Te.jsxs)(Te.Fragment,{children:[ae&&Object(Te.jsx)(sr,{message:oe,closePopup:function(){re(!1)}}),Object(Te.jsxs)("div",{className:"customerMasterBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ge)),Object(Te.jsxs)("div",{className:"customerMasterSection",children:[Object(Te.jsx)("div",{className:"boxTitle",children:"Personal Information"}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:" Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===z||"view"===z?N&&Object(Te.jsx)(Hn.a,{open:J,options:N,onChange:function(e,t){return function(e){if(Y(!1),e){U(e.id),console.log(e,"customer");var t={code:e.PartyCode,firstName:e.PartyName,companyName:e.CompanyCode,city:e.CityId,pinCode:e.Pincode,Phone:e.Phone2,mobile:e.Phone1,Address1:e.Address,BillAddress:e.BillAddress,fax:e.Fax,Panno:e.PAN,GSTNo:e.GSTNo,DmsLedgerCode:e.DmsLedgerCode,category:e.DealerCategory,IsClosed:1===e.IsClosed,email:e.Email,website:e.Website},n=R.find((function(t){return t.CityId===parseInt(e.CityId)}));L(void 0===n?"":n),j(t)}}(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",className:p&&!0===p.code?"autocodeerror":"autocode",onFocus:function(){return ee(!0)},onBlur:function(){ee(!1),Y(!1)}}))}}):Object(Te.jsx)("input",{name:"code",onChange:function(e){return pe(e)},type:"text",onKeyUp:function(e){return ye(e)},className:p&&!0===p.code?"error":"","data-valid":"varChar",value:b&&b.code,readOnly:void 0===z||"view"===z}),p.code?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:C}):null]})})}),Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:" Customer Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"firstName",value:b&&b.firstName,type:"text",className:p&&!0===p.firstName?"error":"",readOnly:void 0===z||"view"===z,"data-valid":"varCharSpace"}),p.firstName?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:Object(Te.jsx)(ot,{content:" This is mandatory field"})}):null]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:" Company Code"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"companyName",value:b&&b.companyName,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:" PAN No"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"Panno",className:p&&!0===p.Panno?"error":"",value:b&&b.Panno,type:"text",readOnly:void 0===z||"view"===z})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"GST No"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"GSTNo",value:b&&b.GSTNo,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Category"})}),Object(Te.jsxs)("select",{name:"category",value:b.category,onChange:function(e){return function(e){var t=e.target,n=t.name,a=t.value;j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},n,a)))}(e)},disabled:void 0===z||"view"===z,children:[Object(Te.jsx)("option",{value:"",children:"select"}),de.map((function(e){return Object(Te.jsx)("option",{value:e.dealercategoryid,children:e.dealercategorycode})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"DMS Ledger Code"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"DmsLedgerCode",value:b&&b.DmsLedgerCode,type:"text",readOnly:void 0===z||"view"===z})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"checkboxNew",style:{marginTop:"22px"},children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"view"===z||"refresh"===z,id:"checkboxOneMark_as_closed",checked:b.IsClosed,onChange:function(e){return function(e){var t=e.target,n=t.name,a=t.checked;console.log(a,"checked"),console.log(n,"name"),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},n,a)))}(e)},name:"IsClosed"}),Object(Te.jsx)("label",{htmlFor:"checkboxOneMark_as_closed",children:Object(Te.jsx)(ot,{content:"Mark as closed"})})]})})})]}),Object(Te.jsx)("div",{className:"boxTitle",children:Object(Te.jsx)(ot,{content:"Address and Contact Info"})}),Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"City"})}),Object(Te.jsxs)("select",{onChange:function(e){return pe(e)},name:"city",value:b&&b.city,children:[Object(Te.jsx)("option",{value:"select",children:"select"}),R&&R.map((function(e,t){return Object(Te.jsx)("option",{disabled:void 0===z||"view"===z,value:e.CityId,children:e.CityName.toUpperCase()},t)}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsx)("select",{name:"state",onChange:function(e){return pe(e)},value:E&&E.StateName,type:"text",children:""===E?Object(Te.jsx)("option",{value:"Select",children:"select"}):Object(Te.jsx)("option",{children:E&&E.StateName.toUpperCase()})})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsx)("select",{name:"country",onChange:function(e){return pe(e)},value:b&&b.country,children:""===E?Object(Te.jsx)("option",{value:"Select",children:"select"}):Object(Te.jsx)("option",{value:"india",children:"INDIA"})})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Pin Code"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"pinCode",value:b&&b.pinCode,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Phone"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"Phone",value:b&&b.Phone,type:"text",onKeyDown:Ie,className:g.phonerror?"error":"","data-valid":"number",readOnly:void 0===z||"view"===z}),g.phonerror?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:g.phonerror}):null]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Mobile"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{name:"mobile",onChange:function(e){pe(e)},onKeyDown:Ie,value:b&&b.mobile,type:"text",className:p&&!0===p.mobile?"error":"","data-valid":"number",readOnly:void 0===z||"view"===z}),g.mobilerror?Object(Te.jsx)("span",{style:{color:"red",fontSize:"15px"},children:g.mobilerror}):null,p.mobile?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:Object(Te.jsx)(ot,{content:"This is mandatory field"})}):null]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Street Address 1"})," "]}),Object(Te.jsx)("textarea",{onChange:function(e){return pe(e)},name:"Address1",value:b&&b.Address1,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Street Address 2"})," "]}),Object(Te.jsx)("textarea",{onChange:function(e){return pe(e)},name:"BillAddress",value:b&&b.BillAddress,type:"text",readOnly:void 0===z||"view"===z})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox mb-0",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Fax"})," "]}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},type:"text",name:"fax",value:b&&b.fax,readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox mb-0",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Email"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"email",value:b&&b.email,type:"text",className:p&&!0===p.email?"error":"","data-valid":"email",readOnly:void 0===z||"view"===z}),p.email?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:Object(Te.jsx)(ot,{content:"This is mandatory field"})}):null]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox mb-0",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Website"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"website",value:b&&b.website,type:"text",readOnly:void 0===z||"view"===z})]})})]})]})]})]})]})},ir=(n(418),function(e){var t=e.onlinestatus,n=e.pageNav,r={Id:0,EmployeeName:"",EmployeeCode:"",ReportingToWhom:"",Designation:"",EmailId:"",ContactNo:""},c={EmployeeName:"",EmployeeCode:"",EmailId:""},s=Object(a.useState)(r),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(c),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(null),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)(!1),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(!1),R=Object(o.a)(P,2),B=R[0],M=R[1],T=Object(a.useState)(null),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)(!1),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)(!1),z=Object(o.a)(V,2),H=z[0],W=z[1],K=Object(a.useState)(),J=Object(o.a)(K,2),Y=J[0],Z=J[1],X=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),$=Object(o.a)(X,2),ee=$[0],te=($[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.employeeMaster.toArray();case 2:return t=e.sent,e.next=5,v.designationMaster.toArray();case 5:n=e.sent,t&&y(t),n&&F(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=7;break}if(!t){e.next=6;break}return te(),e.abrupt("return",Z(n));case 6:alert("you are not online please try again after some time when you online");case 7:if("edit"!==n){e.next=11;break}return te(),W(!0),e.abrupt("return",Z(n));case 11:if("view"!==n){e.next=15;break}return te(),W(!0),e.abrupt("return",Z(n));case 15:if("save"!==n){e.next=27;break}if(a=Object.keys(h),s={},a.forEach((function(e){return s[e]=""===j[e]||null===j[e]||!0===h[e]})),f(s),!(Object.values(s).filter((function(e){return!0===e})).length>0)){e.next=25;break}alert("please fill all the field"),e.next=27;break;case 25:return t?se():alert("you are not online please try again after some time when you online"),e.abrupt("return");case 27:if("refresh"!==n){e.next=31;break}return m(r),f(c),e.abrupt("return",Z(n));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){var t=e.target,n=t.name,a=t.value,r=e.target.getAttribute("data-valid");""===a?"EmployeeName"===n?(W(!0),m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a)))):(m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a))),f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},n,!1)))):r?Me(e.target.value,r)?(m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a))),f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},n,!1)))):(m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a))),f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,!0)))):m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a)))},re=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:_(!1),A(!1),W(!1),m(Object(d.a)(Object(d.a)({},j),{},{id:t.id,Id:t.Id,EmployeeName:t.EmployeeName,EmployeeCode:t.EmployeeCode,ReportingToWhom:t.ReportingTo,Designation:t.Designationid,EmailId:t.Email,ContactNo:t.PresentContactNo}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},e.target.name,e.target.value)))};Object(a.useEffect)((function(){var e=function(e){D&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),A(!0),_(!1))),B&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),M(!1))),U&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),Q(!1)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[I,Y,D,B,U,j]);var se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={EmployeeName:j.EmployeeName,EmployeeCode:j.EmployeeCode,PresentContactNo:j.ContactNo,Designationid:j.Designation,ReportingTo:j.ReportingToWhom,Email:j.EmailId},!j||!j.id){e.next=8;break}return e.next=4,He("/api/EmployeeMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:j.Id}));case 4:202===(n=e.sent).statuscode?v.employeeMaster.update(j.id,Object(d.a)(Object(d.a)({},t),{},{Id:j.Id})).then((function(e){alert(n.msg),ne("refresh")})):alert(n.msg,"statuscode:",n.statuscode),e.next=12;break;case 8:return e.next=10,ze("/api/EmployeeMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:0}));case 10:(a=e.sent).mid>0&&null!==a.mid?v.employeeMaster.add(Object(d.a)(Object(d.a)({},t),{},{Id:a.mid})).then((function(e){alert(a.msg),ne("refresh")})):alert(a.msg,"statuscode:",a.statuscode);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe={val:Y,change_state:ne,disabledAction:ee};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"customerMasterBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},oe)),Object(Te.jsx)("div",{className:"employeeMasterSection mt-2",children:Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:h&&!0===h.EmployeeName?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Employee Name"})}),("view"===Y||"edit"===Y)&&!0===H?Object(Te.jsx)(Hn.a,{open:k,options:I,onChange:function(e,t){return re(t)},getOptionLabel:function(e){return e.EmployeeName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return _(!0)},onBlur:function(){_(!1),A(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"EmployeeName",onChange:ae,className:h&&!0===h.EmployeeName?"error":"",readOnly:"add"!==Y&&"edit"!==Y,value:j&&j.EmployeeName,"data-valid":"varChar"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Employee Code"})}),Object(Te.jsx)("input",{type:"text",name:"EmployeeCode",onChange:ae,className:h&&!0===h.EmployeeCode?"error":"",readOnly:"add"!==Y&&"edit"!==Y,value:j&&j.EmployeeCode,"data-valid":"varChar"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Reporting To whom"})}),Object(Te.jsxs)("select",{name:"ReportingToWhom",onChange:function(e){return ce(e)},value:j&&j.ReportingToWhom,id:"",children:[Object(Te.jsx)("option",{value:"0",children:"None"}),I&&I.map((function(e){return Object(Te.jsxs)("option",{value:e.Id,children:[e.EmployeeName," [",e.EmployeeCode,"]"]})}))]})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Designation"})}),Object(Te.jsxs)("select",{name:"Designation",onChange:function(e){return ce(e)},value:j&&j.Designation,id:"",children:[Object(Te.jsx)("option",{value:"0",children:"None"}),L&&L.map((function(e){return Object(Te.jsx)("option",{value:e.Id,children:e.DesignationName})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Email Id"})}),Object(Te.jsx)("input",{type:"text",name:"EmailId",onChange:ae,className:h&&!0===h.EmailId?"error":"",readOnly:"add"!==Y&&"edit"!==Y,value:j&&j.EmailId,"data-valid":"email"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Contact No"})}),Object(Te.jsx)("input",{type:"text",name:"ContactNo",onChange:ae,className:h&&!0===h.ContactNo?"error":"",readOnly:"add"!==Y&&"edit"!==Y,value:j&&j.ContactNo,"data-valid":"monumber"})]})})]})]})})]})})}),ur=(n(419),function(e){var t=e.onlinestatus,n=e.pageNav,r={ReasonName:"",reasonTypeId:""},c=Object(a.useState)(),s=Object(o.a)(c,2),l=s[0],b=s[1],j=Object(a.useState)(r),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)(r),f=Object(o.a)(h,2),x=f[0],g=f[1],I=Object(a.useState)(null),y=Object(o.a)(I,2),w=y[0],N=y[1],k=Object(a.useState)(null),A=Object(o.a)(k,2),S=A[0],C=A[1],D=Object(a.useState)(!1),_=Object(o.a)(D,2),P=_[0],R=_[1],B=Object(a.useState)(!1),M=Object(o.a)(B,2),T=M[0],E=M[1],L=Object(a.useState)(!1),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),Q=Object(o.a)(U,2),V=Q[0],z=(Q[1],Object(a.useState)(!1)),H=Object(o.a)(z,2),W=(H[0],H[1]),K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.reasonMaster.toArray();case 2:return t=e.sent,e.next=5,v.reasonTypeMaster.toArray();case 5:n=e.sent,C(t),N(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=9;break}if(!t){e.next=8;break}return e.next=4,K();case 4:return g(r),e.abrupt("return",b(n));case 8:alert("you are not online please try again after some time when you online");case 9:if("edit"!==n){e.next=15;break}return e.next=12,K();case 12:return g(r),G(!0),e.abrupt("return",b(n));case 15:if("view"!==n){e.next=21;break}return e.next=18,K();case 18:return g(r),G(!0),e.abrupt("return",b(n));case 21:if("save"===n&&(a=Object.keys(O),c={},a.forEach((function(e){return c[e]=""===x[e]||null===x[e]||!0===O[e]})),p(c),Object.values(c).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):t?Z():alert("you are not online please try again after some time when you online")),"refresh"!==n){e.next=28;break}return g(r),W(!1),p(r),G(!1),e.abrupt("return",b(n));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!1),R(!1),G(!1),n={id:t.id,Id:t.Id,ReasonName:t.ReasonName,reasonTypeId:t.ReasonTypeId},g(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.reasonTypeMaster.where("Id").equals(parseInt(x.reasonTypeId)).first();case 2:if(!(t=e.sent)){e.next=16;break}if(n={ReasonTypeId:parseInt(x.reasonTypeId),ReasonName:x.ReasonName,ReasonTypeName:t.ReasonTypeName},!x.id){e.next=12;break}return e.next=8,He("/api/reasonmaster/",Object(d.a)(Object(d.a)({},n),{},{Id:x.Id}));case 8:202===(a=e.sent).statuscode?v.reasonMaster.update(x.id,n).then((function(e){alert(a.msg),J("refresh")})):alert(a.msg,"statuscode:",a.statuscode),e.next=16;break;case 12:return e.next=14,ze("/api/reasonmaster/",Object(d.a)(Object(d.a)({},n),{},{Id:0}));case 14:(r=e.sent).mid>0&&null!==r.mid?v.reasonMaster.add(Object(d.a)(Object(d.a)({},n),{},{Id:r.mid})).then((function(e){alert(r.msg),J("refresh")})):alert(r.msg,"statuscode:",r.statuscode);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){T&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),R(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[S,w,l,T]);var X={val:l,change_state:J,disabledAction:V};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"customerMasterBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},X)),Object(Te.jsxs)("div",{className:"reasonMasterSection",children:[Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Reason Name"})}),!0===q?Object(Te.jsx)(Hn.a,{open:P,options:S,onChange:function(e,t){return Y(t)},getOptionLabel:function(e){return e.ReasonName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return E(!0)},onBlur:function(){E(!1),R(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"ReasonName",onChange:function(e){""===e.target.value?(G(!0),g(Object(d.a)(Object(d.a)({},x),{},{ReasonName:e.target.value}))):g(Object(d.a)(Object(d.a)({},x),{},{ReasonName:e.target.value}))},className:O&&!0===O.ReasonName?"error":"",readOnly:"view"===l,value:x&&x.ReasonName})]})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"Reason Type"}),Object(Te.jsxs)("select",{name:"reasonTypeId",onChange:function(e){return function(e){g(Object(d.a)(Object(d.a)({},x),{},{reasonTypeId:e.target.value}))}(e)},className:O&&!0===O.reasonTypeId?"error":"",value:x&&x.reasonTypeId,children:[Object(Te.jsx)("option",{value:"",children:"None"}),w&&w.map((function(e){return Object(Te.jsx)("option",{value:e.id,children:e.ReasonTypeName})}))]})]})})})]})]})})}),lr=(n(420),function(e){var t=e.onlinestatus,n=e.pageNav,r={SalePersonName:"",SalePersonCode:"",Commission:"",CommissionValue:"",DesginationId:"",EmailId:""},c=Object(a.useState)(r),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(null),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)([]),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(!1),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(!1),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)(!1),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)(!1),V=Object(o.a)(Q,2),z=V[0],H=V[1],W=Object(a.useState)({SalePersonName:!1,SalePersonCode:!1}),K=Object(o.a)(W,2),J=K[0],Y=K[1],Z=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),X=Object(o.a)(Z,2),$=X[0],ee=(X[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=9;break}if(!t){e.next=8;break}return ae(),j(r),Y({SalePersonName:!1,SalePersonCode:!1}),e.abrupt("return",h(n));case 8:alert("you are not online please try again after some time when you online");case 9:if("edit"!==n){e.next=14;break}return ae(),j(r),Y({SalePersonName:!1,SalePersonCode:!1}),e.abrupt("return",h(n));case 14:if("view"!==n){e.next=19;break}return ae(),j(r),Y({SalePersonName:!1,SalePersonCode:!1}),e.abrupt("return",h(n));case 19:if("save"===n&&(a=Object.keys(g),c={},a.forEach((function(e){return c[e]=""===b[e]||null===b[e]||!0===g[e]})),I(c),Object.values(c).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):t?ne():alert("you are not online please try again after some time when you online")),"refresh"!==n){e.next=25;break}return j(r),I(r),Y({SalePersonName:!1,SalePersonCode:!1}),e.abrupt("return",h(n));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te=function(e){var t=e.target,n=t.name,a=t.value;if(""===a)j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},n,a))),Y(Object(d.a)(Object(d.a)({},J),{},Object(l.a)({},n,!1)));else{var r,c,s=e.target.getAttribute("data-valid");if(s)if(Me(e.target.value,s))j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},n,a))),I(Object(d.a)(Object(d.a)({},g),{},(r={},Object(l.a)(r,n,!1),Object(l.a)(r,"Designation",!1),Object(l.a)(r,"EmailId",!1),Object(l.a)(r,"CommisionPercentage",!1),Object(l.a)(r,"CommisionValue",!1),r)));else j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},n,a))),I(Object(d.a)(Object(d.a)({},g),{},(c={},Object(l.a)(c,n,!0),Object(l.a)(c,"Designation",!1),Object(l.a)(c,"EmailId",!1),Object(l.a)(c,"CommisionPercentage",!1),Object(l.a)(c,"CommisionValue",!1),c)))}},ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={SalePersonName:b.SalePersonName,SalePersonCode:b.SalePersonCode,Commission:b.Commission,CommissionValue:b.CommissionValue,DesginationId:b.DesginationId,EmailId:b.EmailId},!b.id){e.next=8;break}return e.next=4,He("/api/SalePerson/",Object(d.a)(Object(d.a)({},t),{},{Id:b.Id}));case 4:202===(n=e.sent).statuscode?v.salesPersonMaster.update(b.id,t).then((function(e){alert(n.msg),ee("refresh")})):alert(n.msg,"statuscode:",n.statuscode),e.next=12;break;case 8:return e.next=10,ze("/api/SalePerson/",Object(d.a)(Object(d.a)({},t),{},{Id:0}));case 10:(a=e.sent).mid>0&&null!==a.mid?v.salesPersonMaster.add(Object(d.a)(Object(d.a)({},t),{},{Id:a.mid})).then((function(e){alert(a.msg),ee("refresh")})):alert(a.msg,"statuscode:",a.statuscode);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesPersonMaster.toArray();case 2:return t=e.sent,e.next=5,v.designationMaster.toArray();case 5:n=e.sent,k(t),D(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){I({Designation:!1,EmailId:!1,CommisionPercentage:!1,CommisionValue:!1});var e=function(e){R&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),U(!0))),E&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),H(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[N,p,R,E]);var re={val:p,change_state:ee,disabledAction:$};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"customerMasterBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},re)),Object(Te.jsxs)("div",{className:"salePersonMaster",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Sale Person Name"})}),"view"===p||"edit"===p?!1===J.SalePersonName?Object(Te.jsx)(Hn.a,{open:G,options:N,onChange:function(e,t){return function(e){if(e){B(!1),U(!1),Y(Object(d.a)(Object(d.a)({},J),{},{SalePersonName:!0,SalePersonCode:!0}));var t={id:e.id,Id:e.Id,SalePersonName:e.SalePersonName,SalePersonCode:e.SalePersonCode,Commission:e.Commission,CommissionValue:e.CommissionValue,DesginationId:e.DesginationId,EmailId:e.EmailId};I(t),j(t)}else j(r)}(t)},getOptionLabel:function(e){return e.SalePersonName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return B(!0)},onBlur:function(){B(!1),U(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"SalePersonName","data-valid":"varCharSpace",onChange:te,value:b&&b.SalePersonName}):Object(Te.jsx)("input",{name:"SalePersonName",onChange:te,type:"text","data-valid":"varCharSpace",className:g&&!0===g.SalePersonName?"error":"",value:b&&b.SalePersonName})]})}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Sale Person Code"})}),"view"===p||"edit"===p?!1===J.SalePersonCode?Object(Te.jsx)(Hn.a,{open:z,options:N,onChange:function(e,t){return function(e){if(e){L(!1),H(!1),Y(Object(d.a)(Object(d.a)({},J),{},{SalePersonName:!0,SalePersonCode:!0}));var t={id:e.id,Id:e.Id,SalePersonName:e.SalePersonName,SalePersonCode:e.SalePersonCode,Commission:e.Commission,CommissionValue:e.CommissionValue,DesginationId:e.DesginationId,EmailId:e.EmailId};I(t),j(t)}else j(r)}(t)},getOptionLabel:function(e){return e.SalePersonCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return L(!0)},onBlur:function(){L(!1),H(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"SalePersonCode","data-valid":"varChar",onChange:te,value:b&&b.SalePersonCode}):Object(Te.jsx)("input",{name:"SalePersonCode",onChange:te,type:"text","data-valid":"varChar",className:g&&!0===g.SalePersonCode?"error":"",value:b&&b.SalePersonCode})]})})]}),Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Commision Percentage (%)"})}),Object(Te.jsx)("input",{name:"Commission",onChange:te,type:"text","data-valid":"number",className:g&&!0===g.Commission?"error":"",value:b&&b.Commission,readOnly:"add"!==p&&"edit"!==p})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Commission Value"})}),Object(Te.jsx)("input",{name:"CommissionValue",onChange:te,type:"text","data-valid":"number",className:g&&!0===g.CommissionValue?"error":"",value:b&&b.CommissionValue,readOnly:"add"!==p&&"edit"!==p})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Desgination"})}),Object(Te.jsxs)("select",{name:"Designation",onChange:function(e){return function(e){j(Object(d.a)(Object(d.a)({},b),{},{DesginationId:e.target.value}))}(e)},value:b&&b.DesginationId,id:"",children:[Object(Te.jsx)("option",{value:"0",children:"None"}),C&&C.map((function(e){return Object(Te.jsx)("option",{value:e.Id,children:e.DesignationName})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Email ID"})}),Object(Te.jsx)("input",{name:"EmailId",onChange:te,type:"text","data-valid":"email",value:b&&b.EmailId,readOnly:"add"!==p&&"edit"!==p})]})})]})})]})]})})}),dr=(n(421),[{header:"Product Code",field:"ItemCode",width:150},{header:"Product Name",field:"ItemName",width:250},{header:"Qty",field:"quantity",cell:"EditInput"},{header:"MRP",field:"mrp"},{header:"Sale Price",field:"saleprice"},{header:"Gross Amount",field:"grossAmount"},{header:"Auto Discount(%)",field:"autodiscountper"},{header:"Auto Discount Amount",field:"autodiscountamount"},{header:"Manual Discount(%)",field:"manualdiscountper"},{header:"Manual Discount Amount",field:"manualdiscountamount"},{header:"Tax Per",field:"taxper"},{header:"Tax Amount",field:"taxamount"},{header:"Additional Tax",field:"addtaxrate"},{header:"Additional TaxAmount",field:"addtaxamount"},{header:"Surcharge On Tax",field:"surchargerate"},{header:"Surcharge On Tax Amount",field:"surchargeamount"},{header:"Total Tax Amount",field:"totaltaxamount"},{header:"Amount",field:"amount"},{header:"Lot No",field:"lotno"},{header:"Sale Person",field:"salepersonid"},{header:"item Remark",field:"itemremark"},{header:"IGST Rate %",field:"igstrate"},{header:"IGST Amount",field:"igstamount"},{header:"CGST Rate %",field:"cgstrate"},{header:"CGST Amount",field:"cgstamount"},{header:"SGST Rate %",field:"sgstrate"},{header:"SGST Amount",field:"sgstamount"}]),br=function(e){var t=e.pageNav,n={Id:0,saleReturnNo:"",saleReturnDate:"",customerName:"",PartyId:"",InvoiceType:"",AgainstInvoiceId:"",AgainstInvoiceNo:"",salepersonId:0,totalQty:0,cgstTax:0,totalAmount:0,grossAmount:0,sgstTex:0,discount:0,totalDiscountAmount:0,totalTax:0,discountAmount:0,roundOff:0,remark:"",finalAmount:0,products:[]},r=Object(a.useState)(Object(d.a)(Object(d.a)({},n),{},{saleReturnDate:new Date})),c=Object(o.a)(r,2),s=c[0],b=c[1],j=Object(a.useState)(n),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),f=Object(o.a)(h,2),x=f[0],g=(f[1],Object(a.useState)()),I=Object(o.a)(g,2),y=I[0],w=I[1],N=Object(a.useState)(),k=Object(o.a)(N,2),A=k[0],S=k[1],C=Object(a.useState)(!1),D=Object(o.a)(C,2),_=D[0],P=D[1],R=Object(a.useState)(""),B=Object(o.a)(R,2),M=B[0],T=B[1],E=Object(a.useState)(),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)(!1),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=Object(a.useState)(),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(!1),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(!0),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),re=Object(o.a)(ae,2),ce=re[0],se=re[1],oe=Object(a.useState)(!0),ie=Object(o.a)(oe,2),ue=ie[0],le=ie[1],de=Object(a.useState)(!1),be=Object(o.a)(de,2),je=be[0],me=be[1],Oe=Object(a.useState)([]),pe=Object(o.a)(Oe,2),he=pe[0],fe=pe[1],xe=Object(a.useState)({seriesId:"",voucherId:""}),ve=Object(o.a)(xe,2),ge=ve[0],Ie=ve[1],ye=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}fe(n),me(!0),e.next=17;break;case 9:return e.next=11,v.salesReturn.where("SeriesId").equals(0).toArray();case 11:return a=e.sent,r={series:"",seriesId:0,sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,b(Object(d.a)(Object(d.a)({},s),{},{saleReturnNo:c}));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,o,u,l,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=22;break}if(""!==r.seriesId){e.next=10;break}return e.next=7,v.salesReturn.where("SeriesId").equals(0).toArray();case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,v.salesReturn.where("SeriesId").equals(r.seriesId).toArray();case 12:e.t0=e.sent;case 13:return c=e.t0,o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:c}),e.next=17,Ve(o,t.formid);case 17:u=e.sent,b(Object(d.a)(Object(d.a)({},s),{},{saleReturnNo:u})),Ie({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=38;break;case 22:if(""!==r.seriesId){e.next=28;break}return e.next=25,v.salesReturn.where("SeriesId").equals(0).toArray();case 25:e.t1=e.sent,e.next=31;break;case 28:return e.next=30,v.salesReturn.where("SeriesId").equals(r.seriesId).toArray();case 30:e.t1=e.sent;case 31:return l=e.t1,j=Object(d.a)(Object(d.a)({},r),{},{dbcount:l}),e.next=35,Ve(j,t.formid);case 35:m=e.sent,b(Object(d.a)(Object(d.a)({},s),{},{saleReturnNo:m})),Ie({seriesId:r.seriesId,voucherId:r.voucherId});case 38:me(!1);case 39:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ne=function(e){""===e.target.value&&(p(Object(d.a)(Object(d.a)({},O),{},Object(l.a)({},e.target.name,!1))),b(Object(d.a)(Object(d.a)({},s),{},Object(l.a)({},e.target.name,e.target.value)))),p(Object(d.a)(Object(d.a)({},O),{},Object(l.a)({},e.target.name,!1)));var t=e.target.getAttribute("data-valid");t?Me(e.target.value,t)?(b(Object(d.a)(Object(d.a)({},s),{},Object(l.a)({},e.target.name,e.target.value))),p(Object(d.a)(Object(d.a)({},O),{},Object(l.a)({},e.target.name,!1)))):(p(Object(d.a)(Object(d.a)({},O),{},Object(l.a)({},e.target.name,!0))),b(Object(d.a)(Object(d.a)({},s),{},Object(l.a)({},e.target.name,e.target.value)))):b(Object(d.a)(Object(d.a)({},s),{},Object(l.a)({},e.target.name,e.target.value)))},ke=function(){b(Object(d.a)(Object(d.a)({},n),{},{saleReturnDate:new Date})),ze(),q(),Re(),le(!0),P(!1),T(""),fe([]),se()},Ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.SaleReturnDetail.where("AgainstInvoiceId").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 2:return a=e.sent,e.next=5,v.saleInvoiceDetail.where("invoiceid").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 5:if(r=e.sent,c=r.find((function(e){return e.itemid===n})),!(a.length>0)){e.next=14;break}return s=0,a.map((function(e){return e.ItemId===n&&(s+=e.Quantity),e})),o=c.quantity-s,e.abrupt("return",o);case 14:return e.abrupt("return",c.quantity);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),!t){e.next=23;break}return e.next=4,Ye(t.partyid);case 4:if(n=e.sent,!(t.salepersonid&&t.salepersonid>0)){e.next=11;break}return e.next=8,v.salesPersonMaster.where("Id").equals(t.salepersonid).first().then((function(e){return e.SalePersonName})).catch((function(e){return console.log(e)}));case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0="";case 12:if(a=e.t0,!n){e.next=23;break}return r=0===t.Id||""===t.Id?t.id:t.Id,e.next=17,v.saleInvoiceDetail.where("invoiceid").equals(r).toArray().then().catch((function(e){return console.log(e)}));case 17:if(!(c=e.sent)){e.next=23;break}return e.next=21,Promise.all(c.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,c){var s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(n.itemid);case 2:return s=e.sent,e.next=5,v.getItemStock.where("itemid").equals(n.itemid).first().then().catch((function(e){return console.log(e)}));case 5:return o=e.sent,e.next=8,Ae(r,n.itemid);case 8:return u=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},n),{},{prevQty:u,quantity:"",ItemCode:s.ItemCode,ItemName:s.ItemName,lotno:o.lotno,grossAmount:"",totaltaxamount:"",igstamount:0,salepersonid:a,igstrate:t.billingstateid!==t.shippingstateid?n.igstrate:0,cgstrate:t.billingstateid===t.shippingstateid?n.cgstrate:0,sgstrate:t.billingstateid===t.shippingstateid?n.sgstrate:0,sgstamount:0,cgstamount:0,autodiscountper:""===n.autodiscountper?0:n.autodiscountper,manualdiscountamount:0,amount:""}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 21:o=e.sent,b(Object(d.a)(Object(d.a)({},s),{},{products:o,customerName:n.PartyName,salepersonId:t.salepersonid,PartyId:n.Id,AgainstInvoiceNo:t.invoiceno,discount:t.discountpermanual,AgainstInvoiceId:r,InvoiceType:parseInt(t.invoicetype)}));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesInvoice.toArray().then().catch((function(e){return console.log(e)}));case 2:(t=e.sent)&&(n=t.filter((function(e){return"true"!==e.ishold&&"true"!==e.iscancelled})),w(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(e){return e?parseFloat(e).toFixed(2):e},_e=function(e){return e?parseFloat(e):e},Pe=function(e){var t=0,n=0,a=0,r=0,c=0,o=0,i=0,u=0,l=e.map((function(e){var s=Fe(e.saleprice,e.quantity,e.manualdiscountper),l=Fe(e.saleprice,e.quantity,e.autodiscountper),b=_e(s)+_e(l),j=e.quantity*e.saleprice,m=j-b,O=qe(m,e.cgstrate),p=qe(m,e.sgstrate),h=qe(m,e.igstrate),f=qe(m,e.taxper),x=qe(m,e.addtaxrate),v=De(_e(O)+_e(p)+_e(h)+_e(f)+_e(x)),g=_e(m)+_e(v);return t+=e.quantity,c=_e(c)+_e(O),o=_e(o)+_e(p),i=_e(i)+_e(h),a=_e(a)+_e(v),n+=j,r+=g,u=_e(u)+_e(s),Object(d.a)(Object(d.a)({},e),{},{cgstamount:De(_e(O)),sgstamount:De(_e(p)),igstamount:De(_e(h)),manualdiscountamount:s,FinalDiscount:b,autodiscountamount:l,grossAmount:De(j),totaltaxamount:De(_e(v)),amount:De(g)})})),j=qe(r,s.discount),m=_e(r)-_e(j),O=Ke(De(m));b(Object(d.a)(Object(d.a)({},s),{},{products:l,totalQty:parseInt(t),grossAmount:De(n),totalTax:De(a),totalAmount:De(r),cgstTax:De(c),sgstTex:De(o),totalDiscountAmount:De(u),discountAmount:De(j),roundOff:O,finalAmount:De(m+O)}))},Re=function(){X(!0),setTimeout((function(){return X(!1)}),500)},Be=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesReturn.where("Invoiceno").equals(t.saleReturnNo).first().then().catch((function(e){return console.log(e)}));case 2:if(!(a=e.sent)){e.next=12;break}if(r=t.products.map((function(e){var r={InvoiceId:""===a.Id||0===a.Id?a.id:a.Id,AutoDiscountAmount:e.autodiscountamount,ManualDiscountAmount:e.manualdiscountamount,GrossAmount:e.grossAmount,ItemId:e.itemid,Quantity:e.quantity,MRP:e.mrp,ManualDiscount:e.manualdiscountper,ItemRemark:e.itemremark,SalePrice:e.saleprice,AgainstInvoiceDetailid:"",Hsnid:e.HsnId,AgainstInvoiceId:t.AgainstInvoiceId,AltQuantity:0,TotalNetAmount:e.amount,AutoDiscount:e.autodiscountper,IgstRate:e.igstrate,IgstAmount:e.igstamount,SgstRate:e.sgstrate,SgstAmount:e.sgstamount,CgstRate:e.cgstrate,CgstAmount:e.cgstamount,TaxPercentage:e.taxper,TaxPercentageAmt:e.taxamount,surchargerate:e.surchargerate,surchargeamount:e.surchargeamount,AdditionalTax:e.addtaxrate,AdditionalTaxAmt:e.addtaxamount,TotalTaxAmount:e.totaltaxamount};return"update"===n?Object(d.a)(Object(d.a)({},r),{},{id:e.id}):r})),"update"!==n){e.next=10;break}return e.next=8,v.SaleReturnDetail.bulkPut(r).then((function(e){e?(alert("update successfully"),ke()):alert("something went wrong")}));case 8:e.next=12;break;case 10:return e.next=12,v.SaleReturnDetail.bulkAdd(r).then((function(e){e?(alert("data save successfully"),ke()):alert("something went wrong")}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={Id:t.Id,BranchId:"",Invoiceno:t.saleReturnNo,SeriesId:""===ge.seriesId?0:ge.seriesId,TaxAmount:t.totalTax,InvoiceDate:t.saleReturnDate,PartyId:t.PartyId,GrossAmount:t.grossAmount,BillTime:"",EditLog:"",salepersonId:t.salepersonId,SeriesVoucherType:""===ge.voucherId?"":ge.voucherId,TotalBillQty:t.totalQty,DiscountAmount:t.totalDiscountAmount,IsAuthorized:"",InvoiceType:t.InvoiceType,ReceiveAmount:t.finalAmount,Remarks:t.remark,CopunterId:"",AgainstInvoiceId:t.AgainstInvoiceId,totalCgst:t.cgstTax,totalSgst:t.sgstTex,totalIgst:t.igstTex,DiscountPer:t.discount,DiscountPerAmount:t.discountAmount,AgainstInvoiceNo:t.AgainstInvoiceNo,CreatedBy:localStorage.getItem("UserId"),RounOff:t.roundOff,NetAmount:t.totalAmount,CreatedOn:new Date,new:1,update:0},!t.id){e.next=7;break}return a=Object(d.a)(Object(d.a)({},n),{},{Id:t.Id,id:t.id}),e.next=5,v.salesReturn.update(t.id,a).then((function(e){e?Be(t,"update"):console.log("failed")}));case 5:e.next=9;break;case 7:return e.next=9,v.salesReturn.add(n).then((function(e){e?Be(t,"new"):console.log("failed")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.salesReturn.toArray();case 3:n=e.sent,(a=n.filter((function(e){return e.CreatedBy===t})))&&b(Object(d.a)(Object(d.a)({},s),{},{salesReturnList:a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(""),!t){e.next=24;break}return e.next=4,Ye(t.PartyId);case 4:return n=e.sent,a={id:t.id,Id:t.Id,BranchId:"",aleReturnNo:t.Invoiceno,totalTax:t.TaxAmount,saleReturnDate:t.InvoiceDate,customerName:n.PartyName,PartyId:t.PartyId,grossAmount:t.GrossAmount,totalQty:t.TotalBillQty,totalDiscountAmount:t.DiscountAmount,finalAmount:t.ReceiveAmount,remark:t.Remarks,AgainstInvoiceId:t.AgainstInvoiceId,totalAmount:t.NetAmount,salepersonId:t.salepersonId,cgstTax:t.totalCgst,sgstTex:t.totalSgst,igstTex:t.totalIgst,discount:t.DiscountPer,discountAmount:t.DiscountPerAmount,AgainstInvoiceNo:t.AgainstInvoiceNo,CreatedBy:localStorage.getItem("UserId"),roundOff:t.RounOff},Ie({seriesId:t.SeriesId,voucherId:t.SeriesVoucherType}),r=0===t.Id||""===t.Id?t.id:t.Id,e.next=10,v.SaleReturnDetail.where("InvoiceId").equals(r).toArray().then().catch((function(e){return console.log(e)}));case 10:if(!(c=e.sent)){e.next=24;break}if(!(t.salepersonId&&t.salepersonId>0)){e.next=18;break}return e.next=15,v.salesPersonMaster.where("Id").equals(t.salepersonId).first().then((function(e){return e.SalePersonName})).catch((function(e){return console.log(e)}));case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0="";case 19:return o=e.t0,e.next=22,Promise.all(c.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t.ItemId);case 2:return n=e.sent,e.next=5,v.getItemStock.where("itemid").equals(t.ItemId).first().then().catch((function(e){return console.log(e)}));case 5:return a=e.sent,e.next=8,Ae(t.AgainstInvoiceId,t.ItemId);case 8:return r=e.sent,c={id:n.id,ItemCode:n.ItemCode,ItemName:n.ItemName,InvoiceId:t.InvoiceId,autodiscountamount:t.AutoDiscountAmount,manualdiscountamount:t.ManualDiscountAmount,FinalDiscount:t.FinalDiscount,grossAmount:De(t.GrossAmount),salepersonid:o,itemid:t.ItemId,prevQty:r+t.Quantity,quantity:t.Quantity,mrp:t.MRP,lotno:a.lotno,manualdiscountper:De(t.ManualDiscount),autodiscountper:t.AutoDiscount,itemremark:t.ItemRemark,saleprice:De(t.SalePrice),amount:t.TotalNetAmount,AgainstInvoiceDetailid:"",Hsnid:t.Hsnid,AgainstInvoiceId:t.AgainstInvoiceId,AltQuantity:0,igstrate:t.IgstRate,igstamount:De(t.IgstAmount),sgstrate:t.SgstRate,sgstamount:De(t.SgstAmount),cgstrate:t.CgstRate,cgstamount:De(t.CgstAmount),taxper:t.TaxPercentage,taxamount:De(t.TaxPercentageAmt),addtaxrate:t.AdditionalTax,addtaxamount:De(t.AdditionalTaxAmt),totaltaxamount:De(t.TotalTaxAmount),surchargerate:t.surchargerate,surchargeamount:De(t.surchargeamount)},e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:l=e.sent,b(Object(d.a)(Object(d.a)(Object(d.a)({},s),a),{},{products:l}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){p(n)};Object(a.useEffect)((function(){var e=function(e){M&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),P(M))),"Enter"===e.key&&function(e){if(e&&Q){var t=s.products.map((function(t){return t.id===F.id?Object(d.a)(Object(d.a)({},t),{},{quantity:parseInt(e)}):t}));Pe(t)}q(""),se(),K(!1),Re()}(ce)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[s,M,F,Q,ce,O]);var He={val:A,change_state:function(e){switch(e){case"edit":return b(Object(d.a)(Object(d.a)({},n),{},{saleReturnDate:new Date})),S(e),Le(),ne(!0),void le(!1);case"refresh":return ke(),void S(e);case"view":return b(Object(d.a)(Object(d.a)({},n),{},{saleReturnDate:new Date})),Le(),S(e),le(!0),void ne(!1);case"add":return ye(),Ce(),ne(!0),S(e),void le(!0);case"save":return""===s.invoiceNo||""===s.customerName?(p(Object(d.a)(Object(d.a)({},O),{},{invoiceNo:!0})),S("add")):(Ee(s),S(e)),void le(!0);default:return e}},disabledAction:x};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"salesReturnBillWise",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},He)),Object(Te.jsxs)("div",{className:"salesReturnBillWiseIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Sales Return No"})}),"view"===A||"edit"===A?s.salesReturnList&&Object(Te.jsx)(Hn.a,{open:"saleReturnNo"===_,options:s.salesReturnList,onChange:function(e,t){return Ge(t)},getOptionLabel:function(e){return e.Invoiceno.toString()},getOptionSelected:function(e,t){return e.Invoiceno===t.Invoiceno},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return T("saleReturnNo")},onBlur:function(){T(""),P("")}}))}}):Object(Te.jsx)("input",{type:"text",name:"saleReturnNo",onChange:function(e){return Ne(e)},"data-valid":"number",readOnly:!0,className:O&&!0===O.saleReturnNo?"error":"",value:s&&s.saleReturnNo})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Sale Return Date"})}),Object(Te.jsx)(pa.a,{selected:s&&s.saleReturnDate,onChange:function(e){return function(e){b(Object(d.a)(Object(d.a)({},s),{},{saleReturnDate:e}))}(e)},dropdownMode:"select",onChangeRaw:function(e){return function(e){e.preventDefault()}(e)},disabled:ue})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===O.AgainstInvoiceNo?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Select Invoice Number"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===A?y&&Object(Te.jsx)(Hn.a,{open:"invoiceNo"===_,options:y,onChange:function(e,t){return Se(t)},getOptionLabel:function(e){return e.invoiceno},getOptionSelected:function(e,t){return e.invoiceno===t.invoiceno},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return T("invoiceNo")},onBlur:function(){T(""),P("")}}))}}):Object(Te.jsx)("input",{name:"AgainstInvoiceNo",onChange:function(e){return Ne(e)},type:"text",value:s&&s.AgainstInvoiceNo,readOnly:"add"!==A}),O.AgainstInvoiceNo&&Object(Te.jsx)("span",{className:"error",children:"Please select invoice No"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Customer Name"})}),Object(Te.jsx)("input",{type:"text",name:"customerName",className:O&&!0===O.customerName?"error":"",value:s&&s.customerName,readOnly:!0})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:dr,data:s.products&&s.products.length>0?s.products:[],overFlowScroll:!0,editStatus:W,editColumn:te,editfunction:function(){return V(!0),void K(!0)},refreshTable:Z,tblInputOnchange:function(e){return function(e,t){return F.prevQty<e.target.value?(alert("you can't increase Quantity from "+F.prevQty),se(F.prevQty),F.prevQty):(se(e.target.value),e.target.value)}(e)},editbtnText:"Edit Item",selectedTr:function(e){return function(e){q(e),K(!1)}(e)}})})})}),Object(Te.jsxs)("div",{className:"box greyBg mb-0 borderBottom-0",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Qty"})}),Object(Te.jsx)("input",{type:"text",name:"totalQty",value:s&&s.totalQty,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"CGST Tax"})}),Object(Te.jsx)("input",{type:"text",name:"cgstTax",value:s&&s.cgstTax,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Amount"})}),Object(Te.jsx)("input",{type:"text",name:"totalAmount",value:s&&s.totalAmount,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Gross Amount"})}),Object(Te.jsx)("input",{type:"text",name:"grossAmount",value:s&&s.grossAmount,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"SGST Tax"})}),Object(Te.jsx)("input",{type:"text",name:"sgstTex",value:s&&s.sgstTex,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Discount"})," %"]}),Object(Te.jsx)("input",{type:"text",name:"discount",value:s&&s.discount,readOnly:!0})]})})]})]}),Object(Te.jsxs)("div",{className:"box blueBg borderTop-0",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Discount"})}),Object(Te.jsx)("input",{type:"text",name:"totalDiscountAmount",value:s&&s.totalDiscountAmount,className:"bgWhite",readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Tax"})}),Object(Te.jsx)("input",{type:"text",name:"totalTax",value:s&&s.totalTax,className:"bgWhite",readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Discount Amount"})}),Object(Te.jsx)("input",{type:"text",name:"discountAmount",value:s&&s.discountAmount,className:"bgWhite",readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"formBox",children:"\xa0"})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Round Off"})}),Object(Te.jsx)("input",{type:"text",name:"roundOff",className:"bgWhite",value:s&&s.roundOff,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Final Amount"})}),Object(Te.jsx)("input",{type:"text",name:"finalAmount",className:"bgWhite",value:s&&s.finalAmount,readOnly:!0})]})})]})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-2 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{placeholder:"Write remarks here",name:"remark",value:s&&s.remark,onChange:function(e){return Ne(e)},readOnly:"view"===A})]})})})]})]}),je&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:he.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return we(t,e)},children:e.VoucherName})}))})]})})]})},jr=(n(422),[{header:"Item Name",field:"itemname"},{header:"Item Code",field:"itemcode"},{header:"Return Qty",field:"returnQty",cell:"EditInput"},{header:"MRP",field:"MRP"},{header:"Style No.",field:"styleNo"},{header:"Brand",field:"Brand"},{header:"Color",field:"color"},{header:"Size",field:"Size"}]),mr=function(e){var t=e.pageNav,n={Id:"",documentdate:"",documentno:"",erpinvoice:"",gitno:"",inwardno:"",vendorcode:"",vendorname:"",items:[],vendorList:[],inwardList:[],inwardbyVendor:[],prList:[]},r={documentno:"",inwardno:"",documentdate:"",vendorcode:"",vendorname:"",gitno:"",erpinvoice:""},c=Object(a.useState)(r),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(n),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(""),P=Object(o.a)(_,2),B=P[0],M=P[1],T=Object(a.useState)(!1),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)(),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)(!0),z=Object(o.a)(V,2),H=z[0],W=z[1],K=Object(a.useState)(),J=Object(o.a)(K,2),Y=J[0],Z=J[1],X=Object(a.useState)(),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)({seriesId:"",voucherId:""}),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),oe=Object(o.a)(se,2),ie=oe[0],ue=(oe[1],Object(a.useState)(!1)),le=Object(o.a)(ue,2),de=le[0],be=le[1],je=Object(a.useState)([]),me=Object(o.a)(je,2),Oe=me[0],pe=me[1],he=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}pe(n),be(!0),e.next=17;break;case 9:return e.next=11,v.PR_Master.where("Manual").equals(0).toArray();case 11:return a=e.sent,r={series:"",sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,xe(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=16;break}return e.next=6,v.PR_Master.where("Manual").equals(0).toArray();case 6:return c=e.sent,s=c.filter((function(e){return e.SeriesId===(""===r.seriesId?0:r.seriesId)})),o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=11,Ve(o,t.formid);case 11:u=e.sent,xe(u),ce({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=26;break;case 16:return e.next=18,v.PR_Master.where("Manual").equals(0).toArray();case 18:return l=e.sent,b=l.filter((function(e){return e.SeriesId===(""===r.seriesId?0:r.seriesId)})),j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=23,Ve(j,t.formid);case 23:m=e.sent,xe(m),ce({seriesId:r.seriesId,voucherId:r.voucherId});case 26:be(!1);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IC_Master.toArray();case 2:if(!(n=e.sent)){e.next=18;break}a=n.map((function(e){return e.PartyId})),r=ve(a),c=[],e.t0=Object(i.a)().keys(r);case 8:if((e.t1=e.t0()).done){e.next=17;break}return s=e.t1.value,e.next=12,v.customerMaster.where("Id").equals(r[s]).first().then().catch((function(e){return console.log(e)}));case 12:o=e.sent,u={PartyId:r[s],vendorName:o.PartyName,vendorCode:o.PartyCode},c.push(u),e.next=8;break;case 17:h(Object(d.a)(Object(d.a)({},p),{},{documentno:t,documentdate:new Date,vendorList:c.sort((function(e,t){return e.vendorName.localeCompare(t.vendorName)})),inwardList:n}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){return Object(R.a)(new Set(e))},ge=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.PR_Master.where("Manual").equals(0).toArray().then().catch((function(e){return console.log(e)}));case 3:n=e.sent,(a=n.filter((function(e){return e.CreatedBy===t})))&&h(Object(d.a)(Object(d.a)({},p),{},{prList:a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=40;break}return D(""),k(""),e.next=5,v.PR_Detail.where("Prid").equals(t.id).toArray().then().catch((function(e){return console.log(e)}));case 5:return n=e.sent,e.next=8,v.IC_Master.where("id").equals(n[0].InwardDetailId).first();case 8:return a=e.sent,e.next=11,v.customerMaster.where("Id").equals(t.vendorid).first();case 11:return r=e.sent,e.next=14,v.GITMaster.where("gitid").equals(a.GIT).first().then().catch((function(e){return console.log(e)}));case 14:if(c=e.sent,!n){e.next=40;break}s=[],o=Object(Jn.a)(n),e.prev=18,o.s();case 20:if((u=o.n()).done){e.next=29;break}return l=u.value,e.next=24,v.itemMaster.where("ItemId").equals(l.ItemId).first().then().catch((function(e){return console.log(e)}));case 24:b=e.sent,j={id:l.id,InwardDetailId:l.InwardDetailId,Prid:l.Prid,ItemId:l.ItemId,returnQty:l.ReturnBaseQty,Rate:l.Rate,itemname:void 0===b?"":b.ItemName,itemcode:void 0===b?"":b.ItemCode,MRP:l.MRP},s.push(j);case 27:e.next=20;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(18),o.e(e.t0);case 34:return e.prev=34,o.f(),e.finish(34);case 37:m={id:t.id,documentno:t.PurchaseReturnNo,documentdate:t.PurchaseReturnDate,venderId:t.vendorid,inwardno:a.InwardNo,vendorcode:r.PartyCode,vendorname:r.PartyName,gitno:c.git_no,erpinvoice:c.git_no,items:s},h(Object(d.a)(Object(d.a)({},p),m)),ce({seriesId:t.SeriesId,voucherId:t.SeriesVoucherType});case 40:case"end":return e.stop()}}),e,null,[[18,31,34,37]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(){h(n),D(""),k(""),M(),j(r),W(!1),ce({seriesId:"",voucherId:""})},we=function(e){if(e){var t="VendorName"===C?"code":"name";D(""),k("");var n=p.inwardList.filter((function(t){return t.PartyId===e.PartyId}));h(Object(d.a)(Object(d.a)({},p),{},{vendorname:e.vendorName,vendorcode:e.vendorCode,venderId:e.PartyId,inwardbyVendor:n})),M(t)}},Ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=34;break}return e.next=3,v.GITMaster.where("gitid").equals(t.GIT).first().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.next=6,v.IC_Detail.where("InwardNo").equals(t.InwardNo).toArray().then().catch((function(e){return console.log(e)}));case 6:if(!(a=e.sent)){e.next=34;break}r=[],c=Object(Jn.a)(a),e.prev=10,c.s();case 12:if((s=c.n()).done){e.next=23;break}return o=s.value,e.next=16,v.itemMaster.where("ItemId").equals(o.ItemId).first().then().catch((function(e){return console.log(e)}));case 16:u=e.sent,o.itemname=void 0===u?"":u.ItemCode,o.itemcode=void 0===u?"":u.ItemName,o.returnQty=0,r.push(o);case 21:e.next=12;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(10),c.e(e.t0);case 28:return e.prev=28,c.f(),e.finish(28);case 31:h(Object(d.a)(Object(d.a)({},p),{},{gitno:n.git_no,erpinvoice:n.git_no,inwardno:t.InwardNo,items:r})),D(""),k("");case 34:case"end":return e.stop()}}),e,null,[[10,25,28,31]])})));return function(t){return e.apply(this,arguments)}}(),ke=Object(a.useCallback)((function(){var e=p.items.map((function(e){return e.ItemId===ee.ItemId?Object(d.a)(Object(d.a)({},e),Y):e}));h(Object(d.a)(Object(d.a)({},p),{},{items:e}))}),[ee,Y,p]),Ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.PR_Master.where("PurchaseReturnNo").equals(p.documentno).first();case 2:if(!(t=e.sent)){e.next=12;break}if(n=p.items.map((function(e){var n={Prid:t.id,ItemId:e.ItemId,ReturnBaseQty:parseInt(e.returnQty),ReturnAltQty:0,Rate:e.Rate,InwardDetailId:e.id,MRP:e.MRP};return L?(n.id=e.id,n.InwardDetailId=e.InwardDetailId,n):n})),L){e.next=10;break}return e.next=8,v.PR_Detail.bulkAdd(n).then((function(e){e&&(alert("data save successfully"),ye(),I("save"))})).catch((function(e){return console.log(e)}));case 8:e.next=12;break;case 10:return e.next=12,v.PR_Detail.bulkPut(n).then((function(e){e&&(alert("data update successfully"),ye(),I("save"))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={PurchaseReturnNo:p.documentno,PurchaseReturnDate:p.documentdate,vendorid:p.venderId,Manual:0,InwardNo:p.inwardno,GITNo:p.gitno,CreatedBy:localStorage.getItem("UserId"),CreatedOn:new Date,SeriesId:""===re.seriesId?0:re.seriesId,SeriesVoucherType:""===re.voucherId?"":re.voucherId},L){e.next=6;break}return e.next=4,v.PR_Master.add(Object(d.a)(Object(d.a)({},t),{},{new:1,update:0})).then((function(e){e&&Ae()})).catch((function(e){return console.log(e)}));case 4:e.next=8;break;case 6:return e.next=8,v.PR_Master.put(p.id,Object(d.a)(Object(d.a)({},t),{},{update:1})).then((function(e){e&&Ae()})).catch((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){C&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),k(C))),"Enter"===e.key&&(e.preventDefault(),ke(),Q(!1))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[C,ee,p,ke,b]);var Ce={val:g,change_state:function(e){switch(e){case"edit":return I(e),ge(),F(!0),void W(!0);case"refresh":return ye(),F(!1),void I(e);case"view":return ge(),F(!1),W(!1),void I(e);case"add":return he(),F(!1),W(!0),void I(e);case"save":var t=Object.keys(b),n={};return t.forEach((function(e){return n[e]=""===p[e]})),j(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):Se());default:return e}},disabledAction:ie};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"purchaseReturn",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Ce)),Object(Te.jsxs)("div",{className:"purchaseReturnIn",children:[Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:b&&!0===b.documentno?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Document No"}),"."]}),"view"===g||"edit"===g?Object(Te.jsx)(Hn.a,{open:"DocumentNo"===N,options:p.prList,onChange:function(e,t){return Ie(t)},getOptionLabel:function(e){return e.PurchaseReturnNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return D("DocumentNo")},onBlur:function(){D(!1),k(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"documentNo",readOnly:!0,value:p&&p.documentno})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:b&&!0===b.documentdate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Document Date"})}),Object(Te.jsx)(pa.a,{selected:p&&p.documentdate,minDate:p&&p.documentdate,maxDate:p&&p.documentdate,onChangeRaw:function(e){return function(e){e.preventDefault()}(e)}})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:b&&!0===b.vendorname?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Vendor Name"})}),"add"===g&&"name"!==B?Object(Te.jsx)(Hn.a,{open:"VendorName"===N,options:p.vendorList,onChange:function(e,t){return we(t)},getOptionLabel:function(e){return e.vendorName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return D("VendorName")},onBlur:function(){D(!1),k(!1)}}))}}):Object(Te.jsx)("input",{name:"vendorName",type:"text",readOnly:!0,value:p&&p.vendorname})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:b&&!0===b.vendorcode?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Vendor Code"})}),"add"===g&&"code"!==B?Object(Te.jsx)(Hn.a,{open:"VendorCode"===N,options:p.vendorList,onChange:function(e,t){return we(t)},getOptionLabel:function(e){return e.vendorCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return D("VendorCode")},onBlur:function(){D(!1),k(!1)}}))}}):Object(Te.jsx)("input",{name:"vendorCode",type:"text",readOnly:!0,value:p&&p.vendorcode})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 autoComp",children:Object(Te.jsxs)("div",{className:b&&!0===b.inwardno?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Inward No"}),"."]}),"add"===g?Object(Te.jsx)(Hn.a,{open:"InwardNo"===N,options:p.inwardbyVendor,onChange:function(e,t){return Ne(t)},getOptionLabel:function(e){return e.InwardNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return D("InwardNo")},onBlur:function(){D(!1),k(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"inwardNo",readOnly:!0,value:p&&p.inwardno})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:b&&!0===b.gitno?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"GIT No"}),"."]}),Object(Te.jsx)("input",{type:"text",name:"gitNo",readOnly:!0,value:p&&p.gitno})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:b&&!0===b.erpinvoice?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"ERP Invoice"})}),Object(Te.jsx)("input",{type:"text",name:"erpinvoice",readOnly:!0,value:p&&p.erpinvoice})]})})]})]}),Object(Te.jsx)("div",{className:"tableBox",style:{marginBottom:"15px"},children:Object(Te.jsx)(Na,{coulmn:jr,data:p.items,overFlowScroll:!0,selectedTr:function(e){return function(e){te(e),Q(!1)}(e)},editColumn:H,editfunction:function(){Q(!0)},editStatus:U,tblInputOnchange:function(e){return function(e){return Z(Object(d.a)(Object(d.a)({},Y),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)}})})]}),de&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:Oe.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return fe(t,e)},children:e.VoucherName})}))})]})})]})})},Or=n(175),pr=(n(423),function(e){var t=e.pageNav,n={customerList:[],adjustNOList:[],mainObj:{advanceadjustmentno:"",advanceadjustmentdate:"",partyid:"",customerName:"",advanceadjustmentamount:"",advanceadjustmentrefundamount:"",remarks:"",createdby:localStorage.getItem("UserId"),amountadjusted:"",new:1,update:0}},r={advanceadjustmentno:"",advanceadjustmentdate:"",customerName:"",advanceadjustmentamount:"",advanceadjustmentrefundamount:""},c=Object(a.useState)(),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(Object(d.a)(Object(d.a)({},n),{},{mainObj:Object(d.a)(Object(d.a)({},n.mainObj),{},{advanceadjustmentdate:new Date})})),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(!1),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(!1),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)([]),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),V=Object(o.a)(Q,2),z=V[0],H=(V[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}U(n),L(!0),e.next=17;break;case 9:return e.next=11,v.advanceAdjustment.toArray();case 11:return a=e.sent,r={series:"",sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,K(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),W=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=14;break}return e.next=6,v.advanceAdjustment.toArray();case 6:return c=e.sent,s=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:c}),e.next=10,Ve(s,t.formid);case 10:o=e.sent,K(o),e.next=22;break;case 14:return e.next=16,v.advanceAdjustment.toArray();case 16:return u=e.sent,l=Object(d.a)(Object(d.a)({},r),{},{dbcount:u}),e.next=20,Ve(l,t.formid);case 20:b=e.sent,K(b);case 22:L(!1);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("LedgerType").equals(1).toArray().then().catch((function(e){return console.log(e)}));case 2:n=e.sent,h(Object(d.a)(Object(d.a)({},p),{},{customerList:n.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})),mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},{advanceadjustmentno:t})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.target.getAttribute("data-valid");t?Me(e.target.value,t)?(h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},Object(l.a)({},e.target.name,e.target.value))})),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,!1)))):(e.target.value||h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},Object(l.a)({},e.target.name,""))})),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,!0)))):h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},Object(l.a)({},e.target.name,e.target.value))}))},Y=function(){h(Object(d.a)(Object(d.a)({},n),{},{mainObj:Object(d.a)(Object(d.a)({},n.mainObj),{},{advanceadjustmentdate:new Date})})),I(r),k(!1)},Z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.advanceAdjustment.toArray().then().catch((function(e){return console.log(e)}));case 3:n=e.sent,a=n.filter((function(e){return e.createdby===t})),h(Object(d.a)(Object(d.a)({},p),{},{adjustNOList:a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,v.customerMaster.where("Id").equals(t.partyid).first().then().catch((function(e){return console.log(e)}));case 3:n=e.sent,h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},t),{},{customerName:n.PartyName})}));case 5:B(!1),D(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e,t,n=((e=p.mainObj)[t="customerName"],Object($n.a)(e,[t].map(Or.a)));console.log(n,"newObjnewObj"),N?v.advanceAdjustment.put(Object(d.a)(Object(d.a)({},n),{},{update:1})).then((function(e){e&&(alert("data update successfully"),Y(),j("save"))})).catch((function(e){return console.log(e)})):v.advanceAdjustment.add(Object(d.a)(Object(d.a)({},n),{},{createdon:new Date})).then((function(e){e&&(alert("data add successfully"),Y(),j("save"))})).catch((function(e){return console.log(e)}))};Object(a.useEffect)((function(){console.log(p,"dfgfgf");var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),D(R))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[p,R,g]);var ee={val:b,change_state:function(e){switch(e){case"add":return H(),k(!1),void j(e);case"edit":return Z(),k(!0),void j(e);case"view":return j(e),Z(),void k(!1);case"refresh":return Y(),void j(e);case"save":var t=Object.keys(g),n={};return t.forEach((function(e){return n[e]=""===p.mainObj[e]})),I(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):$());default:return e}},disabledAction:z};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"advanceAdjustment",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ee)),Object(Te.jsx)("div",{className:"advanceAdjustmentIn",children:Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===g.advanceadjustmentno?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Adv Adjustment No"})}),"edit"===b||"view"===b?Object(Te.jsx)(Hn.a,{open:"adjustmentNo"===C,options:p.adjustNOList,onChange:function(e,t){return X(t)},getOptionLabel:function(e){return e.advanceadjustmentno.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return B("adjustmentNo")},onBlur:function(){B(""),D("")}}))}}):Object(Te.jsx)("input",{type:"text",value:p.mainObj.advanceadjustmentno,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===g.advanceadjustmentdate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Adv Adjustment Date"})}),Object(Te.jsx)(pa.a,{selected:p.mainObj.advanceadjustmentdate,minDate:p.mainObj.advanceadjustmentdate,maxDate:p.mainObj.advanceadjustmentdate})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===g.customerName?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Customer Name"})}),"add"===b?Object(Te.jsx)(Hn.a,{open:"customer"===C,options:p.customerList,onChange:function(e,t){return function(e){e&&(h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},{partyid:e.Id,customerName:e.PartyName})})),I(Object(d.a)(Object(d.a)({},g),{},{customerName:!1})),B(!1),D(!1))}(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return B("customer")},onBlur:function(){B(""),D("")}}))}}):Object(Te.jsx)("input",{type:"text",value:p.mainObj.customerName,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===g.advanceadjustmentamount?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Adv Amount"})}),Object(Te.jsx)("input",{type:"text",name:"advanceadjustmentamount",value:p.mainObj.advanceadjustmentamount,"data-valid":"number",onChange:"view"===b?function(){return!1}:function(e){return J(e)}})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===g.advanceadjustmentrefundamount?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Refund Amount"})}),Object(Te.jsx)("input",{type:"text",name:"advanceadjustmentrefundamount",value:p.mainObj.advanceadjustmentrefundamount,onChange:"view"===b?function(){return!1}:function(e){return J(e)},"data-valid":"number"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Adjustment Amount"})}),Object(Te.jsx)("input",{name:"amountadjusted",type:"text",value:p.mainObj.amountadjusted,onChange:"view"===b?function(){return!1}:function(e){return J(e)},readOnly:!1})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-2 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remarks",placeholder:"Write remarks here",onChange:"view"===b?function(){return!1}:function(e){return J(e)},value:p.mainObj.remarks})]})})})]})}),E&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:G.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return W(t,e)},children:e.VoucherName})}))})]})})]})})}),hr=(n(192),[{header:"Item Name",field:"ItemName",width:250,cell:"autocomplete"},{header:"Unit",field:"unit"},{header:"Invoice Qty",field:"Quantity",cell:"EditInput"},{header:"Invoice Alt Qty",field:"altqty"},{header:"Rate",field:"Rate",cell:"EditInput"},{header:"Disc (%)",field:"DiscountPer",cell:"EditInput"},{header:"Discount Amount",field:"DiscountAmount"},{header:"Gross Amount",field:"Amount"},{header:"Final Discount",field:"finalDiscount"},{header:"Total Amount",field:"totalAmount"},{header:"IGST Tax (%)",field:"igstrate"},{header:"IGST Amount",field:"igstamount"},{header:"CGST Tax (%)",field:"cgstrate"},{header:"CGST Amount",field:"cgstamount"},{header:"SGST Tax (%)",field:"sgstrate"},{header:"SGST Amount",field:"sgstamount"}]),fr=function(e){var t=e.BillingObj,n=e.onchange,a=e.requiredObj,r=e.val;return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"billingAddr",children:[Object(Te.jsx)("h4",{children:Object(Te.jsx)(ot,{content:"Billing Detail"})}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===a.billingstateid?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsxs)("select",{name:"billingstateid",value:t.billingstateid,id:"",onChange:n,children:[Object(Te.jsx)("option",{value:"",children:"select"}),t.stateList.map((function(e,t){return Object(Te.jsx)("option",{disabled:"view"===r,value:e.StateId,children:e.StateName},t)}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsx)("select",{name:"",id:"",children:t.billingstateid?Object(Te.jsx)("option",{value:"india",children:"India"}):Object(Te.jsx)("option",{value:"",children:"Select"})})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===a.billingaddress?"formBox error mb-0":"formBox mb-0",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Billing Address"})}),Object(Te.jsx)("input",{type:"text",name:"billingaddress",value:t.billingaddress,onChange:n,readOnly:"view"===r})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===a.billinggstinno?"formBox error mb-0":"formBox mb-0",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Billing GSTN No"}),"."]}),Object(Te.jsx)("input",{type:"text",name:"billinggstinno",value:t.billinggstinno,onChange:n,readOnly:"view"===r})]})})]})]}),Object(Te.jsxs)("div",{className:"shippingAddr",children:[Object(Te.jsx)("h4",{children:Object(Te.jsx)(ot,{content:"Shipping Detail"})}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===a.shippingstateid?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsxs)("select",{name:"shippingstateid",value:t.shippingstateid,id:"",onChange:n,children:[Object(Te.jsx)("option",{value:"",children:"Select"}),t.stateList.map((function(e,t){return Object(Te.jsx)("option",{disabled:"view"===r,value:e.StateId,children:e.StateName},t)}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsx)("select",{name:"",id:"",children:t.shippingstateid?Object(Te.jsx)("option",{value:"india",children:"India"}):Object(Te.jsx)("option",{value:"",children:"Select"})})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===a.shippingaddress?"formBox error mb-0":"formBox mb-0",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Shipping Address"})}),Object(Te.jsx)("input",{type:"text",name:"shippingaddress",value:t.shippingaddress,onChange:n,readOnly:"view"===r})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===a.shippinggstinno?"formBox error mb-0":"formBox mb-0",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Shipping GSTN No"}),"."]}),Object(Te.jsx)("input",{type:"text",name:"shippinggstinno",value:t.shippinggstinno,onChange:n,readOnly:"view"===r})]})})]})]})]})},xr=function(e){var t=e.taxObject;return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"taxAmount",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Gross Amount"})}),Object(Te.jsx)("input",{type:"text",value:t.grossamount,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Discount"})}),Object(Te.jsx)("input",{type:"text",value:t.discountamount,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Tax"})}),Object(Te.jsx)("input",{type:"text",value:t.taxamount,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Amount"})}),Object(Te.jsx)("input",{type:"text",value:t.totalAmount,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Round Off"})}),Object(Te.jsx)("input",{type:"text",value:t.roundOff,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Final Amount"})}),Object(Te.jsx)("input",{type:"text",value:t.netamount,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"IGST Amount"})}),Object(Te.jsx)("input",{type:"text",value:t.igstAmount,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"SGST Amount"})}),Object(Te.jsx)("input",{type:"text",value:t.sgstAmount,readOnly:!0})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"CGST Amount"})}),Object(Te.jsx)("input",{type:"text",value:t.cgstAmount,readOnly:!0})]})})})]})})},vr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.GSTClassification[0].HsnId)){e.next=6;break}return a={},e.next=5,v.hsnMaster.where("Id").equals(n).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=void 0!==t[0].IGST[0].CGST[0].CgstTaxRate?t[0].IGST[0].CGST[0].CgstTaxRate:0,r=void 0!==t[0].IGST[0].CGST[0].SgstTaxRate?t[0].IGST[0].CGST[0].SgstTaxRate:0,c=void 0!==t[0].IGST[0].IgstTaxRate?t[0].IGST[0].IgstTaxRate:0,a={cgstRate:n,sgstRate:r,igstRate:c};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gr=function(e,t){return e*t/100},Ir=function(e){return e?parseFloat(e).toFixed(2):e},yr=function(e){return e?parseFloat(e).toFixed(4):e},wr=function(e){var t=0,n=0,a=0,r=0,c=0,s=0;return e.map((function(e){return t=Number(t)+(void 0===e.Amount?0:Number(e.Amount)),n=Number(n)+(void 0===e.DiscountAmount?0:Number(e.DiscountAmount)),a=Number(a)+(void 0===e.igstamount?0:Number(e.igstamount)),r=Number(r)+(void 0===e.cgstamount?0:Number(e.cgstamount)),c=Number(c)+(void 0===e.sgstamount?0:Number(e.sgstamount)),s=Number(s)+(void 0===e.totalAmount?0:Number(e.totalAmount)),e})),{grossamount:Ir(t),discountamount:Ir(n),taxamount:Ir(parseFloat(a)+parseFloat(r)+parseFloat(c)),netamount:Ir(parseFloat(s)+Nr(Ir(s))),roundOff:Nr(Ir(s)),totalAmount:Ir(s),igstAmount:Ir(a),cgstAmount:Ir(r),sgstAmount:Ir(c)}},Nr=function(e){var t=(e+"").split(".")[1];if(t>0){for(var n="1",a=0;a<t.toString().length;a++)n+="0";var r=parseInt(n)-t;if(r.toString().length<t.toString().length){for(var c=t.toString().length-r.toString().length,s="",o=0;o<c;o++)s+="0";var i=s+r.toString();return parseFloat("0."+i)}return parseFloat("0."+r)}return parseFloat("0.00")},kr=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[a,["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r].join("-")},Ar=function(e){var t=e.pageNav,n={InvoiceNo:"",InvoiceDate:"",PartyId:"",vendorCode:"",vendorName:"",LedgerType:"",invoicetype:3,salesInvoiceNo:"",IsPurchaseInvoice:!1,vendorList:[],invoiceList:[],slPrList:[],taxpage:{grossamount:"0.00",discountamount:"0.00",taxamount:"0.00",netamount:"0.00",roundOff:"0.00",totalAmount:"0.00",igstAmount:"0.00",cgstAmount:"0.00",sgstAmount:"0.00"},billingcountryid:"",billingstateid:"",billingaddress:"",billinggstinno:"",shippingcountryid:"",shippingstateid:"",shippingaddress:"",shippinggstinno:"",CreatedBy:localStorage.getItem("UserId"),CreatedByName:localStorage.getItem("fname"),remark:"",dncn_against_pi:"",referencetype:"",referenceid:"",itemList:[],items:[],stateList:[]},r={InvoiceId:"",ItemId:"",ItemName:"",unit:"",isaltrate:"",Quantity:"",altqty:"",Rate:"",Amount:"",totalAmount:"",finalDiscount:"",DiscountPer:"",DiscountAmount:"",hsnclassificationid:"",igstrate:0,cgstrate:0,sgstrate:0,igstamount:0,cgstamount:0,sgstamount:0},c={InvoiceNo:"",InvoiceDate:"",vendorCode:"",vendorName:""},s=Object(a.useState)(),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(c),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(n),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)(),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(),B=Object(o.a)(P,2),M=B[0],T=B[1],E=Object(a.useState)(!0),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)(!1),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=Object(a.useState)(),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(!1),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),re=Object(o.a)(ae,2),ce=re[0],se=re[1],oe=Object(a.useState)(""),ie=Object(o.a)(oe,2),ue=(ie[0],ie[1]),le=Object(a.useState)(!1),de=Object(o.a)(le,2),be=de[0],je=de[1],me=Object(a.useState)([]),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)(!1),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=Object(a.useState)(!0),ye=Object(o.a)(Ie,2),we=ye[0],Ne=ye[1],ke=Object(a.useState)({seriesId:"",voucherId:""}),Ae=Object(o.a)(ke,2),Se=Ae[0],Ce=Ae[1],De=Object(a.useState)("billingInfo"),_e=Object(o.a)(De,2),Pe=_e[0],Re=_e[1],Be=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),Me=Object(o.a)(Be,2),Ee=Me[0],Le=(Me[1],function(e){Re(e)}),Fe=function(){y(n),se(""),ne(""),ue(""),f(c),et(),Ne(!0)},qe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,r,c,s,o,u,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target,c=r.name,!0!==(s=r.checked)){e.next=7;break}return e.next=4,v.PurchaseInvoice.where("PartyId").equals(I.PartyId).toArray().then().catch((function(e){return console.log(e)}));case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,v.salesInvoice.where("partyid").equals(I.PartyId).toArray().then().catch((function(e){return console.log(e)}));case 9:e.t0=e.sent;case 10:return o=e.t0,u=!0===I.IsPurchaseInvoice?o.filter((function(e){return 0===e.invoicetype||1===e.invoicetype})):o,e.next=14,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 14:b=e.sent,y(Object(d.a)(Object(d.a)({},I),{},(a={},Object(l.a)(a,c,s),Object(l.a)(a,"slPrList",u),Object(l.a)(a,"salesInvoiceNo",""),Object(l.a)(a,"taxpage",n.taxpage),Object(l.a)(a,"items",[]),Object(l.a)(a,"itemList",b),a))),et(),X(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(e){"billingstateid"===e.target.name?I.billingstateid!==e.target.value&&(ge(!0),setTimeout((function(){ge(!1)}),1e3),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value)))):"shippingstateid"===e.target.name?I.shippingstateid!==e.target.value&&(ge(!0),setTimeout((function(){ge(!1)}),1e3),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value)))):(y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value))),""===e.target.value?f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,""))):f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,!1))))},ze=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=18;break}if(!(n.length>0)){e.next=9;break}he(n),je(!0),e.next=18;break;case 9:return e.next=11,v.PurchaseInvoice.where("invoicetype").equals(3).toArray();case 11:return a=e.sent,r=a.filter((function(e){return 0===e.seriesid})),c={series:"",sCount:0,digit:5,dbcount:r},e.next=16,Ve(c,t.formid);case 16:s=e.sent,We(s);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=16;break}return e.next=6,v.PurchaseInvoice.where("invoicetype").equals(3).toArray();case 6:return c=e.sent,s=c.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=11,Ve(o,t.formid);case 11:u=e.sent,We(u),Ce({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=26;break;case 16:return e.next=18,v.PurchaseInvoice.where("invoicetype").equals(3).toArray();case 18:return l=e.sent,b=l.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=23,Ve(j,t.formid);case 23:m=e.sent,We(m),Ce({seriesId:r.seriesId,voucherId:r.voucherId});case 26:je(!1);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),We=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.toArray().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,a=n&&n.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})),e.next=6,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 6:return r=e.sent,e.next=9,Ke();case 9:c=e.sent,y(Object(d.a)(Object(d.a)({},I),{},{InvoiceNo:t,InvoiceDate:new Date,vendorList:a,itemList:r,stateList:c}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,e.next=3,v.cityMaster.toArray();case 3:return n=e.sent,a=n.filter((function(e){var n=t.has(e.StateName);return t.add(e.StateName),!n})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}if(!0!==I.IsPurchaseInvoice){e.next=7;break}return e.next=4,v.PurchaseInvoice.where("PartyId").equals(t.Id).toArray().then().catch((function(e){return console.log(e)}));case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,v.salesInvoice.where("partyid").equals(t.Id).toArray().then().catch((function(e){return console.log(e)}));case 9:e.t0=e.sent;case 10:n=e.t0,a=!0===I.IsPurchaseInvoice?n.filter((function(e){return 0===e.invoicetype||1===e.invoicetype})):n,y(Object(d.a)(Object(d.a)({},I),{},{PartyId:t.Id,vendorCode:t.PartyCode,vendorName:t.PartyName,LedgerType:t.LedgerType,slPrList:a})),f(Object(d.a)(Object(d.a)({},h),{},{vendorName:!1,vendorCode:!1})),se(""),ne(""),Ne(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e){""===e.target.value?(Ne(!0),y(Object(d.a)(Object(d.a)({},I),{},{vendorCode:"",vendorName:""}))):y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value)))},Ze=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=33;break}if(n=0===t.Id||""===t.Id?t.id:t.Id,!0!==I.IsPurchaseInvoice){e.next=8;break}return e.next=5,v.PurchaseInvoiceDetail.where("InvoiceId").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,v.saleInvoiceDetail.where("invoiceid").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 10:e.t0=e.sent;case 11:a=e.t0,r=[],c=Object(Jn.a)(a),e.prev=14,c.s();case 16:if((s=c.n()).done){e.next=24;break}return o=s.value,e.next=20,v.itemMaster.where("Id").equals(!0===I.IsPurchaseInvoice?o.ItemId:o.itemid).first().then().catch((function(e){return console.log(e)}));case 20:(u=e.sent)&&r.push(u);case 22:e.next=16;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(14),c.e(e.t1);case 29:return e.prev=29,c.f(),e.finish(29);case 32:y(Object(d.a)(Object(d.a)({},I),{},{salesInvoiceNo:!1===I.IsPurchaseInvoice?t.invoiceno:t.InvoiceNo,referenceid:t.Id,itemList:r}));case 33:se(""),ne("");case 35:case"end":return e.stop()}}),e,null,[[14,26,29,32]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){_(!0),setTimeout((function(){return _(!1)}),500)},tt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I.items.length>0)){e.next=18;break}if(!I.items.find((function(e){return e.ItemId===t.ItemId}))){e.next=7;break}return alert("you have already select this item"),e.abrupt("return",!1);case 7:return e.next=9,vr(t);case 9:if(n=e.sent,!t){e.next=16;break}return a=t.GSTClassification[0].HsnId,e.next=14,Xe(t.ItemId);case 14:r=e.sent,K(Object(d.a)(Object(d.a)({},W),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:n.igstRate,cgstrate:n.cgstRate,sgstrate:n.sgstRate,hsnid:a,unitId:t.UnitName,unit:r}));case 16:e.next=27;break;case 18:return e.next=20,vr(t);case 20:if(c=e.sent,!t){e.next=27;break}return s=t.GSTClassification[0].HsnId,e.next=25,Xe(t.ItemId);case 25:o=e.sent,K(Object(d.a)(Object(d.a)({},W),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:c.igstRate,cgstrate:c.cgstRate,sgstrate:c.sgstRate,hsnid:s,unitId:t.UnitName,unit:o}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=Object(a.useCallback)(Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s,o,u,l,b,j,m,O,p,h,f,x;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===W){e.next=26;break}return t=void 0!==W.Quantity?W.Quantity:""!==M.Quantity?M.Quantity:0,n=void 0!==W.Rate?W.Rate:""!==M.Rate?M.Rate:0,a=void 0!==W.DiscountPer?W.DiscountPer:""!==M.DiscountPer?M.DiscountPer:0,r=void 0!==W.igstrate?W.igstrate:""!==M.igstrate?M.igstrate:0,c=void 0!==W.cgstrate?W.cgstrate:""!==M.cgstrate?M.cgstrate:0,s=void 0!==W.sgstrate?W.sgstrate:""!==M.sgstrate?M.sgstrate:0,u=a*(o=t*n)/100,l=gr(r,o),b=gr(c,o),j=gr(s,o),m=o-u,O=parseFloat(m)+parseFloat(l)+parseFloat(b)+parseFloat(j),e.next=16,$e(M.ItemId,t);case 16:p=e.sent,h=Object(d.a)(Object(d.a)({},W),{},{ItemName:void 0!==W.ItemName?W.ItemName:void 0!==M.ItemName?M.ItemName:"",igstamount:I.billingstateid!==I.shippingstateid?Ir(l):0,cgstamount:I.billingstateid===I.shippingstateid?Ir(b):0,sgstamount:I.billingstateid===I.shippingstateid?Ir(j):0,Quantity:t,igstrate:I.billingstateid!==I.shippingstateid?r:0,cgstrate:I.billingstateid===I.shippingstateid?c:0,sgstrate:I.billingstateid===I.shippingstateid?s:0,Rate:Ir(n),DiscountPer:Ir(a),Amount:Ir(o),DiscountAmount:Ir(u),totalAmount:Ir(O),altqty:p,finalDiscount:Ir(m),hsnid:void 0!==W.hsnid?W.hsnid:void 0!==M.hsnid?M.hsnid:""}),f=I.items.map((function(e){return void 0===e.id?e.staticid===M.staticid?Object(d.a)(Object(d.a)({},e),h):e:e.id===M.id?Object(d.a)(Object(d.a)({},e),h):e})),x=wr(f),y(Object(d.a)(Object(d.a)({},I),{},{items:f,taxpage:x})),A(!1),K(),et(),e.next=27;break;case 26:et();case 27:case"end":return e.stop()}}),e)}))),[M,W,I]),at=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=6;break}return e.next=3,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("Id").equals(t.ItemId).first().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,vr(n);case 5:return a=e.sent,r=gr(a.igstRate,t.Amount),c=gr(a.cgstRate,t.Amount),s=gr(a.sgstRate,t.Amount),e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{igstrate:parseInt(I.billingstateid)!==parseInt(I.shippingstateid)?a.igstRate:0,cgstrate:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?a.cgstRate:0,sgstrate:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?a.sgstRate:0,igstamount:parseInt(I.billingstateid)!==parseInt(I.shippingstateid)?Ir(r):0,cgstamount:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?Ir(c):0,sgstamount:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?Ir(s):0}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:n=e.sent,a=wr(n),y(Object(d.a)(Object(d.a)({},I),{},{items:n,taxpage:a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(I.items.length>0&&ve){var e=I.items.filter((function(e){return""!==e.ItemId}));e.length>0&&at(e)}}),[ve,I.items]);var rt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.PurchaseInvoice.where("invoicetype").equals(3).toArray().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.next=6,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 6:a=e.sent,(r=n.filter((function(e){return e.CreatedBy===t})))&&y(Object(d.a)(Object(d.a)({},I),{},{invoiceList:r,itemList:a}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b,m,O;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=43;break}return se(""),ne(""),e.next=5,Ke();case 5:return n=e.sent,e.next=8,v.customerMaster.where("Id").equals(t.PartyId).first().then().catch((function(e){return console.log(e)}));case 8:return a=e.sent,r=0===t.Id||""===t.Id?t.id:t.Id,e.next=12,v.PurchaseInvoiceDetail.where("InvoiceId").equals(r).toArray().then().catch((function(e){return console.log(e)}));case 12:if(c=e.sent,s=[],!c){e.next=39;break}o=Object(Jn.a)(c),e.prev=16,o.s();case 18:if((u=o.n()).done){e.next=31;break}return l=u.value,e.next=22,v.itemMaster.where("ItemId").equals(l.ItemId).first().then().catch((function(e){return console.log(e)}));case 22:return b=e.sent,e.next=25,Xe(l.UnitId);case 25:m=e.sent,l.ItemName=void 0===b?"":b.ItemName,l.unit=m,s.push(l);case 29:e.next=18;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(16),o.e(e.t0);case 36:return e.prev=36,o.f(),e.finish(36);case 39:O=s.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{InvoiceId:e.InvoiceId,ItemId:e.ItemId,isaltrate:e.isaltrate,Quantity:parseInt(e.Quantity),altqty:e.altqty,unitId:e.UnitId,Rate:Ir(e.Rate),totalAmount:Ir(e.Amount),Amount:Ir(e.GrossAmount),DiscountPer:parseFloat(e.DiscountPer),DiscountAmount:Ir(e.DiscountAmount),finalDiscount:Ir(e.GrossAmount)-Ir(e.DiscountAmount),hsnid:parseInt(e.hsnclassificationid),igstrate:parseFloat(e.igstrate),cgstrate:parseFloat(e.cgstrate),sgstrate:parseFloat(e.sgstrate),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount)})})),y(Object(d.a)(Object(d.a)({},I),{},{id:t.id,Id:t.Id,new:t.new,InvoiceDate:t.InvoiceDate,InvoiceNo:t.InvoiceNo,PartyId:parseInt(t.PartyId),invoicetype:t.invoicetype,vendorName:a.PartyName,vendorCode:a.PartyCode,billingcountryid:t.billingcountryid,billingstateid:parseInt(t.billingstateid),billingaddress:t.billingaddress,billinggstinno:t.billinggstinno,shippingcountryid:t.shippingcountryid,shippingstateid:parseInt(t.shippingstateid),shippingaddress:t.shippingaddress,shippinggstinno:t.shippinggstinno,remark:t.remark,CreatedBy:t.CreatedBy,taxpage:{grossamount:t.grossamount,discountamount:t.discountamount,taxamount:t.taxamount,netamount:t.netamount,RoundOff:t.roundOff,totalAmount:t.totalAmount,igstAmount:t.igstAmount,cgstAmount:t.cgstAmount,sgstAmount:t.sgstAmount},stateList:n,items:O})),Ce({seriesId:t.seriesid,voucherId:t.seriesvouchertype}),X("view"!==j);case 43:case"end":return e.stop()}}),e,null,[[16,33,36,39]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,v.stateMaster.where("StateId").equals(t).first().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.abrupt("return",n.CountryId);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=I.InvoiceNo,e.t1=I.InvoiceDate,e.t2=parseInt(I.PartyId),e.t3=Ir(I.taxpage.grossamount),e.t4=Ir(I.taxpage.discountamount),e.t5=Ir(I.taxpage.taxamount),e.t6=Ir(I.taxpage.netamount),e.t7=I.taxpage.roundOff,e.t8=I.taxpage.totalAmount,e.t9=I.taxpage.igstAmount,e.t10=I.taxpage.cgstAmount,e.t11=I.taxpage.sgstAmount,e.next=14,st(parseInt(I.billingstateid));case 14:return e.t12=e.sent,e.t13=parseInt(I.billingstateid),e.t14=I.billingaddress,e.t15=I.billinggstinno,e.next=20,st(parseInt(I.shippingstateid));case 20:e.t16=e.sent,e.t17=parseInt(I.shippingstateid),e.t18=I.shippingaddress,e.t19=I.shippinggstinno,e.t20=I.remark,e.t21=I.IsPurchaseInvoice,e.t22=I.referencetype,e.t23=I.referenceid,e.t24=localStorage.getItem("UserId"),e.t25=new Date,e.t26=""===Se.seriesId?0:Se.seriesId,e.t27=""===Se.voucherId?"":Se.voucherId,t={InvoiceNo:e.t0,InvoiceDate:e.t1,PartyId:e.t2,invoicetype:3,grossamount:e.t3,discountamount:e.t4,taxamount:e.t5,netamount:e.t6,RoundOff:e.t7,totalAmount:e.t8,igstAmount:e.t9,cgstAmount:e.t10,sgstAmount:e.t11,billingcountryid:e.t12,billingstateid:e.t13,billingaddress:e.t14,billinggstinno:e.t15,shippingcountryid:e.t16,shippingstateid:e.t17,shippingaddress:e.t18,shippinggstinno:e.t19,remark:e.t20,dncn_against_pi:e.t21,referencetype:e.t22,referenceid:e.t23,CreatedBy:e.t24,CreatedOn:e.t25,seriesid:e.t26,seriesvouchertype:e.t27},Q?(n=Object(d.a)(Object(d.a)({},t),{},{id:I.id,update:1,new:I.new,Id:I.Id}),v.PurchaseInvoice.put(n).then((function(e){e&&ut(e)})).catch((function(e){return console.log(e)}))):v.PurchaseInvoice.add(Object(d.a)(Object(d.a)({},t),{},{new:1,update:0})).then((function(e){e&&ut(e)})).catch((function(e){return console.log(e)}));case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=I.items.map((function(e){var n={InvoiceId:t,ItemId:e.ItemId,isaltrate:e.isaltrate,Quantity:parseInt(e.Quantity),altqty:e.altqty,UnitId:e.unitId,Rate:Ir(e.Rate),Amount:Ir(e.totalAmount),GrossAmount:Ir(e.Amount),DiscountPer:parseFloat(e.DiscountPer),DiscountAmount:Ir(e.DiscountAmount),hsnclassificationid:parseInt(e.hsnid),igstrate:parseFloat(e.igstrate),cgstrate:parseFloat(e.cgstrate),sgstrate:parseFloat(e.sgstrate),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount),icdetailid:"",icmId:""};return Q?(n.id=e.id,n.InvoiceId=e.InvoiceId,n):n})))&&(Q?v.PurchaseInvoiceDetail.bulkPut(n).then((function(e){e&&(alert("data Update successfully"),Fe(),m("save"))})).catch((function(e){return console.log(e)})):v.PurchaseInvoiceDetail.bulkAdd(n).then((function(e){e&&(alert("data save successfully"),Fe(),m("save"))})).catch((function(e){return console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),ne(ce)),"Enter"===e.key&&(e.preventDefault(),nt())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[I,M,nt,ce,W]);var lt={val:j,change_state:function(e){switch(e){case"add":return m(e),ze(),V(!1),q(!0),void X(!0);case"edit":return m(e),rt(),V(!0),X(!1),void q(!0);case"view":return m(e),rt(),V(!1),q(!1),void X(!1);case"save":var t=Object.keys(h),n={};return t.forEach((function(e){return n[e]=""===I[e]})),f(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):it());case"refresh":return Fe(),V(!1),q(!1),X(!1),void m(e);default:return e}},disabledAction:Ee};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"purchaseInvoice",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},lt)),Object(Te.jsxs)("div",{className:"purchaseInvoiceIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w100",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.InvoiceNo?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Credit No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===j||"view"===j?Object(Te.jsx)(Hn.a,{open:"InvoiceNo"===te,options:I.invoiceList,onChange:function(e,t){return ct(t)},getOptionLabel:function(e){return e.InvoiceNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("InvoiceNo")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{type:"text",value:I.InvoiceNo,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===h.InvoiceDate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Credit Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{selected:I&&I.InvoiceDate,onChange:"add"===j?function(e){return y(Object(d.a)(Object(d.a)({},I),{},{InvoiceDate:e}))}:function(){return!1},minDate:I&&I.InvoiceDate})]})}),Object(Te.jsx)("div",{className:"col"})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.vendorName?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor/customer Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===j&&!0===we?Object(Te.jsx)(Hn.a,{open:"VendorName"===te,options:I.vendorList,onChange:function(e,t){return Je(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("VendorName")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{name:"vendorName",type:"text",readOnly:"view"===j,onChange:function(e){return Ye(e)},value:I&&I.vendorName})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.vendorCode?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor/customer Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===j&&!0===we?Object(Te.jsx)(Hn.a,{open:"VendorCode"===te,options:I.vendorList,onChange:function(e,t){return Je(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("VendorCode")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{name:"vendorCode",type:"text",readOnly:"view"===j,onChange:function(e){return Ye(e)},value:I&&I.vendorCode})]})}),Object(Te.jsx)("div",{className:"col"})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Type"})}),Object(Te.jsxs)("select",{name:"referencetype",value:I.referencetype,disabled:"add"===j||"edit"===j?"":"disabled",onChange:function(e){y(Object(d.a)(Object(d.a)({},I),{},{referencetype:e.target.value}))},children:[Object(Te.jsx)("option",{value:"1",children:"Qty Diffrence"}),Object(Te.jsx)("option",{value:"2",children:"Rate Diffrence"})]})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:!1===I.IsPurchaseInvoice?"Sales Invoice No.":"Purchase Invoice No."})}),("add"===j||"edit"===j)&&""===I.salesInvoiceNo?Object(Te.jsx)(Hn.a,{open:"slPrList"===te,options:I.slPrList,onChange:function(e,t){return Ze(t)},getOptionLabel:function(e){return!1===I.IsPurchaseInvoice?e.invoiceno.toString():e.InvoiceNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("slPrList")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{value:I&&I.salesInvoiceNo,name:"salesInvoiceNo",readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",style:{display:"flex",alignItems:"center"},children:Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"add"!==j&&"edit"!==j,id:"crNoteIspurchase",name:"IsPurchaseInvoice",checked:I&&I.IsPurchaseInvoice,onClick:function(e){return qe(e)},value:I.IsPurchaseInvoice}),Object(Te.jsx)("label",{htmlFor:"crNoteIspurchase",children:Object(Te.jsx)(ot,{content:"TypeIsPurchaseInvoice"})})]})})]})]}),Object(Te.jsx)("div",{className:"col w35"})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col mt-2 mb-2",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:hr,data:I.items,overFlowScroll:!0,selectedTr:function(e){return function(e){if(T(e),k&&M){var t=I.items.map((function(e){return void 0!==e.id?e.id===M.id?Object(d.a)(Object(d.a)({},e),M):e:e.staticid===M.staticid?Object(d.a)(Object(d.a)({},e),M):e}));y(Object(d.a)(Object(d.a)({},I),{},{items:t}))}A(!1)}(e)},editColumn:F,editfunction:function(){A(!0)},optionList:I.itemList,editStatus:k,deleteRow:function(){return function(){var e=I.items.filter((function(e){return void 0!==e.id?e.id!==M.id:e.staticid!==M.staticid}));if(e){var t=e.map((function(e,t){return void 0===e.id?Object(d.a)(Object(d.a)({},e),{},{staticid:t+1}):e}));y(Object(d.a)(Object(d.a)({},I),{},{items:t}))}}()},tblInputOnchange:function(e){return function(e){return K(Object(d.a)(Object(d.a)({},W),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},getAutocompleteOption:function(e){return tt(e)},itemAdd:!0===Z&&function(){return function(){var e=Object(d.a)(Object(d.a)({},r),{},{staticid:I.items.length+1}),t=[].concat(Object(R.a)(I.items),[Object(d.a)({},e)]);y(Object(d.a)(Object(d.a)({},I),{},{items:t})),X(!0)}()},refreshTable:D,editbtnText:"Add Item detail"})})})}),Object(Te.jsx)("div",{className:"subtabview",children:Object(Te.jsxs)("ul",{style:{marginTop:"0px"},children:[Object(Te.jsx)("li",{className:"billingInfo"===Pe?"active":"",onClick:function(e){return Le("billingInfo")},children:"Billing Info"}),Object(Te.jsx)("li",{className:"taxInfo"===Pe?"active":"",onClick:function(e){return Le("taxInfo")},children:"Tax Amount"})]})}),Object(Te.jsxs)("div",{className:"tabBox withsubtab",children:[Object(Te.jsx)("div",{className:"box",style:{display:"billingInfo"===Pe?"block":"none"},children:Object(Te.jsx)(fr,{BillingObj:I,onchange:function(e){return Ge(e)},requiredObj:h,val:j})}),Object(Te.jsx)("div",{className:"box",style:{display:"taxInfo"===Pe?"block":"none"},children:Object(Te.jsx)(xr,{taxObject:I.taxpage})})]}),Object(Te.jsx)("div",{className:"box blueBg",style:{float:"left",width:"100%"},children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 mr-auto",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Invoice By"})}),Object(Te.jsx)("input",{type:"text",name:"CreatedByName",className:"bgWhite",value:I.CreatedByName,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:I.taxpage.netamount,readOnly:!0})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-1 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remark",value:I.remark,onChange:function(e){return Ge(e)},cols:"30",rows:"10"})]})})})]}),be&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:pe.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return He(t,e)},children:e.VoucherName})}))})]})})]})})},Sr=(n(424),[{header:"Item Name",field:"ItemName",width:250,cell:"autocomplete"},{header:"Item Code",field:"ItemCode",width:150,cell:"autocomplete"},{header:"Remarks",field:"Remarks",cell:"EditInput"},{header:"Unit",field:"unit"},{header:"Quantity",field:"Qty",cell:"EditInput"},{header:"Rate",field:"Rate",cell:"EditInput"},{header:"Disc(%)",field:"Disper",cell:"EditInput"},{header:"Discount Amount",field:"DisAmount"},{header:"Gross Total",field:"Gtotal"},{header:"Net Total",field:"Ntotal"}]),Cr=[{header:"Item Name",field:"ItemName",width:250},{header:"Item Code",field:"ItemCode",width:150},{header:"Remarks",field:"Remarks",cell:"EditInput"},{header:"Unit",field:"unit"},{header:"Quantity",field:"Qty",cell:"EditInput"},{header:"Rate",field:"Rate",cell:"EditInput"},{header:"Disc(%)",field:"Disper",cell:"EditInput"},{header:"Discount Amount",field:"DisAmount"},{header:"Gross Total",field:"Gtotal"},{header:"Net Total",field:"Ntotal"}],Dr=[{header:"Indent No",field:"IndentNo",width:150},{header:"Indent Date",field:"IndentDate"},{header:"Item Code",field:"ItemCode",width:150},{header:"Item Name",field:"ItemName",width:250},{header:"Pending Qty",field:"pQty"},{header:"Pending Alt Qty",field:"pAltqty"},{header:"PO Qty",field:"poQty",cell:"EditInput"},{header:"PO Alt Qty",field:"poAltQty"}],_r=function(e){var t=e.pageNav,n={orderNo:"",orderDate:"",vendorName:"",vendorCode:"",vendorId:"",total:"",orderBy:"",createBy:"",remarks:""},r={orderNo:"",orderDate:"",vendorName:"",vendorCode:"",vendorId:""},c=Object(a.useState)(""),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(r),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(n),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)([]),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(),P=Object(o.a)(_,2),B=P[0],M=P[1],T=Object(a.useState)(),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)([]),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)(!0),z=Object(o.a)(V,2),H=z[0],W=z[1],K=Object(a.useState)(!0),J=Object(o.a)(K,2),Y=J[0],Z=J[1],X=Object(a.useState)(),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)([]),oe=Object(o.a)(se,2),ie=oe[0],ue=oe[1],le=Object(a.useState)(!1),de=Object(o.a)(le,2),be=de[0],je=de[1],me=Object(a.useState)(!0),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)([]),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=Object(a.useState)(),ye=Object(o.a)(Ie,2),we=ye[0],Ne=ye[1],ke=Object(a.useState)(),Ae=Object(o.a)(ke,2),Se=Ae[0],Ce=Ae[1],De=Object(a.useState)({}),_e=Object(o.a)(De,2),Pe=_e[0],Re=_e[1],Be=Object(a.useState)({}),Me=Object(o.a)(Be,2),Ee=Me[0],Le=Me[1],Fe=Object(a.useState)(!1),qe=Object(o.a)(Fe,2),ze=qe[0],He=qe[1],We=Object(a.useState)(),Ke=Object(o.a)(We,2),Je=Ke[0],Ye=Ke[1],Ze=Object(a.useState)(!0),Xe=Object(o.a)(Ze,2),$e=Xe[0],et=Xe[1],tt=Object(a.useState)(!0),nt=Object(o.a)(tt,2),at=nt[0],rt=nt[1],ct=Object(a.useState)([]),st=Object(o.a)(ct,2),it=st[0],ut=st[1],lt=Object(a.useState)({seriesId:"",voucherId:""}),dt=Object(o.a)(lt,2),bt=dt[0],jt=dt[1],mt=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),Ot=Object(o.a)(mt,2),pt=Ot[0],ht=(Ot[1],Object(a.useState)(!1)),ft=Object(o.a)(ht,2),xt=ft[0],vt=ft[1],gt=Object(a.useState)([]),It=Object(o.a)(gt,2),yt=It[0],wt=It[1],Nt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=6;break}return he(!0),St(),Dt(),et(!0),e.abrupt("return",j(t));case 6:if("edit"!==t){e.next=15;break}return he(!0),Dt(),At(),Z(!1),W(!1),et(!0),rt(!0),e.abrupt("return",j(t));case 15:if("view"!==t){e.next=20;break}return Dt(),At(),rt(!0),e.abrupt("return",j(t));case 20:if("save"===t&&(h(r),n=Object.keys(p),a={},n.forEach((function(e){return a[e]=""===g[e]||null===g[e]})),h(a),Object.values(a).filter((function(e){return!0===e})).length>0?alert("please fill all detail"):g.total<1?alert("Your total is 0 So please fill item detail or add item"):zt()),"refresh"!==t){e.next=25;break}return kt(),Lt(),e.abrupt("return",j(t));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=function(){I(n),D([]),Q([]),he(!1),Ne(!1),je(!0),te(),ce(),M(),F(),W(!0),Z(!0),Le(),Re(),ue([]),h(r),ut([]),j(""),rt(!1)},At=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.purchaseOrder.toArray().then().catch((function(e){return console.log(e)}));case 2:(t=e.sent).length>0&&ut(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),St=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}wt(n),vt(!0),e.next=17;break;case 9:return e.next=11,v.purchaseOrder.where("SeriesId").equals(0).toArray();case 11:return a=e.sent,r={series:"",sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{orderNo:c,orderDate:new Date,orderBy:localStorage.getItem("fname")}));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=22;break}if(""!==r.seriesId){e.next=10;break}return e.next=7,v.purchaseOrder.where("SeriesId").equals(0).toArray();case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,v.purchaseOrder.where("SeriesId").equals(r.seriesId).toArray();case 12:e.t0=e.sent;case 13:return c=e.t0,s=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:c}),e.next=17,Ve(s,t.formid);case 17:o=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{orderNo:o,orderDate:new Date,orderBy:localStorage.getItem("fname")})),jt({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=38;break;case 22:if(""!==r.seriesId){e.next=28;break}return e.next=25,v.purchaseOrder.where("SeriesId").equals(0).toArray();case 25:e.t1=e.sent,e.next=31;break;case 28:return e.next=30,v.purchaseOrder.where("SeriesId").equals(r.seriesId).toArray();case 30:e.t1=e.sent;case 31:return u=e.t1,l=Object(d.a)(Object(d.a)({},r),{},{dbcount:u}),e.next=35,Ve(l,t.formid);case 35:b=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{orderNo:b,orderDate:new Date,orderBy:localStorage.getItem("fname")})),jt({seriesId:r.seriesId,voucherId:r.voucherId});case 38:vt(!1);case 39:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("LedgerType").equals(2).toArray().then().catch((function(e){return console.log(e)}));case 2:t=e.sent,ue(t.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_t=function(e){if(e.length>0){var t=0;return e.map((function(e){return t+=parseInt(e.BaseQty),e})),t}return 0},Pt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IndentMaster.toArray().then().catch((function(e){return console.log(e)}));case 2:if(!((t=e.sent).length>0)){e.next=11;break}return e.next=6,v.IndentDetail.toArray().then().catch((function(e){return console.log(e)}));case 6:return n=e.sent,e.next=9,Promise.all(n.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.find((function(e){return n.IndentNo===e.IndentNo})),e.next=3,v.purchaseDetail.where("IndentDetailId").equals(n.id).toArray();case 3:return r=e.sent,c=_t(r),e.next=7,v.itemMaster.get(n.ItemId);case 7:return s=e.sent,e.next=10,v.unitMaster.where("Id").equals(s.UnitName).first();case 10:return o=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},n),{},{IndentDate:Ge(a.IndentDate),pQty:n.Quantity-c,pAltqty:s.Denominator!==s.Conversion?n.Quantity*s.Denominator/s.Conversion:"",poQty:"",Denominator:s.Denominator,Conversion:s.Conversion,poAltQty:"",ItemName:s.ItemName,ItemCode:s.ItemCode,unit:o.UnitName,id:n.id,ItemId:n.id,indItemId:n.ItemId}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:(a=e.sent)&&D(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rt=function(){var e=L.map((function(e){return e.ItemId})),t=L.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{remark:"",Qty:e.poQty,Rate:0,Disper:0,DisAmount:0,Gtotal:0,Ntotal:0,ItemId:e.indItemId,indentdetailid:e.id})}));if(console.log(t,"objget"),t.length>0){if(e)if(M(e),U){var n=t.filter((function(e){var t=e.ItemId;return!U.some((function(e){return e.ItemId===t}))})),a=U.filter((function(e){var n=e.ItemId;return!t.some((function(e){return e.ItemId===n}))}));if(n.length>0&&Q((function(e){return[].concat(Object(R.a)(e),Object(R.a)(n))})),a.length>0){var r=U.filter((function(e){var t=e.ItemId;return!a.some((function(e){return e.ItemId===t}))}));r&&Q(r)}W(!1)}else Q(t)}else Q([]),M();k(!1);var c=document.getElementById("options");c&&c.parentNode.removeChild(c)},Bt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.toArray();case 2:t=e.sent,ge(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.unitMaster.where("Id").equals(t.UnitName).first();case 2:n=e.sent,a=U.map((function(e){return e.id===ee.id?Object(d.a)(Object(d.a)({},e),{},{ItemName:t.ItemName,ItemCode:t.ItemCode,unit:n.UnitName}):e})),Q(a),Le(Object(d.a)(Object(d.a)({},Ee),{},{ItemName:t.ItemName,ItemCode:t.ItemCode,ItemId:t.ItemId,unit:n.UnitName}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tt=Object(a.useCallback)((function(){if(C.length>0){var e=C.map((function(e){return re.id===e.id?Object(d.a)(Object(d.a)({},e),Pe):e}));D(e),Ce(!1),Re({})}}),[Pe,re,C]),Et=Object(a.useCallback)((function(){if(U.length>0){var e=U.map((function(e){return ee.id===e.id?Object(d.a)(Object(d.a)({},e),Ee):e}));if(e.length>0){var t=0,n=e.map((function(e){var n=parseInt(""===e.Qty?0:e.Qty)*parseFloat(""===e.Rate?0:e.Rate),a=e.Disper/100*n,r=n-a;return t+=r,Object(d.a)(Object(d.a)({},e),{},{Rate:Gt(e.Rate),DisAmount:Gt(!0===isNaN(a)?0:a),Gtotal:Gt(!0===isNaN(n)?0:n),Ntotal:Gt(!0===isNaN(r)?0:r)})}));Q(n),I(Object(d.a)(Object(d.a)({},g),{},{total:Gt(t)}))}Ne(),Lt(),Le({})}}),[Ee,ee,U]),Lt=function(){je(!0),setTimeout((function(){return je(!1)}),1e3)},Ft=function(e){e&&(I(Object(d.a)(Object(d.a)({},g),{},{vendorName:e.PartyName,vendorCode:e.PartyCode,vendorId:e.Id})),He(),Ye(),et(!1))},qt=function(e){""===e.target.value?(I(Object(d.a)(Object(d.a)({},g),{},{vendorName:"",vendorCode:"",vendorId:""})),et(!0)):I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,e.target.value)))},Gt=function(e){return e?parseFloat(e).toFixed(2):e},Ut=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return n=0===t.Id?t.id:t.Id,e.next=4,v.purchaseDetail.where("PoId").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 4:if(a=e.sent,r=0,!(a&&a.length>0)){e.next=11;break}return e.next=9,Promise.all(a.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseFloat(r)+parseFloat(t.NetTotal),e.next=3,Qt(t.ItemId);case 3:if(n=e.sent,a={id:t.id,PoId:t.PoId,ItemId:t.ItemId,ItemName:t.ItemName,ItemCode:t.ItemCode,Rate:t.Rate,Disper:t.Discount,Qty:t.BaseQty,unit:n,Gtotal:t.GrossTotal,DisAmount:t.DiscountAmount,Ntotal:t.NetTotal,Remarks:t.Remark,IndentId:t.IndentId},!t.IndentId){e.next=19;break}return e.next=8,v.purchaseDetail.where("IndentDetailId").equals(t.IndentDetailId).toArray();case 8:return c=e.sent,s=_t(c),e.next=12,v.IndentDetail.where("id").equals(t.IndentDetailId).first().then().catch((function(e){return console.log(e)}));case 12:return o=e.sent,u=parseInt(o.Quantity)-parseInt(s),Z(!0),W(!1),e.abrupt("return",Object(d.a)(Object(d.a)({},a),{},{Quantity:u+parseInt(t.BaseQty)}));case 19:return Z(!1),W(!0),e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:c=e.sent,Q(c);case 11:return e.next=13,v.customerMaster.where("Id").equals(t.PartyId).first().then().catch((function(e){return console.log(e)}));case 13:s=e.sent,o={id:t.id,Id:t.Id,new:t.new,orderNo:t.PoNumber,orderDate:t.PoDate,vendorName:void 0!==s?s.PartyName:"",vendorCode:void 0!==s?s.PartyCode:"",vendorId:t.PartyId,total:Gt(r),orderBy:t.CreatedByName,createBy:t.CreatedBy,remarks:t.Remarks},I(o);case 16:He(),Ye(),et(!1),rt(!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("Id").equals(t).first().then().catch((function(e){return console.log(e)}));case 2:if(!(n=e.sent)){e.next=10;break}return e.next=6,v.unitMaster.where("Id").equals(n.UnitName).first();case 6:return a=e.sent,e.abrupt("return",a.UnitName);case 10:return e.abrupt("return","");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.purchaseOrder.where("PoNumber").equals(g.orderNo).first().then().catch((function(e){return console.log(e)}));case 2:if(n=e.sent,a=U.map((function(e){var a={PoId:""===n.Id||0===n.Id?n.id:n.Id,ItemId:e.ItemId,ItemName:e.ItemName,ItemCode:e.ItemCode,Rate:e.Rate,Discount:e.Disper,BaseQty:e.Qty,AltQty:e.Denominator!==e.Conversion?e.Qty*e.Denominator/e.Conversion:"",GrossTotal:e.Gtotal,DiscountAmount:e.DisAmount,NetTotal:e.Ntotal,Remark:e.Remarks,IndentId:void 0===e.IndentId?"":e.IndentId,IndentDetailId:void 0===e.indentdetailid?"":e.indentdetailid};return"update"===t?Object(d.a)(Object(d.a)({},a),{},{Id:e.Id}):a})),"add"!==t){e.next=9;break}return e.next=7,v.purchaseDetail.bulkAdd(a).then((function(e){alert("data save successfully"),kt()})).catch((function(e){return console.log(e)}));case 7:e.next=12;break;case 9:if("update"!==t){e.next=12;break}return e.next=12,v.purchaseDetail.bulkPut(a).then((function(e){alert("data update successfully"),kt()})).catch((function(e){return console.log(e)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={Id:0,PoNumber:g.orderNo,PoDate:g.orderDate,PartyId:g.vendorId,PartyName:g.vendorName,CreatedBy:localStorage.getItem("UserId"),CreatedByName:g.orderBy,CreatedOn:new Date,Remarks:g.remarks,SeriesId:""===bt.seriesId?0:bt.seriesId,SeriesVoucherType:""===bt.voucherId?"":bt.voucherId},g.id?v.purchaseOrder.update(g.id,Object(d.a)(Object(d.a)({},t),{},{new:g.new,Id:g.Id,update:1})).then((function(e){Vt("update")})).catch((function(e){return alert("something went wrong")})):v.purchaseOrder.add(Object(d.a)(Object(d.a)({},t),{},{new:1})).then((function(e){Vt("add")})).catch((function(e){return alert("something went wrong")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),He(Je)),"Enter"===e.key&&(e.preventDefault(),N?Tt():Et())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[Q,pe,Y,H,Tt,Et,Ee,ze,Je,g,be,N,p]);var Ht={change_state:Nt,val:b,disabledAction:pt};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"purchaseOrder",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Ht)),Object(Te.jsxs)("div",{className:"purchaseOrderIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w65",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Order No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===b||"view"===b?!0===at?Object(Te.jsx)(Hn.a,{open:"orderNo"===ze,onChange:function(e,t){return Ut(t)},options:it,getOptionLabel:function(e){return e.PoNumber},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Ye("orderNo")},onBlur:function(){Ye(),He()}}))}}):Object(Te.jsx)("input",{type:"text",name:"orderNo",value:g.orderNo,readOnly:!0}):Object(Te.jsx)("input",{type:"text",name:"orderNo",readOnly:!0,value:g.orderNo})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Order Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{name:"orderDate",selected:g.orderDate,minDate:g.orderDate,maxDate:g.orderDate})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),("edit"===b||"add"===b)&&!0===$e?Object(Te.jsx)(Hn.a,{open:"vendorName"===ze,onChange:function(e,t){return Ft(t)},options:ie,getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Ye("vendorName")},onBlur:function(){Ye(),He()}}))}}):Object(Te.jsx)("input",{type:"text",name:"vendorName",onChange:function(e){return qt(e)},value:g.vendorName})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),("edit"===b||"add"===b)&&!0===$e?Object(Te.jsx)(Hn.a,{open:"vendorCode"===ze,onChange:function(e,t){return Ft(t)},options:ie,getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Ye("vendorCode")},onBlur:function(){Ye(),He()}}))}}):Object(Te.jsx)("input",{type:"text",name:"vendorCode",onChange:function(e){return qt(e)},value:g.vendorCode})]})})]})]}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsx)("div",{children:Object(Te.jsx)("button",{onClick:"add"===b||"edit"===b?!1===Y?function(){return!1}:function(){Pt(),Ne(!0),k(!0)}:function(){return!1},type:"button",className:"add"===b||"edit"===b?!1===Y?"btnDisable":"btnGreen":"btnDisable",children:Object(Te.jsx)(ot,{content:"Indent"})})})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col mb-1 100",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:!0===Y?Cr:Sr,data:U,overFlowScroll:!0,editStatus:we,editColumn:pe,optionList:ve,editfunction:function(){Ne(!0)},itemAdd:!0===H&&(("add"===b||"edit"===b)&&function(){return Bt(),Q([].concat(Object(R.a)(U),[{id:U.length+1,ItemName:"",ItemCode:"",Remarks:"",unit:"",Qty:0,Rate:0,Disper:0,DisAmount:0,Gtotal:0,Ntotal:0}])),void Z(!1)}),tblInputOnchange:function(e){return function(e){return"Qty"===e.target.name&&!0===Y&&ee.Quantity<e.target.value?(alert("pending qty is "+ee.Quantity+" you can't input value greate then pending Qty."),0):(Le(Object(d.a)(Object(d.a)({},Ee),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value)}(e)},getAutocompleteOption:function(e){return Mt(e)},refreshTable:be,editbtnText:"Add Item detail",selectedTr:function(e){return function(e){te(e),Ne(!1)}(e)}})})})}),Object(Te.jsx)("div",{className:"box blueBg borderTop-0",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 mr-auto",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Order By"})}),Object(Te.jsx)("input",{type:"text",readOnly:"true",name:"orderBy",value:g.orderBy,className:"bgWhite"})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total"})}),Object(Te.jsx)("input",{type:"text",name:"total",readOnly:"true",value:!0===isNaN(g.total)?0:g.total,className:"bgWhite"})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100 mt-1",children:Object(Te.jsxs)("div",{className:"RemarkForm mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remarks",id:"",cols:"30",onChange:function(e){return function(e){I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,e.target.value)))}(e)},rows:"10",value:g.remarks,placeholder:"Write remarks here"})]})})})]})]}),N&&"view"!==b?Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:Dr,data:C,overFlowScroll:!0,checkbox:!0,editStatus:Se,editColumn:!0,selectedRows:B,tblInputOnchange:function(e){return function(e){return"poQty"===e.target.name&&!0===Y&&re.Quantity<e.target.value?(alert("pending qty is "+re.Quantity+" you can't input value greate then pending Qty."),0):(Re(Object(d.a)(Object(d.a)({},Pe),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value)}(e)},getCheckedItem:function(e){return function(e){F(e)}(e)},selectedTr:function(e){return function(e){ce(e),Ce(!1)}(e)},editfunction:function(){Ce(!0)},Footer:!0,filter:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{onClick:function(){return Rt()},className:"btn btnGreen mr-5 mlAuto",children:Object(Te.jsx)(ot,{content:"Ok"})}),Object(Te.jsx)("button",{onClick:function(){return function(){k(!1);var e=document.getElementById("options");e&&e.parentNode.removeChild(e),je(!0)}()},className:"btn btnRed",children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}):"",xt&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:yt.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return Ct(t,e)},children:e.VoucherName})}))})]})})]})},Pr=(n(425),[{header:"Item Name",field:"itemname"},{header:"Item Code",field:"itemcode"},{header:"Bill Base Qty",field:"billedbaseqty"},{header:"Bill Alt. Qty",field:"billedaltqty"},{header:"Rec. Base Qty",field:"receivedbaseqty",cell:"EditInput"},{header:"Rec. Alt Qty",field:"receivedaltqty"},{header:"Unit",field:"unit"},{header:"Short Qty",field:"shortqty"},{header:"Excess Qty",field:"excessqty",cell:"EditInput"},{header:"Rate",field:"rate",cell:"EditInput"},{header:"MRP",field:"mrp"},{header:"Gross Amount",field:"gross_amount"},{header:"Discount(%)",field:"discount_per",cell:"EditInput"},{header:"Net Amount",field:"netamount"}]),Rr=function(e){var t=e.pageNav,n={inwardNo:"",inwardDate:"",vendorName:"",vendorCode:"",PartyId:"",gitno:"",gitid:"",items:[],billbaseqty:0,billaltqty:0,recbaseqty:0,recaltqty:0,grosstotal:0,netamount:0,remark:""},r={vendorName:"",vendorCode:"",inwardNo:"",inwardDate:"",gitno:""},c=Object(a.useState)(Object(d.a)(Object(d.a)({},n),{},{inwardDate:new Date})),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(r),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)([]),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(!1),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(!1),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)(!0),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)([]),V=Object(o.a)(Q,2),z=V[0],H=V[1],W=Object(a.useState)([]),K=Object(o.a)(W,2),J=K[0],Y=K[1],Z=Object(a.useState)(!1),X=Object(o.a)(Z,2),$=X[0],ee=X[1],te=Object(a.useState)(!1),ne=Object(o.a)(te,2),ae=ne[0],re=ne[1],ce=Object(a.useState)(""),se=Object(o.a)(ce,2),oe=se[0],ie=se[1],ue=Object(a.useState)(),le=Object(o.a)(ue,2),de=le[0],be=le[1],je=Object(a.useState)(),me=Object(o.a)(je,2),Oe=me[0],pe=me[1],he=Object(a.useState)(!1),fe=Object(o.a)(he,2),xe=fe[0],ve=fe[1],ge=Object(a.useState)([]),Ie=Object(o.a)(ge,2),ye=Ie[0],we=Ie[1],Ne=Object(a.useState)({seriesId:"",voucherId:""}),ke=Object(o.a)(Ne,2),Ae=ke[0],Se=ke[1],Ce=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),De=Object(o.a)(Ce,2),_e=De[0],Pe=(De[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}we(n),ve(!0),e.next=17;break;case 9:return e.next=11,v.IC_Master.where("seriesid").equals(0).toArray();case 11:return a=e.sent,r={series:"",seriesId:0,sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,Ge(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Re=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=22;break}if(""!==r.seriesId){e.next=10;break}return e.next=7,v.IC_Master.where("seriesid").equals(0).toArray();case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,v.IC_Master.where("seriesid").equals(r.seriesId).toArray();case 12:e.t0=e.sent;case 13:return c=e.t0,s=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:c}),e.next=17,Ve(s,t.formid);case 17:o=e.sent,Ge(o),Se({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=38;break;case 22:if(""!==r.seriesId){e.next=28;break}return e.next=25,v.IC_Master.where("seriesid").equals(0).toArray();case 25:e.t1=e.sent,e.next=31;break;case 28:return e.next=30,v.IC_Master.where("seriesid").equals(r.seriesId).toArray();case 30:e.t1=e.sent;case 31:return u=e.t1,l=Object(d.a)(Object(d.a)({},r),{},{dbcount:u}),e.next=35,Ve(l,t.formid);case 35:b=e.sent,Ge(b),Se({seriesId:r.seriesId,voucherId:r.voucherId});case 38:ve(!1);case 39:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.GITMaster.toArray();case 2:return t=e.sent,e.next=5,v.customerMaster.where("LedgerType").equals(2).toArray().then().catch((function(e){return console.log(e)}));case 5:(n=e.sent)&&(a=[],n.map((function(e){return t.find((function(t){return e.Id===t.partyid_pos}))&&a.push(e),e})),Y(a.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)}))));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.IC_Master.toArray();case 3:n=e.sent,a=n.filter((function(e){return e.CreatedBy===t})),k(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.GITMaster.where("partyid_pos").equals(t).toArray();case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,v.IC_Master.toArray();case 6:if(a=e.sent){r=[],c=Object(Jn.a)(n);try{for(o=function(){var e=s.value;a.find((function(t){return e.gitid===t.GIT}))||r.push(e)},c.s();!(s=c.n()).done;)o()}catch(i){c.e(i)}finally{c.f()}H(r)}else H(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(e){var t=e.target.getAttribute("data-valid");t?Me(e.target.value,t)?(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))):(h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!0))),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))):j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))},Ge=function(e){j(Object(d.a)(Object(d.a)({},b),{},{inwardNo:e,inwardDate:new Date}))},ze=function(){j(n),h(r),U(!1),D(!1),He(),Se({seriesId:"",voucherId:""})},He=function(){L(!0),setTimeout((function(){return L(!1)}),500)},We=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,l,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t,"ddd"),!t){e.next=20;break}if(!(void 0===t.gitdetail||t.gitdetail.length<1)){e.next=6;break}alert("item not found"),e.next=20;break;case 6:return h(Object(d.a)(Object(d.a)({},p),{},{gitno:!1})),re(""),ee(""),n=t.gitdetail,a=0,r=0,c=0,s=0,o=0,l=0,e.next=18,Promise.all(n.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,u,b,j,m,O,p,h,f,x,v;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t.itemid_pos);case 2:if(void 0===(n=e.sent)){e.next=21;break}if(0!==t.isaltrate){e.next=10;break}return e.next=7,Xe(n.UnitAltName);case 7:e.t1=e.sent,e.next=18;break;case 10:if(1!==t.isaltrate){e.next=16;break}return e.next=13,Xe(n.UnitName);case 13:e.t2=e.sent,e.next=17;break;case 16:e.t2="";case 17:e.t1=e.t2;case 18:e.t0=e.t1,e.next=22;break;case 21:e.t0="";case 22:return u=e.t0,b=void 0!==n?0===t.isaltrate?n.UnitAltName:1===t.isaltrate?n.UnitName:"":"",e.next=26,Ke(t.gitdetailid);case 26:return j=e.sent,m=t.receivedbaseqty-j,O=t.billedbaseqty-j,e.next=31,$e(t.itemid_pos,O);case 31:return p=e.sent,e.next=34,$e(t.itemid_pos,m);case 34:return h=e.sent,f=parseFloat(t.rate)*m,x=parseFloat(t.discount_per)*parseFloat(f)/100,v=parseFloat(f)-parseFloat(x),l=parseFloat(l)+parseFloat(v),a+=parseInt(O),r=parseFloat(r)+parseFloat(f),c+=p,s+=parseInt(m),o=!0===Number.isInteger(h)?o+parseInt(h):parseFloat(o)+parseFloat(h),e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{billedbaseqty:O,receivedbaseqty:m,billedaltqty:!0===Number.isInteger(p)?p:nt(p),receivedaltqty:!0===Number.isInteger(h)?h:nt(h),unit:u,unitId:b,gross_amount:Ye(f),netamount:Ye(v)}));case 45:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 18:m=e.sent,j(Object(d.a)(Object(d.a)({},b),{},{items:m,billbaseqty:a,netamount:Ye(l),grosstotal:Ye(r),recbaseqty:s,billaltqty:!0===Number.isInteger(c)?c:nt(c),recaltqty:!0===Number.isInteger(o)?o:nt(o),gitid:t.gitid,gitno:t.git_no}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IC_Detail.where("GitDetailId").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 2:if(!(n=e.sent)){e.next=14;break}if(1!==n.length){e.next=8;break}return e.abrupt("return",parseInt(n[0].ReceiveBaseQty));case 8:return a=0,n.map((function(e){return a+=parseInt(e.ReceiveBaseQty),e})),console.log(a,"qt"),e.abrupt("return",a);case 12:e.next=15;break;case 14:return e.abrupt("return",0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=23;break}return re(""),ee(""),e.next=5,v.IC_Master.where("InwardNo").equals(t.InwardNo).first().then().catch((function(e){return console.log(e)}));case 5:if(!(n=e.sent)){e.next=23;break}return a=0===t.Id||""===t.Id?t.id:t.Id,e.next=10,v.IC_Detail.where("InwardId").equals(a).toArray().then().catch((function(e){return console.log(e)}));case 10:if(!(r=e.sent)){e.next=23;break}return e.next=14,Promise.all(r.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t.ItemId);case 2:return n=e.sent,e.t0=t.id,e.t1=t.InwardDetailId,e.t2=t.InwardId,e.t3=t.InwardNo,e.t4=n.ItemName,e.t5=n.ItemCode,e.t6=t.ItemId,e.t7=t.BilledBaseQty,e.t8=t.BilledAltQty,e.t9=t.ReceiveBaseQty,e.t10=t.ReceiveAltQty,e.t11=t.shortQty,e.t12=t.excessqty,e.t13=t.NetAmount,e.t14=t.UnitId,e.next=20,Xe(t.UnitId);case 20:return e.t15=e.sent,e.t16=t.Rate,e.t17=t.GrossAmount,e.t18=t.DiscountPercentage,e.t19=t.DiscountAmount,e.t20=t.MRP,e.t21=t.GitDetailId,e.abrupt("return",{id:e.t0,InwardDetailId:e.t1,InwardId:e.t2,inwardNo:e.t3,itemname:e.t4,itemcode:e.t5,ItemId:e.t6,billedbaseqty:e.t7,billedaltqty:e.t8,receivedbaseqty:e.t9,receivedaltqty:e.t10,shortqty:e.t11,excessqty:e.t12,netamount:e.t13,unitId:e.t14,unit:e.t15,rate:e.t16,gross_amount:e.t17,discount_per:e.t18,discountamount:e.t19,mrp:e.t20,GitDetailId:e.t21});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return c=e.sent,e.next=17,v.GITMaster.where("gitid").equals(n.GIT).first();case 17:return s=e.sent,e.next=20,v.customerMaster.where("Id").equals(n.PartyId).first();case 20:o=e.sent,l={id:n.id,Id:n.Id,inwardNo:n.InwardNo,inwardDate:n.InwardDate,PartyId:n.PartyId,grosstotal:n.GrossAmount,netamount:n.NetAmount,remark:n.Remarks,gitno:s.git_no,gitid:n.GIT,vendorName:o.PartyName,vendorCode:o.PartyCode,billbaseqty:n.billBaseQty,billaltqty:n.billAltQty,recbaseqty:n.recBaseQty,recaltqty:n.recAltQty,CreatedBy:n.CreatedBy,items:c,new:n.new},j(l);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e){return e?parseFloat(e).toFixed(2):e},nt=function(e){return e?parseFloat(e).toFixed(4):e},at=function(e){if(e){var t="VendorName"===ae?"code":"name";j(Object(d.a)(Object(d.a)({},b),{},{vendorName:e.PartyName,vendorCode:e.PartyCode,PartyId:e.Id})),h(Object(d.a)(Object(d.a)({},p),{},{vendorName:!1,vendorCode:!1})),re(""),ee(""),ie(t),Le(e.Id)}},rt=Object(a.useCallback)((function(){if(Oe){var e=b.items.map((function(e){return R?e.GitDetailId===Oe.GitDetailId?Object(d.a)(Object(d.a)({},e),de):e:e.gitdetailid===Oe.gitdetailid?Object(d.a)(Object(d.a)({},e),de):e}));e&&ct(e)}}),[de,Oe,b]),ct=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,a=0,r=0,c=0,e.next=6,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var s,o,u,l,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n+=st(t.receivedbaseqty),s=t.receivedbaseqty*t.rate,a+=st(s),e.next=5,qe(s,t.discount_per);case 5:return o=e.sent,u=s-o,e.next=9,$e(R?t.ItemId:t.itemid_pos,t.receivedbaseqty);case 9:return l=e.sent,c+=st(l),r+=st(u),b=t.receivedbaseqty<t.billedbaseqty?t.billedbaseqty-t.receivedbaseqty:0,j=t.receivedbaseqty<t.billedbaseqty?0:t.excessqty,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{gross_amount:Ye(s),discountamount:Ye(o),receivedaltqty:!0===Number.isInteger(l)?l:nt(l),excessqty:j,shortqty:b,netamount:Ye(u)}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:s=e.sent,j(Object(d.a)(Object(d.a)({},b),{},{items:s,netamount:Ye(r),grosstotal:Ye(a),recbaseqty:n,recaltqty:!0===Number.isInteger(c)?c:nt(c)})),be(),He();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(e){return e?parseFloat(e):e},it=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IC_Master.where("InwardNo").equals(b.inwardNo).first();case 2:(n=e.sent)&&(a=b.items.map((function(e){var t={InwardDetailId:0,InwardId:n.id,InwardNo:b.inwardNo,ItemId:!1===R?e.itemid_pos:e.ItemId,BilledBaseQty:e.billedbaseqty,BilledAltQty:e.billedaltqty,ReceiveBaseQty:parseInt(e.receivedbaseqty),ReceiveAltQty:e.receivedaltqty,shortQty:e.shortqty,excessqty:e.excessqty,UnitId:e.unitId,Rate:e.rate,NetAmount:e.netamount,GrossAmount:e.gross_amount,DiscountPercentage:e.discount_per,DiscountAmount:e.discountamount,DiscountedAmount:null,MRP:e.mrp,GitDetailId:!1===R?e.gitdetailid:e.GitDetailId};return R?(t.id=e.id,t.InwardId=e.InwardId,t.InwardDetailId=e.InwardDetailId,t):t})),console.log(a,"IcDetailObj"),a&&(R?v.IC_Detail.bulkPut(a).then((function(e){if(e){alert("data update successfully");var r=a.map((function(e){return{formId:t.formid,trId:n.id,ItemId:e.ItemId,qty:e.ReceiveBaseQty,type:"inqty"}}));tt(r),ze(),I("save"),B(!1)}})).catch((function(e){return console.log(e)})):v.IC_Detail.bulkAdd(a).then((function(e){if(e){alert("save data successfully");var r=a.map((function(e){return{formId:t.formid,trId:n.id,ItemId:e.ItemId,qty:e.ReceiveBaseQty,type:"inqty"}}));et(r),ze(),I("save")}})).catch((function(e){return console.log(e)}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e={InwardNo:b.inwardNo,InwardDate:b.inwardDate,PartyId:b.PartyId,GrossAmount:b.grosstotal,NetAmount:b.netamount,Remarks:b.remark,GIT:b.gitid,billBaseQty:b.billbaseqty,billAltQty:b.billaltqty,recBaseQty:b.recbaseqty,recAltQty:b.recaltqty,seriesid:""===Ae.seriesId?0:Ae.seriesId,voucherid:Ae.voucherId,CreatedBy:localStorage.getItem("UserId"),CreatedOn:new Date};console.log(e),R?v.IC_Master.put(Object(d.a)(Object(d.a)({},e),{},{id:b.id,Id:b.Id,new:b.new,update:1})).then((function(e){e&&it()})).catch((function(e){return console.log(e)})):v.IC_Master.add(Object(d.a)(Object(d.a)({},e),{},{new:1,update:0})).then((function(e){e&&it()})).catch((function(e){return console.log(e)}))};Object(a.useEffect)((function(){var e=function(e){ae&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),"SelectGIT"===ae?(""===b.vendorName&&alert("please select vendor name"),ee(ae)):ee(ae))),"Enter"===e.key&&(e.preventDefault(),rt(),D(!1))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[b,g,ae,Oe,rt,de,N,E]);var lt={val:g,change_state:function(e){switch(e){case"edit":return U(!0),B(!0),Ee(),void I(e);case"refresh":return ze(),I(e),void B(!1);case"view":return I(e),Ee(),U(!1),B(!1),void j(Object(d.a)(Object(d.a)({},n),{},{inwardDate:new Date}));case"add":return I(e),U(!0),B(!1),Pe(),Be(),void ie(!0);case"save":var t=Object.keys(p),a={};return t.forEach((function(e){return a[e]=""===b[e]})),h(a),void(Object.values(a).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):ut());default:return e}},disabledAction:_e};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"inward",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},lt)),Object(Te.jsxs)("div",{className:"inwardIn mt-2",children:[Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Inward No"}),"."]}),"view"===g||"edit"===g&&N?Object(Te.jsx)(Hn.a,{open:"InwardNo"===$,options:N,onChange:function(e,t){return Je(t)},getOptionLabel:function(e){return e.InwardNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return re("InwardNo")},onBlur:function(){re(""),ee("")}}))}}):Object(Te.jsx)("input",{type:"text",name:"inwardNo",onChange:function(e){return Fe(e)},"data-valid":"number",className:p&&!0===p.inwardNo?"error":"",value:b&&b.inwardNo,readOnly:"add"!==g&&"edit"!==g})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Inward Date"})}),Object(Te.jsx)(pa.a,{selected:b&&b.inwardDate,enabled:"false",minDate:b&&b.inwardDate,maxDate:b&&b.inwardDate,dropdownMode:"select",onChangeRaw:function(e){return function(e){e.preventDefault()}(e)}})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===p.vendorName?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Vendor Name"})}),"add"===g&&"name"!==oe?Object(Te.jsx)(Hn.a,{open:"VendorName"===$,options:J,onChange:function(e,t){return at(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return re("VendorName")},onBlur:function(){re(!1),ee(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"vendorName",onChange:function(e){return Fe(e)},className:p&&!0===p.vendorName?"error":"",value:b&&b.vendorName,readOnly:!0,"data-valid":"character"})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col col3 autoComp",children:Object(Te.jsxs)("div",{className:!0===p.vendorCode?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Vendor Code"})}),"add"===g&&"code"!==oe?Object(Te.jsx)(Hn.a,{open:"VendorCode"===$,options:J,onChange:function(e,t){return at(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return re("VendorCode")},onBlur:function(){re(!1),ee(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"vendorCode",onChange:function(e){return Fe(e)},className:p&&!0===p.vendorCode?"error":"",value:b&&b.vendorCode,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col col3 autoComp",children:Object(Te.jsxs)("div",{className:p&&!0===p.gitno?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Select GIT"})}),"add"===g?Object(Te.jsx)(Hn.a,{open:"SelectGIT"===$,options:z,onChange:function(e,t){return We(t)},getOptionLabel:function(e){return e.git_no},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return re("SelectGIT")},onBlur:function(){re(!1),ee(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"gitno",className:p&&!0===p.gitno?"error":"",readOnly:"view"!==g&&"add"!==g&&"edit"!==g,"data-valid":"character",value:b&&b.gitno})]})})]})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:Pr,data:b.items,overFlowScroll:!0,selectedTr:function(e){return function(e){e!==Oe?(D(!1),pe(e)):pe(e)}(e)},editColumn:G,editfunction:function(){D(!0)},editStatus:C,refreshTable:E,tblInputOnchange:function(e){return function(e){return"receivedbaseqty"===e.target.name&&e.target.value>Oe.billedbaseqty?(alert("You can't input greater then bill base qty extra Qty please input in Excess Qty"),be(Object(d.a)(Object(d.a)({},de),{},Object(l.a)({},e.target.name,Oe.billedbaseqty))),Oe.billedbaseqty):(be(Object(d.a)(Object(d.a)({},de),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value)}(e)}})})})}),Object(Te.jsxs)("div",{className:"box blueBg borderTop-0",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Bill Bas Qty"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:b&&b.billbaseqty,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Rec Base Qty"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:b&&b.recbaseqty,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Gross Total"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:b&&b.grosstotal,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Bill Alt Qty"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:b&&b.billaltqty,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Rec Alt Qty"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:b&&b.recaltqty,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Net Amount"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:b&&b.netamount,readOnly:!0})]})})]})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{placeholder:"Write remarks here",name:"remark",value:b&&b.remark,onChange:function(e){return Fe(e)}})]})})})]}),xe&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:ye.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return Re(t,e)},children:e.VoucherName})}))})]})})]})})},Br=(n(426),[{header:"Item Name",field:"ItemName",width:250,cell:"autocomplete"},{header:"Item Code",field:"ItemCode",width:250,cell:"autocomplete"},{header:"Base Unit",field:"baseUnit"},{header:"Alt Unit",field:"altUnit"},{header:"MRP",field:"MRP",cell:"EditInput"},{header:"Quantity (+)",field:"QuantityIn",cell:"EditInput",width:100},{header:"Quantity (-)",field:"QuantityOut",cell:"EditInput",width:100}]),Mr=function(e){var t=e.pageNav,n={transactionNo:"",sgDate:"",Remark:"",items:[],itemList:[],TrList:[]},r=Object(a.useState)(),c=Object(o.a)(r,2),s=c[0],b=c[1],j=Object(a.useState)(n),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)(),f=Object(o.a)(h,2),x=f[0],g=f[1],I=Object(a.useState)(!1),y=Object(o.a)(I,2),w=y[0],N=y[1],k=Object(a.useState)(),A=Object(o.a)(k,2),S=A[0],C=A[1],D=Object(a.useState)(!1),_=Object(o.a)(D,2),P=_[0],B=_[1],M=Object(a.useState)(!0),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)(!1),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)(),V=Object(o.a)(Q,2),z=V[0],H=V[1],W=Object(a.useState)(!1),K=Object(o.a)(W,2),J=K[0],Y=K[1],Z=Object(a.useState)(!1),X=Object(o.a)(Z,2),$=X[0],ee=X[1],te=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),ne=Object(o.a)(te,2),ae=ne[0],re=(ne[1],Object(a.useState)(!1)),ce=Object(o.a)(re,2),se=ce[0],oe=ce[1],ie=Object(a.useState)([]),ue=Object(o.a)(ie,2),le=ue[0],de=ue[1],be=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}de(n),oe(!0),e.next=17;break;case 9:return e.next=11,v.AdjustmentMaster.toArray();case 11:return a=e.sent,r={series:"",sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,me(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=14;break}return e.next=6,v.AdjustmentMaster.toArray();case 6:return c=e.sent,s=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:c}),e.next=10,Ve(s,t.formid);case 10:o=e.sent,me(o),e.next=22;break;case 14:return e.next=16,v.AdjustmentMaster.toArray();case 16:return u=e.sent,l=Object(d.a)(Object(d.a)({},r),{},{dbcount:u}),e.next=20,Ve(l,t.formid);case 20:b=e.sent,me(b);case 22:oe(!1);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.toArray();case 2:n=e.sent,p(Object(d.a)(Object(d.a)({},O),{},{transactionNo:t,sgDate:new Date,itemList:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){p(n),U(!1),N(!0)},pe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.AdjustmentMaster.toArray();case 3:return n=e.sent,a=n.filter((function(e){return e.CreatedBy===parseInt(t)})),e.next=7,v.itemMaster.toArray();case 7:r=e.sent,p(Object(d.a)(Object(d.a)({},O),{},{TrList:a,itemList:r}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=37;break}return Y(""),B(""),n=""===t.Id||null===t.Id||void 0===t.Id?t.id:t.Id,e.next=6,v.AdjustmentDetail.where("stockadjustmentid").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 6:if(!(a=e.sent)){e.next=37;break}r=[],c=Object(Jn.a)(a),e.prev=10,c.s();case 12:if((s=c.n()).done){e.next=27;break}return o=s.value,e.next=16,v.itemMaster.where("ItemId").equals(o.ItemId).first().then().catch((function(e){return console.log(e)}));case 16:return u=e.sent,e.next=19,v.unitMaster.where("Id").equals(u.UnitName).first();case 19:return l=e.sent,e.next=22,v.unitMaster.where("Id").equals(u.UnitAltName).first();case 22:b=e.sent,j={id:o.id,ItemCode:void 0===u?"":u.ItemCode,ItemName:void 0===u?"":u.ItemName,baseUnit:l.UnitName,altUnit:b.UnitName,ItemId:o.ItemId,MRP:o.MRP,QuantityIn:o.QuantityIn,QuantityOut:o.QuantityOut},r.push(j);case 25:e.next=12;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(10),c.e(e.t0);case 32:return e.prev=32,c.f(),e.finish(32);case 35:m={transactionNo:t.AdjusmentNo,sgDate:t.AdjusmentDate,Remark:t.Remarks,items:r},p(Object(d.a)(Object(d.a)({},O),m));case 37:case"end":return e.stop()}}),e,null,[[10,29,32,35]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.unitMaster.where("Id").equals(t.UnitName).first();case 2:return n=e.sent,e.next=5,v.unitMaster.where("Id").equals(t.UnitAltName).first();case 5:a=e.sent,r=O.items.map((function(e){return e.staticid===S.staticid?Object(d.a)(Object(d.a)({},e),{},{ItemName:t.ItemName,ItemCode:t.ItemCode,baseUnit:n.UnitName,altUnit:a.UnitName}):e})),p(Object(d.a)(Object(d.a)({},O),{},{items:r})),H(Object(d.a)(Object(d.a)({},z),{},{ItemName:t.ItemName,ItemCode:t.ItemCode,ItemId:t.ItemId,baseUnit:n.UnitName,altUnit:a.UnitName}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=Object(a.useCallback)((function(){var e=O.items.map((function(e){return void 0===e.id?e.staticid===S.staticid?Object(d.a)(Object(d.a)({},e),z):e:e.id===S.id?Object(d.a)(Object(d.a)({},e),z):e}));p(Object(d.a)(Object(d.a)({},O),{},{items:e})),g(!1),H(),ee(!1)}),[S,z,O]),ve=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.AdjustmentMaster.where("AdjusmentNo").equals(O.transactionNo).first().then().catch((function(e){return console.log(e)}));case 2:if(!(n=e.sent)){e.next=13;break}if(a=O.items.map((function(e){var t={stockadjustmentid:n.id,ItemId:e.ItemId,MRP:parseInt(e.MRP),QuantityIn:parseInt(e.QuantityIn),QuantityOut:parseInt(e.QuantityOut)};return G?(t.id=e.id,t):t})),r=a.filter((function(e){return""!==e.ItemId&&e.QuantityIn>0})),G){e.next=11;break}return e.next=9,v.AdjustmentDetail.bulkAdd(r).then((function(e){if(e){alert("data save successfully");var a=r.map((function(e){return{formId:t.formid,trId:n.id,ItemId:e.ItemId,Inqty:e.QuantityIn,Outqty:e.QuantityOut,type:"stockG"}}));et(a),Oe(),b("save")}})).catch((function(e){return console.log(e)}));case 9:e.next=13;break;case 11:return e.next=13,v.AdjustmentDetail.bulkPut(r).then((function(e){if(e){alert("data update successfully");var a=r.map((function(e){return{formId:t.formid,trId:n.id,ItemId:e.ItemId,Inqty:e.QuantityIn,Outqty:e.QuantityOut,type:"stockG"}}));tt(a),Oe(),b("save")}}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={AdjusmentNo:O.transactionNo,AdjusmentDate:O.sgDate,CreatedBy:parseInt(localStorage.getItem("UserId")),Remarks:O.Remark,CreatedOn:new Date,new:1,update:0},G){e.next=6;break}return e.next=4,v.AdjustmentMaster.add(t).then((function(e){e&&ve()})).catch((function(e){return console.log(e)}));case 4:e.next=7;break;case 6:ve();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),B(J)),"Enter"===e.key&&(e.preventDefault(),xe())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[O,S,J,xe]);var Ie={val:s,change_state:function(e){switch(e){case"view":return b(e),N(!1),U(!1),pe(),void L(!1);case"edit":return N(!1),U(!0),L(!0),b(e),void pe();case"refresh":return b(e),p(n),U(!1),void N(!0);case"add":return be(),U(!1),N(!1),L(!0),void b(e);case"save":if(O.items.length<1)alert("please add at least one item");else if(O.items.length>0){O.items.filter((function(e){return""!==e.ItemName&&e.QuantityIn>0})).length>0?ge():alert("please add item and Item Detail item name and Quantity (+) required")}return;default:return e}},disabledAction:ae};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"stockGeneral",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Ie)),Object(Te.jsxs)("div",{className:"stockGeneralIn mt-2",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col col3 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Transaction No"}),"."]}),"view"===s||"edit"===s?Object(Te.jsx)(Hn.a,{open:"Transactionno"===P,options:O.TrList,onChange:function(e,t){return he(t)},getOptionLabel:function(e){return e.AdjusmentNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Y("Transactionno")},onBlur:function(){Y(""),B("")}}))}}):Object(Te.jsx)("input",{type:"text",name:"documentNo",readOnly:!0,value:O&&O.transactionNo})]})}),Object(Te.jsx)("div",{className:"col col3",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Transaction Date"})}),Object(Te.jsx)(pa.a,{selected:O&&O.sgDate,dropdownMode:"select",minDate:O&&O.sgDate,maxDate:O&&O.sgDate})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:Br,data:O.items,overFlowScroll:!0,selectedTr:function(e){return function(e){if(C(e),x&&S){console.log(S,"selectedTblRow1");var t=O.items.map((function(e){return void 0!==e.id?e.id===S.id?Object(d.a)(Object(d.a)({},e),S):e:e.staticid===S.staticid?Object(d.a)(Object(d.a)({},e),S):e}));p(Object(d.a)(Object(d.a)({},O),{},{items:t}))}g(!1)}(e)},editColumn:E,editfunction:function(){g(!0)},optionList:O.itemList,editStatus:x,deleteRow:function(){return function(){var e=O.items.filter((function(e){return void 0!==e.id?e.id!==S.id:e.staticid!==S.staticid}));if(e){var t=e.map((function(e,t){return void 0===e.id?Object(d.a)(Object(d.a)({},e),{},{staticid:t+1}):e}));p(Object(d.a)(Object(d.a)({},O),{},{items:t}))}}()},tblInputOnchange:function(e){return function(e){return H(Object(d.a)(Object(d.a)({},z),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},getAutocompleteOption:function(e){return fe(e)},itemAdd:("add"===s||"edit"===s)&&function(){return function(){if(!0===$&&O.items.length>0)alert("please add item detail");else{var e={staticid:O.items.length+1,ItemName:"",ItemCode:"",baseUnit:"",altUnit:"",MRP:0,QuantityIn:0,QuantityOut:0},t=[].concat(Object(R.a)(O.items),[Object(d.a)({},e)]);p(Object(d.a)(Object(d.a)({},O),{},{items:t})),ee(!0)}}()},refreshTable:w,editbtnText:"Add Item detail"})})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"Remark",placeholder:"Write remarks here",onChange:function(e){return function(e){p(Object(d.a)(Object(d.a)({},O),{},Object(l.a)({},e.target.name,e.target.value)))}(e)},value:O.Remark})]})})})]}),se&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:le.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return je(t,e)},children:e.VoucherName})}))})]})})]})})},Tr=(n(427),[{header:"Item Name",field:"ItemName",width:250},{header:"Item Code",field:"ItemCode",width:150},{header:"Unit",field:"unit",cell:"EditInput"},{header:"Stock Alt Qty",field:"StockAltQty",cell:"EditInput"},{header:"Base Qty",field:"baseQty",cell:"EditInput"},{header:"Max Stock",field:"MaxStock"}]),Er=[{header:"Item Name",field:"ItemName"},{header:"Item Code",field:"ItemCode"},{header:"Unit",field:"unit"},{header:"Stock Base Qty",field:"StockBaseQty"},{header:"Stock Alt. Qty",field:"StockAltQty"},{header:"Required Qty",field:"RequiredQty",cell:"EditInput"},{header:"Required Alt. Qty",field:"RequiredAltQty"},{header:"Remark",field:"Remark",cell:"EditInput"},{header:"Priority",field:"Priority",cell:"select",slOption:[{value:"Most Urgent",label:"Most Urgent"},{value:"Urgent",label:"Urgent"},{value:"General",label:"General"}]}],Lr=function(e){var t=e.pageNav,n={indentNo:"",indentDate:"",vendorName:"",vendorCode:"",indentBy:"",remark:"",indentList:[]},r={indentNo:"",indentDate:"",vendorName:"",vendorCode:"",indentBy:""},c=Object(a.useState)(r),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(""),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(Object(d.a)(Object(d.a)({},n),{},{indentDate:new Date})),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)([]),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(),P=Object(o.a)(_,2),B=P[0],M=P[1],T=Object(a.useState)(),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)(!1),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)(),z=Object(o.a)(V,2),H=z[0],W=z[1],K=Object(a.useState)(),J=Object(o.a)(K,2),Y=J[0],Z=J[1],X=Object(a.useState)([]),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)({}),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)(!0),oe=Object(o.a)(se,2),ie=oe[0],ue=oe[1],le=Object(a.useState)(),de=Object(o.a)(le,2),be=de[0],je=de[1],me=Object(a.useState)(),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)(!1),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=Object(a.useState)(!1),ye=Object(o.a)(Ie,2),we=ye[0],Ne=ye[1],ke=Object(a.useState)([]),Ae=Object(o.a)(ke,2),Se=Ae[0],Ce=Ae[1],De=Object(a.useState)({seriesId:"",voucherId:""}),_e=Object(o.a)(De,2),Pe=_e[0],Re=_e[1],Be=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),Me=Object(o.a)(Be,2),Ee=Me[0],Le=(Me[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.userMaster.toArray();case 3:if(!(n=e.sent)){e.next=8;break}return a=n.find((function(e){return e.Id===parseInt(t)})),console.log(a.UserName,""),e.abrupt("return",a.UserName);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=21;break}if(!(n.length>0)){e.next=9;break}Ce(n),Ne(!0),e.next=21;break;case 9:return e.next=11,Le();case 11:return a=e.sent,console.log(a,"indentBy: crBy"),e.next=15,v.IndentMaster.toArray();case 15:return r=e.sent,c={series:"",sCount:0,digit:5,dbcount:r},e.next=19,Ve(c,t.formid);case 19:s=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{indentNo:s,indentBy:a}));case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:return r=e.sent,e.next=5,Le();case 5:if(c=e.sent,void 0!==r.digit){e.next=25;break}if(""!==r.seriesId){e.next=13;break}return e.next=10,v.IndentMaster.where("SeriesId").equals(0).toArray();case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,v.IndentMaster.where("SeriesId").equals(r.seriesId).toArray();case 15:e.t0=e.sent;case 16:return s=e.t0,o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s.length>0?s:[]}),e.next=20,Ve(o,t.formid);case 20:u=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{indentNo:u,indentBy:c})),Re({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=41;break;case 25:if(""!==r.seriesId){e.next=31;break}return e.next=28,v.IndentMaster.where("SeriesId").equals(0).toArray();case 28:e.t1=e.sent,e.next=34;break;case 31:return e.next=33,v.IndentMaster.where("SeriesId").equals(r.seriesId).toArray();case 33:e.t1=e.sent;case 34:return l=e.t1,b=Object(d.a)(Object(d.a)({},r),{},{dbcount:l.length>0?l:[]}),e.next=38,Ve(b,t.formid);case 38:j=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{indentNo:j,indentBy:c})),Re({seriesId:r.seriesId,voucherId:r.voucherId});case 41:Ne(!1);case 42:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ge=function(){I(Object(d.a)(Object(d.a)({},n),{},{indentDate:new Date})),j(r),h("refresh"),ce({}),ue(!1),F(!1),Re({seriesId:"",voucherId:""}),W([]),te([])},ze=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.IndentMaster.toArray();case 3:n=e.sent,a=n.filter((function(e){return e.CreatedBy===parseInt(t)})),I(Object(d.a)(Object(d.a)({},g),{},{indentList:a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}return e.next=3,v.userMaster.toArray();case 3:return n=e.sent,a=n.find((function(e){return e.Id===parseInt(t.CreatedBy)})),r={indentNo:t.IndentNo,indentDate:t.IndentDate,Id:t.Id,id:t.id,vendorName:t.PartyName,vendorCode:t.vendorCode,indentBy:a.UserName,remark:t.Remarks,PartyId:t.PartyId,new:t.new,update:t.update},e.next=8,v.IndentDetail.where("IndentNo").equals(t.IndentNo).toArray();case 8:return c=e.sent,I(Object(d.a)(Object(d.a)({},g),r)),Q(""),D(""),e.next=14,c;case 14:if(!e.sent){e.next=17;break}s=[],c.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("ItemId").equals(parseInt(t.ItemId)).first().then((function(e){var n={Id:t.Id,id:t.id,IndentId:t.IndentId,RequiredQty:t.Quantity,indentNo:t.IndentNo,ItemId:t.ItemId,Remark:t.ItemRemarks,Priority:t.Priority,ItemName:e.ItemName,ItemCode:e.ItemCode,unit:"NOS",StockBaseQty:0,StockAltQty:0,RequiredAltQty:0};s.push(n),s.length===c.length&&te(s)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(e){I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,e.target.value))),""===e.target.value?j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,!0))):j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,!1)))},Ke=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("LedgerType").equals(2).toArray();case 2:t=e.sent,k(t.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.toArray();case 2:return t=e.sent,e.next=5,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.unitMaster.where("Id").equals(t.UnitName).first();case 2:return n=e.sent,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{id:t.Id,unit:n.UnitName,baseQty:0,StockAltQty:0}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:t=e.sent,M(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=Y.map((function(e){return e.ItemId})),t=Y.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{remark:"",RequiredQty:0,RequiredAltQty:0,Priority:""})}));if(t.length>0&&e)if(W(e),ee){var n=t.filter((function(e){var t=e.ItemId;return!ee.some((function(e){return e.ItemId===t}))})),a=ee.filter((function(e){var n=e.ItemId;return!t.some((function(e){return e.ItemId===n}))}));if(n.length>0&&te((function(e){return[].concat(Object(R.a)(e),Object(R.a)(n))})),a.length>0){var r=ee.filter((function(e){var t=e.ItemId;return!a.some((function(e){return e.ItemId===t}))}));r&&te(r)}}else te(t);ge(!1);var c=document.getElementById("options");c&&c.parentNode.removeChild(c)},Ze=Object(a.useCallback)((function(){var e=ee.map((function(e){return e.ItemId===be.ItemId?Object(d.a)(Object(d.a)({},e),re):e}));te(e),ce({})}),[re,be]),Xe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IndentMaster.where("IndentNo").equals(g.indentNo).first().then().catch((function(e){return console.log(e)}));case 2:(n=e.sent)&&(a=t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{IndentId:n.id})})),v.IndentDetail.bulkAdd(a).then((function(e){e?(alert("Indent item save successfully"),Ge()):alert("Indent item save fail")})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object.keys(b),n={},t.forEach((function(e){return n[e]=""===g[e]})),j(n),!ee||0!==ee.length){e.next=8;break}alert("Please add items"),e.next=25;break;case 8:if(!((a=Object.values(n).filter((function(e){return!0===e})))&&a.length>0)){e.next=13;break}alert("Please fill all the fields"),e.next=25;break;case 13:return e.next=15,N.find((function(e){return e.PartyCode===g.vendorCode}));case 15:if(r=e.sent,c={IndentNo:g.indentNo,IndentDate:g.indentDate,PartyId:!1===L?r.Id:g.PartyId,PartyName:g.vendorName,CreatedBy:parseInt(localStorage.getItem("UserId")),CreatedOn:new Date,Remarks:g.remark,SeriesId:""===Pe.seriesId?0:Pe.seriesId,SeriesVoucherType:Pe.voucherId,vendorCode:g.vendorCode,new:void 0===g.new||""===g.new?0:g.new,update:void 0===g.update||""===g.update?0:g.update},L&&(c.Id=g.Id,c.id=g.id,c.update=1),s=ee&&ee.map((function(e){return L?{Quantity:e.RequiredQty,IndentNo:g.indentNo,ItemId:e.ItemId,ItemRemarks:void 0===e.Remark?"":e.Remark,Priority:e.Priority,IndentId:e.IndentId,id:e.id}:{Quantity:e.RequiredQty,IndentNo:g.indentNo,ItemId:e.ItemId,ItemRemarks:void 0===e.Remark?"":e.Remark,Priority:e.Priority}})),L){e.next=23;break}s&&s.length>0?v.IndentMaster.add(Object(d.a)(Object(d.a)({},c),{},{new:1})).then((function(e){e?Xe(s):console.log("save fail")})):console.log("not save"),e.next=25;break;case 23:return e.next=25,v.IndentMaster.put(Object(d.a)(Object(d.a)({},c),{},{update:1})).then((function(e){e&&v.IndentDetail.bulkPut(s).then((function(e){e&&(alert("update successfully"),Ge())}))}));case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){U&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),D(U))),"Enter"===e.key&&(e.preventDefault(),Ze(),he(!1)),!e.ctrlKey||"f"!==e.key&&"F"!==e.key||(e.preventDefault(),"add"!==p&&"edit"!==p||ge(!0))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[Ze,p,g,U,B,Y,H,ee,be,re,pe,b,N,L]);var et={val:p,change_state:function(e){switch(e){case"add":return Fe(),F(!1),ue(!0),Ke(),h(e),void Je();case"save":return void $e();case"edit":return F(!0),h(e),ue(!0),j(r),Ke(),ze(),void Je();case"refresh":return void Ge();case"print":return;case"view":return j(r),ue(!1),ze(),void h(e);default:return e}},disabledAction:Ee};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"indent",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},et)),Object(Te.jsxs)("div",{className:"indentIn mt-2",children:[Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Indent No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===p||"view"===p?Object(Te.jsx)(Hn.a,{open:"IndentNo"===C,options:g.indentList,onChange:function(e,t){return He(t)},getOptionLabel:function(e){return e.IndentNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L"}))},onFocus:function(){return Q("IndentNo")},onBlur:function(){Q(""),D("")}}):Object(Te.jsx)("input",{type:"text",name:"indentNo",onChange:function(e){return We(e)},value:g&&g.indentNo,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Indent Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{name:"indentDate",selected:g&&g.indentDate,minDate:g&&g.indentDate,maxDate:g&&g.indentDate,onChangeRaw:function(e){return function(e){e.preventDefault()}(e)}})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===b.vendorCode?"error formBox":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===p?Object(Te.jsx)(Hn.a,{open:"name"===C,options:N,onChange:function(e,t){var n;(n=t)&&(I(Object(d.a)(Object(d.a)({},g),{},{vendorCode:n.PartyCode,vendorName:n.PartyName})),j(Object(d.a)(Object(d.a)({},b),{},{vendorCode:!1,vendorName:!1})),Q(""),D(""))},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L"}))},onFocus:function(){return Q("name")},onBlur:function(){Q(""),D("")}}):Object(Te.jsx)("input",{type:"text",name:"vendorName",readOnly:!0,value:g&&g.vendorName})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col col3",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{type:"text",name:"vendorCode",value:g&&g.vendorCode,readOnly:!0,className:!0===b.vendorCode?"error":""})]})}),Object(Te.jsx)("div",{className:"col col3",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Indent By"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{type:"text",name:"indentBy",value:g&&g.indentBy,onChange:function(e){return We(e)},className:!0===b.indentBy?"error":"",readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col col3",children:"edit"===p||"add"===p?Object(Te.jsx)("div",{className:"showText",children:Object(Te.jsx)(ot,{content:" Press Ctrl + F for show all Item List"})}):""})]})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:Er,overFlowScroll:!0,data:ee,selectedTr:function(e){return function(e){je(e)}(e)},Footer:!1,editColumn:ie,editfunction:function(){he(!0)},editStatus:pe,deleteRow:function(){},tblInputOnchange:function(e){return function(e){return ce(Object(d.a)(Object(d.a)({},re),{},Object(l.a)({},e.target.name,"RequiredQty"===e.target.name?parseInt(e.target.value):e.target.value))),e.target.value}(e)}})})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-2 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{placeholder:"Write remarks here",name:"remark",value:g&&g.remark,onChange:function(e){return We(e)}})]})})})]}),we&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:Se.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return qe(t,e)},children:e.VoucherName})}))})]})})]}),ve&&"view"!==p?Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:Tr,data:B,overFlowScroll:!0,checkbox:!0,selectedRows:H,getCheckedItem:function(e){return function(e){Z(e)}(e)},Footer:!0,filter:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{onClick:function(){return Ye()},className:"btn btnGreen mr-5 mlAuto",children:Object(Te.jsx)(ot,{content:"Ok"})}),Object(Te.jsx)("button",{onClick:function(){return function(){ge(!1);var e=document.getElementById("options");e&&e.parentNode.removeChild(e)}()},className:"btn btnRed",children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}):""]})},Fr=function(e){var t=e.pageNav,n={InvoiceNo:"",InvoiceDate:"",PartyId:"",vendorCode:"",vendorName:"",LedgerType:"",invoicetype:4,salesInvoiceNo:"",IsPurchaseInvoice:!1,vendorList:[],invoiceList:[],slPrList:[],taxpage:{grossamount:"0.00",discountamount:"0.00",taxamount:"0.00",netamount:"0.00",roundOff:"0.00",totalAmount:"0.00",igstAmount:"0.00",cgstAmount:"0.00",sgstAmount:"0.00"},billingcountryid:"",billingstateid:"",billingaddress:"",billinggstinno:"",shippingcountryid:"",shippingstateid:"",shippingaddress:"",shippinggstinno:"",CreatedBy:localStorage.getItem("UserId"),CreatedByName:localStorage.getItem("fname"),remark:"",dncn_against_pi:"",referencetype:"",referenceid:"",itemList:[],items:[],stateList:[]},r={InvoiceId:"",ItemId:"",ItemName:"",unit:"",isaltrate:"",Quantity:"",altqty:"",Rate:"",Amount:"",totalAmount:"",finalDiscount:"",DiscountPer:"",DiscountAmount:"",hsnclassificationid:"",igstrate:0,cgstrate:0,sgstrate:0,igstamount:0,cgstamount:0,sgstamount:0},c={InvoiceNo:"",InvoiceDate:"",vendorCode:"",vendorName:""},s=Object(a.useState)(),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(c),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(n),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)(),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(),B=Object(o.a)(P,2),M=B[0],T=B[1],E=Object(a.useState)(!0),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)(!1),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=Object(a.useState)(),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(!1),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),re=Object(o.a)(ae,2),ce=re[0],se=re[1],oe=Object(a.useState)(""),ie=Object(o.a)(oe,2),ue=(ie[0],ie[1]),le=Object(a.useState)(!1),de=Object(o.a)(le,2),be=de[0],je=de[1],me=Object(a.useState)([]),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)(!1),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=Object(a.useState)(!0),ye=Object(o.a)(Ie,2),we=ye[0],Ne=ye[1],ke=Object(a.useState)("billingInfo"),Ae=Object(o.a)(ke,2),Se=Ae[0],Ce=Ae[1],De=Object(a.useState)({seriesId:"",voucherId:""}),_e=Object(o.a)(De,2),Pe=_e[0],Re=_e[1],Be=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),Me=Object(o.a)(Be,2),Ee=Me[0],Le=(Me[1],function(){y(n),se(""),ne(""),ue(""),f(c),et(),Ne(!0)}),Fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,r,c,s,o,u,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target,c=r.name,!0!==(s=r.checked)){e.next=7;break}return e.next=4,v.PurchaseInvoice.where("PartyId").equals(I.PartyId).toArray().then().catch((function(e){return console.log(e)}));case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,v.salesInvoice.where("partyid").equals(I.PartyId).toArray().then().catch((function(e){return console.log(e)}));case 9:e.t0=e.sent;case 10:return o=e.t0,u=!0===I.IsPurchaseInvoice?o.filter((function(e){return 0===e.invoicetype||1===e.invoicetype})):o,e.next=14,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 14:b=e.sent,y(Object(d.a)(Object(d.a)({},I),{},(a={},Object(l.a)(a,c,s),Object(l.a)(a,"slPrList",u),Object(l.a)(a,"salesInvoiceNo",""),Object(l.a)(a,"taxpage",n.taxpage),Object(l.a)(a,"items",[]),Object(l.a)(a,"itemList",b),a))),et(),X(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(e){"billingstateid"===e.target.name?I.billingstateid!==e.target.value&&(ge(!0),setTimeout((function(){ge(!1)}),1e3),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value)))):"shippingstateid"===e.target.name?I.shippingstateid!==e.target.value&&(ge(!0),setTimeout((function(){ge(!1)}),1e3),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value)))):(y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value))),""===e.target.value?f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,""))):f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,!1))))},Ge=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=18;break}if(!(n.length>0)){e.next=9;break}he(n),je(!0),e.next=18;break;case 9:return e.next=11,v.PurchaseInvoice.where("invoicetype").equals(4).toArray();case 11:return a=e.sent,r=a.filter((function(e){return 0===e.seriesid})),c={series:"",sCount:0,digit:5,dbcount:r},e.next=16,Ve(c,t.formid);case 16:s=e.sent,He(s);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=16;break}return e.next=6,v.PurchaseInvoice.where("invoicetype").equals(4).toArray();case 6:return c=e.sent,s=c.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=11,Ve(o,t.formid);case 11:u=e.sent,He(u),Re({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=26;break;case 16:return e.next=18,v.PurchaseInvoice.where("invoicetype").equals(4).toArray();case 18:return l=e.sent,b=l.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=23,Ve(j,t.formid);case 23:m=e.sent,He(m),Re({seriesId:r.seriesId,voucherId:r.voucherId});case 26:je(!1);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),He=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.toArray().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,a=n&&n.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})),e.next=6,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 6:return r=e.sent,e.next=9,We();case 9:c=e.sent,y(Object(d.a)(Object(d.a)({},I),{},{InvoiceNo:t,InvoiceDate:new Date,vendorList:a,itemList:r,stateList:c}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,e.next=3,v.cityMaster.toArray();case 3:return n=e.sent,a=n.filter((function(e){var n=t.has(e.StateName);return t.add(e.StateName),!n})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(e){Ce(e)},Je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=17;break}if(!0!==I.IsPurchaseInvoice){e.next=7;break}return e.next=4,v.PurchaseInvoice.where("PartyId").equals(t.Id).toArray().then().catch((function(e){return console.log(e)}));case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,v.salesInvoice.where("partyid").equals(t.Id).toArray().then().catch((function(e){return console.log(e)}));case 9:e.t0=e.sent;case 10:n=e.t0,a=!0===I.IsPurchaseInvoice?n.filter((function(e){return 0===e.invoicetype||1===e.invoicetype})):n,y(Object(d.a)(Object(d.a)({},I),{},{PartyId:t.Id,vendorCode:t.PartyCode,vendorName:t.PartyName,LedgerType:t.LedgerType,slPrList:a})),f(Object(d.a)(Object(d.a)({},h),{},{vendorName:!1,vendorCode:!1})),se(""),ne(""),Ne(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e){""===e.target.value?(Ne(!0),y(Object(d.a)(Object(d.a)({},I),{},{vendorCode:"",vendorName:""}))):y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value)))},Ze=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=33;break}if(n=0===t.Id||""===t.Id?t.id:t.Id,!0!==I.IsPurchaseInvoice){e.next=8;break}return e.next=5,v.PurchaseInvoiceDetail.where("InvoiceId").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,v.saleInvoiceDetail.where("invoiceid").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 10:e.t0=e.sent;case 11:a=e.t0,r=[],c=Object(Jn.a)(a),e.prev=14,c.s();case 16:if((s=c.n()).done){e.next=24;break}return o=s.value,e.next=20,v.itemMaster.where("Id").equals(!0===I.IsPurchaseInvoice?o.ItemId:o.itemid).first().then().catch((function(e){return console.log(e)}));case 20:(u=e.sent)&&r.push(u);case 22:e.next=16;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(14),c.e(e.t1);case 29:return e.prev=29,c.f(),e.finish(29);case 32:y(Object(d.a)(Object(d.a)({},I),{},{salesInvoiceNo:!1===I.IsPurchaseInvoice?t.invoiceno:t.InvoiceNo,referenceid:t.Id,itemList:r}));case 33:se(""),ne("");case 35:case"end":return e.stop()}}),e,null,[[14,26,29,32]])})));return function(t){return e.apply(this,arguments)}}(),et=function(){_(!0),setTimeout((function(){return _(!1)}),500)},tt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(I.items.length>0)){e.next=18;break}if(!I.items.find((function(e){return e.ItemId===t.ItemId}))){e.next=7;break}return alert("you have already select this item"),e.abrupt("return",!1);case 7:return e.next=9,vr(t);case 9:if(n=e.sent,!t){e.next=16;break}return a=t.GSTClassification[0].HsnId,e.next=14,Xe(t.ItemId);case 14:r=e.sent,K(Object(d.a)(Object(d.a)({},W),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:n.igstRate,cgstrate:n.cgstRate,sgstrate:n.sgstRate,hsnid:a,unitId:t.UnitName,unit:r}));case 16:e.next=27;break;case 18:return e.next=20,vr(t);case 20:if(c=e.sent,!t){e.next=27;break}return s=t.GSTClassification[0].HsnId,e.next=25,Xe(t.ItemId);case 25:o=e.sent,K(Object(d.a)(Object(d.a)({},W),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:c.igstRate,cgstrate:c.cgstRate,sgstrate:c.sgstRate,hsnid:s,unitId:t.UnitName,unit:o}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=Object(a.useCallback)(Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s,o,u,l,b,j,m,O,p,h,f,x;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===W){e.next=26;break}return t=void 0!==W.Quantity?W.Quantity:""!==M.Quantity?M.Quantity:0,n=void 0!==W.Rate?W.Rate:""!==M.Rate?M.Rate:0,a=void 0!==W.DiscountPer?W.DiscountPer:""!==M.DiscountPer?M.DiscountPer:0,r=void 0!==W.igstrate?W.igstrate:""!==M.igstrate?M.igstrate:0,c=void 0!==W.cgstrate?W.cgstrate:""!==M.cgstrate?M.cgstrate:0,s=void 0!==W.sgstrate?W.sgstrate:""!==M.sgstrate?M.sgstrate:0,u=a*(o=t*n)/100,l=gr(r,o),b=gr(c,o),j=gr(s,o),m=o-u,O=parseFloat(m)+parseFloat(l)+parseFloat(b)+parseFloat(j),e.next=16,$e(M.ItemId,t);case 16:p=e.sent,h=Object(d.a)(Object(d.a)({},W),{},{ItemName:void 0!==W.ItemName?W.ItemName:void 0!==M.ItemName?M.ItemName:"",igstamount:I.billingstateid!==I.shippingstateid?Ir(l):0,cgstamount:I.billingstateid===I.shippingstateid?Ir(b):0,sgstamount:I.billingstateid===I.shippingstateid?Ir(j):0,Quantity:t,igstrate:I.billingstateid!==I.shippingstateid?r:0,cgstrate:I.billingstateid===I.shippingstateid?c:0,sgstrate:I.billingstateid===I.shippingstateid?s:0,Rate:Ir(n),DiscountPer:Ir(a),Amount:Ir(o),DiscountAmount:Ir(u),totalAmount:Ir(O),altqty:p,finalDiscount:Ir(m),hsnid:void 0!==W.hsnid?W.hsnid:void 0!==M.hsnid?M.hsnid:""}),f=I.items.map((function(e){return void 0===e.id?e.staticid===M.staticid?Object(d.a)(Object(d.a)({},e),h):e:e.id===M.id?Object(d.a)(Object(d.a)({},e),h):e})),x=wr(f),y(Object(d.a)(Object(d.a)({},I),{},{items:f,taxpage:x})),A(!1),K(),et(),e.next=27;break;case 26:et();case 27:case"end":return e.stop()}}),e)}))),[M,W,I]),at=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=6;break}return e.next=3,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("Id").equals(t.ItemId).first().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,vr(n);case 5:return a=e.sent,r=gr(a.igstRate,t.Amount),c=gr(a.cgstRate,t.Amount),s=gr(a.sgstRate,t.Amount),e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{igstrate:parseInt(I.billingstateid)!==parseInt(I.shippingstateid)?a.igstRate:0,cgstrate:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?a.cgstRate:0,sgstrate:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?a.sgstRate:0,igstamount:parseInt(I.billingstateid)!==parseInt(I.shippingstateid)?Ir(r):0,cgstamount:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?Ir(c):0,sgstamount:parseInt(I.billingstateid)===parseInt(I.shippingstateid)?Ir(s):0}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:n=e.sent,a=wr(n),y(Object(d.a)(Object(d.a)({},I),{},{items:n,taxpage:a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(I.items.length>0&&ve){var e=I.items.filter((function(e){return""!==e.ItemId}));e.length>0&&at(e)}}),[ve,I.items]);var rt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.PurchaseInvoice.where("invoicetype").equals(4).toArray().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.next=6,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 6:a=e.sent,(r=n.filter((function(e){return e.CreatedBy===t})))&&y(Object(d.a)(Object(d.a)({},I),{},{invoiceList:r,itemList:a}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b,m,O;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=43;break}return se(""),ne(""),e.next=5,We();case 5:return n=e.sent,e.next=8,v.customerMaster.where("Id").equals(t.PartyId).first().then().catch((function(e){return console.log(e)}));case 8:return a=e.sent,r=0===t.Id||""===t.Id||void 0===t.Id?t.id:t.Id,e.next=12,v.PurchaseInvoiceDetail.where("InvoiceId").equals(r).toArray().then().catch((function(e){return console.log(e)}));case 12:if(c=e.sent,s=[],!c){e.next=39;break}o=Object(Jn.a)(c),e.prev=16,o.s();case 18:if((u=o.n()).done){e.next=31;break}return l=u.value,e.next=22,v.itemMaster.where("ItemId").equals(l.ItemId).first().then().catch((function(e){return console.log(e)}));case 22:return b=e.sent,e.next=25,Xe(l.UnitId);case 25:m=e.sent,l.ItemName=void 0===b?"":b.ItemName,l.unit=m,s.push(l);case 29:e.next=18;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(16),o.e(e.t0);case 36:return e.prev=36,o.f(),e.finish(36);case 39:O=s.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{InvoiceId:e.InvoiceId,ItemId:e.ItemId,isaltrate:e.isaltrate,Quantity:parseInt(e.Quantity),altqty:e.altqty,unitId:e.UnitId,Rate:Ir(e.Rate),totalAmount:Ir(e.Amount),Amount:Ir(e.GrossAmount),DiscountPer:parseFloat(e.DiscountPer),DiscountAmount:Ir(e.DiscountAmount),finalDiscount:Ir(e.GrossAmount)-Ir(e.DiscountAmount),hsnid:parseInt(e.hsnclassificationid),igstrate:parseFloat(e.igstrate),cgstrate:parseFloat(e.cgstrate),sgstrate:parseFloat(e.sgstrate),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount)})})),y(Object(d.a)(Object(d.a)({},I),{},{id:t.id,Id:t.Id,new:t.new,InvoiceDate:t.InvoiceDate,InvoiceNo:t.InvoiceNo,PartyId:parseInt(t.PartyId),invoicetype:t.invoicetype,vendorName:a.PartyName,vendorCode:a.PartyCode,billingcountryid:t.billingcountryid,billingstateid:parseInt(t.billingstateid),billingaddress:t.billingaddress,billinggstinno:t.billinggstinno,shippingcountryid:t.shippingcountryid,shippingstateid:parseInt(t.shippingstateid),shippingaddress:t.shippingaddress,shippinggstinno:t.shippinggstinno,remark:t.remark,CreatedBy:t.CreatedBy,taxpage:{grossamount:t.grossamount,discountamount:t.discountamount,taxamount:t.taxamount,netamount:t.netamount,RoundOff:t.roundOff,totalAmount:t.totalAmount,igstAmount:t.igstAmount,cgstAmount:t.cgstAmount,sgstAmount:t.sgstAmount},stateList:n,items:O})),Re({seriesId:t.seriesid,voucherId:t.seriesvouchertype}),X("view"!==j);case 43:case"end":return e.stop()}}),e,null,[[16,33,36,39]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.stateMaster.where("StateId").equals(t).first().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.abrupt("return",n.CountryId);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=I.InvoiceNo,e.t1=I.InvoiceDate,e.t2=parseInt(I.PartyId),e.t3=Ir(I.taxpage.grossamount),e.t4=Ir(I.taxpage.discountamount),e.t5=Ir(I.taxpage.taxamount),e.t6=Ir(I.taxpage.netamount),e.t7=I.taxpage.roundOff,e.t8=I.taxpage.totalAmount,e.t9=I.taxpage.igstAmount,e.t10=I.taxpage.cgstAmount,e.t11=I.taxpage.sgstAmount,""===I.billingstateid){e.next=18;break}return e.next=15,st(parseInt(I.billingstateid));case 15:e.t12=e.sent,e.next=19;break;case 18:e.t12="";case 19:if(e.t13=e.t12,e.t14=parseInt(I.billingstateid),e.t15=I.billingaddress,e.t16=I.billinggstinno,""===I.shippingstateid){e.next=29;break}return e.next=26,st(parseInt(I.shippingstateid));case 26:e.t17=e.sent,e.next=30;break;case 29:e.t17="";case 30:e.t18=e.t17,e.t19=parseInt(I.shippingstateid),e.t20=I.shippingaddress,e.t21=I.shippinggstinno,e.t22=I.remark,e.t23=I.IsPurchaseInvoice,e.t24=I.referencetype,e.t25=I.referenceid,e.t26=localStorage.getItem("UserId"),e.t27=new Date,e.t28=""===Pe.seriesId?0:Pe.seriesId,e.t29=""===Pe.voucherId?"":Pe.voucherId,t={InvoiceNo:e.t0,InvoiceDate:e.t1,PartyId:e.t2,invoicetype:4,grossamount:e.t3,discountamount:e.t4,taxamount:e.t5,netamount:e.t6,RoundOff:e.t7,totalAmount:e.t8,igstAmount:e.t9,cgstAmount:e.t10,sgstAmount:e.t11,billingcountryid:e.t13,billingstateid:e.t14,billingaddress:e.t15,billinggstinno:e.t16,shippingcountryid:e.t18,shippingstateid:e.t19,shippingaddress:e.t20,shippinggstinno:e.t21,remark:e.t22,dncn_against_pi:e.t23,referencetype:e.t24,referenceid:e.t25,CreatedBy:e.t26,CreatedOn:e.t27,seriesid:e.t28,seriesvouchertype:e.t29},Q?(n=Object(d.a)(Object(d.a)({},t),{},{id:I.id,update:1,new:I.new,Id:I.Id}),v.PurchaseInvoice.put(n).then((function(e){e&&ut(e)})).catch((function(e){return console.log(e)}))):v.PurchaseInvoice.add(Object(d.a)(Object(d.a)({},t),{},{new:1,update:0})).then((function(e){e&&ut(e)})).catch((function(e){return console.log(e)}));case 44:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=I.items.map((function(e){var n={InvoiceId:t,ItemId:e.ItemId,isaltrate:e.isaltrate,Quantity:parseInt(e.Quantity),altqty:e.altqty,UnitId:e.unitId,Rate:Ir(e.Rate),Amount:Ir(e.totalAmount),GrossAmount:Ir(e.Amount),DiscountPer:parseFloat(e.DiscountPer),DiscountAmount:Ir(e.DiscountAmount),hsnclassificationid:parseInt(e.hsnid),igstrate:parseFloat(e.igstrate),cgstrate:parseFloat(e.cgstrate),sgstrate:parseFloat(e.sgstrate),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount),icdetailid:"",icmId:""};return Q?(n.id=e.id,n.InvoiceId=e.InvoiceId,n):n})))&&(Q?v.PurchaseInvoiceDetail.bulkPut(n).then((function(e){e&&(alert("data Update successfully"),Le(),m("save"))})).catch((function(e){return console.log(e)})):v.PurchaseInvoiceDetail.bulkAdd(n).then((function(e){e&&(alert("data save successfully"),Le(),m("save"))})).catch((function(e){return console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),ne(ce)),"Enter"===e.key&&(e.preventDefault(),nt())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[I,M,nt,ce,W]);var lt={val:j,change_state:function(e){switch(e){case"add":return m(e),Ge(),V(!1),q(!0),void X(!0);case"edit":return m(e),rt(),V(!0),X(!1),void q(!0);case"view":return m(e),rt(),V(!1),q(!1),void X(!1);case"save":var t=Object.keys(h),n={};return t.forEach((function(e){return n[e]=""===I[e]})),f(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):it());case"refresh":return Le(),V(!1),q(!1),X(!1),void m(e);default:return e}},disabledAction:Ee};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"purchaseInvoice",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},lt)),Object(Te.jsxs)("div",{className:"purchaseInvoiceIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w100",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.InvoiceNo?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Debit No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===j||"view"===j?Object(Te.jsx)(Hn.a,{open:"InvoiceNo"===te,options:I.invoiceList,onChange:function(e,t){return ct(t)},getOptionLabel:function(e){return e.InvoiceNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("InvoiceNo")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{type:"text",value:I.InvoiceNo,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===h.InvoiceDate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Debit Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{selected:I&&I.InvoiceDate,onChange:"add"===j?function(e){return y(Object(d.a)(Object(d.a)({},I),{},{InvoiceDate:e}))}:function(){return!1},minDate:I&&I.InvoiceDate})]})}),Object(Te.jsx)("div",{className:"col"})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.vendorName?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor/customer Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===j&&!0===we?Object(Te.jsx)(Hn.a,{open:"VendorName"===te,options:I.vendorList,onChange:function(e,t){return Je(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("VendorName")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{name:"vendorName",type:"text",readOnly:"view"===j,onChange:function(e){return Ye(e)},value:I&&I.vendorName})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.vendorCode?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor/customer Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===j&&!0===we?Object(Te.jsx)(Hn.a,{open:"VendorCode"===te,options:I.vendorList,onChange:function(e,t){return Je(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("VendorCode")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{name:"vendorCode",type:"text",readOnly:"view"===j,onChange:function(e){return Ye(e)},value:I&&I.vendorCode})]})}),Object(Te.jsx)("div",{className:"col"})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Type"})}),Object(Te.jsxs)("select",{name:"referencetype",value:I.referencetype,disabled:"add"===j||"edit"===j?"":"disabled",onChange:function(e){y(Object(d.a)(Object(d.a)({},I),{},{referencetype:e.target.value}))},children:[Object(Te.jsx)("option",{value:"1",children:"Qty Diffrence"}),Object(Te.jsx)("option",{value:"2",children:"Rate Diffrence"})]})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:!1===I.IsPurchaseInvoice?"Sales Invoice No.":"Purchase Invoice No."}),("add"===j||"edit"===j)&&""===I.salesInvoiceNo?Object(Te.jsx)(Hn.a,{open:"slPrList"===te,options:I.slPrList,onChange:function(e,t){return Ze(t)},getOptionLabel:function(e){return!1===I.IsPurchaseInvoice?e.invoiceno.toString():e.InvoiceNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("slPrList")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{value:I&&I.salesInvoiceNo,name:"salesInvoiceNo",readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",style:{display:"flex",alignItems:"center"},children:Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"add"!==j&&"edit"!==j,id:"drNoteIspurchase",name:"IsPurchaseInvoice",checked:I&&I.IsPurchaseInvoice,onClick:function(e){return Fe(e)},value:I.IsPurchaseInvoice}),Object(Te.jsx)("label",{htmlFor:"drNoteIspurchase",children:Object(Te.jsx)(ot,{content:"IsPurchaseInvoice"})})]})})]})]}),Object(Te.jsx)("div",{className:"col w35"})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col mt-2 mb-2",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:hr,data:I.items,overFlowScroll:!0,selectedTr:function(e){return function(e){if(T(e),k&&M){var t=I.items.map((function(e){return void 0!==e.id?e.id===M.id?Object(d.a)(Object(d.a)({},e),M):e:e.staticid===M.staticid?Object(d.a)(Object(d.a)({},e),M):e}));y(Object(d.a)(Object(d.a)({},I),{},{items:t}))}A(!1)}(e)},editColumn:F,editfunction:function(){A(!0)},optionList:I.itemList,editStatus:k,deleteRow:function(){return function(){var e=I.items.filter((function(e){return void 0!==e.id?e.id!==M.id:e.staticid!==M.staticid}));if(e){var t=e.map((function(e,t){return void 0===e.id?Object(d.a)(Object(d.a)({},e),{},{staticid:t+1}):e}));y(Object(d.a)(Object(d.a)({},I),{},{items:t}))}}()},tblInputOnchange:function(e){return function(e){return K(Object(d.a)(Object(d.a)({},W),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},getAutocompleteOption:function(e){return tt(e)},itemAdd:!0===Z&&function(){return function(){var e=Object(d.a)(Object(d.a)({},r),{},{staticid:I.items.length+1}),t=[].concat(Object(R.a)(I.items),[Object(d.a)({},e)]);y(Object(d.a)(Object(d.a)({},I),{},{items:t})),X(!0)}()},refreshTable:D,editbtnText:"Add Item detail"})})})}),Object(Te.jsx)("div",{className:"subtabview",children:Object(Te.jsxs)("ul",{style:{marginTop:"0px"},children:[Object(Te.jsx)("li",{className:"billingInfo"===Se?"active":"",onClick:function(e){return Ke("billingInfo")},children:"Billing Info"}),Object(Te.jsx)("li",{className:"taxInfo"===Se?"active":"",onClick:function(e){return Ke("taxInfo")},children:"Tax Amount"})]})}),Object(Te.jsxs)("div",{className:"tabBox withsubtab",children:[Object(Te.jsx)("div",{className:"box",style:{display:"billingInfo"===Se?"block":"none"},children:Object(Te.jsx)(fr,{BillingObj:I,onchange:function(e){return qe(e)},requiredObj:h,val:j})}),Object(Te.jsx)("div",{className:"box",style:{display:"taxInfo"===Se?"block":"none"},children:Object(Te.jsx)(xr,{taxObject:I.taxpage})})]}),Object(Te.jsx)("div",{className:"box blueBg",style:{float:"left",width:"100%"},children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 mr-auto",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Invoice By"})}),Object(Te.jsx)("input",{type:"text",name:"CreatedByName",className:"bgWhite",value:I.CreatedByName,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:I.taxpage.netamount,readOnly:!0})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-1 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remark",value:I.remark,onChange:function(e){return qe(e)},cols:"30",rows:"10"})]})})})]}),be&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:pe.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return ze(t,e)},children:e.VoucherName})}))})]})})]})})},qr=function(e){var t=e.pageNav,n={code:"",firstName:"",companyName:"",city:"",state:"",country:"",Panno:"",GSTNo:"",Address1:"",BillAddress:"",pinCode:"",Phone:"",mobile:"",fax:"",email:"",IsClosed:!1,DmsLedgerCode:"",category:"",website:""},r={code:"",firstName:"",mobile:"",email:""},c=Object(a.useState)(n),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(r),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)({mobilerror:"",phonerror:""}),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(null),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)("This is mandatory field"),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(""),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)(),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)(),V=Object(o.a)(Q,2),z=V[0],H=V[1],W=Object(a.useState)(!1),K=Object(o.a)(W,2),J=K[0],Y=K[1],Z=Object(a.useState)(!1),X=Object(o.a)(Z,2),$=X[0],ee=X[1],te=Object(a.useState)(!1),ne=Object(o.a)(te,2),ae=ne[0],re=ne[1],ce=Object(a.useState)(),se=Object(o.a)(ce,2),oe=se[0],ie=se[1],ue=Object(a.useState)([]),le=Object(o.a)(ue,2),de=le[0],be=le[1],je=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),me=Object(o.a)(je,2),Oe=me[0],pe=(me[1],function(e){if("city"===e.target.name){var t=R.find((function(t){return t.CityId===parseInt(e.target.value)}));L(void 0===t?"":t),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))}else if("code"===e.target.name){var n=e.target.getAttribute("data-valid");if(n)Me(e.target.value,n)?(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))):(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!0))),D("This is mandatory field"));else j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))}else if("mobile"===e.target.name||"Phone"===e.target.name){var a=e.target.getAttribute("data-valid");if(a)if(Me(e.target.value,a))e.target.value.length<=10&&(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1))));else h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!0))),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,"")));else h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1))),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))}else{var r=e.target.getAttribute("data-valid");if(r)Me(e.target.value,r)?(j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1)))):(h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!0))),""===e.target.value?j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,""))):"email"===e.target.name&&j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value))));else h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1))),j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))}}),he=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.dealerCategory.toArray();case 2:t=e.sent,be(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(n),e.next=3,v.customerMaster.where("LedgerType").equals(2).toArray();case 3:t=e.sent,k(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cityMaster.toArray();case 2:t=e.sent,B(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={new:1,update:0,PartyCode:void 0===t.code?"":t.code,PartyName:void 0===t.firstName?"":t.firstName,CompanyCode:void 0===t.companyName?"":t.companyName,CityId:void 0===t.city?"":parseInt(t.city),PAN:void 0===t.Panno?"":t.Panno,GSTNo:void 0===t.GSTNo?"":t.GSTNo,Address:void 0===t.Address1?"":t.Address1,BillAddress:void 0===t.BillAddress?"":t.BillAddress,Pincode:void 0===t.pinCode?"":t.pinCode,Phone2:void 0===t.Phone?"":t.Phone,Phone1:void 0===t.mobile?"":t.mobile,Fax:void 0===t.fax?"":t.fax,Email:void 0===t.email?"":t.email,IsClosed:void 0===t.IsClosed?"":!0===t.IsClosed?1:0,DmsLedgerCode:void 0===t.DmsLedgerCode?"":t.DmsLedgerCode,DealerCategory:void 0===t.category?"":t.category,LedgerType:2,CreatedBy:localStorage.getItem("UserId"),Website:void 0===t.website?"":t.website},!G){e.next=7;break}return a.update=1,e.next=5,v.customerMaster.update(G,a).then((function(e){e?(ie("Data Updated Successfully"),re(!0),j(n)):console.log("")}));case 5:e.next=12;break;case 7:return a.update=0,a.new=1,console.log(a,"IsClosed"),e.next=12,v.customerMaster.add(a).then((function(e){e?(ie("Data Save Successfully"),re(!0),j(n)):console.log("")}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge={val:z,change_state:function(e){switch(e){case"edit":return fe(),he(),void H(e);case"refresh":return j(n),h(r),L(""),void H(e);case"view":return fe(),j(n),he(),L(""),void H(e);case"add":return U(""),he(),void H(e);case"save":var t=Object.keys(p),a={};return t.forEach((function(e){return a[e]=""===b[e]||null===b[e]||!0===p[e]})),h(a),void(Object.values(a).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):(ve(b),H(e),h(r)));default:return e}},disabledAction:Oe},Ie=function(e){[8,9,33,34,35,36,37,38,39,40,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105].includes(e.keyCode)||(e.preventDefault(),"mobile"===e.target.name?(I(Object(d.a)(Object(d.a)({},g),{},{mobilerror:"Special chars not allowed"})),setTimeout((function(){I(Object(d.a)(Object(d.a)({},g),{},{mobilerror:""}))}),1e3)):"Phone"===e.target.name&&(I(Object(d.a)(Object(d.a)({},g),{},{phonerror:"Special chars not allowed"})),setTimeout((function(){I(Object(d.a)(Object(d.a)({},g),{},{phonerror:""}))}),1e3)))},ye=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("PartyCode").equals(t.target.value).first();case 2:(n=e.sent)&&(h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},t.target.name,!0))),D("Code is already used")),console.log(n,"user");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){xe();var e=function(e){$&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),Y(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[b,N,z,E,$]);return Object(Te.jsxs)(Te.Fragment,{children:[ae&&Object(Te.jsx)(sr,{message:oe,closePopup:function(){re(!1)}}),Object(Te.jsxs)("div",{className:"customerMasterBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ge)),Object(Te.jsxs)("div",{className:"customerMasterSection",children:[Object(Te.jsx)("div",{className:"boxTitle",children:"Personal Information"}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===z||"view"===z?N&&Object(Te.jsx)(Hn.a,{open:J,options:N,onChange:function(e,t){return function(e){if(Y(!1),e){U(e.id);var t={code:e.PartyCode,firstName:e.PartyName,companyName:e.CompanyCode,city:e.CityId,pinCode:e.Pincode,Phone:e.Phone2,mobile:e.Phone1,Address1:e.Address,BillAddress:e.BillAddress,fax:e.Fax,Panno:e.PAN,GSTNo:e.GSTNo,DmsLedgerCode:e.DmsLedgerCode,category:e.DealerCategory,IsClosed:1===e.IsClosed,email:e.Email,website:e.Website},n=R.find((function(t){return t.CityId===parseInt(e.CityId)}));L(void 0===n?"":n),j(t)}}(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",className:p&&!0===p.code?"autocodeerror":"autocode",onFocus:function(){return ee(!0)},onBlur:function(){ee(!1),Y(!1)}}))}}):Object(Te.jsx)("input",{name:"code",onChange:function(e){return pe(e)},type:"text",onKeyUp:function(e){return ye(e)},className:p&&!0===p.code?"error":"","data-valid":"varChar",value:b&&b.code,readOnly:void 0===z||"view"===z}),p.code?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:C}):null]})})}),Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"firstName",value:b&&b.firstName,type:"text",className:p&&!0===p.firstName?"error":"",readOnly:void 0===z||"view"===z,"data-valid":"varCharSpace"}),p.firstName?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:Object(Te.jsx)(ot,{content:"This is mandatory field"})}):null]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Company Code"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"companyName",value:b&&b.companyName,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"PAN No"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"Panno",className:p&&!0===p.Panno?"error":"",value:b&&b.Panno,type:"text",readOnly:void 0===z||"view"===z})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"GST No"}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"GSTNo",value:b&&b.GSTNo,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Category"})}),Object(Te.jsxs)("select",{name:"category",value:b.category,onChange:function(e){return function(e){var t=e.target,n=t.name,a=t.value;j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},n,a)))}(e)},disabled:void 0===z||"view"===z,children:[Object(Te.jsx)("option",{value:"",children:"select"}),de.map((function(e){return Object(Te.jsx)("option",{value:e.dealercategoryid,children:e.dealercategorycode})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"DMS Ledger Code"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"DmsLedgerCode",value:b&&b.DmsLedgerCode,type:"text",readOnly:void 0===z||"view"===z})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"checkboxNew",style:{marginTop:"22px"},children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"view"===z||"refresh"===z,id:"checkboxOne_mark_vend",checked:b.IsClosed,onChange:function(e){return function(e){var t=e.target,n=t.name,a=t.checked;j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},n,a)))}(e)},name:"IsClosed"}),Object(Te.jsx)("label",{htmlFor:"checkboxOne_mark_vend",children:Object(Te.jsx)(ot,{content:"Mark as closed"})})]})})})]}),Object(Te.jsx)("div",{className:"boxTitle",children:Object(Te.jsx)(ot,{content:"Address and Contact Info"})}),Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"City"}),Object(Te.jsxs)("select",{onChange:function(e){return pe(e)},name:"city",value:b&&b.city,children:[Object(Te.jsx)("option",{value:"select",children:"select"}),R&&R.map((function(e,t){return Object(Te.jsx)("option",{disabled:void 0===z||"view"===z,value:e.CityId,children:e.CityName.toUpperCase()},t)}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"State"}),Object(Te.jsx)("select",{name:"state",onChange:function(e){return pe(e)},value:E&&E.StateName,type:"text",children:""===E?Object(Te.jsx)("option",{value:"Select",children:"Select"}):Object(Te.jsx)("option",{children:E&&E.StateName.toUpperCase()})})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsx)("select",{name:"country",onChange:function(e){return pe(e)},value:b&&b.country,children:""===E?Object(Te.jsx)("option",{value:"Select",children:"select"}):Object(Te.jsx)("option",{value:"india",children:"INDIA"})})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Pin Code"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"pinCode",value:b&&b.pinCode,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Phone"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"Phone",value:b&&b.Phone,type:"text",onKeyDown:Ie,className:g.phonerror?"error":"","data-valid":"number",readOnly:void 0===z||"view"===z}),g.phonerror?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:g.phonerror}):null]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Mobile"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{name:"mobile",onChange:function(e){pe(e)},onKeyDown:Ie,value:b&&b.mobile,type:"text",className:p&&!0===p.mobile?"error":"","data-valid":"number",readOnly:void 0===z||"view"===z}),g.mobilerror?Object(Te.jsx)("span",{style:{color:"red",fontSize:"15px"},children:g.mobilerror}):null,p.mobile?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:Object(Te.jsx)(ot,{content:"This is mandatory field"})}):null]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Street Address 1"})," "]}),Object(Te.jsx)("textarea",{onChange:function(e){return pe(e)},name:"Address1",value:b&&b.Address1,type:"text",readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Street Address 2"})," "]}),Object(Te.jsx)("textarea",{onChange:function(e){return pe(e)},name:"BillAddress",value:b&&b.BillAddress,type:"text",readOnly:void 0===z||"view"===z})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox mb-0",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Fax"})," "]}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},type:"text",name:"fax",value:b&&b.fax,readOnly:void 0===z||"view"===z})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox mb-0",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Email"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"email",value:b&&b.email,type:"text",className:p&&!0===p.email?"error":"","data-valid":"email",readOnly:void 0===z||"view"===z}),p.email?Object(Te.jsx)("p",{style:{color:"red",fontSize:"15px"},children:Object(Te.jsx)(ot,{content:"This is mandatory field"})}):null]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox mb-0",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Website"})}),Object(Te.jsx)("input",{onChange:function(e){return pe(e)},name:"website",value:b&&b.website,type:"text",readOnly:void 0===z||"view"===z})]})})]})]})]})]})]})},Gr=(n(428),[{header:"Item Name",field:"ItemName",width:250},{header:"Unit",field:"unit"},{header:"Pending Inward Qty",field:"pinwardQuantity"},{header:"Pending Inward Alt Qty",field:"pinwardaltqty"},{header:"Invoice Qty",field:"Quantity",cell:"EditInput"},{header:"Invoice Alt Qty",field:"altqty"},{header:"Rate",field:"Rate",cell:"EditInput"},{header:"Disc (%)",field:"DiscountPer",cell:"EditInput"},{header:"Discount Amount",field:"DiscountAmount"},{header:"Gross Amount",field:"Amount"},{header:"Final Discount",field:"finalDiscount"},{header:"Total Amount",field:"totalAmount"},{header:"IGST Tax (%)",field:"igstrate"},{header:"IGST Amount",field:"igstamount"},{header:"CGST Tax (%)",field:"cgstrate"},{header:"CGST Amount",field:"cgstamount"},{header:"SGST Tax (%)",field:"sgstrate"},{header:"SGST Amount",field:"sgstamount"}]),Ur=[{header:"Inward No",field:"InwardNo"},{header:"Inward Date",field:"inwarddateDMY"},{header:"Action",viewBtn:!0,viewBtntext:"View Item"}],Qr=[{header:"Item Name",field:"ItemName",width:250},{header:"Unit",field:"unit"},{header:"Pending Inward Qty",field:"pinwardQuantity"},{header:"Pending Inward Alt Qty",field:"pinwardaltqty"},{header:"Invoice Qty",field:"Quantity"},{header:"Invoice Alt Qty",field:"altqty"},{header:"Rate",field:"Rate"}],Vr=function(e){var t=e.pageNav,n={InvoiceNo:"",InvoiceDate:"",PartyId:"",vendorCode:"",vendorName:"",invoicetype:1,vendorList:[],invoiceList:[],inwardList:[],taxpage:{grossamount:"0.00",discountamount:"0.00",taxamount:"0.00",netamount:"0.00",roundOff:"0.00",totalAmount:"0.00",igstAmount:"0.00",cgstAmount:"0.00",sgstAmount:"0.00"},billingcountryid:"",billingstateid:"",billingaddress:"",billinggstinno:"",shippingcountryid:"",shippingstateid:"",shippingaddress:"",shippinggstinno:"",CreatedBy:localStorage.getItem("UserId"),CreatedByName:localStorage.getItem("fname"),remark:"",dncn_against_pi:"",itemList:[],items:[],itemlistbyvendor:[],viewItems:[],stateList:[]},r={InvoiceNo:"",InvoiceDate:"",vendorCode:"",vendorName:""},c=Object(a.useState)(),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(r),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(n),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(),P=Object(o.a)(_,2),B=P[0],M=P[1],T=Object(a.useState)("billingInfo"),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)(),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)(),z=Object(o.a)(V,2),H=z[0],W=z[1],K=Object(a.useState)(!1),J=Object(o.a)(K,2),Y=J[0],Z=J[1],X=Object(a.useState)(!1),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(!0),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)(!1),oe=Object(o.a)(se,2),ie=oe[0],ue=oe[1],le=Object(a.useState)([]),de=Object(o.a)(le,2),be=de[0],je=de[1],me=Object(a.useState)(),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)(!1),xe=Object(o.a)(fe,2),ve=(xe[0],xe[1]),ge=Object(a.useState)(!1),Ie=Object(o.a)(ge,2),ye=Ie[0],we=Ie[1],Ne=Object(a.useState)(!1),ke=Object(o.a)(Ne,2),Ae=ke[0],Se=ke[1],Ce=Object(a.useState)(!1),De=Object(o.a)(Ce,2),_e=De[0],Pe=De[1],Re=Object(a.useState)(""),Be=Object(o.a)(Re,2),Me=Be[0],Ee=Be[1],Le=Object(a.useState)(!1),Fe=Object(o.a)(Le,2),qe=Fe[0],Ge=Fe[1],ze=Object(a.useState)([]),He=Object(o.a)(ze,2),We=He[0],Je=He[1],Ye=Object(a.useState)({seriesId:"",voucherId:""}),Ze=Object(o.a)(Ye,2),nt=Ze[0],at=Ze[1],rt=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),ct=Object(o.a)(rt,2),st=ct[0],it=(ct[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=18;break}if(!(n.length>0)){e.next=9;break}Je(n),Ge(!0),e.next=18;break;case 9:return e.next=11,v.PurchaseInvoice.where("invoicetype").equals(0).toArray();case 11:return a=e.sent,r=a.filter((function(e){return 0===e.seriesid})),c={series:"",sCount:0,digit:5,dbcount:r},e.next=16,Ve(c,t.formid);case 16:s=e.sent,Ot(s);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),ut=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=16;break}return e.next=6,v.PurchaseInvoice.where("invoicetype").equals(0).toArray();case 6:return c=e.sent,s=c.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=11,Ve(o,t.formid);case 11:u=e.sent,Ot(u),at({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=26;break;case 16:return e.next=18,v.PurchaseInvoice.where("invoicetype").equals(0).toArray();case 18:return l=e.sent,b=l.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=23,Ve(j,t.formid);case 23:m=e.sent,Ot(m),at({seriesId:r.seriesId,voucherId:r.voucherId});case 26:Ge(!1);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lt=function(e){F(e)},dt=function(){I(n),Pe(""),Se(""),Ee(""),h(r),W([]),je([]),gt()},bt=function(e){"billingstateid"===e.target.name?g.billingstateid!==e.target.value&&(we(!0),setTimeout((function(){we(!1)}),1e3),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,e.target.value)))):"shippingstateid"===e.target.name?g.shippingstateid!==e.target.value&&(we(!0),setTimeout((function(){we(!1)}),1e3),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,e.target.value)))):(I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,e.target.value))),""===e.target.value?h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,""))):h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,!1))))},mt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(t,"update");case 2:n=e.sent,a=_t(n),je(n),I(Object(d.a)(Object(d.a)({},g),{},{taxpage:a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){be.length>0&&ye&&mt(be)}),[ye,be]);var Ot=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IC_Master.toArray().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,Promise.all(n.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("Id").equals(t.PartyId).first().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.abrupt("return",{PartyId:t.PartyId,vendorCode:n.PartyCode,vendorName:n.PartyName});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return a=e.sent,r=a.filter((function(e,t){return a.findIndex((function(t){return t.vendorName===e.vendorName}))===t})),e.next=9,pt();case 9:c=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{InvoiceNo:t,InvoiceDate:new Date,stateList:c,vendorList:r.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,e.next=3,v.cityMaster.toArray();case 3:return n=e.sent,a=n.filter((function(e){var n=t.has(e.StateName);return t.add(e.StateName),!n})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ht=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return n="VendorName"===_e?"code":"name",e.next=4,ft(t.PartyId);case 4:return a=e.sent,e.next=7,St(a);case 7:r=e.sent,I(Object(d.a)(Object(d.a)({},g),{},{PartyId:t.PartyId,vendorCode:t.vendorCode,vendorName:t.vendorName,inwardList:a,itemlistbyvendor:r})),h(Object(d.a)(Object(d.a)({},p),{},{vendorName:!1,vendorCode:!1})),Pe(""),Se(""),Ee(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.IC_Master.where("PartyId").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,a=n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{inwarddateDMY:kr(e.InwardDate),ItemId:e.id,id:e.id})})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t);case 2:n=e.sent,t&&(a=t.GSTClassification[0].HsnId,he(Object(d.a)(Object(d.a)({},pe),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:n.igstRate,cgstrate:n.cgstRate,sgstrate:n.sgstRate,hsnid:a})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=Object(a.useCallback)(Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===pe){e.next=14;break}return t=be.map((function(e){return e.id===B.id?Object(d.a)(Object(d.a)({},e),pe):e})),e.next=4,Ct(t,"update");case 4:n=e.sent,a=_t(n),je(n),I(Object(d.a)(Object(d.a)({},g),{},{taxpage:a})),k(!1),he(),ve(!1),gt(),e.next=15;break;case 14:gt();case 15:case"end":return e.stop()}}),e)}))),[B,pe,g]),gt=function(){D(!0),setTimeout((function(){return D(!1)}),500)},It=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.PurchaseInvoice.where("invoicetype").equals(0).toArray().then().catch((function(e){return console.log(e)}));case 3:n=e.sent,(a=n.filter((function(e){return e.CreatedBy===t})))&&I(Object(d.a)(Object(d.a)({},g),{},{invoiceList:a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b,j,m,O,p,h,f,x,y;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=56;break}return Pe(""),Se(""),e.next=5,pt();case 5:return n=e.sent,e.next=8,v.customerMaster.where("Id").equals(t.PartyId).first().then().catch((function(e){return console.log(e)}));case 8:return a=e.sent,e.next=11,v.PurchaseInvoiceDetail.where("InvoiceId").equals(t.id).toArray().then().catch((function(e){return console.log(e)}));case 11:r=e.sent,c=[],s=Object(Jn.a)(r),e.prev=14,s.s();case 16:if((o=s.n()).done){e.next=39;break}return u=o.value,e.next=20,v.itemMaster.where("ItemId").equals(u.ItemId).first().then().catch((function(e){return console.log(e)}));case 20:return l=e.sent,u.ItemName=void 0===l?"":l.ItemName,e.next=24,Dt(u.icdetailid);case 24:return b=e.sent,e.next=27,v.IC_Detail.where("id").equals(u.icdetailid).first().then().catch((function(e){return console.log(e)}));case 27:return j=e.sent,m=parseInt(j.ReceiveBaseQty)+parseInt(u.Quantity)-parseInt(b),u.pinwardQuantity=m,e.next=32,$e(u.ItemId,m);case 32:return u.pinwardaltqty=e.sent,e.next=35,Xe(u.UnitId);case 35:u.unit=e.sent,c.push(u);case 37:e.next=16;break;case 39:e.next=44;break;case 41:e.prev=41,e.t0=e.catch(14),s.e(e.t0);case 44:return e.prev=44,s.f(),e.finish(44);case 47:O=0,p=0,h=0,f=0,x=c.map((function(e){var t=parseFloat(e.GrossAmount)-parseFloat(e.DiscountAmount);return O=parseFloat(O)+parseFloat(e.igstamount),p=parseFloat(p)+parseFloat(e.cgstamount),h=parseFloat(h)+parseFloat(e.sgstamount),f=parseFloat(f)+parseFloat(t),Object(d.a)(Object(d.a)({},e),{},{totalAmount:Ir(e.Amount),finalDiscount:Ir(t),Rate:Ir(e.Rate),DiscountAmount:Ir(e.DiscountAmount),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount),Amount:Ir(e.GrossAmount)})})),y=Object(d.a)(Object(d.a)({},g.taxpage),{},{grossamount:Ir(t.grossamount),discountamount:Ir(t.discountamount),taxamount:Ir(t.taxamount),netamount:Ir(t.netamount),igstAmount:Ir(O),cgstAmount:Ir(p),sgstAmount:Ir(h),totalAmount:Ir(f),roundOff:Ir(Ke(f))}),I(Object(d.a)(Object(d.a)({},g),{},{id:t.id,new:t.new,vendorName:a.PartyName,vendorCode:a.PartyCode,InvoiceNo:t.InvoiceNo,InvoiceDate:t.InvoiceDate,PartyId:t.PartyId,invoicetype:t.invoicetype,billingcountryid:t.billingcountryid,billingstateid:t.billingstateid,billingaddress:t.billingaddress,billinggstinno:t.billinggstinno,shippingcountryid:t.shippingcountryid,shippingstateid:t.shippingstateid,shippingaddress:t.shippingaddress,shippinggstinno:t.shippinggstinno,remark:t.remark,stateList:n,taxpage:Object(d.a)({},y)})),at({seriesId:t.seriesid,voucherId:t.seriesvouchertype}),je(x);case 56:case"end":return e.stop()}}),e,null,[[14,41,44,47]])})));return function(t){return e.apply(this,arguments)}}(),wt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g.InvoiceNo,e.t1=g.InvoiceDate,e.t2=parseInt(g.PartyId),e.t3=Ir(g.taxpage.grossamount),e.t4=Ir(g.taxpage.discountamount),e.t5=Ir(g.taxpage.taxamount),e.t6=Ir(g.taxpage.netamount),e.t7=g.taxpage.roundOff,e.t8=g.taxpage.totalAmount,e.t9=g.taxpage.igstAmount,e.t10=g.taxpage.cgstAmount,e.t11=g.taxpage.sgstAmount,e.next=14,Nt(parseInt(g.billingstateid));case 14:return e.t12=e.sent,e.t13=parseInt(g.billingstateid),e.t14=g.billingaddress,e.t15=g.billinggstinno,e.next=20,Nt(parseInt(g.shippingstateid));case 20:e.t16=e.sent,e.t17=parseInt(g.shippingstateid),e.t18=g.shippingaddress,e.t19=g.shippinggstinno,e.t20=g.remark,e.t21=new Date,e.t22=localStorage.getItem("UserId"),e.t23=""===nt.seriesId?0:nt.seriesId,e.t24=""===nt.voucherId?"":nt.voucherId,t={InvoiceNo:e.t0,InvoiceDate:e.t1,PartyId:e.t2,invoicetype:0,grossamount:e.t3,discountamount:e.t4,taxamount:e.t5,netamount:e.t6,RoundOff:e.t7,totalAmount:e.t8,igstAmount:e.t9,cgstAmount:e.t10,sgstAmount:e.t11,billingcountryid:e.t12,billingstateid:e.t13,billingaddress:e.t14,billinggstinno:e.t15,shippingcountryid:e.t16,shippingstateid:e.t17,shippingaddress:e.t18,shippinggstinno:e.t19,remark:e.t20,CreatedOn:e.t21,CreatedBy:e.t22,seriesid:e.t23,seriesvouchertype:e.t24},ie?(n=Object(d.a)(Object(d.a)({},t),{},{id:g.id,new:g.new,update:1}),v.PurchaseInvoice.put(n).then((function(e){e&&kt(e)})).catch((function(e){return console.log(e)}))):v.PurchaseInvoice.add(Object(d.a)(Object(d.a)({},t),{},{new:1,update:0})).then((function(e){e&&kt(e)})).catch((function(e){return console.log(e)}));case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,v.stateMaster.where("StateId").equals(t).first().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.abrupt("return",n.CountryId);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=be.map((function(e){var t={InvoiceId:n,ItemId:e.ItemId,isaltrate:e.isaltrate,Quantity:parseInt(e.Quantity),altqty:e.altqty,UnitId:e.UnitId,pinwardQuantity:e.pinwardQuantity,pinwardaltqty:e.pinwardaltqty,Rate:Ir(e.Rate),Amount:Ir(e.totalAmount),GrossAmount:Ir(e.Amount),DiscountPer:parseFloat(e.DiscountPer),DiscountAmount:Ir(e.DiscountAmount),hsnclassificationid:parseInt(e.hsnclassificationid),igstrate:parseFloat(e.igstrate),cgstrate:parseFloat(e.cgstrate),sgstrate:parseFloat(e.sgstrate),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount),icdetailid:e.icdetailid,icmId:e.icmId};return ie?(t.id=e.id,t):t})))&&(ie?v.PurchaseInvoiceDetail.bulkPut(a).then((function(e){if(e){alert("data Update successfully");var r=a.map((function(e){return{formId:t.formid,trId:n,ItemId:e.ItemId,qty:e.Quantity,type:"inqty"}}));tt(r),dt(),j("save")}})).catch((function(e){return console.log(e)})):v.PurchaseInvoiceDetail.bulkAdd(a).then((function(e){if(e){alert("data save successfully");var r=a.map((function(e){return{formId:t.formid,trId:n,ItemId:e.ItemId,qty:e.Quantity,type:"inqty"}}));et(r),dt(),j("save")}})).catch((function(e){return console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),At=function(e){"inwitem"===e?te(!1):Z(!1)},St=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0===t.Id||""===t.Id?t.id:t.Id,e.next=3,v.IC_Detail.where("InwardId").equals(n).toArray().then().catch((function(e){return console.log(e)}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:if(!(n=e.sent)){e.next=12;break}return a=[],n.map((function(e){return a.push.apply(a,Object(R.a)(e)),e})),e.next=8,Ct(a,"new");case 8:return r=e.sent,c=_t(r),I(Object(d.a)(Object(d.a)({},g),{},{taxpage:Object(d.a)({},c)})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,r,c,s,o,u,l,d,b,j,m,O,p,h,f;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("ItemId").equals(t.ItemId).first().then().catch((function(e){return console.log(e)}));case 2:return a=e.sent,e.next=5,Dt(t.id);case 5:return r=e.sent,c="new"===n?parseInt("new"===n?t.ReceiveBaseQty:"update"===n?t.pinwardQuantity:0)-parseInt(r):parseInt("new"===n?t.ReceiveBaseQty:"update"===n?t.pinwardQuantity:0),e.next=9,$e(t.ItemId,c);case 9:return s=e.sent,o=parseInt("new"===n?t.ReceiveBaseQty:"update"===n?t.Quantity:0),e.next=13,$e(t.ItemId,o);case 13:return u=e.sent,l=parseInt(o)*parseFloat(t.Rate),e.next=17,vr(a);case 17:if(d=e.sent,b=gr("new"===n?t.DiscountPercentage:"update"===n?t.DiscountPer:0,l),j=parseFloat(l)-parseFloat(b),m=g.shippingstateid!==g.billingstateid?gr(d.igstRate,j):0,O=g.shippingstateid===g.billingstateid?gr(d.cgstRate,j):0,p=g.shippingstateid===g.billingstateid?gr(d.sgstRate,j):0,h=parseFloat(m)+parseFloat(O)+parseFloat(p)+parseFloat(j),"new"!==n){e.next=30;break}return e.next=27,Xe(t.UnitId);case 27:e.t0=e.sent,e.next=31;break;case 30:e.t0="update"===n?t.unit:"";case 31:return f=e.t0,e.abrupt("return",{id:t.id,InvoiceId:"",ItemId:t.ItemId,ItemName:a.ItemName,unit:f,UnitId:t.UnitId,isaltrate:"",pinwardQuantity:c,pinwardaltqty:yr(s),Quantity:"new"===n?c:o,altqty:yr("new"===n?s:u),Rate:t.Rate,Amount:Ir(l),totalAmount:Ir(h),finalDiscount:Ir(j),DiscountPer:"new"===n?t.DiscountPercentage:"update"===n?t.DiscountPer:0,DiscountAmount:Ir(b),hsnclassificationid:a.GSTClassification[0].HsnId,igstrate:g.shippingstateid!==g.billingstateid?d.igstRate:0,cgstrate:g.shippingstateid===g.billingstateid?d.cgstRate:0,sgstrate:g.shippingstateid===g.billingstateid?d.sgstRate:0,igstamount:Ir(m),cgstamount:Ir(O),sgstamount:Ir(p),icdetailid:"new"===n?t.InwardDetailId:"update"===n?t.icdetailid:"",icmId:"new"===n?t.InwardId:"update"===n?t.icmId:""});case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.PurchaseInvoiceDetail.where("icdetailid").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 2:if(!(n=e.sent)){e.next=13;break}if(1!==n.length){e.next=8;break}return e.abrupt("return",n[0].Quantity);case 8:return a=0,n.map((function(e){return a+=e.Quantity,e})),e.abrupt("return",a);case 11:e.next=14;break;case 13:return e.abrupt("return",0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=function(e){var t=0,n=0,a=0,r=0,c=0,s=0;return e.map((function(e){return t=parseFloat(t)+parseFloat(e.Amount),n=parseFloat(n)+parseFloat(e.DiscountAmount),a=parseFloat(a)+parseFloat(e.igstamount),r=parseFloat(r)+parseFloat(e.cgstamount),c=parseFloat(c)+parseFloat(e.sgstamount),s=parseFloat(s)+parseFloat(e.totalAmount),e})),{grossamount:Ir(t),discountamount:Ir(n),taxamount:Ir(parseFloat(a)+parseFloat(r)+parseFloat(c)),netamount:Ir(parseFloat(s)+Ke(Ir(s))),roundOff:Ke(Ir(s)),totalAmount:Ir(s),igstAmount:Ir(a),cgstAmount:Ir(r),sgstAmount:Ir(c)}},Pt=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U.map((function(e){return e.ItemId})),e.next=3,St(U);case 3:(n=e.sent).length>0?t&&(W(t),be?(a=n.filter((function(e){var t=e.id;return!be.some((function(e){return e.id===t}))})),r=be.filter((function(e){var t=e.id;return!n.some((function(e){return e.id===t}))})),a.length>0&&je((function(e){return[].concat(Object(R.a)(e),Object(R.a)(a))})),r.length>0&&(c=be.filter((function(e){var t=e.id;return!r.some((function(e){return e.id===t}))})))&&je(c)):je(n)):(W([]),je([])),Z(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Rt=function(e){var t=g.itemlistbyvendor.filter((function(t){return e===t.icmId}));I(Object(d.a)(Object(d.a)({},g),{},{viewItems:t})),te(!0)};Object(a.useEffect)((function(){var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),Se(_e)),"Enter"===e.key&&(e.preventDefault(),vt())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[g,B,vt,_e,pe,be,H]);var Bt={val:b,change_state:function(e){switch(e){case"add":return j(e),it(),ue(!1),void ce(!0);case"edit":return j(e),It(),ue(!0),void ce(!0);case"view":return j(e),It(),ue(!1),void ce(!1);case"save":var t=Object.keys(p),n={};return t.forEach((function(e){return n[e]=""===g[e]})),h(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):wt());case"refresh":return dt(),ue(!1),ce(!1),void j(e);default:return e}},disabledAction:st};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"purchaseInwardGit",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Bt)),Object(Te.jsxs)("div",{className:"purchaseInwardGitIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w65",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===p.InvoiceNo?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Invoice No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===b||"view"===b?Object(Te.jsx)(Hn.a,{open:"InvoiceNo"===Ae,options:g.invoiceList,onChange:function(e,t){return yt(t)},getOptionLabel:function(e){return e.InvoiceNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Pe("InvoiceNo")},onBlur:function(){Pe(""),Se("")}}))}}):Object(Te.jsx)("input",{type:"text",value:g.InvoiceNo,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===p.InvoiceDate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Invoice Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{selected:g&&g.InvoiceDate,onChange:"add"===b?function(e){return I(Object(d.a)(Object(d.a)({},g),{},{InvoiceDate:e}))}:function(){return!1},minDate:g&&g.InvoiceDate})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===p.vendorName?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===b&&"name"!==Me?Object(Te.jsx)(Hn.a,{open:"VendorName"===Ae,options:g.vendorList,onChange:function(e,t){return ht(t)},getOptionLabel:function(e){return e.vendorName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Pe("VendorName")},onBlur:function(){Pe(""),Se("")}}))}}):Object(Te.jsx)("input",{name:"vendorName",type:"text",readOnly:!0,value:g&&g.vendorName})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===p.vendorCode?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===b&&"code"!==Me?Object(Te.jsx)(Hn.a,{open:"VendorCode"===Ae,options:g.vendorList,onChange:function(e,t){return ht(t)},getOptionLabel:function(e){return e.vendorCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Pe("VendorCode")},onBlur:function(){Pe(""),Se("")}}))}}):Object(Te.jsx)("input",{name:"vendorCode",type:"text",readOnly:!0,value:g&&g.vendorCode})]})})]})]}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsx)("button",{className:""!==g.vendorName&&"view"!==b?"btnGreen":"btnGreen disable",onClick:""===g.vendorName?function(e){return!1}:"add"===b||"edit"===b?function(e){return function(e){e.preventDefault(),Z(!0)}(e)}:function(e){return!1},children:Object(Te.jsx)(ot,{content:"Inward Challan"})})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col mt-2 mb-2",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:Gr,data:be,overFlowScroll:!0,selectedTr:function(e){return function(e){if(D(!1),M(e),N&&B){var t=be.map((function(e){return void 0!==e.id?e.id===B.id?Object(d.a)(Object(d.a)({},e),B):e:e.staticid===B.staticid?Object(d.a)(Object(d.a)({},e),B):e}));I(Object(d.a)(Object(d.a)({},g),{},{items:t}))}k(!1)}(e)},editColumn:re,editfunction:function(){k(!0)},optionList:g.itemList,editStatus:N,tblInputOnchange:function(e){return function(e){return he(Object(d.a)(Object(d.a)({},pe),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},getAutocompleteOption:function(e){return xt(e)},refreshTable:C})})})}),Object(Te.jsx)("div",{className:"subtabview",children:Object(Te.jsxs)("ul",{style:{marginTop:"0px"},children:[Object(Te.jsx)("li",{className:"billingInfo"===L?"active":"",onClick:function(e){return lt("billingInfo")},children:"Billing Info"}),Object(Te.jsx)("li",{className:"taxInfo"===L?"active":"",onClick:function(e){return lt("taxInfo")},children:"Tax Amount"})]})}),Object(Te.jsxs)("div",{className:"tabBox withsubtab",children:[Object(Te.jsx)("div",{className:"box",style:{display:"billingInfo"===L?"block":"none"},children:Object(Te.jsx)(fr,{BillingObj:g,onchange:function(e){return bt(e)},requiredObj:p,val:b})}),Object(Te.jsx)("div",{className:"box",style:{display:"taxInfo"===L?"block":"none"},children:Object(Te.jsx)(xr,{taxObject:g.taxpage})})]}),Object(Te.jsx)("div",{className:"box blueBg",style:{float:"left",width:"100%"},children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 mr-auto",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Invoice By"})}),Object(Te.jsx)("input",{type:"text",name:"CreatedBy",onChange:function(e){return bt(e)},className:"bgWhite",value:g.CreatedByName})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:g.taxpage.netamount,readOnly:!0})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-1 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remark",value:g.remark,onChange:function(e){return bt(e)},cols:"30",rows:"10"})]})})})]}),qe&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:We.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return ut(t,e)},children:e.VoucherName})}))})]})})]}),Y&&"view"!==b?Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:Ur,data:g.inwardList,overFlowScroll:!0,checkbox:!0,selectedRows:H,getCheckedItem:function(e){return function(e){Q(e)}(e)},Viewbtnclick:function(e){return Rt(e)},Footer:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{onClick:function(){return Pt()},className:"btn btnGreen mr-5 mlAuto",children:Object(Te.jsx)(ot,{content:"Ok"})}),Object(Te.jsx)("button",{onClick:function(){return At("inw")},className:"btn btnRed",children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}):"",ee&&Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:Qr,data:g.viewItems,overFlowScroll:!0,Viewbtnclick:function(e){return Rt(e)},Footer:!0}),Object(Te.jsx)("div",{className:"popupButton",children:Object(Te.jsx)("button",{onClick:function(){return At("inwitem")},className:"btn btnRed",children:Object(Te.jsx)(ot,{content:"Close"})})})]})})]})},zr=(n(429),[{header:"Item Name",field:"ItemName",cell:"autocomplete",width:250},{header:"Item Code",field:"ItemCode",cell:"autocomplete",width:250},{header:"Return Qty",field:"returnQty",cell:"EditInput",width:100},{header:"MRP",field:"MRP"},{header:"Style No.",field:"styleNo"},{header:"Brand",field:"Brand"},{header:"Color",field:"color"},{header:"Size",field:"Size"}]),Hr=function(e){var t=e.pageNav,n={documentNo:"",documentDate:"",vendorCode:"",vendorName:"",items:[],vendorList:[],itemlist:[],prList:[]},r={documentNo:"",documentDate:"",vendorCode:"",vendorName:""},c=Object(a.useState)(),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(n),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(""),P=Object(o.a)(_,2),B=P[0],M=P[1],T=Object(a.useState)(),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)(!0),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)(!1),z=Object(o.a)(V,2),H=z[0],W=z[1],K=Object(a.useState)(),J=Object(o.a)(K,2),Y=J[0],Z=J[1],X=Object(a.useState)([]),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)(!1),oe=Object(o.a)(se,2),ie=oe[0],ue=oe[1],le=Object(a.useState)(!1),de=Object(o.a)(le,2),be=de[0],je=de[1],me=Object(a.useState)([]),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)({seriesId:"",voucherId:""}),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),ye=Object(o.a)(Ie,2),we=ye[0],Ne=(ye[1],function(){h(n),I(r),k(!1),D(""),M("")}),ke=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}he(n),je(!0),e.next=17;break;case 9:return e.next=11,v.PR_Master.where("Manual").equals(1).toArray();case 11:return a=e.sent,r={series:"",sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,Se(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=16;break}return e.next=6,v.PR_Master.where("Manual").equals(1).toArray();case 6:return c=e.sent,s=c.filter((function(e){return e.SeriesId===(""===r.seriesId?0:r.seriesId)})),o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=11,Ve(o,t.formid);case 11:u=e.sent,Se(u),ge({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=26;break;case 16:return e.next=18,v.PR_Master.where("Manual").equals(1).toArray();case 18:return l=e.sent,b=l.filter((function(e){return e.SeriesId===(""===r.seriesId?0:r.seriesId)})),j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=23,Ve(j,t.formid);case 23:m=e.sent,Se(m),ge({seriesId:r.seriesId,voucherId:r.voucherId});case 26:je(!1);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("LedgerType").equals(2).toArray();case 2:(n=e.sent)&&h(Object(d.a)(Object(d.a)({},p),{},{documentNo:t,documentDate:new Date,vendorList:n.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.toArray();case 2:t=e.sent,te(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(e){if(console.log(e,"vendor"),e){var t="VendorName"===C?"code":"name";h(Object(d.a)(Object(d.a)({},p),{},{venderId:e.Id,vendorCode:e.PartyCode,vendorName:e.PartyName})),I(Object(d.a)(Object(d.a)({},g),{},{vendorCode:!1,vendorName:!1})),D(""),k(""),M(t)}},_e=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.PR_Master.where("Manual").equals(1).toArray().then().catch((function(e){return console.log(e)}));case 3:n=e.sent,(a=n.filter((function(e){return e.CreatedBy===t})))&&(console.log(a,"Prlist"),h(Object(d.a)(Object(d.a)({},p),{},{prList:a})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=33;break}return D(""),k(""),e.next=5,v.PR_Detail.where("Prid").equals(t.id).toArray().then().catch((function(e){return console.log(e)}));case 5:return n=e.sent,e.next=8,v.customerMaster.where("Id").equals(t.vendorid).first();case 8:if(a=e.sent,!n){e.next=33;break}r=[],c=Object(Jn.a)(n),e.prev=12,c.s();case 14:if((s=c.n()).done){e.next=23;break}return o=s.value,e.next=18,v.itemMaster.where("ItemId").equals(o.ItemId).first().then().catch((function(e){return console.log(e)}));case 18:u=e.sent,l={id:o.id,Prid:o.Prid,ItemId:o.ItemId,returnQty:o.ReturnBaseQty,Rate:o.Rate,ItemCode:void 0===u?"":u.ItemCode,ItemName:void 0===u?"":u.ItemName,MRP:o.MRP},r.push(l);case 21:e.next=14;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(12),c.e(e.t0);case 28:return e.prev=28,c.f(),e.finish(28);case 31:b={id:t.id,Id:t.Id,documentNo:t.PurchaseReturnNo,documentDate:t.PurchaseReturnDate,venderId:t.vendorid,vendorCode:a.PartyCode,vendorName:a.PartyName,new:t.new,items:r},h(Object(d.a)(Object(d.a)({},p),b));case 33:case"end":return e.stop()}}),e,null,[[12,25,28,31]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.PR_Master.where("PurchaseReturnNo").equals(p.documentNo).first().then().catch((function(e){return console.log(e)}));case 2:if(!(t=e.sent)){e.next=12;break}if(n=p.items.map((function(e){var n={Prid:t.id,ItemId:e.ItemId,ReturnBaseQty:parseInt(e.returnQty),ReturnAltQty:0,MRP:e.MRP};return H?(n.id=e.id,n):n})),H){e.next=10;break}return e.next=8,v.PR_Detail.bulkAdd(n).then((function(e){e&&(alert("data save successfully"),Ne(),j("save"))})).catch((function(e){return console.log(e)}));case 8:e.next=12;break;case 10:return e.next=12,v.PR_Detail.bulkPut(n).then((function(e){e&&(alert("data update successfully"),Ne(),j("save"))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={PurchaseReturnNo:p.documentNo,PurchaseReturnDate:p.documentDate,vendorid:p.venderId,CreatedBy:localStorage.getItem("UserId"),CreatedOn:new Date,SeriesId:""===ve.seriesId?0:ve.seriesId,SeriesVoucherType:""===ve.voucherId?"":ve.voucherId,Manual:1},H){e.next=6;break}return e.next=4,v.PR_Master.add(Object(d.a)(Object(d.a)({},t),{},{new:1,update:0})).then((function(e){e&&Re()})).catch((function(e){return console.log(e)}));case 4:e.next=9;break;case 6:return n=Object(d.a)(Object(d.a)({},t),{},{Id:p.Id,update:1}),e.next=9,v.PR_Master.put(p.id,n).then((function(e){e&&Re()})).catch((function(e){return console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=Object(a.useCallback)((function(){var e=p.items.map((function(e){return"add"===b?e.staticid===re.staticid?Object(d.a)(Object(d.a)({},e),Y):e:e.id===re.id?Object(d.a)(Object(d.a)({},e),Y):e}));h(Object(d.a)(Object(d.a)({},p),{},{items:e})),F(!1),Z()}),[re,Y,p,b]);Object(a.useEffect)((function(){var e=function(e){C&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),k(C))),"Enter"===e.key&&(e.preventDefault(),Me())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[C,p,g,re,Y,Me]);var Ee={val:b,change_state:function(e){switch(e){case"edit":return j(e),ue(!1),W(!0),Q(!0),void _e();case"refresh":return Ne(),j(e),ue(!0),void W(!1);case"view":return ue(!1),W(!1),Q(!1),_e(),void j(e);case"add":return ke(),ue(!1),W(!1),Ce(),Q(!0),void j(e);case"save":var t=Object.keys(g),n={};return t.forEach((function(e){return n[e]=""===p[e]})),I(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):Be());default:return e}},disabledAction:we};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"purchaseRWI",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Ee)),Object(Te.jsxs)("div",{className:"purchaseRWIIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:g&&!0===g.documentNo?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Document No"}),"."]}),"view"===b||"edit"===b?Object(Te.jsx)(Hn.a,{open:"DocumentNo"===N,options:p.prList,onChange:function(e,t){return Pe(t)},getOptionLabel:function(e){return e.PurchaseReturnNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return D("DocumentNo")},onBlur:function(){D(!1),k(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"documentNo",readOnly:!0,value:p&&p.documentNo})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:g&&!0===g.documentDate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Document Date"})}),Object(Te.jsx)(pa.a,{selected:p.documentDate,minDate:p.documentDate,maxDate:p.documentDate,dropdownMode:"select",onChangeRaw:function(e){return function(e){e.preventDefault()}(e)}})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:g&&!0===g.vendorName?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Vendor Name"})}),"add"===b&&"name"!==B?Object(Te.jsx)(Hn.a,{open:"VendorName"===N,options:p.vendorList,onChange:function(e,t){return De(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return D("VendorName")},onBlur:function(){D(!1),k(!1)}}))}}):Object(Te.jsx)("input",{name:"vendorName",type:"text",readOnly:!0,value:p&&p.vendorName})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:g&&!0===g.vendorCode?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Vendor Code"})}),"add"===b&&"code"!==B?Object(Te.jsx)(Hn.a,{open:"VendorCode"===N,options:p.vendorList,onChange:function(e,t){return De(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return D("VendorCode")},onBlur:function(){D(!1),k(!1)}}))}}):Object(Te.jsx)("input",{name:"vendorCode",type:"text",readOnly:!0,value:p&&p.vendorCode})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col mt-1 mb-2",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:zr,data:p.items,overFlowScroll:!0,selectedTr:function(e){return function(e){if(ce(e),L&&re){console.log(re,"selectedTblRow1");var t=p.items.map((function(e){return"add"===b?e.staticid===re.staticid?Object(d.a)(Object(d.a)({},e),re):e:e.id===re.id?Object(d.a)(Object(d.a)({},e),re):e}));h(Object(d.a)(Object(d.a)({},p),{},{items:t}))}F(!1)}(e)},editColumn:U,editfunction:function(){F(!0)},optionList:ee,editStatus:L,deleteRow:function(){return function(){var e=p.items.filter((function(e){return"add"===b?e.staticid!==re.staticid:e.id!==re.id}));if(e)if("add"===b){var t=e.map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{staticid:t+1})}));h(Object(d.a)(Object(d.a)({},p),{},{items:t}))}else h(Object(d.a)(Object(d.a)({},p),{},{items:e}))}()},tblInputOnchange:function(e){return function(e){return Z(Object(d.a)(Object(d.a)({},Y),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},getAutocompleteOption:function(e){return function(e){var t=p.items.map((function(t){return t.staticid===re.staticid?Object(d.a)(Object(d.a)({},t),{},{ItemName:e.ItemName,ItemCode:e.ItemCode}):t}));h(Object(d.a)(Object(d.a)({},p),{},{items:t})),Z(Object(d.a)(Object(d.a)({},Y),{},{ItemName:e.ItemName,ItemCode:e.ItemCode,ItemId:e.ItemId})),console.log(re,"selectedTblRow"),console.log(e,"option")}(e)},itemAdd:"add"===b&&function(){return function(){var e={staticid:p.items.length+1,ItemName:"",ItemCode:"",ItemId:"",returnQty:0,MRP:0},t=[].concat(Object(R.a)(p.items),[Object(d.a)({},e)]);h(Object(d.a)(Object(d.a)({},p),{},{items:t}))}()},refreshTable:ie,editbtnText:"Add Item detail"})})})})]})]}),be&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:pe.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return Ae(t,e)},children:e.VoucherName})}))})]})})]})},Wr=[{header:"Group Name",field:"GroupName",width:150},{header:"Item Name",field:"ItemName",width:250},{header:"Item Code",field:"ItemCode",width:150},{header:"Unit",field:"unit",cell:"EditInput"},{header:"Stock",field:"Stock",cell:"EditInput"}],Kr=function(e){var t=e.BnList,n=e.SnListF;return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(ta.a,{striped:!0,bordered:!0,hover:!0,children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{children:"#"}),Object(Te.jsx)("th",{children:"Item Code"}),Object(Te.jsx)("th",{children:"Item Name"}),Object(Te.jsx)("th",{children:"Batch No."}),Object(Te.jsx)("th",{children:"Lot No."}),Object(Te.jsx)("th",{children:"In Quantity"}),Object(Te.jsx)("th",{children:"Batch Date"}),Object(Te.jsx)("th",{children:"Mfg Date"}),Object(Te.jsx)("th",{children:"Exp. Date"}),Object(Te.jsx)("th",{children:"MRP"})]})}),Object(Te.jsx)("tbody",{children:t&&t.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:++t}),Object(Te.jsxs)("td",{onClick:function(){return n(e&&e.batch_id)},style:{cursor:"pointer"},children:[" ",e&&e.item_code]}),Object(Te.jsx)("td",{children:e.item_name}),Object(Te.jsx)("td",{children:e.batch_number}),Object(Te.jsx)("td",{children:e.lot_no}),Object(Te.jsx)("td",{children:e.qty_in}),Object(Te.jsx)("td",{children:e.batch_date}),Object(Te.jsx)("td",{children:e.mfg_date}),Object(Te.jsx)("td",{children:e.expiry_date}),Object(Te.jsx)("td",{children:e.mrp})]},t)}))})]})})},Jr=n(520),Yr=n(262),Zr=["onClickOk","ItemDetail","onChangedInvoiceQuantity","didBatchSubmit"];var Xr=function(e){var t=e.onClickOk,n=e.ItemDetail,r=e.onChangedInvoiceQuantity,c=e.didBatchSubmit,s=Object($n.a)(e,Zr);if(null===n||void 0==n)var b="",j="",m="";else b=""!=n.ItemName?n.ItemName:"",j=""!=n.ItemCode?n.ItemCode:"",m=""!=n.ItemId?n.ItemId:"";var O=Object(a.useState)(""),p=Object(o.a)(O,2),h=(p[0],p[1],Object(a.useState)({batch_id:"",item_name:"",item_code:"",batch_number:"",batch_date:"",lot_no:"",qty_in:"",mfg_date:"",expiry_date:"",mrp:""})),f=Object(o.a)(h,2),x=f[0],v=f[1],g=function(e){var t=e.target.name,n=e.target.value;"batch_number"==t&&""!=n?(v(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},t,n))),console.log(x,"formData in BatchModal")):("batch_date"==t&&""!=n||"mfg_date"==t&&""!=n||"expiry_date"==t&&""!=n||"mrp"==t&&""!=n)&&v(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},t,n)))},I=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:if(n=e.sent,!(n.batchnumber.findIndex((function(e){return e.batch_number==x.batch_number}))>0)){e.next=8;break}alert("Batch number already exists."),e.next=11;break;case 8:return t(x),c(!0),e.abrupt("return",s.onHide(!1));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(ea.a,Object(d.a)(Object(d.a)({},s),{},{size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Te.jsx)(ea.a.Header,{closeButton:!0,children:Object(Te.jsx)(ea.a.Title,{id:"contained-modal-title-hcenter",style:{textAlign:"center"},children:"Batch Number"})}),Object(Te.jsxs)(ea.a.Body,{children:[Object(Te.jsxs)("h5",{style:{textAlign:"center"},children:["Item Name : ",b]}),Object(Te.jsx)(na.a,{children:Object(Te.jsxs)(Jr.a,{children:[Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(Te.jsxs)(na.a.Label,{children:["Batch Number ",Object(Te.jsx)("span",{style:{color:"red",fontSize:"20px"},children:"*"})]}),Object(Te.jsx)(na.a.Control,{type:"text",placeholder:"Enter the Batch Number",autoFocus:!0,name:"batch_number",required:!0,onChange:g}),Object(Te.jsx)("span",{style:{color:"red",fontSize:"12px"}})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(Te.jsx)(na.a.Label,{children:"Lot Number"}),Object(Te.jsx)(na.a.Control,{type:"text",placeholder:"Lot No.",autoFocus:!0,name:"lot_no",value:"LOT-"+j+m.toString().padStart(5,"0"),onChange:g})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:1,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Te.jsx)(na.a.Label,{children:"Qty IN"}),Object(Te.jsx)(na.a.Control,{type:"text",placeholder:"Qty IN",disabled:!0,autoFocus:!0,name:"qty_in",value:r,onChange:g})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Te.jsx)(na.a.Label,{children:"Batch Date"}),Object(Te.jsx)(na.a.Control,{type:"date",placeholder:"Batch Date",autoFocus:!0,name:"batch_date",onChange:g})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Te.jsx)(na.a.Label,{children:"Manufacturing Date"}),Object(Te.jsx)(na.a.Control,{type:"date",placeholder:"Mfg Date",autoFocus:!0,name:"mfg_date",onChange:g})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Te.jsx)(na.a.Label,{children:"Expiry Date"}),Object(Te.jsx)(na.a.Control,{type:"date",placeholder:"Expiry Date",autoFocus:!0,name:"expiry_date",onChange:g})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:1,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Te.jsx)(na.a.Label,{children:"MRP"}),Object(Te.jsx)(na.a.Control,{type:"number",placeholder:"MRP",autoFocus:!0,name:"mrp",min:0,onChange:g})]})})]})})]}),Object(Te.jsxs)(ea.a.Footer,{children:[Object(Te.jsx)(aa.a,{variant:"secondary",className:"btn btn-success",onClick:I,children:"OK"}),Object(Te.jsx)(aa.a,{onClick:s.onHide,children:"Close"})]})]}))})},$r=["onChangedInvoiceQuantity","onClickOk","ItemDetail","BatchID","SerialsBatchNumber"],ec=function(e){var t=e.onChangedInvoiceQuantity,n=e.onClickOk,r=e.ItemDetail,c=e.BatchID,s=e.SerialsBatchNumber,l=Object($n.a)(e,$r);if(null===r||void 0==r)var b="",j="";else b=""!=r.ItemName?r.ItemName:"",j=""!=r.ItemId?r.ItemId:"";for(var m=[],O=1;O<=t;O++)m.push({id:Object(ra.v4)()+O,batch_id:c.batch_id,batch_number:s,serial_number:"",auto_generated_no:(new Date).getTime()+O.toString().padStart(5,"0"),warrenty_date:null,expiry_date:null,mannual_fields:""});console.log(m,"inputFields");var p=Object(a.useState)(!1),h=Object(o.a)(p,2),f=(h[0],h[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.map((function(e){return t===e.id&&(e[n.target.name]=n.target.value),e}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),x=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!t.target.value.length){e.next=7;break}return n=m.filter((function(e){return e.serial_number===t.target.value})),e.next=5,ct(t.target.value);case 5:a=e.sent,n.length>1||a?t.target.nextSibling.innerHTML="Already exists":t.target.nextSibling.innerHTML="";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(ea.a,Object(d.a)(Object(d.a)({},l),{},{size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,scrollable:!0,children:[Object(Te.jsx)(ea.a.Header,{closeButton:!0,children:Object(Te.jsx)(ea.a.Title,{id:"contained-modal-title-hcenter",style:{textAlign:"center"},children:"Serial Number"})}),Object(Te.jsxs)(ea.a.Body,{children:[Object(Te.jsxs)("h5",{style:{textAlign:"center"},children:["Item Name : ",b," "]}),Object(Te.jsxs)(na.a,{onSubmit:function(e){e.preventDefault();var t=!1,a=document.querySelectorAll(".sn");if(Array.from(a).map((function(e){"Already exists"==e.innerHTML&&(t=!0)})),!t)return console.log(m,"inputFieldsinputFields in submit"),console.log(j,b,"hiiiiiiiiii sn.. in submit"),n(m),l.onHide(!1);alert("Please enter unique serial number.")},children:[m.map((function(e,t){return Object(Te.jsxs)(Jr.a,{children:[Object(Te.jsx)(Yr.a,{xs:12,md:3,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"validationCustom01",children:[Object(Te.jsxs)(na.a.Label,{children:["Serial Number",Object(Te.jsx)("span",{style:{color:"red",fontSize:"20px"},children:"*"})]}),Object(Te.jsx)(na.a.Control,{required:!0,type:"text",placeholder:"Enter the Serial Number",name:"serial_number","dacounter-index":e.id,onBlur:function(e){return x(e)},onChange:function(t){return f(e.id,t)}}),Object(Te.jsx)("span",{className:"sn",style:{color:"red",fontSize:"12px"}})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:3,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Te.jsx)(na.a.Label,{children:"Auto Generated No."}),Object(Te.jsx)(na.a.Control,{type:"text",placeholder:"Auto Generated No.",disabled:!0,value:e.auto_generated_no,name:"auto_generated_no",onChange:function(t){return f(e.id,t)}})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",children:[Object(Te.jsx)(na.a.Label,{children:"Warrenty Date"}),Object(Te.jsx)(na.a.Control,{type:"date",placeholder:"Warrenty Date",name:"warrenty_date",onChange:function(t){return f(e.id,t)}})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",children:[Object(Te.jsx)(na.a.Label,{children:"Expiry Date"}),Object(Te.jsx)(na.a.Control,{type:"date",placeholder:"Expiry Date",name:"expiry_date",onChange:function(t){return f(e.id,t)}})]})}),Object(Te.jsx)(Yr.a,{xs:12,md:2,children:Object(Te.jsxs)(na.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Te.jsx)(na.a.Label,{children:"Mannual Fields"}),Object(Te.jsx)(na.a.Control,{type:"text",placeholder:"Mannual Fields",name:"mannual_fields",onChange:function(t){return f(e.id,t)}})]})})]},e.id)})),Object(Te.jsxs)(ea.a.Footer,{children:[Object(Te.jsx)(aa.a,{variant:"secondary",className:"btn btn-success",type:"submit",children:"OK"}),Object(Te.jsx)(aa.a,{onClick:l.onHide,children:"Close"})]})]})]})]}))})},tc=["BatchSerialDetail"];var nc=function(e){var t=e.BatchSerialDetail,n=Object($n.a)(e,tc);return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)(ea.a,Object(d.a)(Object(d.a)({},n),{},{size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0,scrollable:!0,children:[Object(Te.jsx)(ea.a.Header,{closeButton:!0,children:Object(Te.jsx)(ea.a.Title,{id:"contained-modal-title-hcenter",style:{textAlign:"center"},children:"Batch Number Serial Detail"})}),Object(Te.jsxs)(ea.a.Body,{children:[Object(Te.jsx)("h5",{style:{textAlign:"center"}}),Object(Te.jsxs)(ta.a,{striped:!0,bordered:!0,hover:!0,scrollable:!0,children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{children:"#"}),Object(Te.jsx)("th",{children:"Serial Number"}),Object(Te.jsx)("th",{children:"AutoGenerated Number"}),Object(Te.jsx)("th",{children:"Batch No."}),Object(Te.jsx)("th",{children:"Warrenty Date"}),Object(Te.jsx)("th",{children:"Expiry Date"}),Object(Te.jsx)("th",{children:"Mannual Batch No."})]})}),Object(Te.jsx)("tbody",{children:t&&t.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:t+1}),Object(Te.jsx)("td",{children:e.serial_number}),Object(Te.jsx)("td",{children:e.auto_generated_no}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{children:e.warrenty_date}),Object(Te.jsx)("td",{children:e.expiry_date}),Object(Te.jsx)("td",{children:e.mannual_fields})]},t)}))})]})]})]}))})},ac=function(e){var t=e.pageNav,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],b=Object(a.useState)([]),j=Object(o.a)(b,2),m=j[0],O=j[1],p={InvoiceNo:"",InvoiceDate:"",PartyId:"",vendorCode:"",vendorName:"",invoicetype:0,vendorList:[],invoiceList:[],taxpage:{grossamount:"0.00",discountamount:"0.00",taxamount:"0.00",netamount:"0.00",roundOff:"0.00",totalAmount:"0.00",igstAmount:"0.00",cgstAmount:"0.00",sgstAmount:"0.00"},billingcountryid:"",billingstateid:"",billingaddress:"",billinggstinno:"",shippingcountryid:"",shippingstateid:"",shippingaddress:"",shippinggstinno:"",CreatedBy:localStorage.getItem("UserId"),CreatedByName:localStorage.getItem("fname"),remark:"",dncn_against_pi:"",itemList:[],items:[],stateList:[],BatchNumberDetail:"",SerialNumberDetail:"",godown:"",godownId:0},h={InvoiceNo:"",InvoiceDate:"",vendorCode:"",vendorName:""},f=Object(a.useState)(null),x=Object(o.a)(f,2),g=x[0],I=x[1];Object(a.useEffect)(Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.GodownMaster.toArray();case 2:t=e.sent,n=t.map((function(e){return{value:e.storeid+"|"+e.Storename,label:e.Storecode}})),I(n);case 5:case"end":return e.stop()}}),e)}))),[]);var y=[{header:"Item Name",field:"ItemName",width:250},{header:"Unit",field:"unit"},{header:"Godown Name",field:"godown",cell:"select",slOption:g},{header:"Invoice Qty",field:"Quantity",cell:"EditInput"},{header:"Invoice Alt Qty",field:"altqty"},{header:"MRP",field:"MRP",cell:"EditInput"},{header:"Rate",field:"Rate",cell:"EditInput"},{header:"Disc (%)",field:"DiscountPer",cell:"EditInput"},{header:"Discount Amount",field:"DiscountAmount"},{header:"Gross Amount",field:"Amount"},{header:"Final Amount",field:"finalDiscount"},{header:"Total Amount",field:"totalAmount"},{header:"IGST Tax (%)",field:"igstrate"},{header:"IGST Amount",field:"igstamount"},{header:"CGST Tax (%)",field:"cgstrate"},{header:"CGST Amount",field:"cgstamount"},{header:"SGST Tax (%)",field:"sgstrate"},{header:"SGST Amount",field:"sgstamount"}],w=Object(a.useState)(),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(h),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(p),B=Object(o.a)(P,2),M=B[0],T=B[1],E=Object(a.useState)(),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)(!1),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=Object(a.useState)(),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(!0),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(),re=Object(o.a)(ae,2),ce=re[0],se=re[1],oe=Object(a.useState)(!1),ie=Object(o.a)(oe,2),ue=(ie[0],ie[1]),le=Object(a.useState)(!1),de=Object(o.a)(le,2),be=de[0],je=de[1],me=Object(a.useState)(!1),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)(""),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=Object(a.useState)(!1),ye=Object(o.a)(Ie,2),we=ye[0],Ne=ye[1],ke=Object(a.useState)([]),Ae=Object(o.a)(ke,2),Se=Ae[0],Ce=Ae[1],De=Object(a.useState)(!1),_e=Object(o.a)(De,2),Pe=_e[0],Re=_e[1],Be=Object(a.useState)({seriesId:"",voucherId:""}),Me=Object(o.a)(Be,2),Ee=Me[0],Le=Me[1],Fe=Object(a.useState)("billingInfo"),qe=Object(o.a)(Fe,2),Ge=qe[0],ze=qe[1],He=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),We=Object(o.a)(He,2),Ke=We[0],Ye=(We[1],Object(a.useState)(!1)),Ze=Object(o.a)(Ye,2),et=Ze[0],tt=Ze[1],nt=Object(a.useState)(),at=Object(o.a)(nt,2),rt=at[0],ct=(at[1],Object(a.useState)()),st=Object(o.a)(ct,2),it=st[0],ut=st[1],lt=Object(a.useState)(),dt=Object(o.a)(lt,2),bt=dt[0],mt=dt[1],Ot=Object(a.useState)(),pt=Object(o.a)(Ot,2),ht=pt[0],ft=pt[1],xt=Object(a.useState)([]),vt=Object(o.a)(xt,2),gt=vt[0],It=vt[1],yt=Object(a.useState)(),wt=Object(o.a)(yt,2),Nt=wt[0],kt=wt[1],At=Object(a.useState)(!1),St=Object(o.a)(At,2),Ct=St[0],Dt=St[1],_t=Object(a.useState)(!1),Pt=Object(o.a)(_t,2),Rt=Pt[0],Bt=Pt[1],Mt=Object(a.useState)(!1),Tt=Object(o.a)(Mt,2),Et=Tt[0],Lt=Tt[1],Ft=Object(a.useState)(!1),qt=Object(o.a)(Ft,2),Gt=(qt[0],qt[1],Object(a.useState)(!1)),Ut=Object(o.a)(Gt,2),Qt=(Ut[0],Ut[1],Object(a.useState)({})),Vt=Object(o.a)(Qt,2),zt=Vt[0],Ht=Vt[1],Wt=Object(a.useState)(0),Kt=Object(o.a)(Wt,2),Jt=(Kt[0],Kt[1],Object(a.useState)("")),Yt=Object(o.a)(Jt,2),Zt=Yt[0],Xt=Yt[1],$t=Object(a.useState)(""),en=Object(o.a)($t,2),tn=en[0],nn=en[1],an=Object(a.useState)(0),rn=Object(o.a)(an,2),cn=rn[0],sn=rn[1],on=Object(a.useState)(null),un=Object(o.a)(on,2),ln=(un[0],un[1],Object(a.useState)(!1)),dn=Object(o.a)(ln,2),bn=dn[0],jn=dn[1],mn=Object(a.useState)(""),On=Object(o.a)(mn,2),pn=(On[0],On[1],Object(a.useState)(!1)),hn=Object(o.a)(pn,2),fn=hn[0],xn=hn[1],vn=function(){T(p),he(""),je(""),ge(""),_(h),Sn()},gn=function(e){ze(e)},In=function(e){"billingstateid"===e.target.name?M.billingstateid!==e.target.value&&(Re(!0),setTimeout((function(){Re(!1)}),1e3),T(Object(d.a)(Object(d.a)({},M),{},Object(l.a)({},e.target.name,e.target.value)))):"shippingstateid"===e.target.name?M.shippingstateid!==e.target.value&&(Re(!0),setTimeout((function(){Re(!1)}),1e3),T(Object(d.a)(Object(d.a)({},M),{},Object(l.a)({},e.target.name,e.target.value)))):(T(Object(d.a)(Object(d.a)({},M),{},Object(l.a)({},e.target.name,e.target.value))),""===e.target.value?_(Object(d.a)(Object(d.a)({},D),{},Object(l.a)({},e.target.name,""))):_(Object(d.a)(Object(d.a)({},D),{},Object(l.a)({},e.target.name,!1))))},yn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=18;break}if(!(n.length>0)){e.next=9;break}Ce(n),Ne(!0),e.next=18;break;case 9:return e.next=11,v.PurchaseInvoice.where("invoicetype").equals(1).toArray();case 11:return a=e.sent,r=a.filter((function(e){return 0===e.seriesid})),c={series:"",sCount:0,digit:5,dbcount:r},e.next=16,Ve(c,t.formid);case 16:s=e.sent,Nn(s);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=16;break}return e.next=6,v.PurchaseInvoice.where("invoicetype").equals(1).toArray();case 6:return c=e.sent,s=c.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=11,Ve(o,t.formid);case 11:u=e.sent,Nn(u),Le({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=26;break;case 16:return e.next=18,v.PurchaseInvoice.where("invoicetype").equals(1).toArray();case 18:return l=e.sent,b=l.filter((function(e){return e.seriesid===(""===r.seriesId?0:r.seriesId)})),j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=23,Ve(j,t.formid);case 23:m=e.sent,Nn(m),Le({seriesId:r.seriesId,voucherId:r.voucherId});case 26:Ne(!1);case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("LedgerType").equals(2).toArray().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 5:return a=e.sent,e.next=8,kn();case 8:r=e.sent,T(Object(d.a)(Object(d.a)({},M),{},{InvoiceNo:t,InvoiceDate:new Date,vendorList:n.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})),itemList:a,stateList:r}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,e.next=3,v.cityMaster.toArray();case 3:return n=e.sent,a=n.filter((function(e){var n=t.has(e.StateName);return t.add(e.StateName),!n})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),An=function(e){if(e){var t="VendorName"===pe?"code":"name";T(Object(d.a)(Object(d.a)({},M),{},{PartyId:e.Id,vendorCode:e.PartyCode,vendorName:e.PartyName})),_(Object(d.a)(Object(d.a)({},D),{},{vendorName:!1,vendorCode:!1})),he(""),je(""),ge(t)}},Sn=function(){V(!0),setTimeout((function(){return V(!1)}),500)},Cn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t);case 2:return n=e.sent,a=t.GSTClassification[0].HsnId,e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:n.igstRate,cgstrate:n.cgstRate,sgstrate:n.sgstRate,hsnid:a,unitId:t.UnitName,unit:t.unit,remark:"",RequiredQty:0,RequiredAltQty:0,Priority:""}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(M.items.length>0)){e.next=18;break}if(!M.items.find((function(e){return e.ItemId===t.ItemId}))){e.next=7;break}return alert("you have already select this item"),e.abrupt("return",!1);case 7:return e.next=9,vr(t);case 9:if(n=e.sent,!t){e.next=16;break}return a=t.GSTClassification[0].HsnId,e.next=14,Xe(t.ItemId);case 14:r=e.sent,se(Object(d.a)(Object(d.a)({},ce),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:n.igstRate,cgstrate:n.cgstRate,sgstrate:n.sgstRate,hsnid:a,unitId:t.UnitName,unit:r}));case 16:e.next=27;break;case 18:return e.next=20,vr(t);case 20:if(c=e.sent,!t){e.next=27;break}return s=t.GSTClassification[0].HsnId,e.next=25,Xe(t.ItemId);case 25:o=e.sent,se(Object(d.a)(Object(d.a)({},ce),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:c.igstRate,cgstrate:c.cgstRate,sgstrate:c.sgstRate,hsnid:s,unitId:t.UnitName,unit:o}));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_n=Object(a.useCallback)(Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,o,u,l,b,j,p,h,f,x,v,g,I,y,w,N,k,A,S,C,D,_,P,B,E,L,F,G,U,Q,V,z,H;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!=W.IsLot&&(t=""!=W.ItemName?W.ItemName:"",n=""!=W.ItemCode?W.ItemCode:"",a=""!=W.ItemId?W.ItemId:"",r="BN-"+n+(new Date).getTime()+a.toString().padStart(5,"0"),o="LOT-"+n+(new Date).getTime()+a.toString().padStart(5,"0"),u=Object(d.a)(Object(d.a)({},zt),{},{batch_id:Object(ra.v4)(),item_name:t,item_code:n,batch_number:r,lot_no:o,qty_in:cn}),l=u.batch_id,Ht(u),b=c.filter((function(e){return e.batch_id!==u.batch_id})),s([].concat(Object(R.a)(b),[u]))),"true"==W.IsLot&&(j=""!=W.ItemName?W.ItemName:"",p=""!=W.ItemCode?W.ItemCode:"",h=""!=W.ItemId?W.ItemId:"",f="LOT-"+p+(new Date).getTime()+h.toString().padStart(5,"0"),x=Object(d.a)(Object(d.a)({},zt),{},{batch_id:Object(ra.v4)(),item_name:j,item_code:p,lot_no:f,qty_in:cn}),l=x.batch_id,Ht(x),v=c.filter((function(e){return e.batch_id!==x.batch_id})),s([].concat(Object(R.a)(v),[x]))),console.log(Zt,"serialNumber true"),I=(g=Zt)&&g.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{batch_id:l})})),Xt(I),O([].concat(Object(R.a)(m),[I])),void 0===ce){e.next=37;break}return y=void 0!==ce.Quantity?ce.Quantity:""!==W.Quantity?W.Quantity:0,w=void 0!==ce.Rate?ce.Rate:""!==W.Rate?W.Rate:0,N=void 0!==ce.DiscountPer?ce.DiscountPer:""!==W.DiscountPer?W.DiscountPer:0,k=void 0!==ce.igstrate?ce.igstrate:""!==W.igstrate?W.igstrate:0,A=void 0!==ce.cgstrate?ce.cgstrate:""!==W.cgstrate?W.cgstrate:0,S=void 0!==ce.sgstrate?ce.sgstrate:""!==W.sgstrate?W.sgstrate:0,D=N*(C=y*w)/100,_=gr(k,C),P=gr(A,C),B=gr(S,C),E=C-D,L=parseFloat(E)+parseFloat(_)+parseFloat(P)+parseFloat(B),e.next=23,$e(W.ItemId,y);case 23:F=e.sent,G=void 0!==ce.MRP?ce.MRP:""!==W.MRP?W.MRP:0,U=void 0!==ce.godown?ce.godown:""!==W.godown?W.godown:0,Q=void 0!==ce.godownId?ce.godownId:""!==W.godownId?W.godownId:0,V=Object(d.a)(Object(d.a)({},ce),{},{ItemName:void 0!==ce.ItemName?ce.ItemName:void 0!==W.ItemName?W.ItemName:"",igstamount:M.billingstateid!==M.shippingstateid?Ir(_):0,cgstamount:M.billingstateid===M.shippingstateid?Ir(P):0,sgstamount:M.billingstateid===M.shippingstateid?Ir(B):0,Quantity:y,igstrate:M.billingstateid!==M.shippingstateid?k:0,cgstrate:M.billingstateid===M.shippingstateid?A:0,sgstrate:M.billingstateid===M.shippingstateid?S:0,Rate:Ir(w),DiscountPer:Ir(N),Amount:Ir(C),DiscountAmount:Ir(D),totalAmount:Ir(L),altqty:F,finalDiscount:Ir(E),hsnid:void 0!==ce.hsnid?ce.hsnid:void 0!==W.hsnid?W.hsnid:"",BatchNumberDetail:zt,SerialNumberDetail:Zt,godown:U,godownId:Q,MRP:G}),z=gt.map((function(e){return void 0===e.id?e.staticid===W.staticid?Object(d.a)(Object(d.a)({},e),V):e:e.id===W.id?Object(d.a)(Object(d.a)({},e),V):e})),H=wr(z),T(Object(d.a)(Object(d.a)({},M),{},{taxpage:H})),It(z),q(!1),se(),Sn(),e.next=38;break;case 37:Sn();case 38:case"end":return e.stop()}}),e)}))),[W,ce,M,gt,Zt,zt]);Object(a.useEffect)((function(){void 0!=W&&"true"==W.IsLot&&bn&&"true"==W.IsSerial&&(Bt(!0),jn(!1))}),[bn]);var Pn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=8;break}return e.next=3,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.where("Id").equals(t.ItemId).first().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,vr(n);case 5:return a=e.sent,r=gr(a.igstRate,t.Amount),c=gr(a.cgstRate,t.Amount),s=gr(a.sgstRate,t.Amount),e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{igstrate:parseInt(M.billingstateid)!==parseInt(M.shippingstateid)?a.igstRate:0,cgstrate:parseInt(M.billingstateid)===parseInt(M.shippingstateid)?a.cgstRate:0,sgstrate:parseInt(M.billingstateid)===parseInt(M.shippingstateid)?a.sgstRate:0,igstamount:parseInt(M.billingstateid)!==parseInt(M.shippingstateid)?Ir(r):0,cgstamount:parseInt(M.billingstateid)===parseInt(M.shippingstateid)?Ir(c):0,sgstamount:parseInt(M.billingstateid)===parseInt(M.shippingstateid)?Ir(s):0}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:n=e.sent,a=wr(n),T(Object(d.a)(Object(d.a)({},M),{},{taxpage:a})),It(n),console.log(M,"createObjcreateObjcreateObj in StatewiseTax");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(gt.length>0&&Pe){var e=gt.filter((function(e){return""!==e.ItemId}));e.length>0&&Pn(e)}}),[Pe,gt]);var Rn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.PurchaseInvoice.where("invoicetype").equals(1).toArray().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.next=6,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 6:a=e.sent,(r=n.filter((function(e){return e.CreatedBy===t})))&&T(Object(d.a)(Object(d.a)({},M),{},{invoiceList:r,itemList:a}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=44;break}return he(""),je(""),e.next=5,kn();case 5:return n=e.sent,e.next=8,v.customerMaster.where("Id").equals(t.PartyId).first().then().catch((function(e){return console.log(e)}));case 8:return a=e.sent,e.next=11,v.PurchaseInvoiceDetail.where("InvoiceId").equals(t.Id).toArray().then().catch((function(e){return console.log(e)}));case 11:if(r=e.sent,c=[],!r){e.next=38;break}s=Object(Jn.a)(r),e.prev=15,s.s();case 17:if((o=s.n()).done){e.next=30;break}return u=o.value,e.next=21,v.itemMaster.where("ItemId").equals(u.ItemId).first().then().catch((function(e){return console.log(e)}));case 21:return l=e.sent,e.next=24,Xe(u.UnitId);case 24:b=e.sent,u.ItemName=void 0===l?"":l.ItemName,u.unit=b,c.push(u);case 28:e.next=17;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(15),s.e(e.t0);case 35:return e.prev=35,s.f(),e.finish(35);case 38:j=c.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{InvoiceId:e.InvoiceId,ItemId:e.ItemId,isaltrate:e.isaltrate,Quantity:parseInt(e.Quantity),altqty:e.altqty,godown:e.Godown,BatchNumber:e.BatchNumber,SerialNumber:e.SerialNumber,unitId:e.UnitId,Rate:Ir(e.Rate),totalAmount:Ir(e.Amount),Amount:Ir(e.GrossAmount),DiscountPer:parseFloat(e.DiscountPer),DiscountAmount:Ir(e.DiscountAmount),finalDiscount:Ir(e.GrossAmount)-Ir(e.DiscountAmount),hsnid:parseInt(e.hsnclassificationid),igstrate:parseFloat(e.igstrate),cgstrate:parseFloat(e.cgstrate),sgstrate:parseFloat(e.sgstrate),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount)})})),T(Object(d.a)(Object(d.a)({},M),{},{id:t.id,Id:t.Id,new:t.new,InvoiceDate:t.InvoiceDate,InvoiceNo:t.InvoiceNo,PartyId:parseInt(t.PartyId),invoicetype:t.invoicetype,vendorName:a.PartyName,vendorCode:a.PartyCode,billingcountryid:t.billingcountryid,billingstateid:parseInt(t.billingstateid),billingaddress:t.billingaddress,billinggstinno:t.billinggstinno,shippingcountryid:t.shippingcountryid,shippingstateid:parseInt(t.shippingstateid),shippingaddress:t.shippingaddress,shippinggstinno:t.shippinggstinno,remark:t.remark,CreatedBy:t.CreatedBy,taxpage:{grossamount:t.grossamount,discountamount:t.discountamount,taxamount:t.taxamount,netamount:t.netamount,RoundOff:t.roundOff,totalAmount:t.totalAmount,igstAmount:t.igstAmount,cgstAmount:t.cgstAmount,sgstAmount:t.sgstAmount},stateList:n})),console.log(j,"itemarrrrrrrrrrrrrr"),It(j),Le({seriesId:t.seriesid,voucherId:t.seriesvouchertype}),ue("view"!==k);case 44:case"end":return e.stop()}}),e,null,[[15,32,35,38]])})));return function(t){return e.apply(this,arguments)}}(),Mn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,v.stateMaster.where("StateId").equals(t).first().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,e.abrupt("return",n.CountryId);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=M.InvoiceNo,e.t1=M.InvoiceDate,e.t2=parseInt(M.PartyId),e.t3=Ir(M.taxpage.grossamount),e.t4=Ir(M.taxpage.discountamount),e.t5=Ir(M.taxpage.taxamount),e.t6=Ir(M.taxpage.netamount),e.t7=M.taxpage.roundOff,e.t8=M.taxpage.totalAmount,e.t9=M.taxpage.igstAmount,e.t10=M.taxpage.cgstAmount,e.t11=M.taxpage.sgstAmount,e.next=14,Mn(parseInt(M.billingstateid));case 14:return e.t12=e.sent,e.t13=parseInt(M.billingstateid),e.t14=M.billingaddress,e.t15=M.billinggstinno,e.next=20,Mn(parseInt(M.shippingstateid));case 20:e.t16=e.sent,e.t17=parseInt(M.shippingstateid),e.t18=M.shippingaddress,e.t19=M.shippinggstinno,e.t20=M.remark,e.t21=localStorage.getItem("UserId"),e.t22=new Date,e.t23=""===Ee.seriesId?0:Ee.seriesId,e.t24=""===Ee.voucherId?"":Ee.voucherId,t={InvoiceNo:e.t0,InvoiceDate:e.t1,PartyId:e.t2,invoicetype:1,grossamount:e.t3,discountamount:e.t4,taxamount:e.t5,netamount:e.t6,RoundOff:e.t7,totalAmount:e.t8,igstAmount:e.t9,cgstAmount:e.t10,sgstAmount:e.t11,billingcountryid:e.t12,billingstateid:e.t13,billingaddress:e.t14,billinggstinno:e.t15,shippingcountryid:e.t16,shippingstateid:e.t17,shippingaddress:e.t18,shippinggstinno:e.t19,remark:e.t20,CreatedBy:e.t21,CreatedOn:e.t22,seriesid:e.t23,seriesvouchertype:e.t24},te?(n=Object(d.a)(Object(d.a)({},t),{},{id:M.id,update:1,new:M.new,Id:M.Id}),v.PurchaseInvoice.put(n).then((function(e){e&&(En(e),Gn())})).catch((function(e){return console.log(e)}))):v.PurchaseInvoice.add(Object(d.a)(Object(d.a)({},t),{},{new:1,update:0})).then((function(e){e&&En(e)})).catch((function(e){return console.log(e)}));case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),En=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.BatchMaster.reverse().limit(1).toArray().then((function(e){return e[0].batchid})).catch((function(e){return console.log(e)}));case 2:if(a=e.sent,_(h),console.log(gt,"selectedItems selectedItems in saveItem"),console.log(Zt,"Serial number in saveItem"),!(r=gt.map((function(e,t){var r={InvoiceId:n,ItemId:e.ItemId,isaltrate:e.isaltrate,Quantity:parseInt(e.Quantity),altqty:e.altqty,BatchNumber:zt,SerialNumber:Zt,Godown:e.godown,GodownId:e.godownId,UnitId:e.unitId,Rate:Ir(e.Rate),Amount:Ir(e.totalAmount),GrossAmount:Ir(e.Amount),DiscountPer:parseFloat(e.DiscountPer),DiscountAmount:Ir(e.DiscountAmount),hsnclassificationid:parseInt(e.hsnid),igstrate:parseFloat(e.igstrate),cgstrate:parseFloat(e.cgstrate),sgstrate:parseFloat(e.sgstrate),igstamount:Ir(e.igstamount),cgstamount:Ir(e.cgstamount),sgstamount:Ir(e.sgstamount),icdetailid:"",icmId:"",MRP:e.MRP};return console.log(a,"bmdatabmdatabmdata in this same data"),te?(r.id=e.id,r.InvoiceId=e.InvoiceId,r):r})))){e.next=16;break}if(te){e.next=15;break}return v.PurchaseInvoiceDetail.bulkAdd(r).then((function(e){e&&(alert("data save successfully"),Gn(),vn(),A("save"))})).catch((function(e){return console.log(e)})),e.next=12,Ua(r,n,t.formid);case 12:e.sent,e.next=16;break;case 15:v.PurchaseInvoiceDetail.bulkPut(r).then((function(e){e&&(alert("data Update successfully"),vn(),A("save"))})).catch((function(e){return console.log(e)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ln=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ht.map((function(e){return e.ItemId})),e.next=3,Ln(ht);case 3:(n=e.sent).length>0&&t&&(mt(t),gt?(a=n.filter((function(e){var t=e.ItemId;return!gt.some((function(e){return e.ItemId===t}))})),r=gt.filter((function(e){var t=e.ItemId;return!n.some((function(e){return e.ItemId===t}))})),a.length>0&&It((function(e){return[].concat(Object(R.a)(e),Object(R.a)(a))})),r.length>0&&(c=gt.filter((function(e){var t=e.ItemId;return!r.some((function(e){return e.ItemId===t}))})))&&It(c)):It(n)),tt(!1),(s=document.getElementById("options"))&&s.parentNode.removeChild(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qn=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.toArray();case 2:return t=e.sent,n=[],e.next=6,Promise.all(t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.unitMaster.where("Id").equals(t.UnitName).first();case 2:return a=e.sent,e.next=5,v.itemGroup.where("Id").equals(t.GroupId).first().then().catch((function(e){return console.log(e)}));case 5:return r=e.sent,e.next=8,Je(t.ItemId,null);case 8:return c=e.sent,n.push(Object(d.a)(Object(d.a)({},t),{},{id:t.Id,GroupName:r.GroupName,unit:a.UnitName,Stock:c})),e.abrupt("return",Object(d.a)(Object(d.a)({},t),{},{id:t.Id,GroupName:r.GroupName,unit:a.UnitName,Stock:c}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:t=e.sent,a=n.sort((function(e,t){return parseFloat(t.Stock)-parseFloat(e.Stock)})),ut(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gn=function(){T(Object(d.a)(Object(d.a)({},p),{},{PurchaseInvoiceDate:new Date})),_(h),A("refresh"),se({}),X(!1),kt(!1),Le({seriesId:"",voucherId:""}),mt([]),It([])};Object(a.useEffect)((function(){var e=function(e){pe&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),je(pe))),"Enter"===e.key&&(e.preventDefault(),_n(),q(!1)),!e.ctrlKey||"f"!==e.key&&"F"!==e.key||(e.preventDefault(),"add"!==k&&"edit"!==k||tt(!0))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[k,M,pe,it,ht,bt,gt,rt,ce,F,D,Nt,W,_n]);var Un=function(e){var t=m.find((function(t){return t[0].item_id==e}));console.log(t,"sntsntsntsnt"),nn(t),Lt(!0)},Qn={val:k,change_state:function(e){switch(e){case"add":return A(e),yn(),ne(!1),X(!0),ue(!0),qn(),_(h),void kt(!1);case"edit":return A(e),Rn(),ne(!0),ue(!1),X(!0),qn(),_(h),void kt(!1);case"view":return A(e),Rn(),ne(!1),X(!1),ue(!1),void _(h);case"save":var t=Object.keys(D),n={};return t.forEach((function(e){return n[e]=""===M[e]})),_(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):Tn());case"refresh":return vn(),ne(!1),X(!1),ue(!1),A(e),void Gn();default:return e}},disabledAction:Ke},Vn=Object(a.useState)([]),Kn=Object(o.a)(Vn,2);Kn[0],Kn[1];return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"purchaseInvoice",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Qn)),Object(Te.jsxs)("div",{className:"purchaseInvoiceIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w65",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===D.InvoiceNo?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Invoice No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===k||"view"===k?Object(Te.jsx)(Hn.a,{open:"InvoiceNo"===be,options:M.invoiceList,onChange:function(e,t){return Bn(t)},getOptionLabel:function(e){return e.InvoiceNo.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return he("InvoiceNo")},onBlur:function(){he(""),je("")}}))}}):Object(Te.jsx)("input",{type:"text",value:M.InvoiceNo,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===D.InvoiceDate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Invoice Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{selected:M&&M.InvoiceDate,onChange:"add"===k?function(e){return T(Object(d.a)(Object(d.a)({},M),{},{InvoiceDate:e}))}:function(){return!1},minDate:M&&M.InvoiceDate})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===D.vendorName?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===k&&"name"!==ve?Object(Te.jsx)(Hn.a,{open:"VendorName"===be,options:M.vendorList,onChange:function(e,t){return An(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return he("VendorName")},onBlur:function(){he(""),je("")}}))}}):Object(Te.jsx)("input",{name:"vendorName",type:"text",readOnly:!0,value:M&&M.vendorName})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===D.vendorCode?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===k&&"code"!==ve?Object(Te.jsx)(Hn.a,{open:"VendorCode"===be,options:M.vendorList,onChange:function(e,t){return An(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return he("VendorCode")},onBlur:function(){he(""),je("")}}))}}):Object(Te.jsx)("input",{name:"vendorCode",type:"text",readOnly:!0,value:M&&M.vendorCode})]})})]})]}),Object(Te.jsx)("div",{className:"col w35"})]})}),et&&"view"!==k?Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:Wr,data:it,overFlowScroll:!0,checkbox:!0,selectedRows:bt,getCheckedItem:function(e){return function(e){ft(e)}(e)},Footer:!0,filter:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{onClick:function(){return Fn()},className:"btn btnGreen mr-5 mlAuto",children:Object(Te.jsx)(ot,{content:"Ok"})}),Object(Te.jsx)("button",{onClick:function(){return function(){tt(!1);var e=document.getElementById("options");e&&e.parentNode.removeChild(e)}()},className:"btn btnRed",children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}):"",k&&"view"!==k?Object(Te.jsxs)("div",{children:[Object(Te.jsx)(Xr,{show:Ct,onHide:function(){return Dt(!1)},onClickOk:Ht,ItemDetail:W,onChangedInvoiceQuantity:cn,didBatchSubmit:jn}),Object(Te.jsx)(ec,{show:Rt,onHide:function(){return Bt(!1)},onClickOk:Xt,onChangedInvoiceQuantity:cn,ItemDetail:W,BatchID:zt,SerialsBatchNumber:zt.batch_number}),Object(Te.jsx)(nc,{show:Et,onHide:function(){return Lt(!1)},cursor:"pointer",BatchSerialDetail:tn})]}):Object(Te.jsx)(nc,{show:Et,onHide:function(){return Lt(!1)},cursor:"pointer",BatchSerialDetail:tn}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col mt-2 mb-2",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:y,data:gt,overFlowScroll:!0,selectedTr:function(e){return function(e){if(K(e),F&&W){var t=gt.map((function(e){return void 0!==e.id?e.id===W.id?Object(d.a)(Object(d.a)({},e),W):e:e.staticid===W.staticid?Object(d.a)(Object(d.a)({},e),W):e}));T(Object(d.a)(Object(d.a)({},M),{},{items:t})),It(t)}q(!1)}(e)},editColumn:Z,editfunction:function(){q(!0)},optionList:M.itemList,editStatus:F,deleteRow:function(){return function(){var e=gt.filter((function(e){return void 0!==e.id?e.id!==W.id:e.staticid!==W.staticid}));if(e){var t=e.map((function(e,t){return void 0===e.id?Object(d.a)(Object(d.a)({},e),{},{staticid:t+1}):e}));T(Object(d.a)(Object(d.a)({},M),{},{items:t})),It(t)}}()},tblInputOnchange:function(e){return function(e){if("Quantity"===e.target.name&&""!=e.target.value&&(fn?(sn(e.target.value),"true"==W.IsLot&&(console.log(cn,"nothing exists"),""!=e.target.value&&(setTimeout((function(){Dt(!0)}),1e3),e.target.addEventListener("click",(function(){""!=e.target.value&&setTimeout((function(){Dt(!0)}),1e3)})))),void 0!=W&&0==W.IsLot&&"true"==W.IsSerial&&setTimeout((function(){Bt(!0)}),1e3)):(alert("The Godown selection is required."),e.target.value="",xn(!1))),"godown"===e.target.name){var t=e.target.value.split("|"),n=parseInt(t[0]),a=t[1];se(Object(d.a)(Object(d.a)({},ce),{},Object(l.a)({godownId:n},e.target.name,a))),void 0!=e.target.value||""!=e.target.value?xn(!0):""!=e.target.value&&(e.target.nextSibling.innerHTML="")}else se(Object(d.a)(Object(d.a)({},ce),{},Object(l.a)({},e.target.name,e.target.value)));return e.target.value}(e)},getAutocompleteOption:function(e){return Dn(e)},refreshTable:Q,editbtnText:"Add Item detail"})})})}),Object(Te.jsx)("div",{className:"subtabview",children:Object(Te.jsxs)("ul",{style:{marginTop:"0px"},children:[Object(Te.jsx)("li",{className:"billingInfo"===Ge?"active":"",onClick:function(e){return gn("billingInfo")},children:"Billing Info"}),Object(Te.jsx)("li",{className:"taxInfo"===Ge?"active":"",onClick:function(e){return gn("taxInfo")},children:"Tax Amount"}),Object(Te.jsx)("li",{className:"lot_and_batch"===Ge?"active":"",onClick:function(e){return gn("lot_and_batch")},children:"Lot/Batch Detail"})]})}),Object(Te.jsxs)("div",{className:"tabBox withsubtab",children:[Object(Te.jsx)("div",{className:"box",style:{display:"billingInfo"===Ge?"block":"none"},children:Object(Te.jsx)(fr,{BillingObj:M,onchange:function(e){return In(e)},requiredObj:D,val:k})}),Object(Te.jsx)("div",{className:"box",style:{display:"taxInfo"===Ge?"block":"none"},children:Object(Te.jsx)(xr,{taxObject:M.taxpage})}),Object(Te.jsx)("div",{className:"box",style:{display:"lot_and_batch"===Ge?"block":"none"},children:"add"===k?Object(Te.jsx)(Kr,{BnList:c,SnListF:Un}):"view"===k||"edit"===k?Object(Te.jsx)(Kr,{BnList:gt.BatchNumber,SnListF:Un}):""})]}),Object(Te.jsx)("div",{className:"box blueBg",style:{float:"left",width:"100%"},children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 mr-auto",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Invoice By"})}),Object(Te.jsx)("input",{type:"text",name:"CreatedByName",className:"bgWhite",value:M.CreatedByName,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:M.taxpage.netamount,readOnly:!0})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-1 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remark",value:M.remark,onChange:function(e){return In(e)},cols:"30",rows:"10"})]})})})]}),we&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:Se.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return wn(t,e)},children:e.VoucherName})}))})]})})]})})},rc=(n(430),n(525)),cc=n(249),sc=n(266),oc=function(e){var t=e.value,n=e.row.index,a=e.column.id,c=(e.data,e.updateMyData),s=r.a.useState(t),i=Object(o.a)(s,2),u=i[0],d=i[1],b=r.a.useState({}),j=Object(o.a)(b,2),m=j[0],O=j[1];return r.a.useEffect((function(){d(t)}),[t]),Object(Te.jsxs)("div",{children:[Object(Te.jsx)("input",{value:u,onFocus:function(){d("")},onChange:function(e){"Rate"===a||"quantity"===a?"0"===e.target.value?(O(Object(l.a)({},a+"error","Please enter value greater than 0")),setTimeout((function(){O(Object(l.a)({},a+"error",""))}),2e3)):Xn(e.target.value,0,17)?(d(e.target.value),O(Object(l.a)({},a+"error",""))):(O(Object(l.a)({},a+"error","Please enter number")),setTimeout((function(){O(Object(l.a)({},a+"error",""))}),2e3)):d(e.target.value)},onBlur:function(){c(n,a,"Rate"===a||"quantity"===a?u||0:u)}}),Object(Te.jsx)("span",{style:{color:"red"},children:m[a+"error"]})]})},ic=Object(cc.a)((function(e){return{paper:{position:"absolute",width:800,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),uc=function(e){var t=e.setSelection,n=e.rows,a=e.fnBindTable,c=e.handleClose,s=ic(),i=r.a.useState((function(){var e=50+l(),t=50+l();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}})),u=Object(o.a)(i,1)[0];function l(){return Math.round(20*Math.random())-10}return Object(Te.jsxs)("div",{style:u,className:s.paper,children:[Object(Te.jsx)("h2",{id:"simple-modal-title",style:{textAlign:"center"},children:"ITEMS LIST"}),console.log("datagrid bbbbbbb ",n),Object(Te.jsx)("div",{style:{height:300,width:"100%"},children:Object(Te.jsx)(sc.a,{columns:[{field:"ItemCode",type:"string"},{field:"ItemName",type:"string"}],rows:n,checkboxSelection:!0,onSelectionModelChange:function(e){console.log("ITEMSvvk LIST ITEMS LIST",e),t(e)},selectedRows:["1,2,3"]})}),Object(Te.jsxs)("div",{style:{float:"right"},children:[Object(Te.jsx)("button",{className:"btn2",style:{backgroundColor:"rgb(45 155 255)",padding:"30",color:"#fff",border:"0",width:"80px",height:"30px",marginTop:"10px",marginRight:"20px"},onClick:function(){a(),c()},children:"Ok"}),Object(Te.jsx)("button",{className:"btn2",style:{backgroundColor:"rgb(45 155 255)",padding:"30",color:"#fff",border:"0",width:"80px",height:"30px",marginTop:"10px"},onClick:c,children:"Cancel"})]})]})};function lc(e){e.table;var t=e.fnBindTable,n=e.setSelection,a=e.rows,c=r.a.useState(!1),s=Object(o.a)(c,2),i=s[0],u=s[1],l=function(){u(!1)},b={fnBindTable:t,setSelection:n,rows:a,handleClose:l};return Object(Te.jsxs)("div",{children:[Object(Te.jsx)("button",{type:"button",className:"btnGreen",onClick:function(){u(!0)},children:"Item List"}),Object(Te.jsx)(rc.a,{open:i,onClose:l,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(Te.jsx)(uc,Object(d.a)({},b))})]})}var dc=[{Header:"Item Name",accessor:"ItemName",disableFilters:!1,sticky:"left"},{Header:"Item Code",accessor:"ItemCode",sticky:"left"},{Header:"Remarks",accessor:"Remark",sticky:"left",Cell:oc},{Header:"Unit",accessor:"UnitName",sticky:"left"},{Header:"Quantity",accessor:"quantity",Cell:oc,sticky:"left"},{Header:"Rate",accessor:"Rate",sticky:"left",Cell:oc},{Header:"Disc(%)",accessor:"Discount",Cell:oc,sticky:"left"},{Header:"Gross Total",accessor:"grossTotal",sticky:"left"},{Header:"Discount Amount",accessor:"DiscountAmount",sticky:"left"},{Header:"Net Total",accessor:"NetTotal",sticky:"left"}];var bc=function(e){var t=e.columns,n=e.data,a=e.selectedProduct,r=e.updateMyData,c=Object(Yn.useTable)({columns:t,data:n,selectedProduct:a,updateMyData:r},Yn.useRowSelect),s=c.getTableProps,o=c.getTableBodyProps,i=c.headerGroups,u=c.rows,l=c.prepareRow;return c.selectedFlatRows,Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("div",{style:{width:"100%",overflowX:"scroll"},children:Object(Te.jsxs)("table",Object(d.a)(Object(d.a)({},s()),{},{className:"tableView",children:[Object(Te.jsx)("thead",{children:i.map((function(e){return Object(Te.jsx)("tr",Object(d.a)(Object(d.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(Te.jsx)("th",Object(d.a)(Object(d.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(Te.jsx)("tbody",Object(d.a)(Object(d.a)({},o()),{},{children:u.map((function(e,t){return l(e),Object(Te.jsx)("tr",Object(d.a)(Object(d.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(Te.jsx)("td",Object(d.a)(Object(d.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})})},jc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=[],!t){e.next=9;break}return e.next=5,v.SaleOrder.get(t.id).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=4;break}return e.next=3,v.saleDetail.where("SoId").equals(t.id).toArray();case 3:t.product=e.sent;case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.next=11,v.SaleOrder.reverse().toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=4;break}return e.next=3,v.saleDetail.where("SoId").equals(t.id).toArray();case 3:t.product=e.sent;case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:return n=e.sent,e.abrupt("return",n);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("error",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),mc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.SaleOrder.add(t);case 3:if(!((a=e.sent)>0)){e.next=9;break}if(!(n&&n.length>0)){e.next=9;break}return e.next=8,v.saleDetail.bulkAdd(Oc(n,a));case 8:a=e.sent;case 9:return e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),Oc=function(e,t){if(e&&e.length>0)return e.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{SoId:t})}))},pc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.SaleOrder.put(t);case 3:return e.next=5,v.saleDetail.where("SoId").anyOf(t.id).delete().then(Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.saleDetail.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 5:return a=e.sent,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),hc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.customerMaster.toArray().then((function(e){return e&&e.length>0?e.filter((function(e){return 2===e.LedgerType})):[]}));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),fc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.next=4,v.itemMaster.toArray();case 4:return t=e.sent,e.next=7,t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.push({id:t.Id,ItemName:t&&t.ItemName,ItemCode:t&&t.ItemCode,UnitId:3,UnitName:t.UnitName,Rate:0,quantity:t.Quantity,Discount:0,grossTotal:0,NetTotal:0}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xc=[{Header:"Item Name",accessor:"ItemName",sticky:"left"},{Header:"Item Code",accessor:"ItemCode",sticky:"left"},{Header:"Remarks",accessor:"Remark",sticky:"left"},{Header:"Unit",accessor:"UnitName",sticky:"left"},{Header:"Quantity",accessor:"quantity",sticky:"left"},{Header:"Rate",accessor:"Rate",sticky:"left"},{Header:"Disc(%)",accessor:"Discount",sticky:"left"},{Header:"Gross Total",accessor:"grossTotal",sticky:"left"},{Header:"Discount Amount",accessor:"DiscountAmount",sticky:"left"},{Header:"Net Total",accessor:"NetTotal",sticky:"left"}],vc=function(){var e=Object(a.useState)({product:[],selectedProduct:[],rowSelected:[],form:{SoNumber:"",SoDate:"",dropDownOption:"",PartyCode:"",TotalAmount:0,Remarks:"",PartyName:"",OrderedBy:"",required:{SoDate:"",PartyCode:"",PartyName:"",SoNumber:"",OrderedBy:"",PartyId:"",TotalAmount:""}},vendorList:[]}),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),s=Object(o.a)(c,2),l=s[0],b=s[1],j=Object(a.useState)(null),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)(),f=Object(o.a)(h,2),x=(f[0],f[1]),g=Object(a.useState)(!1),I=Object(o.a)(g,2),y=I[0],w=I[1],N=Object(a.useState)(!1),k=Object(o.a)(N,2),A=k[0],S=k[1],C=Object(a.useState)(!1),D=Object(o.a)(C,2),_=D[0],P=D[1],R=Object(a.useState)(!1),B=Object(o.a)(R,2),M=B[0],T=B[1],E=Object(a.useState)(!1),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)(!1),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=Object(a.useState)([]),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(new Date),Y=Object(o.a)(J,2),Z=Y[0],X=(Y[1],Object(a.useState)([])),$=Object(o.a)(X,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)(!1),oe=Object(o.a)(se,2),ie=oe[0],ue=oe[1],le=Object(a.useState)(),de=Object(o.a)(le,2),be=de[0],je=(de[1],Object(a.useState)()),me=Object(o.a)(je,2),Oe=me[0],pe=me[1],he=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,a,c,s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a=n&&n.selectedProduct.length>0?n.selectedProduct:[],c=n.rowSelected?n.rowSelected&&ee&&ee.filter((function(e){return n.rowSelected.indexOf(e.id)>-1})):[],t=a,e.next=6,r((function(e){return Object(d.a)(Object(d.a)({},e),{},{selectedProduct:[]})}));case 6:return e.next=8,K([]);case 8:for(o in s=function(e){(t&&t.length>0&&-1===t.findIndex((function(t){return t.id===c[e].id}))||t&&0===t.length)&&t.push(c[e])},c)s(o);return e.next=12,K(t);case 12:return e.next=14,r((function(e){return Object(d.a)(Object(d.a)({},e),{},{product:ee,selectedProduct:t})}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,a,c){var s,o;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K([]);case 3:return(s=n).selectedProduct[t][a]=c,o=Ne(s.selectedProduct),s.selectedProduct=o.productData,s.form.TotalAmount=o.totalAmount,e.next=10,r(s);case 10:return e.next=12,K(s.selectedProduct);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,a){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((function(e){return e.product=[],e.selectedProduct=[],e.rowSelected=[],e.form={SoNumber:"",SoDate:"",dropDownOption:"",PartyCode:"",TotalAmount:0,Remarks:"",PartyName:"",OrderedBy:"",PartyId:"",required:{SoDate:"",PartyCode:"",PartyName:"",SoNumber:"",OrderedBy:"",TotalAmount:"",PartyId:""}},e.vendorList=[],Object(d.a)({},e)}));case 2:pe(""),K([]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(e){return e?parseFloat(e).toFixed(3):e},ge=function(e){return e?parseFloat(e):e},Ie=function(e){var t="SO";t+=Date.now(),t+=e&&e.length>0?e.length+1:1,r((function(e){return e.form.SoNumber=t,Object(d.a)({},e)}))},ye=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("pageload function in saleorder"),e.next=3,fc();case 3:return t=e.sent,e.next=6,hc();case 6:return n=e.sent,e.next=9,v.SaleOrder.toArray();case 9:return a=e.sent,e.next=12,r((function(e){return e.vendorList=n,e.product=t,e.form.SoDate=new Date,Object(d.a)({},e)}));case 12:return p(a),e.next=15,te(t);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=9;break}return e.next=3,ye();case 3:return ke(null),e.next=6,jc();case 6:return n=e.sent,Ie(n),e.abrupt("return",pe(t));case 9:if("edit"!==t){e.next=14;break}return e.next=12,ye();case 12:return ke(null),e.abrupt("return",pe(t));case 14:if("view"!==t){e.next=18;break}return e.next=17,ye();case 17:return e.abrupt("return",pe(t));case 18:if("save"===t&&Ae(),"refresh"!==t){e.next=24;break}return ue(!1),ce(!1),xe(),e.abrupt("return",pe(t));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(e){var t=0,n=0,a=0,r=0,c=0,s=0;if(e&&e.length>0)for(var o=0;o<e.length;o++)t=e[o].quantity?e[o].quantity:0,n=ge(e[o].Rate),r=ge(e[o].Discount)*n/100*t,e[o].DiscountAmount=r=ve(r),a=t*n,e[o].grossTotal=a=ve(a),c=ge(a)-ge(r),e[o].NetTotal=c=ve(c),s=ge(s)+ge(c),s=ve(s);return{productData:e,totalAmount:s}},ke=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!1),e.next=3,jc(t);case 3:(n=e.sent)&&Array.isArray(n)?r((function(e){return e.form.SoList=n,Object(d.a)({},e)})):n&&Object.keys(n).length>0&&(r((function(e){return e.form=n,e.selectedProduct=n.product,Object(d.a)({},e)})),K(n.product));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Se(n.form),console.log("product.form.Id index saleOrder",l),!n.form.Id){e.next=9;break}return e.next=5,pc(t,n.selectedProduct);case 5:xe(),alert("updated successfully"),e.next=15;break;case 9:if(!(l.length>0)){e.next=15;break}return e.next=12,mc(t,n.selectedProduct);case 12:xe(),alert("saved successfully"),b([]);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e){return{SoNumber:e&&e.SoNumber,SoDate:e&&e.SoDate,PartyCode:e&&e.PartyCode,PartyName:e&&e.PartyName,CreatedBy:e&&e.CreatedBy,CreatedByName:e&&e.CreatedByName,CreatedOn:new Date,Remarks:e&&e.Remarks,OrderedBy:e&&e.OrderedBy,TotalAmount:e&&e.TotalAmount,new:1,update:0}};Object(a.useEffect)((function(){var e=function(e){M&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),w(!0))),Q&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),S(!0))),F&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),P(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[O,Oe,M,F,Q,be]);var Ce={val:Oe,change_state:we},De=Object(a.useMemo)((function(){return dc}),[]),_e=Object(a.useMemo)((function(){return xc}),[]),Pe={product:n,fnBindTable:he,setSelection:function(e){console.log("setSelection rowselected checking array value",e.selectionModel),b(e.selectionModel),e.selectionModel&&r((function(t){return Object(d.a)(Object(d.a)({},t),{},{rowSelected:e.selectionModel.map((function(e){return parseInt(e)}))})}))},rows:ee};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"saleOrder",children:[Object(Te.jsx)(zn,Object(d.a)({},Ce)),Object(Te.jsxs)("div",{className:"saleOrderIn mt-2",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w65",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"Invoice No."}),"edit"===Oe||"view"===Oe?O&&Object(Te.jsx)(Hn.a,{open:y,options:O,onChange:function(e,t){return ke(t)},getOptionLabel:function(e){return e.SoNumber},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return T(!0)},onBlur:function(){T(!1),w(!1)}}))}}):Object(Te.jsx)("input",{name:"nodeNumber",onChange:function(e){r((function(t){return t.form.SoNumber=e.target.value,Object(d.a)({},t)}))},type:"text",className:be&&!0===be.Invoiceno?"error":"","data-valid":"varChar",value:n&&n.form&&n.form.SoNumber,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{htmlFor:"",children:"Invoice Date"}),Object(Te.jsx)(pa.a,{selected:Z,onChange:function(e){r((function(t){return t.form.SoDate=e,Object(d.a)({},t)}))},dateFormat:"dd-MM-yyyy",dropdownMode:"select",value:n&&n.form&&n.form.SoDate,readOnly:"view"===Oe||void 0===Oe})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"Vendor Name"}),"add"===Oe&&!1===re?n&&n.vendorList&&Object(Te.jsx)(Hn.a,{open:A,options:n.vendorList,onChange:function(e,t){!function(e){if(S(!1),ue(!0),e){x(e.Id);var t={VendorCode:e.PartyCode,VendorName:e.PartyName};r((function(e){return e.form.PartyCode=t.VendorCode,e.form.PartyName=t.VendorName,Object(d.a)({},e)}))}}(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return V(!0)},onBlur:function(){V(!1),S(!1)}}))}}):Object(Te.jsx)("input",{onChange:function(e){r((function(t){return t.form.PartyName=e.target.value,Object(d.a)({},t)}))},name:"adjustmentAmount",value:n&&n.form&&n.form.PartyName,type:"text",className:be&&!0===be.VendorName?"error":"",readOnly:!0,"data-valid":"varChar"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"Vendor Code"}),"add"===Oe&&!1===ie?n&&n.vendorList&&Object(Te.jsx)(Hn.a,{open:_,options:n.vendorList,onChange:function(e,t){!function(e){if(P(!1),ce(!0),e){x(e.Id);var t={VendorCode:e.PartyCode,VendorName:e.PartyName};r((function(e){return e.form.PartyName=t.VendorName,e.form.PartyCode=t.VendorCode,Object(d.a)({},e)}))}}(t)},getOptionLabel:function(e){return e.PartyCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return q(!0)},onBlur:function(){q(!1),P(!1)}}))}}):Object(Te.jsx)("input",{onChange:function(e){r((function(t){return t.form.PartyCode=e.target.value,Object(d.a)({},t)}))},name:"adjustmentAmount",value:n&&n.form&&n.form.PartyCode,type:"text",className:be&&!0===be.VendorCode?"error":"",readOnly:!0,"data-valid":"varChar"})]})})]})]}),Object(Te.jsx)("div",{className:"col w35",children:"add"===Oe?Object(Te.jsx)(lc,Object(d.a)({},Pe)):Object(Te.jsxs)("button",{type:"button",className:"btnGreen",children:["Item List"," "]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:"view"===Oe||void 0===Oe?Object(Te.jsx)(bc,{columns:_e,data:W}):Object(Te.jsx)(bc,{columns:De,data:W,updateMyData:fe})})}),Object(Te.jsx)("div",{className:"box blueBg borderTop-0",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 mr-auto",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"Invoice By "}),Object(Te.jsx)("input",{onChange:function(e){r((function(t){return t.form.OrderedBy=e.target.value,Object(d.a)({},t)}))},name:"invoiceBy",value:n&&n.form&&n.form.OrderedBy,type:"text",className:be&&!0===be.InvoiceBy?"error":"",readOnly:"view"===Oe||void 0===Oe})]})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:"Total"}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:n&&n.form&&n.form.TotalAmount})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100 mt-2",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-1 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:"Remark"}),Object(Te.jsx)("textarea",{onChange:function(e){r((function(t){return t.form.Remarks=e.target.value,Object(d.a)({},t)}))},name:"remark",value:n&&n.form&&n.form.Remarks,type:"text",className:be&&!0===be.Remarks?"error":"bgWhite",readOnly:"view"===Oe||void 0==Oe})]})})})]})]})})},gc=(n(432),function(e){var t=e.onlinestatus,n=e.pageNav,r={Id:0,GroupCode:"",GroupName:"",ParentGroupCode:"",ParentGroupId:"",ParentGroupName:""},c={GroupCode:"",GroupName:"",ParentGroupName:""},s=Object(a.useState)(void 0),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(c),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(r),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)([]),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(!1),R=Object(o.a)(P,2),B=R[0],M=R[1],T=Object(a.useState)(!1),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)(!1),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)(!1),z=Object(o.a)(V,2),H=z[0],W=z[1],K=Object(a.useState)(!1),J=Object(o.a)(K,2),Y=J[0],Z=J[1],X=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),$=Object(o.a)(X,2),ee=$[0],te=($[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=10;break}if(!t){e.next=9;break}return e.next=4,ne();case 4:return y(r),Q(!0),e.abrupt("return",m(n));case 9:alert("you are not online please try again after some time when you online");case 10:if("edit"!==n){e.next=16;break}return e.next=13,ne();case 13:return F(!0),y(r),e.abrupt("return",m(n));case 16:if("view"!==n){e.next=22;break}return e.next=19,ne();case 19:return F(!0),y(r),e.abrupt("return",m(n));case 22:if("save"===n&&(a=Object.keys(h),s={},a.forEach((function(e){return s[e]=""===I[e]||null===I[e]||!0===h[e]})),f(s),Object.values(s).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):t?re():alert("you are not online please try again after some time when you online")),"refresh"!==n){e.next=29;break}return y(r),f(c),_(!1),Q(!1),e.abrupt("return",m(n));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemGroup.toArray();case 2:t=e.sent,A(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(e){var t=e.target,n=t.name,a=t.value,r=e.target.getAttribute("data-valid");r?""===a?"GroupName"===n?(F(!0),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},n,a)))):"ParentGroupName"===n?(Q(!0),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},n,a)))):y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},n,a))):Me(e.target.value,r)?(y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},n,a))),f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},n,!1)))):(y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},n,a))),f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},n,!0)))):y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},n,a)))},re=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={GroupCode:I.GroupCode,GroupName:I.GroupName,ParentGroupCode:I.ParentGroupCode,ParentGroupId:parseInt(I.ParentGroupId),ParentGroupName:I.ParentGroupName,CreatedBy:parseInt(localStorage.getItem("UserId"))},!I||!I.id){e.next=8;break}return e.next=4,He("/api/ItemGroup/",Object(d.a)(Object(d.a)({},t),{},{Id:I.Id}));case 4:202===(n=e.sent).statuscode?v.itemGroup.update(I.id,Object(d.a)(Object(d.a)({},t),{},{Id:I.Id})).then((function(e){alert(n.msg),te("refresh")})):alert(n.msg,"statuscode:",n.statuscode),e.next=12;break;case 8:return e.next=10,ze("/api/ItemGroup/",Object(d.a)(Object(d.a)({},t),{},{Id:0}));case 10:(a=e.sent).mid>0&&null!==a.mid?v.itemGroup.add(Object(d.a)(Object(d.a)({},t),{},{Id:a.mid})).then((function(e){alert(a.msg),te("refresh")})):alert(a.msg,"statuscode:",a.statuscode);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){Y&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),_(!0))),H&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),M(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[k,j,Y,H]);var ce={val:j,change_state:te,disabledAction:ee};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ce)),Object(Te.jsxs)("div",{className:"unitMaster",children:[Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Group Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),("view"===j||"edit"===j)&&!0===L?Object(Te.jsx)(Hn.a,{options:k,open:D,onChange:function(e,t){return function(e){if(e){_(!1);var t={Id:e.Id,id:e.id,GroupCode:e.GroupCode,GroupName:e.GroupName,ParentGroupCode:e.ParentGroupCode,ParentGroupId:e.ParentGroupId,ParentGroupName:e.ParentGroupName};f(Object(d.a)(Object(d.a)({},h),{},{GroupName:e.GroupName,GroupCode:e.GroupCode,ParentGroupName:e.ParentGroupName})),y(t),F(!1)}}(t)},getOptionLabel:function(e){return e.GroupName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return Z(!0)},onBlur:function(){Z(!1),_(!1)}}))}}):Object(Te.jsx)("input",{name:"GroupName",onChange:ae,type:"text",value:I&&I.GroupName,className:h&&!0===h.GroupName?"error":"","data-valid":"varCharSpace",readOnly:"view"===j||void 0===j})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsxs)("label",{children:[Object(Te.jsx)(ot,{content:"Group Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{name:"GroupCode",onChange:ae,type:"text","data-valid":"varChar",value:I&&I.GroupCode,className:h&&!0===h.GroupCode?"error":"",readOnly:"view"===j||void 0===j})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Parent Group"})}),("add"===j||"edit"===j)&&!0===U?Object(Te.jsx)(Hn.a,{options:k,open:B,onChange:function(e,t){return function(e){e&&(M(!1),f(Object(d.a)(Object(d.a)({},h),{},{ParentGroupName:e.ParentGroupName})),y((function(t){return t.ParentGroupId=e.Id,t.ParentGroupCode=e.GroupCode,t.ParentGroupName=e.GroupName,Object(d.a)({},t)})))}(t)},getOptionLabel:function(e){return"".concat(e.GroupCode," [").concat(e.GroupName,"]")},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return W(!0)},onBlur:function(){W(!1),M(!1)}}))}}):Object(Te.jsx)("input",{name:"ParentGroupName",onChange:ae,type:"text","data-valid":"varChar",value:I&&I.ParentGroupName,className:h&&!0===h.ParentGroupName?"error":"",readOnly:"view"===j})]})]})]})})});n(250);var Ic=[{header:"Applicable From",field:"ApplicableOn"},{header:"Rate",field:"IgstTaxRate",cell:"EditInput"}],yc=function(e){var t,n,r=e.pageNav,c={applicablefrom:"",HsnCode:"",HsnName:"",Code:""},s={},b=Object(a.useState)(c),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)(),h=Object(o.a)(p,2),f=h[0],x=(h[1],Object(a.useState)(null)),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)([]),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)({add:!1===r.AllowNew?"disable":"",view:!1===r.AllowView?"disable":"",edit:!1===r.AllowEdit?"disable":"",authorize:!1===r.AllowAuthorize?"disable":"",print:!1===r.AllowPrint?"disable":""}),C=Object(o.a)(S,2),D=C[0],_=(C[1],Object(a.useState)([])),P=Object(o.a)(_,2),R=(P[0],P[1]),B=Object(a.useState)([]),M=Object(o.a)(B,2),T=M[0],E=M[1],L=Object(a.useState)(!1),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)([]),Q=Object(o.a)(U,2),V=(Q[0],Q[1]),z=Object(a.useState)(),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(!1),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(""),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(s),re=Object(o.a)(ae,2),ce=re[0],se=re[1],oe=Object(a.useState)(),ie=Object(o.a)(oe,2),ue=ie[0],le=ie[1],de=function(e){var t=e.target,n=t.name,a=t.value;O(Object(d.a)(Object(d.a)({},m),{},Object(l.a)({},n,a)))},be=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.hsnMaster.toArray();case 2:return t=e.sent,e.next=5,v.stateMaster.toArray();case 5:(n=e.sent).sort((function(e,t){var n=e.StateName.toLowerCase(),a=t.StateName.toLowerCase();return n<a?-1:n>a?1:0})),E(n),y(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)({},ce);case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){je()};Object(a.useEffect)((function(){var e=function(e){Z&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),G(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e),console.log(te)}}),[m,te,Z,f,k]);var Oe={val:te,change_state:function(e){switch(e){case"edit":return void ne(e);case"refresh":return O(c),V([]),le([]),E([]),K(),ne(e),void be();case"view":return be(),ne(e),void console.log(I);case"add":return be(),se([]),le([]),A([]),V([{}]),K([{}]),O(c),void ne(e);case"save":return ne(e),me(),V([]),K([]),O(c),se(),void le();default:return e}},disabledAction:D};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"stockGeneral",style:{display:!0===r.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Oe)),Object(Te.jsx)("div",{className:"stockGeneralIn mt-2",children:Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col col3",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"HSN Name"})}),"edit"===te||"view"===te?I&&Object(Te.jsx)(Hn.a,{open:q,options:I||[{}],onChange:function(e,t){return function(e){var t,n,a,r,s,o,i,u;if(!e)return O(c),le([]),void K();R(e),O(Object(d.a)({},e)),K([{cgst:null===e||void 0===e||null===(t=e.IGST[0])||void 0===t||null===(n=t.CGST[0])||void 0===n?void 0:n.CgstTaxRate,sgst:null===e||void 0===e||null===(a=e.IGST[0])||void 0===a||null===(r=a.CGST[0])||void 0===r?void 0:r.SgstTaxRate}]),le([{ApplicableOn:null===e||void 0===e?void 0:e.IGST[0].ApplicableOn,IgstTaxRate:(null===e||void 0===e||null===(s=e.IGST[0])||void 0===s||null===(o=s.CGST[0])||void 0===o?void 0:o.CgstTaxRate)+(null===e||void 0===e||null===(i=e.IGST[0])||void 0===i||null===(u=i.CGST[0])||void 0===u?void 0:u.SgstTaxRate)}]),G(!1)}(t)},getOptionLabel:function(e){return e.HsnName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return X(!0)},onBlur:function(){X(!1),G(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"HsnName",onChange:function(e){return de(e)},"data-valid":"varChar",value:m&&m.HsnName,readOnly:"add"!==te})]})}),Object(Te.jsx)("div",{className:"col col3",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"HSN Code"})}),Object(Te.jsx)("input",{type:"text",name:"HsnCode",onChange:function(e){return de(e)},"data-valid":"varChar",value:m&&m.Code,readOnly:"add"!==te})]})})]}),Object(Te.jsxs)("div",{className:"row ",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"tableBox",style:{width:"450px"},children:Object(Te.jsx)("div",{className:"gstclasstbl",children:Object(Te.jsx)("div",{className:"customTblHead",children:Object(Te.jsxs)("table",{children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Sgst"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Cgst"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"State"})})]})}),W?Object(Te.jsx)("tbody",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:null===(t=W[0])||void 0===t?void 0:t.sgst}),Object(Te.jsx)("td",{children:null===(n=W[0])||void 0===n?void 0:n.cgst}),Object(Te.jsx)("td",{children:Object(Te.jsx)("select",{name:"states",id:"states",children:T&&T.map((function(e){return Object(Te.jsx)("option",{value:e.StateName,children:e.StateName})}))})})]})}):Object(Te.jsx)("tr",{children:Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"No data"})})})]})})})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"tableBox",style:{width:"450px"},children:Object(Te.jsx)(Na,{coulmn:Ic,overFlowScroll:!0,data:ue&&ue,Footer:!1})})})]})]})})]})})},wc=(n(433),function(e){var t=e.onlinestatus,n=e.pageNav,r={DesignationName:"",DesignationCode:""},c=Object(a.useState)(),s=Object(o.a)(c,2),l=s[0],b=s[1],j=Object(a.useState)(r),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)(null),f=Object(o.a)(h,2),x=f[0],g=f[1],I=Object(a.useState)(!1),y=Object(o.a)(I,2),w=y[0],N=y[1],k=Object(a.useState)(!1),A=Object(o.a)(k,2),S=A[0],C=A[1],D=Object(a.useState)(!1),_=Object(o.a)(D,2),P=_[0],R=_[1],B=Object(a.useState)(!1),M=Object(o.a)(B,2),T=M[0],E=M[1],L=Object(a.useState)(!1),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)(!1),Q=Object(o.a)(U,2),V=Q[0],z=Q[1],H=Object(a.useState)(!1),W=Object(o.a)(H,2),K=(W[0],W[1]),J=Object(a.useState)(!1),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(),ee=Object(o.a)($,2),te=ee[0],ne=(ee[1],Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""})),ae=Object(o.a)(ne,2),re=ae[0],ce=(ae[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.designationMaster.toArray();case 2:t=e.sent,console.log(t,"reason"),g(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),se=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=11;break}if(!t){e.next=10;break}return e.next=4,ce();case 4:return p(r),z(!0),G(!0),e.abrupt("return",b(n));case 10:alert("you are not online please try again after some time when you online");case 11:if("edit"!==n){e.next=18;break}return e.next=14,ce();case 14:return p(r),z(!0),G(!0),e.abrupt("return",b(n));case 18:if("view"!==n){e.next=25;break}return e.next=21,ce();case 21:return p(r),z(!0),G(!0),e.abrupt("return",b(n));case 25:if("save"!==n){e.next=36;break}if(!t){e.next=35;break}return ie(),p(r),K(!1),z(!1),G(!1),e.abrupt("return",b(n));case 35:alert("you are not online please try again after some time when you online");case 36:if("refresh"!==n){e.next=46;break}return p(r),N(!1),C(!1),R(!1),E(!1),G(!1),z(!1),K(!1),e.abrupt("return",b(n));case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(!1),G(!1),z(!1),t&&(n={id:t.id,Id:t.Id,DesignationName:t.DesignationName,DesignationCode:t.DesignationCode},p(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={DesignationName:O.DesignationName,DesignationCode:O.DesignationCode},!O||!O.id){e.next=8;break}return e.next=4,He("/api/DesignationMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:O.Id}));case 4:202===(n=e.sent).statuscode?v.designationMaster.update(O.id,Object(d.a)(Object(d.a)({},t),{},{Id:O.Id})).then((function(e){alert(n.msg),se("refresh")})):alert(n.msg,"statuscode:",n.statuscode),e.next=12;break;case 8:return e.next=10,ze("/api/DesignationMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:0}));case 10:(a=e.sent).mid>0&&null!==a.mid?v.designationMaster.add(Object(d.a)(Object(d.a)({},t),{},{Id:a.mid})).then((function(e){alert(a.msg),se("refresh")})):alert(a.msg,"statuscode:",a.statuscode);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){P&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),N(!0))),T&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),C(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[x,l,P,T]);var ue={val:l,change_state:se,disabledAction:re};return Object(Te.jsxs)(Te.Fragment,{children:[Z&&Object(Te.jsx)(sr,{message:te,closePopup:function(){X(!1)}}),Object(Te.jsxs)("div",{className:"customerMasterBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ue)),Object(Te.jsxs)("div",{className:"reasonMasterSection",children:[Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Designation Name"})}),"view"===l||"edit"===l?!0===q?Object(Te.jsx)(Hn.a,{open:w,options:x,onChange:function(e,t){return oe(t)},getOptionLabel:function(e){return e.DesignationName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press Ctrl + L",onFocus:function(){return R(!0)},onBlur:function(){R(!1),N(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"DesignationName",readOnly:"view"===l,value:O&&O.DesignationName,onChange:function(e){""===e.target.value?(G(!0),p(Object(d.a)(Object(d.a)({},O),{},{DesignationName:e.target.value}))):p(Object(d.a)(Object(d.a)({},O),{},{DesignationName:e.target.value}))}}):Object(Te.jsx)("input",{type:"text",name:"DesignationName",onChange:function(e){""===e.target.value?(G(!0),p(Object(d.a)(Object(d.a)({},O),{},{DesignationName:e.target.value}))):p(Object(d.a)(Object(d.a)({},O),{},{DesignationName:e.target.value}))},readOnly:"view"===l,value:O&&O.DesignationName})]})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Designation Code"})}),("view"===l||"edit"===l)&&!0===V?Object(Te.jsx)(Hn.a,{open:S,options:x,onChange:function(e,t){return function(e){C(!1),G(!1),z(!1);var t={id:e.id,Id:e.Id,DesignationName:e.DesignationName,DesignationCode:e.DesignationCode};p(t)}(t)},getOptionLabel:function(e){return e.DesignationCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Select designation code",onFocus:function(){return E(!0)},onChange:function(e){console.log(e.target.value),p(Object(d.a)(Object(d.a)({},O),{},{DesignationCode:e.target.value}))},onBlur:function(){E(!1),C(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"DesignationCode",readOnly:"view"===l,onChange:function(e){""===e.target.value?(z(!0),p(Object(d.a)(Object(d.a)({},O),{},{DesignationCode:e.target.value}))):p(Object(d.a)(Object(d.a)({},O),{},{DesignationCode:e.target.value}))},value:O&&O.DesignationCode})]})})})]})]})]})}),Nc=(n(434),function(e){var t=e.onlinestatus,n=e.pageNav,r={CounterName:"",CounterCode:"",Remarks:"",MachineId:0},c=Object(a.useState)(),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)({CounterName:"",CounterCode:""}),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),w=Object(o.a)(y,2),N=w[0],k=(w[1],Object(a.useState)(null)),A=Object(o.a)(k,2),S=A[0],C=A[1],D=Object(a.useState)(!1),_=Object(o.a)(D,2),P=_[0],R=_[1],B=Object(a.useState)(!1),M=Object(o.a)(B,2),T=M[0],E=M[1],L=Object(a.useState)(!1),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)(!1),Q=Object(o.a)(U,2),V=Q[0],z=Q[1],H=Object(a.useState)(!1),W=Object(o.a)(H,2),K=W[0],J=W[1],Y=Object(a.useState)(!1),Z=Object(o.a)(Y,2),X=Z[0],$=Z[1],ee=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.counterMaster.toArray();case 2:t=e.sent,C(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=9;break}if(!t){e.next=8;break}return e.next=4,ee();case 4:return I(r),e.abrupt("return",j(n));case 8:alert("you are not online please try again after some time when you online");case 9:if("edit"!==n){e.next=16;break}return e.next=12,ee();case 12:return I(r),$(!0),J(!0),e.abrupt("return",j(n));case 16:if("view"!==n){e.next=23;break}return e.next=19,ee();case 19:return I(r),$(!0),J(!0),e.abrupt("return",j(n));case 23:if("save"===n&&(a=Object.keys(p),c={},a.forEach((function(e){return c[e]=""===g[e]||null===g[e]||!0===p[e]})),h(c),Object.values(c).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):t?ae():alert("you are not online please try again after some time when you online")),"refresh"!==n){e.next=30;break}return I(r),$(!1),h(r),J(!1),e.abrupt("return",j(n));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(R(!1),J(!1),$(!1),I(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={CounterName:g.CounterName,CounterCode:g.CounterCode,Remarks:g.Remarks},!g||!g.id){e.next=8;break}return e.next=4,He("/api/CounterMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:g.Id}));case 4:202===(n=e.sent).statuscode?v.counterMaster.update(g.id,t).then((function(e){alert(n.msg),te("refresh")})):alert(n.msg,"statuscode:",n.statuscode),e.next=12;break;case 8:return e.next=10,ze("/api/CounterMaster/",Object(d.a)(Object(d.a)({},t),{},{Id:0}));case 10:(a=e.sent).mid>0&&null!==a.mid?v.counterMaster.add(Object(d.a)(Object(d.a)({},t),{},{Id:a.mid})).then((function(e){alert(a.msg),te("refresh")})):alert(a.msg,"statuscode:",a.statuscode);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(e){var t=e.target,n=t.name,a=t.value;if(""===a)"CounterName"===n?(J(!0),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a)))):"CounterCode"===n&&($(!0),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a))));else{var r,c=e.target.getAttribute("data-valid");if(c)if(Me(e.target.value,c))I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a))),h(Object(d.a)(Object(d.a)({},p),{},(r={},Object(l.a)(r,n,!1),Object(l.a)(r,"Remarks",!1),r)));else I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},n,!0)));else I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},n,a))),h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},n,!1)))}};Object(a.useEffect)((function(){var e=function(e){q&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),R(!0))),V&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),E(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[S,b,q,V]);var ce={val:b,change_state:te,disabledAction:N};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"customerMasterBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ce)),Object(Te.jsxs)("div",{className:"reasonMasterSection",children:[Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Counter Name"})}),!0===K?Object(Te.jsx)(Hn.a,{open:P,options:S,onChange:function(e,t){return ne(t)},getOptionLabel:function(e){return e.CounterName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return G(!0)},onBlur:function(){G(!1),R(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"CounterName","data-valid":"varCharSpace",onChange:re,className:p&&!0===p.CounterName?"error":"",readOnly:"view"===b,value:g&&g.CounterName})]})})}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Counter Code"})}),!0===X?Object(Te.jsx)(Hn.a,{open:T,options:S,onChange:function(e,t){return function(e){e&&(E(!1),J(!1),$(!1),I(e))}(t)},getOptionLabel:function(e){return e.CounterCode},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Select Counter Code",onFocus:function(){return z(!0)},onBlur:function(){z(!1),E(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"CounterCode","data-valid":"varCharSpace",readOnly:"view"===b,onChange:re,className:p&&!0===p.CounterCode?"error":"",value:g&&g.CounterCode})]})}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remarks"})}),Object(Te.jsx)("input",{type:"text",name:"Remarks",readOnly:"view"===b,onChange:re,value:g&&g.Remarks})]})})]})]})]})})}),kc=(n(435),function(e){var t=e.onlinestatus,n=e.pageNav,r={voucherName:"",AppliedOn:"",tallyVoucherName:"",shortName:"",SetAsDefault:!1,IsActive:!1},c={voucherName:"",AppliedOn:""},s=Object(a.useState)(r),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(""),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(c),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)(!1),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(!1),R=Object(o.a)(P,2),B=R[0],M=R[1],T=Object(a.useState)([]),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)([]),G=Object(o.a)(q,2),U=G[0],Q=G[1],V=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),z=Object(o.a)(V,2),H=z[0],W=(z[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.VoucherList.toArray();case 2:return t=e.sent,e.next=5,v.VoucherFormMaster.toArray();case 5:n=e.sent,F(t),Q(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=7;break}if(!t){e.next=6;break}return W(),e.abrupt("return",f(n));case 6:alert("you are not online please try again after some time when you online");case 7:if("edit"!==n){e.next=11;break}return W(),M(!0),e.abrupt("return",f(n));case 11:if("view"!==n){e.next=15;break}return W(),M(!0),e.abrupt("return",f(n));case 15:if("save"===n&&(a=Object.keys(I),s={},a.forEach((function(e){return s[e]=""===j[e]||null===j[e]||!0===I[e]})),y(s),Object.values(s).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):t?J():alert("you are not online please try again after some time when you online")),"refresh"!==n){e.next=20;break}return m(r),y(c),e.abrupt("return",f(n));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={VoucherName:j.voucherName,ApplyOnFormId:parseInt(j.AppliedOn),IsDefault:j.SetAsDefault,ShortName:j.shortName,IsActive:j.IsActive,CreatedBy:parseInt(localStorage.getItem("UserId")),CreatedByName:localStorage.getItem("fname"),EditLog:null,CreatedOn:Ge(new Date),alteredon:""},!j||!j.id){e.next=8;break}return e.next=4,He("/api/voucher/",Object(d.a)(Object(d.a)({},t),{},{Id:j.Id}));case 4:202===(n=e.sent).statuscode?v.VoucherList.update(j.id,t).then((function(e){alert(n.msg),K("refresh")})):alert(n.msg,"statuscode:",n.statuscode),e.next=12;break;case 8:return e.next=10,ze("/api/voucher/",Object(d.a)(Object(d.a)({},t),{},{Id:0}));case 10:(a=e.sent).mid>0&&null!==a.mid?v.VoucherList.add(Object(d.a)(Object(d.a)({},t),{},{Id:a.mid})).then((function(e){alert(a.msg),K("refresh")})):alert(a.msg,"statuscode:",a.statuscode);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e){var t=e.target,n=t.name,a=t.value;"voucherName"===n&&""===a?(M(!0),m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a)))):(m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a))),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},n,a))))};Object(a.useEffect)((function(){var e=function(e){k&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),_(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[j,k,h]);var Z=function(e){var t=e.target,n=t.name,a=t.checked;m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},n,a)))},X={val:h,change_state:K,disabledAction:H};return Object(Te.jsxs)("div",{className:"voucherType",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},X)),Object(Te.jsx)("div",{className:"voucherTypeSection",children:Object(Te.jsxs)("div",{className:"box",children:[Object(Te.jsx)("div",{className:"formBox",children:Object(Te.jsxs)("div",{className:"row ",children:[Object(Te.jsxs)("div",{className:"col w35 ",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Voucher Name"})}),("view"===h||"edit"===h)&&!0===B?Object(Te.jsx)(Hn.a,{open:D,options:L,onChange:function(e,t){!function(t){try{if(t){_(!1),M(!1),m(r),y(c);var n={id:t.id,Id:t.Id,voucherName:t.VoucherName,AppliedOn:t.ApplyOnFormId,shortName:t.ShortName,SetAsDefault:t.IsDefault,IsActive:t.IsActive};m(n)}}catch(e){console.log(e)}}(t)},getOptionLabel:function(e){return e.VoucherName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{value:"",placeholder:"Press ctrl + L",onFocus:function(){return A(!0)},onBlur:function(){A(!1),_(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"voucherName",onChange:function(e){return Y(e)},className:I&&!0===I.voucherName?"error":"",readOnly:"view"===h||"refresh"===h,value:j.voucherName})]}),Object(Te.jsxs)("div",{className:"col w35",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Applied On"})}),Object(Te.jsxs)("select",{name:"AppliedOn",value:j.AppliedOn,onChange:function(e){return function(e){m(Object(d.a)(Object(d.a)({},j),{},Object(l.a)({},e.target.name,e.target.value)))}(e)},children:[Object(Te.jsx)("option",{value:"",children:"Select"}),U&&U.map((function(e,t){return Object(Te.jsx)("option",{value:e.formid,children:e.caption},t)}))]})]}),Object(Te.jsxs)("div",{className:"col w35",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Tally Vch. Name"})}),Object(Te.jsx)("input",{type:"text",name:"tallyVoucherName",className:I&&!0===I.tallyVoucherName?"error":"",readOnly:!0})]})]})}),Object(Te.jsx)("div",{className:"formBox",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w35",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Short Name"})}),Object(Te.jsx)("input",{type:"text",className:I&&!0===I.shortName?"error":"",name:"shortName",readOnly:"view"===h||"refresh"===h,onChange:function(e){return Y(e)},value:j.shortName})]}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"view"===h||"refresh"===h,id:"checkboxOne",checked:j.IsActive,onChange:function(e){return Z(e)},name:"IsActive"}),Object(Te.jsx)("label",{htmlFor:"checkboxOne",children:Object(Te.jsx)(ot,{content:"IsActive"})})]})}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{disabled:"view"===h||"refresh"===h,type:"checkbox",id:"checkboxTwo",checked:j.SetAsDefault,onChange:function(e){return Z(e)},name:"SetAsDefault"}),Object(Te.jsx)("label",{htmlFor:"checkboxTwo",children:Object(Te.jsx)(ot,{content:"set as default"})})]})})]})}),Object(Te.jsx)("div",{className:"formBox",children:Object(Te.jsx)("div",{className:"row"})})]})})]})}),Ac=(n(436),[{header:"Date",field:"ExchangeDate"},{header:"Rate",field:"Rate"}]),Sc=function(e){var t=e.pageNav,n={CurrencySymbol:"",FormalName:"",DigitAfterDecimal:"",SymbolForDecimalPortion:"",DecimalSymbol:"",GroupingSymbol:"",CounterId:"",ExchangeRate:[]},r=Object(a.useState)(""),c=Object(o.a)(r,2),s=c[0],l=c[1],b=Object(a.useState)(Object(d.a)(Object(d.a)({},n),{},{indentDate:new Date})),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)(),h=Object(o.a)(p,2),f=h[0],x=h[1],g=Object(a.useState)(!1),I=Object(o.a)(g,2),y=I[0],w=I[1],N=Object(a.useState)(!1),k=Object(o.a)(N,2),A=k[0],S=k[1],C=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),D=Object(o.a)(C,2),_=D[0],P=(D[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("view"!==t){e.next=5;break}return e.next=3,R();case 3:return O(n),e.abrupt("return",l(t));case 5:if("refresh"!==t){e.next=8;break}return O(n),e.abrupt("return",l(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.currencyMaster.toArray();case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&(t.preventDefault(),w(!1),O(n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){A&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),w(A)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m,A,f]);var M={val:s,change_state:P,disabledAction:_};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},M)),Object(Te.jsxs)("div",{className:"currencyM",children:[Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Currency Symbol"})}),"view"===s||"edit"===s?Object(Te.jsx)(Hn.a,{options:f,open:y,onChange:function(e,t){return B(e,t)},getOptionLabel:function(e){return e.CurrencySymbol},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return S(!0)},onBlur:function(){S(!1),w(!1)}}))}}):Object(Te.jsx)("input",{name:"CurrencySymbol",type:"text","data-valid":"varChar",value:m&&m.CurrencySymbol,readOnly:!0})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Formal Name"})}),Object(Te.jsx)("input",{name:"FormalName",type:"text","data-valid":"varChar",value:m&&m.FormalName,readOnly:!0})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Digit After Decimal"})}),Object(Te.jsx)("input",{name:"DigitAfterDecimal",type:"text","data-valid":"varChar",dir:"rtl",value:m&&m.DigitAfterDecimal,readOnly:!0})]})]}),Object(Te.jsxs)("div",{className:"currencyM",children:[Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Symbol For Decimal Portion"})}),Object(Te.jsx)("input",{name:"SymbolForDecimalPortion",type:"text","data-valid":"varChar",value:m&&m.SymbolForDecimalPortion,readOnly:!0})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Decimal Symbol"})}),Object(Te.jsx)("input",{name:"DecimalSymbol",type:"text",value:m&&m.DecimalSymbol,readOnly:!0})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Digit Grouping Symbol"})}),Object(Te.jsx)("input",{name:"GroupingSymbol",type:"text","data-valid":"varChar",value:m&&m.GroupingSymbol,readOnly:!0})]})]}),Object(Te.jsx)("div",{className:"currencyM",children:Object(Te.jsx)("div",{className:"tableBox",style:{width:"450px"},children:Object(Te.jsx)(Na,{coulmn:Ac,overFlowScroll:!1,data:m.ExchangeRate})})})]})})},Cc=(n(437),[{header:"Party Code",field:"PartyCode",cell:"EditInput"},{header:"Party Name",field:"PartyName",cell:"EditInput"},{header:"Address",field:"Address",cell:"EditInput"},{header:"SalesPersonName",field:"SalesPersonName",cell:"EditInput"},{header:"Phone1",field:"Phone1",cell:"EditInput"},{header:"Phone2",field:"Phone2",cell:"EditInput"},{header:"Contact Person",field:"ContactPerson",cell:"EditInput"},{header:"Email",field:"Email",cell:"EditInput"},{header:"Cst No",field:"CstNo",cell:"EditInput"},{header:"Cst Date",field:"CstDate",cell:"EditInput"},{header:"Lst No",field:"LstNo",cell:"EditInput"},{header:"Lst Date",field:"LstDate",cell:"EditInput"},{header:"Tin No",field:"TinNo",cell:"EditInput"},{header:"Tin Date",field:"TinDate",cell:"EditInput"},{header:"PAN",field:"PAN",cell:"EditInput"},{header:"Address2",field:"Address2",cell:"EditInput"},{header:"Pincode",field:"Pincode",cell:"EditInput"},{header:"Fax",field:"Fax",cell:"EditInput"},{header:"CityId",field:"CityId",cell:"EditInput"}]),Dc=function(e){var t=e.pageNav,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],b=Object(a.useState)({}),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)(!0),h=Object(o.a)(p,2),f=(h[0],h[1],Object(a.useState)()),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(""),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),P=Object(o.a)(_,2),R=P[0],B=(P[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("view"!==t){e.next=4;break}return e.next=3,M();case 3:return e.abrupt("return",D(t));case 4:if("save"!==t){e.next=9;break}return e.next=7,v.customerMaster.clear().then((function(){v.customerMaster.bulkPut(c).then((function(e){alert("updated successfully",e)})).catch((function(e){alert("something went wrong",e)}))}));case 7:return e.next=9,B("refresh");case 9:if("refresh"!==t){e.next=14;break}return O(),k(!1),s([]),e.abrupt("return",D(t));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.toArray();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){"Enter"===e.key&&(e.preventDefault(),function(){var e=c.map((function(e){return e.Id===g.Id?Object(d.a)(Object(d.a)({},e),m):e}));s(e),O()}(),k(!1))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[c,g,m,N]);var T={val:C,change_state:B,disabledAction:R};return Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},T)),Object(Te.jsx)("div",{className:"unitMaster",children:Object(Te.jsx)("div",{className:"unitMaster",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:Cc,overFlowScroll:!0,data:c,selectedTr:function(e){return function(e){I(e),k(!0)}(e)},Footer:!0,editStatus:N,deleteRow:function(){return function(){var e=c.filter((function(e){return e.Id!==g.Id}));e&&0!==e.length?s(e):(s([{}]),k(!0))}()},tblInputOnchange:function(e){return function(e){return O(Object(d.a)(Object(d.a)({},m),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},tableDate:function(e){},addLine:function(){}})})})})]})},_c=(n(438),[{header:"Applicable",field:"AttributeName",cell:"EditInput"},{header:"IsActive",field:"IsActive",cell:"checkbox"}]),Pc=[{header:"Size Code",field:"SizeCode",cell:"EditInput"},{header:"Code",field:"Code",cell:"EditInput"},{header:"Print Name",field:"PrintName",cell:"EditInput"},{header:"IsActive",field:"IsActive",cell:"checkbox"}],Rc=function(e){var t=e.pageNav,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],b=Object(a.useState)([]),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)([]),h=Object(o.a)(p,2),f=h[0],x=h[1],g=Object(a.useState)({}),I=Object(o.a)(g,2),y=I[0],w=I[1],N=Object(a.useState)(!0),k=Object(o.a)(N,2),A=k[0],S=k[1],C=Object(a.useState)(),D=Object(o.a)(C,2),_=D[0],P=D[1],B=Object(a.useState)(),M=Object(o.a)(B,2),T=M[0],E=M[1],L=Object(a.useState)({}),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)(!0),Q=Object(o.a)(U,2),V=Q[0],z=Q[1],H=Object(a.useState)(),W=Object(o.a)(H,2),K=W[0],J=W[1],Y=Object(a.useState)(),Z=Object(o.a)(Y,2),X=Z[0],$=Z[1],ee=Object(a.useState)([]),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),ce=Object(o.a)(re,2),se=ce[0],oe=(ce[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=11;break}return n=le(),O([{Id:n}]),x([{Id:n}]),E(!0),$(!0),J(),z(!0),P(),S(!0),e.abrupt("return",s(t));case 11:if("edit"!==t){e.next=17;break}return e.next=14,ie();case 14:return S(!0),z(!0),e.abrupt("return",s(t));case 17:if("view"!==t){e.next=21;break}return e.next=20,ie();case 20:return e.abrupt("return",s(t));case 21:if("refresh"!==t){e.next=31;break}return w(),S(!1),E(!1),O([]),z(!1),$(!1),x([]),e.abrupt("return",s(t));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.attributeMaster.toArray();case 2:return t=e.sent,e.next=5,v.attributeMasterDetails.toArray();case 5:n=e.sent,O(t),x(n),ae(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e="SO";return e+=Date.now()},de=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:if(t=e.sent,!(m.filter((function(e){return""===e.AttributeName})).length>0)){e.next=8;break}return e.abrupt("return",!1);case 8:return O([].concat(Object(R.a)(m),[{Id:t,AttributeName:"",IsActive:!1}])),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _&&_.Id,e.next=3,le();case 3:if(t=e.sent,!(f.filter((function(e){return""===e.SizeCode||""===e.Code})).length>0)){e.next=9;break}return e.abrupt("return",!1);case 9:return x([].concat(Object(R.a)(f),[{Id:t,SizeCode:"",Code:"",PrintName:"",IsActive:!1}])),G(),e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t),(t&&"view"===c||"edit"===c)&&((n=ne.filter((function(e){return e.AttributeId===t.Id})))&&n.length>0?x(n):(a=le(),x([{Id:a}])));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){"Enter"===e.key&&(e.preventDefault(),function(){var e=m.map((function(e){return e.Id===_.Id?Object(d.a)(Object(d.a)({},e),y):e}));O(e),w()}(),E(!1)),"Enter"===e.key&&(e.preventDefault(),function(){var e=f.map((function(e){return e.Id===K.Id?Object(d.a)(Object(d.a)({},e),q):e}));x(e),G()}(),$(!1))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m,_,K,f,y,q,X,T]);var Oe={val:c,change_state:oe,disabledAction:se};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Oe)),Object(Te.jsx)("div",{className:"unitMaster",children:Object(Te.jsxs)("div",{className:"row",style:{width:"100%"},children:[Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:_c,overFlowScroll:!1,data:m,selectedTr:function(e){return je(e)},Footer:!1,editColumn:A,editfunction:function(){E(!0)},editStatus:T,deleteRow:function(){return function(){var e=m.filter((function(e){return e.Id!==_.Id}));e&&0!==e.length?O(e):(O([{}]),E(!0))}()},tblInputOnchange:function(e){return function(e){return w(Object(d.a)(Object(d.a)({},y),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},tableDate:function(e){return ue(e)},addLine:function(){return de()},oncheck:function(e){return function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;return w(Object(d.a)(Object(d.a)({},y),{},Object(l.a)({},e.target.name,t))),t}(e)}})})}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:Pc,overFlowScroll:!1,data:f,selectedTr:function(e){return me(e)},Footer:!1,editColumn:V,editfunction:function(){$(!0)},editStatus:X,deleteRow:function(){return function(){var e=f.filter((function(e){return e.Id!==K.Id}));e&&0!==e.length?x(e):(x([{}]),$(!0))}()},tblInputOnchange:function(e){return function(e){return G(Object(d.a)(Object(d.a)({},q),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},tableDate:function(e){return!1},addLine:function(){return be()},oncheck:function(e){return function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;return G(Object(d.a)(Object(d.a)({},q),{},Object(l.a)({},e.target.name,t))),t}(e)}})})})]})})]})})},Bc=(n(439),function(e){var t=e.onlinestatus,n=e.pageNav,r={SeriesName:"",RestartSeries:"",DigitPadding:"",IsActive:!1,SeriesFieldDetail:[]},c={SeriesName:"",DigitPadding:""},s=Object(a.useState)(),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(r),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(c),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)(!1),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)([]),R=Object(o.a)(P,2),B=R[0],M=R[1],T=Object(a.useState)([]),E=Object(o.a)(T,2),L=E[0],F=E[1],q=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),G=Object(o.a)(q,2),U=G[0],Q=(G[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("view"!==n){e.next=5;break}return e.next=3,V();case 3:return f(r),e.abrupt("return",m(n));case 5:if("add"!==n){e.next=14;break}if(!t){e.next=13;break}return e.next=9,V();case 9:return f(r),e.abrupt("return",m(n));case 13:alert("you are not online please try again after some time when you online");case 14:if("refresh"!==n){e.next=19;break}return f(r),F([]),y(c),e.abrupt("return",m(n));case 19:"save"===n&&(a=Object.keys(I),s={},a.forEach((function(e){return s[e]=""===h[e]||null===h[e]||!0===I[e]})),y(s),Object.values(s).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):t?J():alert("you are not online please try again after some time when you online"));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.seriesMaster.toArray();case 2:return t=e.sent,e.next=5,v.seriesfieldMaster.toArray();case 5:n=e.sent,a=n&&n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{checked:!1,FieldValue:"",Seperator:null,Sno:0})})),F(a),M(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}return a=n.Id,"SeriesId",e.next=5,v.seriesMasterDetail.where("SeriesId").equals(a).toArray();case 5:r=e.sent,c=L&&L.map((function(e){var t=r.find((function(t){return t.FieldId===e.FieldId}));return t?Object(d.a)(Object(d.a)({},e),{},{checked:!0,FieldValue:t.FieldValue,Seperator:t.Seperator,Sno:parseInt(t.Sno)}):e})),s={SeriesName:n.SeriesName,RestartSeries:n.RestartSeries,DigitPadding:n.DigitPadding,IsActive:n.IsActive},f(s),F(c),_(!1),A(!1);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(e){if(""!==e.target.value){var t=e.target.getAttribute("data-valid");if(t)Me(e.target.value,t)&&(f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,e.target.value))),y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,!1))));else f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,e.target.value)))}else f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,e.target.value)))},W=function(e,t){if("Sno"===e.target.name)if(""!==e.target.value){if(Me(e.target.value,"number")){var n=L&&L.map((function(n){return n.FieldId===t.FieldId?Object(d.a)(Object(d.a)({},n),{},Object(l.a)({},e.target.name,parseInt(e.target.value))):n}));F(n)}}else{var a=L&&L.map((function(n){return n.FieldId===t.FieldId?Object(d.a)(Object(d.a)({},n),{},Object(l.a)({},e.target.name,e.target.value)):n}));F(a)}else{var r=L&&L.map((function(n){return n.FieldId===t.FieldId?Object(d.a)(Object(d.a)({},n),{},Object(l.a)({},e.target.name,e.target.value)):n}));F(r)}},K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(a=t.map((function(e){return{SeriesId:n.mid,FieldId:e.FieldId,FieldName:e.FieldName,FieldValue:e.FieldValue,Seperator:e.Seperator,Sno:parseInt(e.Sno)}})),v.seriesMasterDetail.bulkAdd(a).then((function(e){e&&(alert(n.msg),f(r),F([]),y(c),m("save"))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=L.filter((function(e){return!0===e.checked}))).length>0)){e.next=11;break}return n={SeriesName:h.SeriesName,RestartSeries:h.RestartSeries,DigitPadding:parseInt(h.DigitPadding),BranchId:"1",IsActive:h.IsActive,InactiveDate:"",CreatedBy:parseInt(localStorage.getItem("UserId")),CreatedByName:localStorage.getItem("fname"),CreatedOn:Ge(new Date),EditLog:"",alteredon:""},a=t.map((function(e){return{SeriesId:0,FieldId:e.FieldId,FieldName:e.FieldName,FieldValue:e.FieldValue,Seperator:e.Seperator,Sno:parseInt(e.Sno)}})),e.next=6,ze("/api/seriesmaster/",Object(d.a)(Object(d.a)({},n),{},{Id:0,SeriesFieldDetail:a}));case 6:r=e.sent,console.log(r,"mid"),r.mid>0&&null!==r.mid?v.seriesMaster.add(Object(d.a)(Object(d.a)({},n),{},{Id:r.mid})).then((function(e){e&&K(a,r)})):alert(r.msg,"statuscode:",r.statuscode),e.next=12;break;case 11:alert("please select atleast 1 Particulars");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){k&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),_(k)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[h,k,D,I]);var Y={val:j,change_state:Q,disabledAction:U};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Y)),Object(Te.jsxs)("div",{className:"unitMaster",children:[Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Series Name"})}),"view"===j||"edit"===j?Object(Te.jsx)(Hn.a,{options:B,open:D,onChange:function(e,t){return z(e,t)},getOptionLabel:function(e){return e.SeriesName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)({placeholder:"Press Ctrl + L",onFocus:function(){return A(!0)},onBlur:function(){A(!1),_(!1)}},e))}}):Object(Te.jsx)("input",{name:"SeriesName",type:"text","data-valid":"varCharSpace",value:h&&h.SeriesName,onChange:function(e){return H(e)},readOnly:"add"!==j,className:I&&!0===I.SeriesName?"error":""})]}),Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Restart Series No"})}),Object(Te.jsxs)("select",{name:"RestartSeries",onChange:function(e){return H(e)},value:h&&h.RestartSeries,children:[Object(Te.jsx)("option",{value:"null",children:"none"}),Object(Te.jsx)("option",{value:"Daily",children:"Daily"}),Object(Te.jsx)("option",{value:"Weekly",children:"Weekly"}),Object(Te.jsx)("option",{value:"Monthly",children:"Monthly"}),Object(Te.jsx)("option",{value:"Yearly",children:"Yearly"})]})]})]}),Object(Te.jsxs)("div",{className:"unitMaster",children:[Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Total Digit of Series No"})}),Object(Te.jsx)("input",{name:"DigitPadding",type:"text","data-valid":"number",onChange:function(e){return H(e)},value:h&&h.DigitPadding,className:I&&!0===I.DigitPadding?"error":"",readOnly:"add"!==j})]}),Object(Te.jsx)("div",{className:"margo",children:Object(Te.jsxs)("div",{className:"isActive",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"IsActive"})}),Object(Te.jsx)("input",{name:"IsActive",type:"checkbox",onChange:function(e){return function(e){f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,e.target.checked)))}(e)},checked:h&&h.IsActive,disabled:"add"!==j})]})})]}),Object(Te.jsx)("div",{className:"unitMaster",children:Object(Te.jsx)("div",{className:"tableBox",style:{width:"100%"},children:Object(Te.jsxs)("table",{children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Particulars"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Value"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Seprator"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"order"})})]})}),Object(Te.jsx)("tbody",{children:L.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",checked:e.checked,onChange:function(t){return function(e,t){var n=L&&L.map((function(n){return n.FieldId===t.FieldId?Object(d.a)(Object(d.a)({},n),{},{checked:e.target.checked}):n}));F(n)}(t,e)}})}),Object(Te.jsx)("td",{children:e.FieldName}),Object(Te.jsx)("td",{children:"add"===j&&!0===e.checked?Object(Te.jsx)("input",{onChange:function(t){return W(t,e)},type:"text",name:"FieldValue",value:e.FieldValue,style:{width:"100px"}}):e.FieldValue}),Object(Te.jsx)("td",{children:"add"===j&&!0===e.checked?Object(Te.jsxs)("select",{onChange:function(t){return W(t,e)},name:"Seperator",value:e.Seperator,style:{width:"100px"},children:[Object(Te.jsx)("option",{value:"",children:"none"}),Object(Te.jsx)("option",{value:"/",children:"/"}),Object(Te.jsx)("option",{value:"\\",children:"\\"}),Object(Te.jsx)("option",{value:"-",children:"-"}),Object(Te.jsx)("option",{value:"|",children:"|"})]}):e.Seperator}),Object(Te.jsx)("td",{children:"add"===j&&!0===e.checked?Object(Te.jsx)("input",{onChange:function(t){return W(t,e)},type:"text",name:"Sno",value:e.Sno,style:{width:"100px"}}):e.Sno})]},t)}))})]})})})]})})}),Mc=(n(440),function(e){var t=e.onlinestatus,n=e.pageNav,r={ssf:"",sname:"",voucherList:[],applyList:[],seriesId:""},c=Object(a.useState)({}),s=Object(o.a)(c,2),b=s[0],j=(s[1],Object(a.useState)()),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)(Object(d.a)(Object(d.a)({},r),{},{indentDate:new Date})),f=Object(o.a)(h,2),x=f[0],g=f[1],I=Object(a.useState)([]),y=Object(o.a)(I,2),w=y[0],N=y[1],k=Object(a.useState)(!1),A=Object(o.a)(k,2),S=A[0],C=A[1],D=Object(a.useState)(!1),_=Object(o.a)(D,2),P=_[0],B=_[1],M=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),T=Object(o.a)(M,2),E=T[0],L=(T[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=9;break}if(!t){e.next=8;break}return e.next=4,F();case 4:return g(r),e.abrupt("return",p(n));case 8:alert("you are not online please try again after some time when you online");case 9:if("edit"!==n){e.next=14;break}return e.next=12,F();case 12:return g(r),e.abrupt("return",p(n));case 14:if("view"!==n){e.next=19;break}return e.next=17,F();case 17:return g(r),e.abrupt("return",p(n));case 19:if("save"===n&&(x.seriesId?t?U():alert("you are not online please try again after some time when you online"):alert("Please select Series Name")),"refresh"!==n){e.next=23;break}return g(r),e.abrupt("return",p(n));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.seriesMaster.toArray();case 2:t=e.sent,N(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return B(!1),C(!1),e.next=5,v.VoucherList.toArray();case 5:(n=e.sent)&&(a=n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{checked:!1,date:new Date})})),g(Object(d.a)(Object(d.a)({},x),{},{sname:t.SeriesName,voucherList:a,seriesId:void 0===t.Id||""===t.Id?t.id:t.Id})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.checked){e.next=8;break}return a=x.voucherList.map((function(e){return e.Id===n.Id?Object(d.a)(Object(d.a)({},e),{},{checked:t.target.checked}):e})),e.next=4,v.seriesApply.where("VoucherId").equals(n.Id).toArray();case 4:r=e.sent,g(Object(d.a)(Object(d.a)({},x),{},{voucherList:a,applyList:[].concat(Object(R.a)(x.applyList),Object(R.a)(r))})),e.next=12;break;case 8:c=x.voucherList.map((function(e){return e.Id===n.Id?Object(d.a)(Object(d.a)({},e),{},{checked:t.target.checked}):e})),s=x.applyList.filter((function(e){return e.VoucherId!==n.Id})),console.log(s,"uncheckList"),g(Object(d.a)(Object(d.a)({},x),{},{voucherList:c,applyList:s}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=x.voucherList.filter((function(e){return!0===e.checked}))).length>0)){e.next=32;break}if(!((n=t.map((function(e){return{Id:0,SeriesId:x.seriesId,VoucherId:e.Id,VoucherName:e.VoucherName,ItemId:null,ApplicableFrom:Q(e.date),BranchId:1,CreatedBy:localStorage.getItem("UserId"),CreatedByName:localStorage.getItem("fname"),CreatedOn:Q(new Date),EditLog:null,alteredon:""}}))).length>0)){e.next=30;break}a=[],c=Object(Jn.a)(n),e.prev=6,c.s();case 8:if((s=c.n()).done){e.next=16;break}return o=s.value,e.next=12,ze("/api/SeriesApply/",o);case 12:(u=e.sent).mid>0&&null!==u.mid?a.push(Object(d.a)(Object(d.a)({},o),{},{Id:u.mid})):alert(u.msg,"statuscode:",u.statuscode);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),c.e(e.t0);case 21:return e.prev=21,c.f(),e.finish(21);case 24:return e.next=26,Promise.all(a);case 26:if(e.sent,!a){e.next=30;break}return e.next=30,v.seriesApply.bulkAdd(a).then((function(e){e&&(alert("data save successfuly"),g(r),L("refresh"))}));case 30:e.next=33;break;case 32:alert("please select atleast one voucher");case 33:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),Q=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[a,["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r].join("-")};Object(a.useEffect)((function(){var e=function(e){S&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),B(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[x,b,S]);var V={val:O,change_state:L,disabledAction:E};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},V)),Object(Te.jsx)("div",{className:"unitMaster",children:Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Select Series for"})}),"view"===O||"edit"===O||"add"===O?Object(Te.jsxs)("select",{name:"ssf",value:x.ssf,onChange:function(e){return function(e){g(Object(d.a)(Object(d.a)({},x),{},Object(l.a)({},e.target.name,e.target.value)))}(e)},children:[Object(Te.jsx)("option",{value:"",children:"Select"}),Object(Te.jsx)("option",{value:"1",children:"Item (Batch No.)"}),Object(Te.jsx)("option",{value:"2",children:"Item (Seiral No.)"}),Object(Te.jsx)("option",{value:"3",children:"Transaction"}),Object(Te.jsx)("option",{value:"4",children:"Master (Item)"}),Object(Te.jsx)("option",{value:"5",children:"Master (Party)"})]}):Object(Te.jsx)("select",{children:Object(Te.jsx)("option",{value:"",children:"Select"})})]})}),Object(Te.jsx)("div",{className:"unitMaster",children:Object(Te.jsxs)("div",{className:"marg",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Series Name"})}),"3"===x.ssf?Object(Te.jsx)(Hn.a,{options:w,open:P,onChange:function(e,t){return q(t)},getOptionLabel:function(e){return e.SeriesName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press Ctrl + L",onFocus:function(){return C(!0)},onBlur:function(){C(!1)}}))}}):Object(Te.jsx)("input",{})]})}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w50",children:Object(Te.jsx)("div",{className:"left_tbl",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsxs)("table",{children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Apply on"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Name"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Abbreviation"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Applycable form"})})]})}),Object(Te.jsx)("tbody",{children:x.voucherList&&x.voucherList.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:t+1}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",checked:e.checked,onChange:function(t){return G(t,e)}})}),Object(Te.jsx)("td",{children:e.VoucherName}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{children:Object(Te.jsx)(pa.a,{minDate:new Date,selected:e.date,onChange:function(t){!function(e,t){var n=x.voucherList.map((function(n){return n.Id===t?Object(d.a)(Object(d.a)({},n),{},{date:e}):n}));g(Object(d.a)(Object(d.a)({},x),{},{voucherList:n}))}(t,e.Id)}})})]},t)}))})]})})})}),Object(Te.jsx)("div",{className:"col w50",children:Object(Te.jsx)("div",{className:"left_tbl",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsxs)("table",{children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Abbr"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Applycable form"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Applied Series"})})]})}),Object(Te.jsx)("tbody",{children:x.applyList&&x.applyList.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:t+1}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{readOnly:"true",value:e.ApplicableFrom})}),Object(Te.jsx)("td",{children:e.VoucherName})]})}))})]})})})})]})]})})}),Tc=(n(441),function(e){var t=e.pageNav,n={customerList:[],creditNOList:[],mainObj:{creditnoteno:"",creditnotedate:"",partyid:"",customerName:"",creditnoteamount:"",creditnoterefundamount:"",remarks:"",createdby:localStorage.getItem("UserId"),amountadjusted:"",new:1,update:0}},r={creditnoteno:"",creditnotedate:"",customerName:"",creditnoteamount:"",creditnoterefundamount:""},c=Object(a.useState)(),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(Object(d.a)(Object(d.a)({},n),{},{mainObj:Object(d.a)(Object(d.a)({},n.mainObj),{},{creditnotedate:new Date})})),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)(!1),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),T=Object(o.a)(M,2),E=T[0],L=(T[1],Object(a.useState)(!1)),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)([]),Q=Object(o.a)(U,2),V=Q[0],z=Q[1],H=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}z(n),G(!0),e.next=17;break;case 9:return e.next=11,v.creditNoteRefund.toArray();case 11:return a=e.sent,r={series:"",sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,K(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=14;break}return e.next=6,v.creditNoteRefund.toArray();case 6:return c=e.sent,s=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:c}),e.next=10,Ve(s,t.formid);case 10:o=e.sent,K(o),e.next=22;break;case 14:return e.next=16,v.creditNoteRefund.toArray();case 16:return u=e.sent,l=Object(d.a)(Object(d.a)({},r),{},{dbcount:u}),e.next=20,Ve(l,t.formid);case 20:b=e.sent,K(b);case 22:G(!1);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("LedgerType").equals(1).toArray().then().catch((function(e){return console.log(e)}));case 2:n=e.sent,a=n&&n.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})),h(Object(d.a)(Object(d.a)({},p),{},{customerList:a,mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},{creditnoteno:t})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.target.getAttribute("data-valid");if(t){var n=Me(e.target.value,t);n?(h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},Object(l.a)({},e.target.name,e.target.value))})),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,!1)))):(console.log("dd",n),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,!0))))}else h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},Object(l.a)({},e.target.name,e.target.value))}))},Y=function(){h(Object(d.a)(Object(d.a)({},n),{},{mainObj:Object(d.a)(Object(d.a)({},n.mainObj),{},{creditnotedate:new Date})})),I(r),k(!1)},Z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.creditNoteRefund.toArray().then().catch((function(e){return console.log(e)}));case 2:t=e.sent,h(Object(d.a)(Object(d.a)({},p),{},{creditNOList:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,v.customerMaster.where("Id").equals(t.partyid).first().then().catch((function(e){return console.log(e)}));case 3:n=e.sent,h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},t),{},{customerName:n.PartyName})}));case 5:B(!1),D(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e,t,n=((e=p.mainObj)[t="customerName"],Object($n.a)(e,[t].map(Or.a)));N?v.creditNoteRefund.put(Object(d.a)(Object(d.a)({},n),{},{update:1})).then((function(e){e&&(alert("data update successfully"),Y(),j("save"))})).catch((function(e){return console.log(e)})):v.creditNoteRefund.add(Object(d.a)(Object(d.a)({},n),{},{createdon:new Date})).then((function(e){e&&(alert("data add successfully"),Y(),j("save"))})).catch((function(e){return console.log(e)}))};Object(a.useEffect)((function(){console.log(g,"dfgfgf");var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),D(R))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[p,R,g]);var ee={val:b,change_state:function(e){switch(e){case"add":return H(),k(!1),void j(e);case"edit":return Z(),k(!0),void j(e);case"view":return j(e),Z(),void k(!1);case"refresh":return Y(),void j(e);case"save":var t=Object.keys(g),n={};return t.forEach((function(e){return n[e]=""===p.mainObj[e]})),I(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):$());default:return e}},disabledAction:E};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"CreditNoteRefund",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ee)),Object(Te.jsx)("div",{className:"CreditNoteRefundIn",children:Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===g.creditnoteno?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Credit Note No"})}),"edit"===b||"view"===b?Object(Te.jsx)(Hn.a,{open:"creditNoteNo"===C,options:p.creditNOList,onChange:function(e,t){return X(t)},getOptionLabel:function(e){return e.creditnoteno.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return B("creditNoteNo")},onBlur:function(){B(""),D("")}}))}}):Object(Te.jsx)("input",{type:"text",value:p.mainObj.creditnoteno,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===g.creditnotedate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Credit Note Date"})}),Object(Te.jsx)(pa.a,{selected:p.mainObj.creditnotedate,minDate:p.mainObj.creditnotedate,maxDate:p.mainObj.creditnotedate})]})}),Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===g.customerName?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Customer Name"})}),"add"===b?Object(Te.jsx)(Hn.a,{open:"customer"===C,options:p.customerList,onChange:function(e,t){return function(e){e&&(h(Object(d.a)(Object(d.a)({},p),{},{mainObj:Object(d.a)(Object(d.a)({},p.mainObj),{},{partyid:e.Id,customerName:e.PartyName})})),I(Object(d.a)(Object(d.a)({},g),{},{customerName:!1})),B(!1),D(!1))}(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return B("customer")},onBlur:function(){B(""),D("")}}))}}):Object(Te.jsx)("input",{type:"text",value:p.mainObj.customerName,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===g.creditnoteamount?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Credit Note Amount"})}),Object(Te.jsx)("input",{type:"text",name:"creditnoteamount",value:p.mainObj.creditnoteamount,"data-valid":"number",onChange:"view"===b?function(){return!1}:function(e){return J(e)}})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===g.creditnoterefundamount?"formBox error":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Refund Amount"})}),Object(Te.jsx)("input",{type:"text",name:"creditnoterefundamount",value:p.mainObj.creditnoterefundamount,onChange:"view"===b?function(){return!1}:function(e){return J(e)},"data-valid":"number"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Adjustment Amount"})}),Object(Te.jsx)("input",{type:"text",value:p.mainObj.amountadjusted,readOnly:!0})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-2 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remarks",placeholder:"Write remarks here",onChange:"view"===b?function(){return!1}:function(e){return J(e)},value:p.mainObj.remarks})]})})})]})}),q&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:V.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return W(t,e)},children:e.VoucherName})}))})]})})]})})});function Ec(e){return e>0?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e}var Lc=[{Header:"Product Name",accessor:"ItemName",disableFilters:!1,sticky:"left"},{Header:"Product Code",accessor:"ItemCode",sticky:"left"},{Header:"Stock",accessor:"stock",sticky:"left"},{Header:"Qty",accessor:"quantity",Cell:ua,sticky:"right"},{Header:"MRP",accessor:"mrp",right:!0},{Header:"Sale Price",accessor:"Rate",Cell:ua,sticky:"right"},{Header:"Gross Amount",accessor:"grossamount",sticky:"right"},{Header:"Auto Discount (%)",accessor:"autodiscountper",sticky:"right"},{Header:"Auto Discount Amount",accessor:"autodiscountamount",sticky:"right"},{Header:"Manual Discount (%)",accessor:"manualdiscountper",Cell:ua,sticky:"right"},{Header:"Manual Discount Amount",accessor:"manualdiscountamount",sticky:"right"},{Header:"Amount",accessor:"amount",sticky:"right",right:!0,Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:Ec(e.value)})}},{Header:"Item Remark",accessor:"remark",Cell:ua},{Header:"IGST Rate %",accessor:"igstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:e.value})}},{Header:"IGST Amount",accessor:"igst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:Ec(e.value)})}},{Header:"CGST Rate %",accessor:"cgstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:e.value})}},{Header:"CGST Amount",accessor:"cgst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:Ec(e.value)})}},{Header:"SGST Rate %",accessor:"sgstRate",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:Ec(e.value)})}},{Header:"SGST Amount",accessor:"sgst",Cell:function(e){return Object(Te.jsx)("div",{style:{textAlign:"right"},children:Ec(e.value)})}},{Header:"Scheme Code",accessor:"schemeCode"},{Header:"Sale Order",accessor:"SoNo"}],Fc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("UserId"),e.next=4,v.salesInvoiceWithSO.where({ishold:"false"}).reverse().toArray();case 4:return n=e.sent,a=n.filter((function(e){return e.createdby===t})),e.next=8,v.saleInvoiceDetailWithSO.toArray();case 8:return r=e.sent,e.abrupt("return",{salesInvoice:a,saleInvoiceDetail:r});case 12:e.prev=12,e.t0=e.catch(0),console.log("getInvoiceDetails error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),qc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("UserId"),e.next=4,v.salesInvoiceWithSO.where({ishold:"false"}).reverse().toArray();case 4:return n=e.sent,a=n.filter((function(e){return e.createdby===t})),e.next=8,v.saleInvoiceDetailWithSO.toArray();case 8:return r=e.sent,e.abrupt("return",{salesInvoice:a,saleInvoiceDetail:r});case 12:e.prev=12,e.t0=e.catch(0),console.log("getInvoiceDetails error",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Gc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoiceWithSO.where("id").equals(t).last((function(e){return e})).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=4;break}return e.next=3,v.saleInvoiceDetailWithSO.where("invoiceid").equals(t.id).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hc(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:t.product=e.sent;case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Uc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoiceWithSO.orderBy("id").last((function(e){return e})).then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id){e.next=5;break}return n=t.Id>0?t.Id:t.id,e.next=4,v.saleInvoiceDetailWithSO.where("invoiceid").equals(n).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hc(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:t.product=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return t=e.sent,e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Qc=function(e,t,n){return e.map((function(e){var a={invoiceid:t,itemid:e.ItemId,ItemName:e.ItemName,ItemCode:e.ItemCode,HsnId:e.HsnId,quantity:e.quantity,mrp:e.mrp,saleprice:e.Rate,grossamount:e.grossamount,taxper:0,totaltaxamount:e.totaltaxamount,finalperrate:0,totalnetamount:e.amount,lotno:"",createdby:1,createdon:"new"===n?new Date:e.createdon,editlog:"",isvatitem:!1,addtaxrate:0,addtaxamount:0,surchargerate:0,surchargeamount:0,taxamount:0,istaxinclusive:e.IsTaxInclusive,altqty:0,salepersonid:0,changeindiscount:0,autodiscountper:0,autodiscountamount:0,manualdiscountper:e.manualdiscountper,manualdiscountamount:e.manualdiscountamount,istaxcalculatebeforediscount:!1,lotserialid:0,itemremark:e.remark,discount_slab_detail_id:0,isautodiscountonper:!1,isautodiscountonamount:!1,isaltrate:0,conversion:e.Conversion,denominator:e.Denominator,isschemeitem:0,hsnclassificationid:0,igstrate:e.igstRate,cgstrate:e.cgstRate,sgstrate:e.sgstRate,igstamount:e.igst,cgstamount:e.cgst,sgstamount:e.sgst,manualchangesaleprice:!1,schemecode:e.schemecode,SoNo:e.SoNo,SoId:e.SoId,SoDetailId:e.SoDetailId};return"new"!==n?Object(d.a)(Object(d.a)({},a),{},{id:e.id}):a}))},Vc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n,a){var r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoiceWithSO.add(Object(d.a)(Object(d.a)({},t),{},{new:1}));case 3:if(!((r=e.sent)>0)){e.next=11;break}if(!(n&&n.length>0)){e.next=11;break}return n=Qc(n,r,"new"),e.next=9,v.saleInvoiceDetailWithSO.bulkAdd(n);case 9:c=n.map((function(e){return{formId:a,trId:r,ItemId:e.itemid,qty:e.quantity,type:"outqty"}})),et(c);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,a){return e.apply(this,arguments)}}(),zc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n,a){var r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoiceWithSO.put(Object(d.a)(Object(d.a)({},t),{},{update:1}));case 3:return r=Qc(n,0===t.Id||""===t.Id?t.id:t.Id,"edit"),e.next=6,v.saleInvoiceDetailWithSO.bulkPut(r);case 6:c=n.map((function(e){return{formId:a,trId:0===t.Id||t.Id?t.id:t.Id,ItemId:e.itemid,qty:e.quantity,type:"outqty"}})),tt(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Hc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=3;break}return t.map(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.itemMaster.get({ItemId:t.itemid});case 2:n=e.sent,t.ItemName=n&&n.ItemName,t.ItemCode=n&&n.ItemCode;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wc=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.salesInvoiceWithSO.where("id").equals(t).first().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Id>0?t.Id:t.id,e.next=3,v.saleInvoiceDetailWithSO.where("invoiceid").equals(n).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hc(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return t.product=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function Kc(e,t){return Jc.apply(this,arguments)}function Jc(){return(Jc=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s,o,u,l,d,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.ItemId,r=t.SoNo,c=t.SoId,s=t.SoDetailId,o={},e.t0=a,!e.t0){e.next=11;break}return e.next=10,v.itemMaster.get({ItemId:a});case 10:e.t0=e.sent;case 11:if(u=e.t0,e.t1=u&&u.GSTClassification&&u.GSTClassification.length>0&&u.GSTClassification[0].HsnId,!e.t1){e.next=17;break}return e.next=16,v.hsnMaster.get({Id:u.GSTClassification[0].HsnId});case 16:e.t1=e.sent;case 17:if(l=e.t1,e.t2=a,!e.t2){e.next=23;break}return e.next=22,v.itemTaxStructure.get({itemid:a});case 22:e.t2=e.sent;case 23:if(d=e.t2,!(l&&Object.keys(l).length>0)){e.next=56;break}return(o=u).amount=0,o.HsnId=u.GSTClassification[0].HsnId,o.salePrice=0,o.mrp=0,o.quantity=0,o.cgstRate=0,o.sgstRate=0,o.igstRate=0,o.remark="",o.schemecode=0,o.Rate=0,o.manualdiscountper=0,o.manualdiscountamount=0,o.istaxinclusive=d&&d.istaxinclusive,o.igstRate=l.IGST[0]&&l.IGST[0].IgstTaxRate?l.IGST[0].IgstTaxRate:0,o.sgstRate=l.IGST[0].CGST[0]&&l.IGST[0].CGST[0].SgstTaxRate?l.IGST[0].CGST[0].SgstTaxRate:0,o.cgstRate=l.IGST[0].CGST[0]&&l.IGST[0].CGST[0].CgstTaxRate?l.IGST[0].CGST[0].CgstTaxRate:0,b=0,e.next=46,v.getItemStock.where("itemid").equals(a).toArray().then((function(e){e&&e.length>0&&e.map((function(e){return b=e.mrp,e}))}));case 46:return e.next=48,Je(a);case 48:return o.stock=e.sent,o.mrp=b,o.SoNo=r,o.SoDetailId=s,o.SoId=c,e.abrupt("return",o);case 56:return e.abrupt("return",{});case 57:e.next=62;break;case 59:e.prev=59,e.t3=e.catch(0),console.log("error itemmasterdetail ",e.t3.message);case 62:case"end":return e.stop()}}),e,null,[[0,59]])})))).apply(this,arguments)}var Yc=[{header:"SoNo",field:"SoNo"},{header:"SoDate",field:"SoDate"}],Zc=function(e){var t=e.pageNav,n={bState:"",bCountry:"",bAddress:"",bGSTN:"",sState:"",sCountry:"",sAddress:"",sGSTN:""},r=Object(a.useRef)(),c=Object(a.useState)(n),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)([]),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(!1),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)([]),S=Object(o.a)(A,2),C=S[0],D=(S[1],Object(a.useState)(!1)),_=Object(o.a)(D,2),P=_[0],B=_[1],M=Object(a.useState)(null),T=Object(o.a)(M,2),E=(T[0],T[1]),L=Object(a.useState)([]),F=Object(o.a)(L,2),q=F[0],G=F[1],U=Object(a.useState)(""),Q=Object(o.a)(U,2),V=Q[0],z=Q[1],H=Object(a.useState)(""),W=Object(o.a)(H,2),K=W[0],J=W[1],Y=Object(a.useState)(0),Z=Object(o.a)(Y,2),X=Z[0],$=Z[1],ee=Object(a.useState)({id:"",Id:0}),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(),ce=Object(o.a)(re,2),se=ce[0],oe=ce[1],ie=Object(a.useState)(),ue=Object(o.a)(ie,2),le=ue[0],de=ue[1],be=Object(a.useState)(!1),je=Object(o.a)(be,2),me=je[0],Oe=je[1],pe=Object(a.useState)(!1),he=Object(o.a)(pe,2),fe=he[0],xe=he[1],ve=Object(a.useState)(""),ge=Object(o.a)(ve,2),Ie=ge[0],ye=ge[1],we=Object(a.useState)([]),Ne=Object(o.a)(we,2),ke=Ne[0],Ae=Ne[1],Se=Object(a.useState)(!1),Ce=Object(o.a)(Se,2),De=Ce[0],_e=Ce[1],Pe=Object(a.useState)([]),Re=Object(o.a)(Pe,2),Be=Re[0],Me=Re[1],Ee=Object(a.useState)({totalQty:0,mrpValue:0,grossAmount:0,totalDiscount:0,totalTax:0,totalAmount:0,totalDiscountPerc:0,amountDiscPerc:0,roundOff:0,finalAmount:0,receivedAmount:0,balanceAmount:0,cashReceived:0,tender:0,igstAmount:0,sgstAmount:0,cgstAmount:0}),Le=Object(o.a)(Ee,2),Fe=Le[0],qe=Le[1],Ge=Object(a.useState)(null),ze=Object(o.a)(Ge,2),He=ze[0],We=ze[1],Ye=Object(a.useState)(),Ze=Object(o.a)(Ye,2),Xe=Ze[0],$e=Ze[1],et=Object(a.useState)(""),tt=Object(o.a)(et,2),at=tt[0],rt=tt[1],ct=Object(a.useState)(!1),st=Object(o.a)(ct,2),it=st[0],ut=st[1],lt=Object(a.useState)([]),dt=Object(o.a)(lt,2),bt=dt[0],jt=dt[1],mt=Object(a.useState)(null),Ot=Object(o.a)(mt,2),pt=Ot[0],ht=Ot[1],ft=Object(a.useState)({mobileError:"",salesPerson:""}),xt=Object(o.a)(ft,2),vt=xt[0],gt=xt[1],It=Object(a.useState)(null),yt=Object(o.a)(It,2),wt=(yt[0],yt[1]),Nt=Object(a.useState)(""),kt=Object(o.a)(Nt,2),At=kt[0],St=kt[1],Ct=Object(a.useState)(""),Dt=Object(o.a)(Ct,2),_t=Dt[0],Pt=Dt[1],Rt=Object(a.useState)({}),Bt=Object(o.a)(Rt,2),Mt=(Bt[0],Bt[1]),Tt=Object(a.useState)([]),Et=Object(o.a)(Tt,2),Lt=Et[0],Ft=Et[1],qt=Object(a.useState)(!1),Gt=Object(o.a)(qt,2),Ut=(Gt[0],Gt[1]),Qt=Object(a.useState)(null),Vt=Object(o.a)(Qt,2),zt=Vt[0],Ht=Vt[1],Wt=Object(a.useState)(""),Kt=Object(o.a)(Wt,2),Jt=Kt[0],Yt=Kt[1],Zt=Object(a.useState)(""),Xt=Object(o.a)(Zt,2),$t=Xt[0],en=Xt[1],tn=Object(a.useState)({seriesId:"",voucherId:""}),nn=Object(o.a)(tn,2),an=nn[0],rn=nn[1],cn=Object(a.useState)(!1),sn=Object(o.a)(cn,2),on=sn[0],un=sn[1],ln=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),dn=Object(o.a)(ln,2),bn=dn[0],jn=(dn[1],Object(a.useState)(!1)),mn=Object(o.a)(jn,2),On=mn[0],pn=mn[1],hn=Object(a.useState)([]),fn=Object(o.a)(hn,2),xn=fn[0],vn=fn[1],gn=Object(a.useState)({slpName:"",slpId:null,slpdropdown:!0}),In=Object(o.a)(gn,2),yn=In[0],wn=In[1],Nn=Object(a.useState)({salesInvoice:[],saleInvoiceDetail:[]}),kn=Object(o.a)(Nn,2),An=kn[0],Sn=kn[1],Cn=Object(a.useState)([]),Dn=Object(o.a)(Cn,2),_n=Dn[0],Pn=Dn[1],Rn=Object(a.useState)(""),Bn=Object(o.a)(Rn,2),Mn=Bn[0],Tn=Bn[1],En=Object(a.useState)([]),Ln=Object(o.a)(En,2),Fn=Ln[0],qn=Ln[1],Gn=Object(a.useState)(""),Un=Object(o.a)(Gn,2),Qn=Un[0],Vn=Un[1],Kn=Object(a.useState)(null),Yn=Object(o.a)(Kn,2),Xn=Yn[0],$n=Yn[1],ea=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.stateMaster.toArray();case 2:(t=e.sent)&&h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ta=function(e){if("bState"===e.target.name)if(""===e.target.value){var t;j(Object(d.a)(Object(d.a)({},b),{},(t={},Object(l.a)(t,e.target.name,""),Object(l.a)(t,"bCountry",""),t)))}else{var n,a=p.find((function(t){return t.StateId===parseInt(e.target.value)}));j(Object(d.a)(Object(d.a)({},b),{},(n={},Object(l.a)(n,e.target.name,e.target.value),Object(l.a)(n,"bCountry",a.CountryId),n)))}else if("sState"===e.target.name)if(""===e.target.value){var r;j(Object(d.a)(Object(d.a)({},b),{},(r={},Object(l.a)(r,e.target.name,""),Object(l.a)(r,"sCountry",""),r)))}else{var c,s=p.find((function(t){return t.StateId===parseInt(e.target.value)}));j(Object(d.a)(Object(d.a)({},b),{},(c={},Object(l.a)(c,e.target.name,e.target.value),Object(l.a)(c,"sCountry",s.CountryId),c)))}else j(Object(d.a)(Object(d.a)({},b),{},Object(l.a)({},e.target.name,e.target.value)))};Object(a.useEffect)((function(){!function(){var e=Da(1,q);qe((function(){return Object(d.a)({},e.footer)})),G(e.products)}()}),[b.bState,b.sState]);var na=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fc();case 2:t=e.sent,Sn(Object(d.a)({},t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),aa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qc();case 2:t=e.sent,Sn(Object(d.a)({},t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ra=Object(a.useState)(null),ca=Object(o.a)(ra,2),sa=ca[0],oa=ca[1],ia=Object(a.useState)({billSeries:"N/A",debitCard:"N/A",creditCard:"N/A",advAmount:"N/A",totalQty:"N/A",couponAmount:"N/A",otherAmount:"N/A",cashAmount:"N/A",billDate:"N/A",netAmount:"N/A",totalMrp:"N/A"}),ua=Object(o.a)(ia,2),la=ua[0],da=ua[1],ba=Object(a.useState)({}),ja=Object(o.a)(ba,2),ma=ja[0],Oa=ja[1],fa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesPersonMaster.toArray();case 2:(t=e.sent)&&vn(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==t){e.next=12;break}return xe(!0),un(!1),Sa(),ga(),Ia(),ea(),ya(),fa(),Ha(),ht(new Date),e.abrupt("return",rt(t));case 12:if("edit"!==t){e.next=23;break}return un(!1),ea(),aa(),ga(),Ia(),fa(),Ha(),pn(!0),wn(Object(d.a)(Object(d.a)({},yn),{},{slpdropdown:!1})),e.abrupt("return",rt(t));case 23:if("view"!==t){e.next=30;break}return ea(),na(),Ha(),wn(Object(d.a)(Object(d.a)({},yn),{},{slpdropdown:!1})),pn(!0),e.abrupt("return",rt(t));case 30:if("save"===t&&(P?alert("This bill already canceled you can not edit it."):Ua("save")),"refresh"!==t){e.next=37;break}return pn(!1),un(!1),xe(!1),Ha(),e.abrupt("return",rt(t));case 37:if("print"!==t){e.next=40;break}return $a(),e.abrupt("return");case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),va=Object(a.useMemo)((function(){return Lc}),[]),ga=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(531);case 2:if(!e.sent){e.next=8;break}return e.next=6,v.billingType.toArray().then().catch((function(e){return console.log(e)}));case 6:t=e.sent,Pn(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ia=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(523);case 2:if(!e.sent){e.next=8;break}return e.next=6,v.Influencer.toArray().then().catch((function(e){return console.log(e)}));case 6:t=e.sent,qn(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ya=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.SaleOrder.toArray();case 2:(t=e.sent)&&(n=Object(R.a)(new Set(t.map((function(e){return e.PartyId})))),a=n.map((function(e,n){return t.find((function(t){return t.PartyId===e}))})),Ft(a.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function wa(){return(wa=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wa();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ka=function(e){var t="",n="",a="";try{e&&(n=("0"+((t=new Date(e)).getMonth()+1)).slice(-2),a=("0"+t.getDate()).slice(-2),t=[a,n,t.getFullYear()].join("-"))}catch(vt){}return t},Aa=function(e){K&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),z(K))),"F9"===e.key&&(e.preventDefault(),Xe&&qa(Xe))},Sa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=18;break}if(!(n.length>0)){e.next=9;break}jt(n),ut(!0),e.next=18;break;case 9:return e.next=11,v.salesInvoiceWithSO.where("seriesid").equals(0).toArray();case 11:return a=e.sent,r=a.length>0?a.filter((function(e){return"true"!==e.ishold})):[],c={series:"",seriesId:0,sCount:0,digit:5,dbcount:r},e.next=16,Ve(c,t.formid);case 16:s=e.sent,Ht(s);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ca=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b,j,m;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=23;break}if(""!==r.seriesId){e.next=10;break}return e.next=7,v.salesInvoiceWithSO.where("seriesid").equals(0).toArray();case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,v.salesInvoiceWithSO.where("seriesid").equals(r.seriesId).toArray();case 12:e.t0=e.sent;case 13:return c=e.t0,s=c.length>0?c.filter((function(e){return"true"!==e.ishold})):[],o=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:s}),e.next=18,Ve(o,t.formid);case 18:u=e.sent,Ht(u),rn({seriesId:r.seriesId,voucherId:r.voucherId}),e.next=40;break;case 23:if(""!==r.seriesId){e.next=29;break}return e.next=26,v.salesInvoiceWithSO.where("seriesid").equals(0).toArray();case 26:e.t1=e.sent,e.next=32;break;case 29:return e.next=31,v.salesInvoiceWithSO.where("seriesid").equals(r.seriesId).toArray();case 31:e.t1=e.sent;case 32:return l=e.t1,b=l.length>0?l.filter((function(e){return"true"!==e.ishold})):[],j=Object(d.a)(Object(d.a)({},r),{},{dbcount:b}),e.next=37,Ve(j,t.formid);case 37:m=e.sent,Ht(m),rn({seriesId:r.seriesId,voucherId:r.voucherId});case 40:ut(!1);case 41:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return function(){wa.apply(this,arguments)}(),window.addEventListener("keydown",Aa),function(){window.removeEventListener("keydown",Aa)}}),[K,V,Xe,fe]);var Da=function(e,t,n){try{if(e>0){var a,r=0,c=0,s=0,o=0,i=0,u=0,l=0,d=0,j=0,m=0,O=0,p=0,h=0,f=0,x=!1,v=0,g=[],I=0,y=0,w=0,N=q,k=0,A=0,S=0,C=0,D=0,_=0,P=0,B=0,M=0,T=0,E=0,L=0,F=0,G=0,U=0,Q=0;g=Array.isArray(t)?t:[t];var V=Array.isArray(t)?t:[t],z=N.find((function(t){return t.ItemId===e}));"new"!==n||z&&Object.keys(z).length>0?"new"===n&&z&&Object.keys(z).length>0&&(g=N):g=[].concat(Object(R.a)(N),Object(R.a)(V)),g=g.map((function(t){return t=_a(t,"new"===n,e,N),u=b.sState===b.bState&&t.sgstRate>0?Ma(t.sgstRate):0,d=b.sState===b.bState&&t.cgstRate>0?Ma(t.cgstRate):0,m=b.sState!==b.bState&&t.igstRate>0?Ma(t.igstRate):0,I=t.quantity>0?parseInt(t.quantity):"",y=t.mrp>0?Ma(t.mrp):0,r=t.Rate>0?Ma(t.Rate):y,c=t.manualdiscountper>0?Ma(t.manualdiscountper):0,f=I*Ma(r),v=Ma(f)*Ma(c)/100,Ma(f)*Ma(0)/100,s=Ma(c)+Ma(0),x=t.istaxinclusive,o=Ma(f)*Ma(s)/100,h=x?Pa(f,o,d,u,m):f,i=Ma(h)-Ma(o),l=Ra(u,x?h:i),j=Ra(d,x?h:i),O=Ra(m,x?h:i),p=Ma(l)+Ma(j)+Ma(O),w=Ma(i)+Ma(p),console.log(S,"quantity"),S+=""===I?0:I,C+=Ma(y)*I,E+=Ma(w),B+=Ma(o),M+=Ma(p),D+=Ma(l),_+=Ma(j),P+=Ma(O),L+=Ma(h),F+=0,G+=0,U+=0,Q+=0,t.quantity=I,t.mrp=y,t.grossamount=Ba(r*I),t.Rate=Ba(r),t.amount=Ba(w),t.cgst=Ba(j),t.sgst=Ba(l),t.igst=Ba(O),t.totaltaxamount=Ba(j+l+O),t.manualdiscountamount=Ba(v),t})),C=Ba(C),L=Ba(L),B=Ba(B),M=Ba(M),E=Ba(E),A=Fe.totalDiscountPerc>0?Ma(Fe.totalDiscountPerc)*Ma(E)/100:0;var H=Ma(E)-Ma(A);return k=H>0?Ea(H):0,T=H+Ma(k),T=Ba(T),a=Ba(Fe.totalDiscountPerc),A=Ba(A),k=Ba(k),T=Ba(T),F=Ba(F),G=Ba(G),U=Ba(U),D=Ba(D),_=Ba(_),P=Ba(P),{footer:{totalQty:S,mrpValue:C,grossAmount:L,totalDiscount:B,totalTax:M,totalAmount:E,totalDiscountPerc:a,amountDiscPerc:A,roundOff:k,finalAmount:T,receivedAmount:F,balanceAmount:G,cashReceived:U,tender:Q,sgstAmount:D,cgstAmount:_,igstAmount:P},products:g}}}catch(vt){}},_a=function(e,t,n,a){var r=a.find((function(e){return e.ItemId===n}));return t&&r&&Object.keys(r).length>0&&(e.ItemId===r.ItemId?(e.quantity=parseInt(r.quantity)+1,e.mrp=r.mrp>0?Ma(r.mrp):0,e.cgstRate=r.cgstRate>0?Ma(r.cgstRate):0,e.sgstRate=r.sgstRate>0?Ma(r.sgstRate):0,e.igstRate=r.igstRate>0?Ma(r.igstRate):0,e.Rate=r.Rate>0?Ma(r.Rate):e.mrp,e.manualDiscountPerc=r.manualdiscountper>0?Ma(r.manualdiscountper):0):e.quantity=parseInt(e.quantity?e.quantity:1)),e},Pa=function(e,t,n,a,r){return(e=Ma(e))-(t=Ma(t))-(e-t)*((n=Ma(n))+(a=Ma(a))+(r=Ma(r)))/(100+n+a+r)},Ra=function(e,t){return(e=Ma(e))*(t=Ma(t))/100},Ba=function(e){return e?parseFloat(e).toFixed(2):e},Ma=function(e){return e?parseFloat(e):e};function Ta(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var Ea=function(e){return Ke(e)},La=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return e.next=3,v.customerMaster.where("Id").equals(t.PartyId).first();case 3:return n=e.sent,e.next=6,v.SaleOrder.where("PartyId").equals(t.PartyId).toArray();case 6:a=e.sent,r=a.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{ItemId:parseInt(e.Id),id:parseInt(e.Id)})})),St(n.PartyName),Pt(n.PartyCode),oa(t.PartyId),Me(r),J(""),z(""),G([]),oe();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fa=function(e,t){for(var n={customerCode:"customerCode",timer:"billtime",billDate:"invoiceno",billSeries:"billSeries"},a=0,r={},c=function(){var t=o[s];""===e[t]||null===e[t]||0===e[t]?(Object.keys(n).map((function(e){if(n[e]===t)return r=Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},e,"required"))})),a++):Object.keys(n).map((function(e){n[e]===t&&(r=Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},e,"")))}))},s=0,o=["billSeries","invoicedate","billDate","customerCode","billtime"];s<o.length;s++)c();return""===At||null===At||void 0===At?(a++,r=Object(d.a)(Object(d.a)({},r),{},{customerName:"required"})):r=Object(d.a)(Object(d.a)({},r),{},{customerName:""}),Oa(r),a?(alert("Required fields are empty"),!1):(0===t.length&&(a++,alert("Please select atleast one product")),!a)},qa=function(e){var t=q.filter((function(t){return t.ItemId!==e.original.ItemId}));if(G(t),t&&t.length>0){var n=Da(1,t);qe((function(){return Object(d.a)({},n.footer)})),G(n.products)}else qe({totalQty:0,mrpValue:0,grossAmount:0,totalDiscount:0,totalTax:0,totalAmount:0,totalDiscountPerc:0,amountDiscPerc:0,roundOff:0,finalAmount:0,receivedAmount:0,balanceAmount:0,cashReceived:0,tender:0,igstAmount:0,sgstAmount:0,cgstAmount:0}),G([])},Ga=function(e){return void 0===e||"refresh"===e||null===e||""===e},Ua=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="add"!==at&&$t?$t:r.current.value,c={Id:0!==ne.Id?ne.Id:0,update:0,invoiceno:"hold"===n?"Temp-"+zt:zt,invoicedate:pt,partyid:sa,grossamount:Fe.grossAmount,discountamount:Fe.totalDiscount,taxamount:Fe.totalTax,netamount:Fe.totalAmount,receiveamount:Fe.receivedAmount,branchid:1,counterid:1,createdby:localStorage.getItem("UserId"),createdon:new Date,editlog:"",ishold:"hold"===n?"true":"false",iscancelled:"",alterid:0,authorizedby:0,authorizedon:"",cancelledby:"",cancelledon:"",salepersonid:yn.slpId,seriesid:""===an.seriesId?0:an.seriesId,voucherid:an.voucherId,seriesvouchertype:0,isauthorized:!1,remarks:Jt,discountpermanual:Fe.totalDiscountPerc,discountamountmanual:Fe.amountDiscPerc,finalamount:Fe.finalAmount,noofbillprint:0,billtime:a,roundoff:Fe.roundOff,totalbillqty:Fe.totalQty,invoicetype:0,cash_amount:0,cn_amount:0,dc_amount:0,cc_amount:0,advance_amount:0,coupon_amount:0,other_amount:0,mrp_value:Fe.mrpValue,cashtrade:0,balamt:0,tallyvoucherid:0,tallysyncdate:"",tallyreferenceno:"",issendtotally:!1,totaligst:Fe.igstAmount,totalcgst:Fe.cgstAmount,totalsgst:Fe.sgstAmount,billingcountryid:b.bCountry,billingstateid:b.bState,billingaddress:b.bAddress,billinggstinno:b.bGSTN,shippingcountryid:b.sCountry,shippingstateid:b.sState,shippingaddress:b.sAddress,shippinggstinno:b.sGSTN,influencerid:Xn,billingtype:Mn},!Fa(c,q)){e.next=24;break}if(!(X>0)){e.next=14;break}return e.next=6,Qa(Object(d.a)(Object(d.a)({},c),{},{id:ne.id}));case 6:return pn(!1),Ha(),rt(""),e.next=11,Wa();case 11:alert("updated successfully"),e.next=24;break;case 14:return e.next=16,Vc(c,q,t.formid);case 16:return e.sent,on&&tr(le[0].id),pn(!1),Ha(),rt(""),e.next=23,Wa();case 23:alert("saved successfully");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zc(n,q,t.formid);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Va=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesInvoiceWithSO.toArray();case 2:if(!((t=e.sent).length>0)){e.next=15;break}if(!((n=t.filter((function(e){return ka(e.createdon)===ka(new Date)}))).length>0)){e.next=14;break}if(!((a=n.filter((function(e){return"true"!==e.ishold&&"true"!==e.iscancelled}))).length>0)){e.next=11;break}return e.abrupt("return",a);case 11:case 14:case 15:return e.abrupt("return",[]);case 12:e.next=15;break;case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),za=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("discard"!==t&&"recall"!==t){e.next=6;break}return e.next=3,v.salesInvoiceWithSO.where("ishold").equals("true").toArray();case 3:e.t0=e.sent,e.next=14;break;case 6:if("cancel"!==t){e.next=12;break}return e.next=9,Va();case 9:e.t1=e.sent,e.next=13;break;case 12:e.t1=[];case 13:e.t0=e.t1;case 14:if(!((n=e.t0).length>0)){e.next=41;break}a=[],r=Object(Jn.a)(n),e.prev=18,r.s();case 20:if((c=r.n()).done){e.next=29;break}return s=c.value,e.next=24,v.customerMaster.where("Id").equals(s.partyid).first();case 24:o=e.sent,u={BillNo:s.invoiceno,Date:ka(s.createdon),Time:s.billtime,PartyName:o.PartyName,ItemId:s.id},a.push(Object(d.a)(Object(d.a)({},s),u));case 27:e.next=20;break;case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(18),r.e(e.t2);case 34:return e.prev=34,r.f(),e.finish(34);case 37:Ae(a),Oe(!0),e.next=43;break;case 41:alert("discard"===t||"recall"===t?"You don't have any hold Bill":"you don't have created any bill today");case 43:ye(t);case 44:case"end":return e.stop()}}),e,null,[[18,31,34,37]])})));return function(t){return e.apply(this,arguments)}}(),Ha=function(){ae({id:"",Id:0}),Pn([]),Tn(""),qn([]),Vn(""),$n(null),Pt(""),E(null),G([]),$(0),vn([]),qe({totalQty:0,mrpValue:0,grossAmount:0,totalDiscount:0,totalTax:0,totalAmount:0,totalDiscountPerc:0,amountDiscPerc:0,roundOff:0,finalAmount:0,receivedAmount:0,balanceAmount:0,cashReceived:0,tender:0,igstAmount:0,sgstAmount:0,cgstAmount:0}),B(!1),rt(""),ht(null),gt({mobileError:""}),wt(null),St(""),Mt({}),Ht(null),Yt(""),en(""),pn(!1),Sn({salesInvoice:[],saleInvoiceDetail:[]}),oa(""),function(){for(var e in ma)ma[e]="";Oa(ma)}(),J(""),z(""),wn({slpName:"",slpId:null,slpdropdown:!0}),rn({seriesId:"",voucherId:""}),Oe(!1),j(n),h([]),I(!1),k(!1),oe(),de(),ye(""),Ae([]),ut(),jt([]),Wa()},Wa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uc();case 2:if(!((t=e.sent)&&Object.keys(t).length>0&&t.product&&t.product.length>0)){e.next=13;break}return n=t.invoicedate,a=t.invoiceno,e.next=8,Xa(t);case 8:t=e.sent,r=Da(1,t),da((function(e){return{billSeries:a,debitCard:0,creditCard:0,advAmount:0,totalQty:r.footer.totalQty,couponAmount:0,otherAmount:0,cashAmount:0,billDate:n,netAmount:r.footer.finalAmount,totalMrp:r.footer.mrpValue}})),e.next=14;break;case 13:da({billSeries:"N/A",debitCard:"N/A",creditCard:"N/A",advAmount:"N/A",totalQty:"N/A",couponAmount:"N/A",otherAmount:"N/A",cashAmount:"N/A",billDate:"N/A",netAmount:"N/A",totalMrp:"N/A"});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ka=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae({id:t.id,Id:t.Id}),rn({seriesId:t.seriesid,voucherId:t.voucherid}),e.next=4,v.customerMaster.where("Id").equals(t.partyid).first().then().catch((function(e){return console.log(e)}));case 4:return n=e.sent,St(n.PartyName),Pt(n.PartyCode),oa(t.partyid),e.next=10,v.SaleOrder.where("PartyId").equals(t.partyid).toArray();case 10:if(a=e.sent,r=a.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{ItemId:parseInt(e.Id),id:parseInt(e.Id)})})),Me(r),G([]),!(t&&Object.keys(t).length>0&&t.id>0)){e.next=22;break}return e.next=17,Wc(t.id);case 17:if(!((c=e.sent)&&Object.keys(c).length>0)){e.next=21;break}return e.next=21,Ya(c);case 21:xe(!0);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ja=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G([]),e.next=3,Gc(t);case 3:if(!((n=e.sent)&&Object.keys(n).length>0)){e.next=27;break}if(!n.salepersonid){e.next=12;break}return e.next=8,v.salesPersonMaster.where("Id").equals(parseInt(n.salepersonid)).first();case 8:a=e.sent,wn({slpName:a.SalePersonName,slpId:parseInt(a.Id),slpdropdown:!1}),e.next=13;break;case 12:wn({slpName:"",slpId:null,slpdropdown:!0});case 13:if(j({bState:n.billingstateid,bCountry:n.billingcountryid,bAddress:n.billingaddress,bGSTN:n.billinggstinno,sState:n.shippingstateid,sCountry:n.shippingcountryid,sAddress:n.shippingaddress,sGSTN:n.shippinggstinno}),pn(!1),oa(n.partyid),ht(n.invoicedate),Yt(n.remarks),qe((function(e){return e.totalDiscountPerc=n.discountpermanual,e.amountDiscPerc=n.discountamountmanual,Object(d.a)({},e)})),!(n&&n.product&&n.product.length>0)){e.next=27;break}return e.next=22,Xa(n);case 22:n=e.sent,G(n),r=Da(1,n),qe((function(e){return Object(d.a)(Object(d.a)({},e),r.footer)})),G(r.products);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ya=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Za(t),!t.salepersonid){e.next=8;break}return e.next=4,v.salesPersonMaster.where("Id").equals(parseInt(t.salepersonid)).first();case 4:n=e.sent,wn({slpName:n.SalePersonName,slpId:parseInt(n.Id),slpdropdown:!1}),e.next=9;break;case 8:wn({slpName:"",slpId:null,slpdropdown:!0});case 9:if(!(t&&t.product&&t.product.length>0)){e.next=17;break}return e.next=12,Xa(t);case 12:t=e.sent,G(t),a=Da(1,t),qe((function(e){return Object(d.a)(Object(d.a)({},e),a.footer)})),G(a.products);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Za=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.salepersonid){e.next=5;break}return e.next=3,v.salesPersonMaster.where("Id").equals(parseInt(t.salepersonid)).first();case 3:n=e.sent,wn({slpName:n.SalePersonName,slpId:parseInt(n.Id),slpdropdown:!1});case 5:j({bState:t.billingstateid,bCountry:t.billingcountryid,bAddress:t.billingaddress,bGSTN:t.billinggstinno,sState:t.shippingstateid,sCountry:t.shippingcountryid,sAddress:t.shippingaddress,sGSTN:t.shippinggstinno}),$(0===t.Id||""===t.Id?t.id:t.Id),B("true"===t.iscancelled),pn(!1),oa(t.partyid),en(t.billtime),Ht(t.invoiceno),ht(t.invoicedate),Yt(t.remarks),qe((function(e){return e.totalDiscountPerc=t.discountpermanual,e.amountDiscPerc=t.discountamountmanual,Object(d.a)({},e)}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xa=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=Object(Jn.a)(t.product),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=15;break}return c=r.value,e.next=8,Je(c.itemid);case 8:return s=e.sent,e.next=11,v.getItemStock.where("itemid").equals(c.itemid).first().then().catch((function(e){return alert("somthing went wrong")}));case 11:e.sent,n.push({id:c.id,invoiceId:c.invoiceid,ItemId:c.itemid,quantity:c.quantity,ItemName:c.ItemName,ItemCode:c.ItemCode,mrp:c.mrp,stock:s,Rate:c.saleprice,taxper:0,totaltaxamount:0,finalperrate:0,totalnetamount:0,lotno:"",createdby:1,createdon:new Date,editlog:"",isvatitem:!1,addtaxrate:0,addtaxamount:0,surchargerate:0,surchargeamount:0,taxamount:0,IsTaxInclusive:c.istaxinclusive,altqty:0,salepersonid:0,changeindiscount:0,autodiscountper:0,autodiscountamount:0,manualdiscountper:c.manualdiscountper,manualdiscountamount:c.manualdiscountamount,istaxcalculatebeforediscount:!1,lotserialid:0,remark:c.itemremark,discount_slab_detail_id:0,isautodiscountonper:!1,isautodiscountonamount:!1,isaltrate:0,Conversion:c.conversion,Denominator:c.denominator,isschemeitem:0,hsnclassificationid:0,igstRate:c.igstrate,cgstRate:c.cgstrate,sgstRate:c.sgstrate,igst:c.igstamount,cgst:c.cgstamount,sgst:c.sgstamount,manualchangesaleprice:!1,HsnId:c.HsnId,SoDetailId:c.SoDetailId,SoId:c.SoId,SoNo:c.SoNo,sodetailid:0,schemecode:c.schemecode,istaxinclusive:c.istaxinclusive});case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),$a=function(){if(q&&q.length>0&&zt&&zt.length>0){var e=document.getElementById("divcontents"),t=document.getElementById("ifmcontentstoprint").contentWindow;t.document.open(),t.document.write(e.innerHTML),t.document.close(),t.focus(),t.print()}else alert("Please select invoice",zt)},er=function(e){de(e)},tr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.saleInvoiceDetailWithSO.where("invoiceid").equals(t).toArray().then().catch((function(e){return console.log(e)}));case 2:if(!((n=e.sent).length>0)){e.next=10;break}return a=n.map((function(e){return e.id})),e.next=7,v.salesInvoiceWithSO.delete(t);case 7:return e.next=9,v.saleInvoiceDetailWithSO.bulkDelete(a).then().catch((function(e){return console.log(e)}));case 9:un(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("discard"!==t){e.next=32;break}if(!(le.length>0)){e.next=29;break}if(!((n=le.map((function(e){return e.id}))).length>0)){e.next=27;break}a=[],r=Object(Jn.a)(n),e.prev=6,r.s();case 8:if((c=r.n()).done){e.next=16;break}return s=c.value,e.next=12,v.saleInvoiceDetailWithSO.where("id").equals(s).toArray().then().catch((function(e){return console.log(e)}));case 12:o=e.sent,a=[].concat(Object(R.a)(a),Object(R.a)(o));case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return u=a.map((function(e){return e.id})),e.next=27,v.salesInvoiceWithSO.bulkDelete(n).then((function(e){return v.saleInvoiceDetailWithSO.bulkDelete(u).then((function(e){alert("successfully discard"),Ha()})).catch((function(e){return alert("something went wrong")}))})).catch((function(e){return alert("something went wrong")}));case 27:e.next=30;break;case 29:alert("Please select bill");case 30:e.next=43;break;case 32:if("cancel"!==t){e.next=42;break}if(!(le.length>0)){e.next=39;break}return l=le.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{cancelledby:localStorage.getItem("UserId"),cancelledon:new Date,iscancelled:"true",update:1})})),e.next=37,v.salesInvoiceWithSO.bulkPut(l).then((function(e){alert("successfully canceled"),Ha()})).catch((function(e){return alert("something went wrong")}));case 37:e.next=40;break;case 39:alert("Please select bill");case 40:e.next=43;break;case 42:"recall"===t&&(le.length>0?le.length>1?alert("Please select only one bill"):(Ja(le[0].id),un(!0),Ae([]),Oe(!1)):alert("Please select bill"));case 43:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),ar=function(e){var t=[];return e.map((function(e,n){return e.SoDetail&&e.SoDetail.length>0&&e.SoDetail.map((function(t){return t.SoNo=e.SoNo,Object(d.a)({},t)})),t=[].concat(Object(R.a)(t),Object(R.a)(e.SoDetail)),e})),t},rr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=le.map((function(e){return e.Id})),n=ar(le),t&&(oe(t),n.length>0?(Ut(!0),q.length<1?cr(n,t):(a=n.filter((function(e){var t=e.SoId;return!q.some((function(e){return e.SoId===t}))})),r=q.filter((function(e){var t=e.SoId;return!n.some((function(e){return e.SoId===t}))})),console.log(a,"results"),console.log(r,"results2"),a.length>0&&(c=[].concat(Object(R.a)(q),Object(R.a)(a)),console.log(c,"xarr"),cr(c,t)),r.length>0&&(s=q.filter((function(e){var t=e.SoId;return!r.some((function(e){return e.SoId===t}))})))&&(console.log(s,"results3"),cr(s,t)))):(G([]),qe({totalQty:0,mrpValue:0,grossAmount:0,totalDiscount:0,totalTax:0,totalAmount:0,totalDiscountPerc:0,amountDiscPerc:0,roundOff:0,finalAmount:0,receivedAmount:0,balanceAmount:0,cashReceived:0,tender:0,igstAmount:0,sgstAmount:0,cgstAmount:0})),_e(!1));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cr=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s,o,u,l,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t,"proarray"),a=[],r=Object(Jn.a)(t),e.prev=3,r.s();case 5:if((c=r.n()).done){e.next=13;break}return s=c.value,e.next=9,Kc(s,ka(pt));case 9:o=e.sent,a.push(o);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:console.log(a,"array"),a.length>0&&(u=Da(1,a,""))&&(qe((function(){return Object(d.a)({},u.footer)})),(l=u.products.filter((function(e){return e.stock>0}))).length>0?(b=l.map((function(e){return e.SoId})),j=Object(R.a)(new Set(b)),oe(j),G(u.products.filter((function(e){return e.stock>0})))):alert("Items are out of stock"));case 23:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t,n){return e.apply(this,arguments)}}(),sr={change_state:xa,val:at,disabledAction:bn};return Object(Te.jsxs)(Te.Fragment,{children:[Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},sr)),Object(Te.jsxs)("div",{className:"billSection",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w75",children:Object(Te.jsxs)("div",{className:"box grayBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w33 autoComp billno",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Bill No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),On?Object(Te.jsx)(Hn.a,{open:"billno"===V&&!Ga(at),onChange:function(e,t){return Ka(t)},options:An.salesInvoice,getOptionLabel:function(e){return e.invoiceno},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return J("billno")},onBlur:function(){J(""),z("")}}))},className:ma.billSeries}):Object(Te.jsx)("select",{name:"billSeries",id:"",className:ma.billSeries,children:zt&&Object(Te.jsx)("option",{value:zt,children:zt})})]})}),Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Bill Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{name:"billDate",selected:pt,onChange:function(e){return ht(e)},readOnly:Ga(at),className:ma.billDate})]})}),Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Time"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===at||!Ga(at)&&!$t?Object(Te.jsx)(ha,{reff:r,className:ma.timer}):Object(Te.jsx)("input",{readOnly:!0,value:$t,className:ma.timer})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Customer Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),""===At&&!0===fe?Object(Te.jsx)(Hn.a,{open:"customer"===V&&!Ga(at),options:Lt,onChange:function(e,t){return La(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return J("customer")},onBlur:function(){J(""),z("")}}))}}):Object(Te.jsx)("input",{type:"text",onChange:function(e){return St(e.target.value)},className:ma.customerName,value:At,readOnly:"view"===at||void 0===at})]})}),Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Customer Code"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("input",{type:"text",name:"customerCode",readOnly:!0,value:_t,className:ma.customerCode}),vt.mobileError?Object(Te.jsx)("span",{style:{color:"red",fontSize:"15px"},children:vt.mobileError}):null]})}),Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Sale Person"})}),!0===yn.slpdropdown?Object(Te.jsx)(Hn.a,{open:"saleperson"===V&&!Ga(at),options:xn,onChange:function(e,t){return function(e){e&&wn({slpName:e.SalePersonName,slpId:e.Id,slpdropdown:!1}),J(""),z("")}(t)},getOptionLabel:function(e){return e.SalePersonName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return J("saleperson")},onBlur:function(){J(""),z("")}}))}}):Object(Te.jsx)("input",{type:"text","data-valid":"special",value:yn.slpName,onChange:function(e){wn({slpName:"",slpId:null,slpdropdown:!0}),J(""),z("")},readOnly:"view"===at})]})})]}),Fn.length>0||_n.length>0?Object(Te.jsxs)("div",{className:"row",children:[Fn.length>0?Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Influencers"})}),""===Qn?Object(Te.jsx)(Hn.a,{options:Fn,onChange:function(e,t){Vn(t.influencername),$n(t.influencerid)},getOptionLabel:function(e){return e.influencername},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)({},e))}}):Object(Te.jsx)("input",{type:"text",value:Qn,onChange:function(e){""===e.target.value?(Vn(e.target.value),$n()):Vn(e.target.value)}})]})}):"",_n.length>0?Object(Te.jsx)("div",{className:"col w33 autoComp",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Billing Type"})}),""===Mn?Object(Te.jsx)(Hn.a,{options:_n,onChange:function(e,t){return Tn(t.valuename)},getOptionLabel:function(e){return e.valuename},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)({},e))}}):Object(Te.jsx)("input",{type:"text",value:Mn,onChange:function(e){return Tn(e.target.value)}})]})}):""]}):"",Object(Te.jsx)("div",{className:"row"}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsx)("div",{className:"invoiceAction",children:Object(Te.jsx)("button",{style:{margin:"0"},className:""===At||"view"===at?"grey":"green",onClick:""===At||"view"===at?function(){return!1}:function(){At&&_e(!0)},children:Object(Te.jsx)(ot,{content:"Sale Order List"})})})})})]})}),Object(Te.jsx)("div",{className:"col w25",children:P&&Object(Te.jsx)("div",{className:"cancelsts",children:Object(Te.jsx)(ot,{content:"Canceled"})})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsx)(Zn,{columns:va,data:q,itemList:C,selectedProduct:q,updateMyData:function(e,t,n){var a=q;a[e][t]=n;var r=Da(1,a);qe((function(){return Object(d.a)({},r.footer)})),G(r.products)},getTrProps:function(e){We(e.id),$e(e)},selectedRowId:He})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w75",children:[Object(Te.jsxs)("div",{className:"privInvoiceDetail",children:[Object(Te.jsx)("div",{className:"title",children:Object(Te.jsx)(ot,{content:"Previous Invoice Detail"})}),Object(Te.jsx)("div",{className:"invoiceDetail",children:Object(Te.jsx)("table",{children:Object(Te.jsxs)("tbody",{children:[Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Bill No"}),":"]}),Object(Te.jsx)("td",{children:la.billSeries}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Debit Card"})," :"]}),Object(Te.jsx)("td",{children:la.debitCard}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Credit Card"})," :"]}),Object(Te.jsx)("td",{children:la.creditCard}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Adv Amount"})," :"]}),Object(Te.jsx)("td",{children:la.advAmount})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Total Qty"})," :"]}),Object(Te.jsx)("td",{children:Ta(la.totalQty)}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Coupon Amount"})," :"]}),Object(Te.jsx)("td",{children:la.couponAmount}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Other Amount"})," :"]}),Object(Te.jsx)("td",{children:la.otherAmount}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Cash Amount"}),":"]}),Object(Te.jsx)("td",{children:la.cashAmount})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Bill Date"}),":"]}),Object(Te.jsx)("td",{children:la.billDate&&"N/A"!==la.billDate?ka(la.billDate):"N/A"}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Net Amount"})," :"]}),Object(Te.jsx)("td",{children:Ta(la.netAmount)}),Object(Te.jsxs)("td",{className:"lbl",children:[Object(Te.jsx)(ot,{content:"Total MRP"})," :"]}),Object(Te.jsx)("td",{children:Ta(la.totalMrp)}),Object(Te.jsx)("td",{}),Object(Te.jsx)("td",{})]})]})})})]}),Object(Te.jsxs)("div",{className:"invoiceAction",children:[Object(Te.jsx)("button",{className:Ga(at)||"view"===at?"grey":"green",onClick:Ga(at)||"view"===at?function(){return!1}:function(){return Ua("hold")},children:Object(Te.jsx)(ot,{content:"Hold Bill"})}),Object(Te.jsx)("button",{className:Ga(at)||"view"===at?"grey":"darkBlue",onClick:Ga(at)||"view"===at?function(){return!1}:function(){return za("discard")},children:Object(Te.jsx)(ot,{content:"Discard Bill"})}),Object(Te.jsx)("button",{className:Ga(at)||"view"===at?"grey":"red",onClick:Ga(at)||"view"===at?function(){return!1}:function(){return za("cancel")},children:Object(Te.jsx)(ot,{content:"Cancel Bill"})}),Object(Te.jsx)("button",{className:Ga(at)||"view"===at?"grey":"blue",onClick:Ga(at)||"view"===at?function(){return!1}:function(){return za("recall")},children:Object(Te.jsx)(ot,{content:"Recall Bill"})}),Object(Te.jsx)("button",{className:"billinfoBtn",onClick:function(){k(!0),I(!1)},children:Object(Te.jsx)(ot,{content:"Billing Info"})}),Object(Te.jsx)("button",{className:"taxinfoBtn",onClick:function(){I(!0),k(!1)},children:Object(Te.jsx)(ot,{content:"Tax Info"})})]})]}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsx)("div",{className:"amountDetail",children:Object(Te.jsx)("table",{children:Object(Te.jsxs)("tbody",{children:[Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Qty"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Ta(Fe.totalQty)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"MRP Value"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Ta(Fe.mrpValue)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Gross Amount"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Ta(Fe.grossAmount)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Amount"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Ta(Fe.totalAmount)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Dis"})," %"]}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Fe.totalDiscountPerc,onChange:function(e){var t=e.target.value;qe((function(e){e.totalDiscountPerc=t;var n=Ma(t>0?t:0)*Ma(e.totalAmount)/100,a=Ma(e.totalAmount)-n;return e.roundOff=Ea(Ba(a)),a=Ma(Ea(a))+a,e.amountDiscPerc=Ba(n),e.finalAmount=Ba(a),Object(d.a)({},e)}))},readOnly:!(!Ga(at)&&"view"!==at)})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Dis Amount"})," :"]}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Ta(Fe.amountDiscPerc)})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Round OFF"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Fe.roundOff})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Final Amount"})}),Object(Te.jsx)("td",{children:":"}),Object(Te.jsx)("td",{children:Ta(Fe.finalAmount)})]})]})})})})]})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-2 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"Write Remarks here \u2026.",value:Jt,onChange:function(e){return Yt(e.target.value)},readOnly:Ga(at)})]})})})]}),it&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:bt.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return Ca(t,e)},children:e.VoucherName})}))})]})})]}),g&&Object(Te.jsx)("div",{className:"rightOverlaySec",children:Object(Te.jsxs)("div",{className:"taxInfo",children:[Object(Te.jsxs)("div",{className:"title",children:[Object(Te.jsx)(ot,{content:"Tax Info"}),Object(Te.jsx)("button",{className:"closebtn",onClick:function(){return I(!1)}})]}),Object(Te.jsx)("div",{className:"taxinfoD",children:Object(Te.jsx)("table",{children:Object(Te.jsxs)("tbody",{children:[Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Qty"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.totalQty),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"MRP Value"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.mrpValue),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Gross Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.grossAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Discount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.totalDiscount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Tax"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.totalTax),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Total Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.totalAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Final Amount"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.finalAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Recd Amount"})," "]}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.receivedAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsxs)("td",{children:[Object(Te.jsx)(ot,{content:"Balance Amount"})," "]}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.balanceAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Cash Recived"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.cashReceived),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"Tender"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Fe.tender,readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"SGST Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.sgstAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"CGST Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.cgstAmount),readOnly:!0})})]}),Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)(ot,{content:"IGST Amount"})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"text",value:Ta(Fe.igstAmount),readOnly:!0})})]})]})})})]})}),N&&Object(Te.jsx)("div",{className:"rightOverlaySec",children:Object(Te.jsxs)("div",{className:"BillingInfo",children:[Object(Te.jsxs)("div",{className:"title",children:[Object(Te.jsx)(ot,{content:"Billing Info"}),Object(Te.jsx)("button",{className:"closebtn",onClick:function(){return k(!1)}})]}),Object(Te.jsxs)("div",{className:"billingInfoD",children:[Object(Te.jsx)("h4",{children:Object(Te.jsx)(ot,{content:"Billing Detail"})}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsxs)("select",{onChange:function(e){return ta(e)},name:"bState",value:b.bState,disabled:Ga(at)||"view"===at?"disabled":"",children:[Object(Te.jsx)("option",{value:"",children:"None"}),p.map((function(e,t){return Object(Te.jsx)("option",{value:e.StateId,children:e.StateName},t)}))]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsxs)("select",{disabled:"disabled",name:"bCountry",value:b.bCountry,readOnly:!0,children:[Object(Te.jsx)("option",{children:"None"}),Object(Te.jsx)("option",{value:"5",children:"India"})]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Billing Address"})}),Object(Te.jsx)("input",{type:"text",name:"bAddress",value:b.bAddress,onChange:function(e){return ta(e)},readOnly:!(!Ga(at)&&"view"!==at)})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Billing GSTN no"})}),Object(Te.jsx)("input",{type:"text",name:"bGSTN",value:b.bGSTN,onChange:function(e){return ta(e)},readOnly:!(!Ga(at)&&"view"!==at)})]}),Object(Te.jsx)("h4",{children:Object(Te.jsx)(ot,{content:"Shipping Detail"})}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:"State"}),Object(Te.jsxs)("select",{onChange:function(e){return ta(e)},name:"sState",value:b.sState,disabled:Ga(at)||"view"===at?"disabled":"",children:[Object(Te.jsx)("option",{value:"",children:"None"}),p.map((function(e,t){return Object(Te.jsx)("option",{value:e.StateId,children:e.StateName},t)}))]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsxs)("select",{disabled:"disabled",name:"sCountry",value:b.sCountry,readOnly:!0,children:[Object(Te.jsx)("option",{children:"None"}),Object(Te.jsx)("option",{value:"5",children:"India"})]})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Shipping Address"})}),Object(Te.jsx)("input",{type:"text",name:"sAddress",value:b.sAddress,onChange:function(e){return ta(e)},readOnly:!(!Ga(at)&&"view"!==at)})]}),Object(Te.jsxs)("div",{className:"formbox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Shipping GSTN no"})}),Object(Te.jsx)("input",{type:"text",name:"sGSTN",value:b.sGSTN,onChange:function(e){return ta(e)},readOnly:!(!Ga(at)&&"view"!==at)})]}),Object(Te.jsx)("div",{className:"invoiceAction",children:Object(Te.jsx)("button",{onClick:function(){return k(!1)},className:"red",style:{width:"200px",marginLeft:"auto"},children:Object(Te.jsx)(ot,{content:"Close Billing Info"})})})]})]})}),me&&Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:[{header:"Bill No",field:"BillNo"},{header:"Date",field:"Date"},{header:"Time",field:"Time"},{header:"Party Name",field:"PartyName"},{header:"Mobile No",field:"PartyMobileNo"}],data:ke,overFlowScroll:!0,checkbox:!0,selectedRows:se,getCheckedItem:function(e){return er(e)},Footer:!0,filter:!0}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{className:"btn btnGreen mr-5 mlAuto",onClick:"discard"===Ie?function(){return nr("discard")}:"recall"===Ie?function(){return nr("recall")}:"cancel"===Ie?function(){return nr("cancel")}:function(){return!1},children:"discard"===Ie?Object(Te.jsx)(ot,{content:"Discard Bill"}):"recall"===Ie?Object(Te.jsx)(ot,{content:"Recall Bill"}):"cancel"===Ie?Object(Te.jsx)(ot,{content:"Cancel Bill"}):""}),Object(Te.jsx)("button",{className:"btn btnRed",onClick:function(){return Ae([]),void Oe(!1)},children:Object(Te.jsx)(ot,{content:"Cancel"})})]})]})}),At&&De?Object(Te.jsx)("div",{className:"modalPopUp",children:Object(Te.jsxs)("div",{className:"modalPopUPin",children:[Object(Te.jsx)(Na,{coulmn:Yc,data:Be,overFlowScroll:!0,checkbox:!0,selectedRows:se,getCheckedItem:function(e){return er(e)},Footer:!1}),Object(Te.jsxs)("div",{className:"popupButton",children:[Object(Te.jsx)("button",{onClick:function(){return rr()},className:"btn btnGreen mr-5 mlAuto",children:"Ok"}),Object(Te.jsx)("button",{onClick:function(){_e(!1)},className:"btn btnRed",children:"Cancel"})]})]})}):""]})},Xc=(n(442),function(e){var t=e.pageNav,n={rollnameId:null,id:null,rolldetailId:null,Description:"",RoleName:"",isActive:!1,formlistbygroupid:[]},r={RoleName:""},c=Object(a.useState)(""),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(n),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)([]),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)([]),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)([]),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)(!1),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)(!1),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),V=Object(o.a)(Q,2),z=V[0],H=(V[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.formgroupmaster.toArray();case 2:(t=e.sent)&&(k(t),J());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),W=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.RoleMaster.toArray();case 2:(t=e.sent)&&B(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return n=0===t.Id?t.id:t.Id,e.next=4,v.RoleDetailMaster.where("RoleId").equals(n).toArray();case 4:a=e.sent,r=C.map((function(e){var t=a.find((function(t){return t.FormId===e.formid}));return t?Object(d.a)(Object(d.a)({},e),{},{detailid:t.id,RoleId:n,AllowNew:t.AllowNew,AllowEdit:t.AllowEdit,AllowAuthorize:t.AllowAuthorize,AllowView:t.AllowView,AllowPrint:t.AllowPrint,AllowAmendmend:t.AllowAmendmend,AllowExportToExcel:t.AllowExportToExcel,AllowSendToTally:t.AllowSendToTally,AllowCancelTransaction:t.AllowCancelTransaction,AllowAttachment:t.AllowAttachment,AllowViewAttachment:t.AllowViewAttachment,AllowCreateStructure:t.AllowCreateStructure,AllowImport:t.AllowImport,ModuleName:t.ModuleName,FormName:t.FormName,FormTypeName:t.FormTypeName}):e})),h(Object(d.a)(Object(d.a)({},p),{},{id:t.id,RoleName:t.RoleName,Description:t.Description,rollnameId:0===t.Id?t.id:t.Id,rolldetailId:"",formlistbygroupid:[],isActive:t.IsActive})),D(r),L(!1),U(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.formMaster.toArray();case 2:(t=e.sent).length>0&&(n=t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{checkedId:!1,AllowNew:!1,AllowEdit:!1,AllowAuthorize:!1,AllowView:!1,AllowPrint:!1,AllowAmendmend:!1,AllowExportToExcel:!1,AllowSendToTally:!1,AllowCancelTransaction:!1,AllowAttachment:!1,AllowViewAttachment:!1,AllowCreateStructure:!1,AllowImport:!1,ModuleName:!1,FormName:!1,FormTypeName:!1})})))&&D(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){h(n),k([]),D([]),I(r),B([]),L(!1),U(!1)},Z=function(e,t){if("checkedId"===e.target.name)if(!0===e.target.checked){var n=C.map((function(n){var a;return n.formid===t.formid?Object(d.a)(Object(d.a)({},n),{},(a={},Object(l.a)(a,e.target.name,e.target.checked),Object(l.a)(a,"AllowNew",!0===t.mnunew),Object(l.a)(a,"AllowEdit",!0===t.mnuedit),Object(l.a)(a,"AllowView",!0===t.mnuview),Object(l.a)(a,"AllowAuthorize",!0===t.mnuauthorize),Object(l.a)(a,"AllowPrint",!0===t.mnuprint),Object(l.a)(a,"AllowCancelTransaction",!0===t.mnucanceltransaction),a)):n})),a=n.filter((function(e){return e.formgroupid===p.rolldetailId}));h(Object(d.a)(Object(d.a)({},p),{},{formlistbygroupid:a})),D(n)}else{var r=C.map((function(n){var a;return n.formid===t.formid?Object(d.a)(Object(d.a)({},n),{},(a={},Object(l.a)(a,e.target.name,e.target.checked),Object(l.a)(a,"AllowNew",!1),Object(l.a)(a,"AllowEdit",!1),Object(l.a)(a,"AllowView",!1),Object(l.a)(a,"AllowAuthorize",!1),Object(l.a)(a,"AllowPrint",!1),Object(l.a)(a,"AllowCancelTransaction",!1),a)):n})),c=r.filter((function(e){return e.formgroupid===p.rolldetailId}));h(Object(d.a)(Object(d.a)({},p),{},{formlistbygroupid:c})),D(r)}else{var s=C.map((function(n){return n.formid===t.formid?Object(d.a)(Object(d.a)({},n),{},Object(l.a)({},e.target.name,e.target.checked)):n})),o=s.filter((function(e){return e.formgroupid===p.rolldetailId}));h(Object(d.a)(Object(d.a)({},p),{},{formlistbygroupid:o})),D(s)}},X=function(e){h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,e.target.value)))},$=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.RoleMaster.where("RoleName").equals(p.RoleName).first();case 2:n=e.sent,a=t.map((function(e){var t={RoleDetailId:0,FormId:e.formid,AllowNew:e.AllowNew,AllowEdit:e.AllowEdit,AllowAuthorize:e.AllowAuthorize,AllowView:e.AllowView,AllowPrint:e.AllowPrint,AllowAmendmend:e.AllowAmendmend,AllowExportToExcel:e.AllowExportToExcel,AllowSendToTally:e.AllowSendToTally,AllowCancelTransaction:e.AllowCancelTransaction,AllowAttachment:e.AllowAttachment,AllowViewAttachment:e.AllowViewAttachment,AllowCreateStructure:e.AllowCreateStructure,AllowImport:e.AllowImport,ModuleName:e.ModuleName,FormName:e.FormName,FormTypeName:e.FormTypeName};return e.detailid?(t.RoleId=e.RoleId,t.id=e.detailid,t):(t.RoleId=n.id,t)})),p.id?v.RoleDetailMaster.bulkPut(a).then((function(e){e&&(alert("data update successfully"),Y(),j("refresh"))})):v.RoleDetailMaster.bulkAdd(a).then((function(e){e&&(alert("data save successfully"),Y(),j("refresh"))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=function(e){E&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),U(!0),console.log("ddd")))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[E,p,C]);var ee={val:b,change_state:function(e){switch(e){case"view":case"edit":return j(e),H(),void W();case"refresh":return j(e),void Y();case"add":return j(e),void H();case"save":var t=Object.keys(g),n={};return t.forEach((function(e){return n[e]=""===p[e]||null===p[e]})),I(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):function(){var e=C.filter((function(e){return!0===e.AllowNew||!0===e.AllowEdit||!0===e.AllowView||!0===e.AllowAuthorize||!0===e.AllowPrint||!0===e.AllowCancelTransaction}));if(e.length>0){var t={RoleName:p.RoleName,Description:p.Description,CreatedBy:localStorage.getItem("UserId"),CreatedByName:localStorage.getItem("fname"),CreatedOn:Ge(new Date),IsActive:p.isActive,EditLog:null,alteredon:null,Detail:e};if(p.id){var n=Object(d.a)(Object(d.a)({},t),{},{update:1});v.RoleMaster.update(p.id,n).then((function(t){t&&$(e)}))}else{var a=Object(d.a)(Object(d.a)({},t),{},{new:1});v.RoleMaster.add(a).then((function(t){t&&$(e)}))}}else alert("you dont have select any Particulars from table")}());default:return e}},disabledAction:z};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"rollManagement",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ee)),Object(Te.jsx)("div",{className:"rollManagementIn mt-2",children:Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:g&&!0===g.RoleName?"error formBox":"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Roll Name"})}),"view"===b||"edit"===b?Object(Te.jsx)(Hn.a,{open:G,options:R,onChange:function(e,t){K(t)},getOptionLabel:function(e){return e.RoleName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{value:"",placeholder:"Press ctrl + L",onFocus:function(){return L(!0)},onBlur:function(){L(!1),U(!1)}}))}}):Object(Te.jsx)("input",{type:"text",name:"RoleName",value:p.RoleName,onChange:"add"===b?function(e){return X(e)}:function(e){return!1},className:g&&!0===g.RoleName?"error":""})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Roll Detail"})}),Object(Te.jsxs)("select",{value:p.rolldetailId,onChange:function(e){return function(e){if(console.log(p.rollnameId,"cccc"),"view"===b||"edit"===b){if(p.rollnameId){var t=C.filter((function(t){return t.formgroupid===parseInt(e.target.value)}));h(Object(d.a)(Object(d.a)({},p),{},{rolldetailId:parseInt(e.target.value),formlistbygroupid:t}))}}else{var n=C.filter((function(t){return t.formgroupid===parseInt(e.target.value)}));h(Object(d.a)(Object(d.a)({},p),{},{rolldetailId:parseInt(e.target.value),formlistbygroupid:n}))}}(e)},children:[Object(Te.jsx)("option",{value:"",children:"Select"}),N.map((function(e){return Object(Te.jsx)("option",{value:e.formgroupid,children:e.formgroupname})}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"checkboxNew mt-47",children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"view"===b||"refresh"===b,id:"checkboxOne",name:"IsActive",checked:p.isActive,onChange:function(e){return function(e){h(Object(d.a)(Object(d.a)({},p),{},{isActive:e.target.checked}))}(e)}}),Object(Te.jsx)("label",{htmlFor:"checkboxOne",children:Object(Te.jsx)(ot,{content:"IsActive"})})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w55",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Description"})}),Object(Te.jsx)("textarea",{name:"Description",value:p.Description,cols:"30",rows:"10",onChange:"add"===b||"edit"===b?function(e){return X(e)}:function(e){return!1}})]})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsxs)("table",{children:[Object(Te.jsx)("thead",{children:Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("th",{}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Particulars"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Create"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Alter"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"View"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Authorize"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Print"})}),Object(Te.jsx)("th",{children:Object(Te.jsx)(ot,{content:"Cancel Transaction"})})]})}),Object(Te.jsx)("tbody",{children:p.formlistbygroupid&&p.formlistbygroupid.map((function(e,t){return Object(Te.jsxs)("tr",{children:[Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",name:"checkedId",checked:e.checkedId,onChange:"view"===b?function(e){return!1}:function(t){return Z(t,e)}})}),Object(Te.jsx)("td",{children:e.caption}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",name:"AllowNew",onChange:!0===e.mnunew&&"view"!==b?function(t){return Z(t,e)}:function(e){return!1},checked:e.AllowNew})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",name:"AllowEdit",onChange:!0===e.mnuedit&&"view"!==b?function(t){return Z(t,e)}:function(e){return!1},checked:e.AllowEdit})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",name:"AllowView",onChange:!0===e.mnuview&&"view"!==b?function(t){return Z(t,e)}:function(e){return!1},checked:e.AllowView})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",name:"AllowAuthorize",onChange:!0===e.mnuauthorize&&"view"!==b?function(t){return Z(t,e)}:function(e){return!1},checked:e.AllowAuthorize})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",name:"AllowPrint",onChange:!0===e.mnuprint&&"view"!==b?function(t){return Z(t,e)}:function(e){return!1},checked:e.AllowPrint})}),Object(Te.jsx)("td",{children:Object(Te.jsx)("input",{type:"checkbox",name:"AllowCancelTransaction",onChange:!0===e.mnucanceltransaction&&"view"!==b?function(t){return Z(t,e)}:function(e){return!1},checked:e.AllowCancelTransaction})})]},t)}))})]})})})})]})})]})})}),$c=(n(443),function(e){var t=e.pageNav,n={UserName:"",Password:"",ConfPassword:"",EmployeeId:"",rollIsActive:!1,mDiscount:"",rollId:"",EmployeeName:"",Description:"",IsActive:!1,IsAuthorized:!1},r={UserName:"",Password:"",ConfPassword:"",EmployeeId:"",rollId:""},c=Object(a.useState)(""),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(n),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(r),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)(!1),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)([]),P=Object(o.a)(_,2),R=P[0],B=P[1],M=Object(a.useState)([]),T=Object(o.a)(M,2),E=T[0],L=T[1],F=Object(a.useState)([]),q=Object(o.a)(F,2),G=q[0],U=q[1],Q=Object(a.useState)(!1),V=Object(o.a)(Q,2),z=V[0],H=V[1],W=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),K=Object(o.a)(W,2),J=K[0],Y=(K[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.employeeMaster.toArray();case 2:(t=e.sent)&&(B(t),console.log(t,"listlistlist"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Z=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.RoleMaster.toArray();case 2:(t=e.sent)&&L(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.userMaster.toArray();case 2:(t=e.sent)&&U(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){"UserName"===e.target.name?""===e.target.value?(h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,e.target.value))),k(!0)):h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,e.target.value))):(h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,e.target.value))),I(Object(d.a)(Object(d.a)({},g),{},Object(l.a)({},e.target.name,!1))))},ee=function(){return p.Password===p.ConfPassword},te=function(e){h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,e.target.checked)))};Object(a.useEffect)((function(){console.log(p,"createObjcreateObjcreateObjcreateObj");var e=function(e){C&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),H(!0),console.log("ddd")))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[C,p]);var ne={val:b,change_state:function(e){switch(e){case"view":return j(e),k(!0),Y(),X(),void Z();case"edit":return j(e),k(!0),Y(),Z(),void X();case"refresh":return h(n),D(!1),B([]),L([]),H(!1),I(r),U([]),void j(e);case"add":return j(e),Y(),void Z();case"save":var t=Object.keys(g),a={};return t.forEach((function(e){return a[e]=""===p[e]||null===p[e]})),I(a),void(Object.values(a).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):function(){var e={UserName:p.UserName,Password:p.Password,EmployeeId:p.EmployeeId,EmployeeName:p.EmployeeName,Description:p.Description,IsActive:p.IsActive,IsAuthorized:"",AuthorizedBy:"",CreateddBy:localStorage.getItem("UserId"),Email:null,EditLog:null,CreatedOn:"",AuthorizedOn:"",Branch:[{BranchRole:[{RoleId:parseInt(p.rollId),IsActive:p.rollIsActive}]}]};p.id?v.userMaster.update(p.id,e).then((function(e){e&&alert("data update successfully")})):v.userMaster.add(e).then((function(e){e&&alert("data save successfully")})),console.log(e,"createObjcreateObj")}());default:return e}},disabledAction:J};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"userManagement",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},ne)),Object(Te.jsx)("div",{className:"userManagementIn",children:Object(Te.jsxs)("div",{className:"box greyBg",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:g&&!0===g.UserName?"error formBox":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[" ",Object(Te.jsx)(ot,{content:"Username"})]}),("view"===b||"edit"===b)&&!0===N?Object(Te.jsx)(Hn.a,{open:z,options:G,onChange:function(e,t){!function(e){if(e){var t={id:e.id,UserName:e.UserName,Password:e.Password,ConfPassword:e.Password,EmployeeId:e.EmployeeId,rollIsActive:e.Branch[0].BranchRole[0].IsActive,mDiscount:"",rollId:e.Branch[0].BranchRole[0].RoleId,EmployeeName:e.EmployeeName,Description:null!==e.Description?e.Description:"",IsActive:e.IsActive};h(Object(d.a)(Object(d.a)({},p),t)),k(!1),D(!1),H(!1)}else h(Object(d.a)(Object(d.a)({},p),{},{UserName:""}))}(t)},getOptionLabel:function(e){return e.UserName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{value:"",placeholder:"Press ctrl + L",onFocus:function(){return D(!0)},onBlur:function(){D(!1),H(!1)}}))}}):Object(Te.jsx)("input",{name:"UserName",value:p.UserName,className:g&&!0===g.UserName?"error":"",onChange:function(e){return $(e)},type:"text"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Password"})}),Object(Te.jsx)("input",{name:"Password",readOnly:"edit"!==b&&"add"!==b,className:g&&!0===g.Password?"error":"",value:p.Password,onChange:function(e){return $(e)},type:"text"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[" ",Object(Te.jsx)(ot,{content:"Confirm Password"})]}),Object(Te.jsx)("input",{name:"ConfPassword",value:p.ConfPassword,readOnly:"edit"!==b&&"add"!==b,className:g&&!0===g.ConfPassword?"error":"",onBlur:function(){ee()||I(Object(d.a)(Object(d.a)({},g),{},{ConfPassword:!0}))},onChange:function(e){return $(e)},type:"text"})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:g&&!0===g.EmployeeId?"error formBox":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[" ",Object(Te.jsx)(ot,{content:"Employee"})]}),Object(Te.jsxs)("select",{value:p.EmployeeId,disabled:"edit"!==b&&"add"!==b,onChange:function(e){return function(e){if(""!==e.target.value){var t=R.filter((function(t){return t.Id===parseInt(e.target.value)}));h(Object(d.a)(Object(d.a)({},p),{},{EmployeeId:parseInt(e.target.value),EmployeeName:t[0].EmployeeName}))}else h(Object(d.a)(Object(d.a)({},p),{},{EmployeeId:parseInt(e.target.value),EmployeeName:""}))}(e)},children:[Object(Te.jsx)("option",{value:"",children:"None"}),R.map((function(e,t){return Object(Te.jsx)("option",{value:e.Id,children:e.EmployeeName},t)}))]})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[" ",Object(Te.jsx)(ot,{content:"Manual Discount upto"})]}),Object(Te.jsx)("input",{name:"mDiscount",readOnly:"edit"!==b&&"add"!==b,value:p.mDiscount,onChange:function(e){return $(e)},type:"text"})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"checkboxNew mt-47",children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"edit"!==b&&"add"!==b,id:"checkboxOne",name:"IsActive",checked:p.IsActive,onChange:function(e){return te(e)}}),Object(Te.jsxs)("label",{htmlFor:"checkboxOne",children:[" ",Object(Te.jsx)(ot,{content:"IsActive"})]})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w67",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[" ",Object(Te.jsx)(ot,{content:"Description"})]}),Object(Te.jsx)("textarea",{name:"Description",value:p.Description,readOnly:"edit"!==b&&"add"!==b,onChange:function(e){return $(e)},cols:"30",rows:"10"})]})})}),Object(Te.jsxs)("h3",{children:[" ",Object(Te.jsx)(ot,{content:"Roll Asign"})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:g&&!0===g.rollId?"error formBox":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[" ",Object(Te.jsx)(ot,{content:"Select Roll"})]}),Object(Te.jsxs)("select",{value:p.rollId,disabled:"edit"!==b&&"add"!==b,onChange:function(e){return function(e){h(Object(d.a)(Object(d.a)({},p),{},{rollId:e.target.value}))}(e)},children:[Object(Te.jsx)("option",{value:"",children:"None"}),E.map((function(e,t){return Object(Te.jsx)("option",{value:e.Id,children:e.RoleName},t)}))]})]})}),Object(Te.jsx)("div",{className:"col w33",children:Object(Te.jsxs)("div",{className:"checkboxNew mt-47",children:[Object(Te.jsx)("input",{type:"checkbox",disabled:"edit"!==b&&"add"!==b,id:"checkboxtwo",name:"rollIsActive",checked:p.rollIsActive,onChange:function(e){return te(e)}}),Object(Te.jsxs)("label",{htmlFor:"checkboxtwo",children:[" ",Object(Te.jsx)(ot,{content:"IsActive"})]})]})})]})]})})]})})}),es=(n(444),[{header:"Item Name",field:"ItemName",width:250,cell:"autocomplete"},{header:"Lot No",field:"unit",cell:"EditInput"},{header:"Qty",field:"Quantity",cell:"EditInput"},{header:"MRP",field:"Rate",cell:"EditInput"},{header:"Disc (%)",field:"DiscountPer",cell:"EditInput"},{header:"Discount Amount",field:"DiscountAmount"},{header:"Gross Amount",field:"Amount"},{header:"Sales Price",field:"totalAmount"},{header:"IGST Tax (%)",field:"igstrate"},{header:"IGST Amount",field:"igstamount"},{header:"CGST Tax (%)",field:"cgstrate"},{header:"CGST Amount",field:"cgstamount"},{header:"SGST Tax (%)",field:"sgstrate"},{header:"SGST Amount",field:"sgstamount"}]),ts=function(e){var t=e.taxObject;return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsx)("div",{className:"borderBox box",children:Object(Te.jsxs)("div",{className:"taxAmount",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Gross Amount"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.grossamount,readOnly:!0})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Discount"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.discountamount,readOnly:!0})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Tax"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.taxamount,readOnly:!0})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total Amount"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.totalAmount,readOnly:!0})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Round Off"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.roundOff,readOnly:!0})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Final Amount"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.netamount,readOnly:!0})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"IGST Amount"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.igstAmount,readOnly:!0})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"SGST Amount"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.sgstAmount,readOnly:!0})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"CGST Amount"})})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)("input",{type:"text",value:t.cgstAmount,readOnly:!0})})]})]})})})},ns=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.GSTClassification[0].HsnId)){e.next=6;break}return a={},e.next=5,v.hsnMaster.where("Id").equals(n).toArray().then(function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=void 0!==t[0].IGST[0].CGST[0].CgstTaxRate?t[0].IGST[0].CGST[0].CgstTaxRate:0,r=void 0!==t[0].IGST[0].CGST[0].SgstTaxRate?t[0].IGST[0].CGST[0].SgstTaxRate:0,c=void 0!==t[0].IGST[0].IgstTaxRate?t[0].IGST[0].IgstTaxRate:0,a={cgstRate:n,sgstRate:r,igstRate:c};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 5:return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),as=function(e,t){return e*t/100},rs=function(e){return e?parseFloat(e).toFixed(2):e},cs=function(e){var t=0,n=0,a=0,r=0,c=0,s=0;return e.map((function(e){return t=parseFloat(t)+parseFloat(e.Amount),n=parseFloat(n)+parseFloat(e.DiscountAmount),a=parseFloat(a)+parseFloat(e.igstamount),r=parseFloat(r)+parseFloat(e.cgstamount),c=parseFloat(c)+parseFloat(e.sgstamount),s=parseFloat(s)+parseFloat(e.totalAmount),e})),{grossamount:rs(t),discountamount:rs(n),taxamount:rs(parseFloat(a)+parseFloat(r)+parseFloat(c)),netamount:rs(parseFloat(s)+ss(rs(s))),roundOff:ss(rs(s)),totalAmount:rs(s),igstAmount:rs(a),cgstAmount:rs(r),sgstAmount:rs(c)}},ss=function(e){var t=(e+"").split(".")[1];if(t>0){for(var n="1",a=0;a<t.toString().length;a++)n+="0";var r=parseInt(n)-t;if(r.toString().length<t.toString().length){console.log(r.toString().length,"Rdigit.toString().length"),console.log(t.toString().length,"l.toString().length");for(var c=t.toString().length-r.toString().length,s="",o=0;o<c;o++)s+="0";var i=s+r.toString();return parseFloat("0."+i)}return parseFloat("0."+r)}return parseFloat("0.00")},os=function(e){var t=e.pageNav,n={Id:0,Invoiceno:"",InvoiceDate:"",PartyId:"",vendorCode:"",vendorName:"",invoicetype:"",vendorList:[],invoiceList:[],taxpage:{grossamount:"0.00",discountamount:"0.00",taxamount:"0.00",netamount:"0.00",roundOff:"0.00",totalAmount:"0.00",igstAmount:"0.00",cgstAmount:"0.00",sgstAmount:"0.00"},billingcountryid:"",billingstateid:"",billingaddress:"",billinggstinno:"",shippingcountryid:"",shippingstateid:"",shippingaddress:"",shippinggstinno:"",CreatedBy:"",remark:"",dncn_against_pi:"",itemList:[],items:[],stateList:[]},r={InvoiceId:"",ItemId:"",ItemName:"",unit:"0",isaltrate:"",Quantity:"",altqty:"",Rate:"",Amount:"",totalAmount:"",finalDiscount:"",DiscountPer:"",DiscountAmount:"",hsnclassificationid:"",igstrate:0,cgstrate:0,sgstrate:0,igstamount:0,cgstamount:0,sgstamount:0},c={InvoiceNo:"",InvoiceDate:"",vendorCode:"",vendorName:""},s=Object(a.useState)(),b=Object(o.a)(s,2),j=b[0],m=b[1],O=Object(a.useState)(c),p=Object(o.a)(O,2),h=p[0],f=p[1],x=Object(a.useState)(n),g=Object(o.a)(x,2),I=g[0],y=g[1],w=Object(a.useState)(),N=Object(o.a)(w,2),k=N[0],A=N[1],S=Object(a.useState)(!1),C=Object(o.a)(S,2),D=C[0],_=C[1],P=Object(a.useState)(),B=Object(o.a)(P,2),M=B[0],T=B[1],E=Object(a.useState)(!0),L=Object(o.a)(E,2),F=L[0],q=L[1],G=Object(a.useState)(!1),U=Object(o.a)(G,2),Q=U[0],V=U[1],z=Object(a.useState)(),H=Object(o.a)(z,2),W=H[0],K=H[1],J=Object(a.useState)(!1),Y=Object(o.a)(J,2),Z=Y[0],X=Y[1],$=Object(a.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),re=Object(o.a)(ae,2),ce=re[0],se=re[1],oe=Object(a.useState)(""),ie=Object(o.a)(oe,2),ue=ie[0],le=ie[1],de=Object(a.useState)({add:!1===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),be=Object(o.a)(de,2),je=be[0],me=(be[1],Object(a.useState)(!1)),Oe=Object(o.a)(me,2),pe=Oe[0],he=Oe[1],fe=Object(a.useState)([]),xe=Object(o.a)(fe,2),ve=xe[0],ge=xe[1],Ie=function(){y(n),se(""),ne(""),le(""),f(c)},ye=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.formid);case 2:if(!(n=e.sent)){e.next=17;break}if(!(n.length>0)){e.next=9;break}ge(n),he(!0),e.next=17;break;case 9:return e.next=11,v.salesReturn.toArray();case 11:return a=e.sent,r={series:"",sCount:0,digit:5,dbcount:a},e.next=15,Ve(r,t.formid);case 15:c=e.sent,Ne(c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n,a){var r,c,s,o,u,l,b;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(a);case 2:if(void 0!==(r=e.sent).digit){e.next=14;break}return e.next=6,v.salesReturn.toArray();case 6:return c=e.sent,s=Object(d.a)(Object(d.a)({},r),{},{digit:5,dbcount:c}),e.next=10,Ve(s,t.formid);case 10:o=e.sent,Ne(o),e.next=22;break;case 14:return e.next=16,v.salesReturn.toArray();case 16:return u=e.sent,l=Object(d.a)(Object(d.a)({},r),{},{dbcount:u}),e.next=20,Ve(l,t.formid);case 20:b=e.sent,Ne(b);case 22:he(!1);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.customerMaster.where("LedgerType").equals(1).toArray().then().catch((function(e){return console.log(e)}));case 2:return n=e.sent,e.next=5,v.itemMaster.toArray().then().catch((function(e){return console.log(e)}));case 5:return a=e.sent,e.next=8,ke();case 8:r=e.sent,y(Object(d.a)(Object(d.a)({},I),{},{Invoiceno:t,InvoiceDate:new Date,vendorList:n.sort((function(e,t){return e.PartyName.localeCompare(t.PartyName)})),itemList:a,stateList:r}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Set,e.next=3,v.cityMaster.toArray();case 3:return n=e.sent,a=n.filter((function(e){var n=t.has(e.StateName);return t.add(e.StateName),!n})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,"option"),e.next=3,ns(t);case 3:n=e.sent,console.log(t,"option"),t&&(a=t.GSTClassification[0].HsnId,K(Object(d.a)(Object(d.a)({},W),{},{ItemName:t.ItemName,ItemId:t.ItemId,igstrate:n.igstRate,cgstrate:n.cgstRate,sgstrate:n.sgstRate,hsnid:a})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=Object(a.useCallback)(Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c,s,o,u,l,b,j,m,O,p,h,f;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==W?(t=void 0!==W.Quantity?W.Quantity:""!==M.Quantity?M.Quantity:0,n=void 0!==W.Rate?W.Rate:""!==M.Rate?M.Rate:0,a=void 0!==W.DiscountPer?W.DiscountPer:""!==M.DiscountPer?M.DiscountPer:0,r=void 0!==W.igstrate?W.igstrate:""!==M.igstrate?M.igstrate:0,c=void 0!==W.cgstrate?W.cgstrate:""!==M.cgstrate?M.cgstrate:0,s=void 0!==W.sgstrate?W.sgstrate:""!==M.sgstrate?M.sgstrate:0,u=a*(o=t*n)/100,l=as(r,o),b=as(c,o),j=as(s,o),m=o-u,O=parseFloat(m)+parseFloat(l)+parseFloat(b)+parseFloat(j),p=Object(d.a)(Object(d.a)({},W),{},{ItemName:void 0!==W.ItemName?W.ItemName:void 0!==M.ItemName?M.ItemName:"",igstamount:rs(l),cgstamount:rs(b),sgstamount:rs(j),Quantity:t,Rate:rs(n),DiscountPer:rs(a),Amount:rs(o),DiscountAmount:rs(u),totalAmount:rs(O),altqty:void 0!==W.altqty?W.altqty:t,finalDiscount:rs(m),hsnid:void 0!==W.hsnid?W.hsnid:void 0!==M.hsnid?M.hsnid:""}),h=I.items.map((function(e){return void 0===e.Id?e.staticid===M.staticid?Object(d.a)(Object(d.a)({},e),p):e:e.Id===M.Id?Object(d.a)(Object(d.a)({},e),p):e})),f=cs(h),y(Object(d.a)(Object(d.a)({},I),{},{items:h,taxpage:f})),A(!1),K(),_(!0)):_(!0);case 1:case"end":return e.stop()}}),e)}))),[M,W,I]),Ce=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("UserId"),e.next=3,v.salesReturn.toArray().then().catch((function(e){return console.log(e)}));case 3:return n=e.sent,a=n.filter((function(e){return e.CreatedBy===t})),e.next=7,v.SaleReturnDetail.toArray().then().catch((function(e){return console.log(e)}));case 7:r=e.sent,console.log("transaction purchase invoice res vvk",a),a&&y(Object(d.a)(Object(d.a)({},I),{},{invoiceList:a,itemList:r}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var n,a,r,c,s,o,u,l,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=37;break}return se(""),ne(""),e.next=5,v.customerMaster.where("Id").equals(t.PartyId).first().then().catch((function(e){return console.log(e)}));case 5:return n=e.sent,e.next=8,v.salesReturn.where("Invoiceno").equals(t.Invoiceno).first().then().catch((function(e){return console.log(e)}));case 8:return a=e.sent,e.next=11,v.SaleReturnDetail.where("InvoiceId").equals(a.id).toArray().then().catch((function(e){return console.log(e)}));case 11:r=e.sent,c=[],s=Object(Jn.a)(r),e.prev=14,s.s();case 16:if((o=s.n()).done){e.next=25;break}return u=o.value,e.next=20,v.itemMaster.where("ItemId").equals(u.ItemId).first().then().catch((function(e){return console.log(e)}));case 20:l=e.sent,u.ItemName=void 0===l?"":l.ItemName,c.push(u);case 23:e.next=16;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(14),s.e(e.t0);case 30:return e.prev=30,s.f(),e.finish(30);case 33:b=c.map((function(e){var t=parseFloat(e.GrossAmount)-parseFloat(e.ManualDiscountAmount),n=parseFloat(t)+parseFloat(e.IgstAmount)+parseFloat(e.CgstAmount)+parseFloat(e.SgstAmount);return Object(d.a)(Object(d.a)({},e),{},{totalAmount:rs(n),finalDiscount:rs(t),Rate:rs(e.MRP),DiscountPer:rs(e.ManualDiscount),DiscountAmount:rs(e.ManualDiscountAmount),igstamount:rs(e.IgstAmount),cgstamount:rs(e.CgstAmount),sgstamount:rs(e.SgstAmount),Amount:rs(e.GrossAmount),igstrate:rs(e.IgstRate),cgstrate:rs(e.CgstRate),sgstrate:rs(e.SgstRate),unit:"NOS"})})),j=cs(b),y(Object(d.a)(Object(d.a)({},I),{},{id:t.id,vendorCode:n.PartyCode,Invoiceno:t.Invoiceno,InvoiceDate:t.InvoiceDate,PartyId:t.PartyId,remark:a.remark,taxpage:j,items:b})),X(!0);case 37:case"end":return e.stop()}}),e,null,[[14,27,30,33]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e={Id:I.Id,BranchId:"",Invoiceno:I.Invoiceno,SeriesId:"",RTaxAmount:parseFloat(I.taxpage.taxamount),InvoiceDate:I.InvoiceDate,PartyId:parseInt(I.PartyId),GrossAmount:parseFloat(I.taxpage.grossamount),EditLog:"",SeriesVoucherType:"",TotalBillQty:0,DiscountAmount:parseFloat(I.taxpage.discountamount),IsAuthorized:"",InvoiceType:"",ReceiveAmount:parseFloat(I.taxpage.netamount),Remarks:I.remark,CopunterId:"",InvoiceId:I.InvoiceNo,CreatedBy:localStorage.getItem("UserId"),NetAmount:parseFloat(I.taxpage.netamount),Stype:"M",CreatedOn:new Date,new:1,update:0};if(Q){var t=Object(d.a)(Object(d.a)({},e),{},{id:I.id});v.salesReturn.put(t).then((function(e){e&&Pe()})).catch((function(e){return console.log(e)}))}else v.salesReturn.add(e).then((function(e){e&&Pe()})).catch((function(e){return console.log(e)}))},Pe=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.salesReturn.where("Invoiceno").equals(I.Invoiceno).first();case 2:t=e.sent,(n=I.items.map((function(e){var n,a=(n={InvoiceId:t.id,TotalTaxAmount:e.totalAmount,AutoDiscountAmount:parseFloat(e.DiscountAmount),SgstAmount:e.sgstamount},Object(l.a)(n,"SgstAmount",e.sgstamount),Object(l.a)(n,"ManualDiscountAmount",parseFloat(e.DiscountAmount)),Object(l.a)(n,"GrossAmount",parseFloat(e.Amount)),Object(l.a)(n,"SgstRate",e.sgstrate),Object(l.a)(n,"ItemId",e.ItemId),Object(l.a)(n,"Quantity",parseInt(e.Quantity)),Object(l.a)(n,"CgstAmount",e.cgstamount),Object(l.a)(n,"MRP",parseFloat(e.Rate)),Object(l.a)(n,"IgstRate",parseFloat(e.igstrate)),Object(l.a)(n,"ManualDiscount",e.DiscountPer),Object(l.a)(n,"ItemRemark",e.remark),Object(l.a)(n,"CgstRate",parseFloat(e.cgstrate)),Object(l.a)(n,"SalePrice",e.saleprice),Object(l.a)(n,"AgainstInvoiceDetailid",""),Object(l.a)(n,"Hsnid",0),Object(l.a)(n,"TaxPercentage",e.taxper),Object(l.a)(n,"AgainstInvoiceId",""),Object(l.a)(n,"AltQuantity",parseInt(e.altqty)),Object(l.a)(n,"IgstAmount",e.igstamount),Object(l.a)(n,"SaleReturnId",e.InvoiceNo),Object(l.a)(n,"AutoDiscount",parseFloat(e.DiscountPer)),Object(l.a)(n,"FinalDiscount",parseFloat(e.finalDiscount)),n);return Q?(a.Id=e.Id,a):a})))&&(Q?v.SaleReturnDetail.bulkPut(n).then((function(e){e&&(alert("data Update successfully"),Ie(),m("save"))})).catch((function(e){return console.log(e)})):v.SaleReturnDetail.bulkAdd(n).then((function(e){e&&(alert("data save successfully"),Ie(),m("save"))})).catch((function(e){return console.log(e)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log(I,"createObj4444");var e=function(e){!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),ne(ce)),"Enter"===e.key&&(e.preventDefault(),Se())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[I,M,Se,ce,W]);var Re={val:j,change_state:function(e){switch(e){case"add":return m(e),ye(),V(!1),q(!0),void X(!0);case"edit":return m(e),Ce(),V(!0),X(!1),void q(!0);case"view":return m(e),Ce(),V(!1),q(!1),void X(!1);case"save":var t=Object.keys(h),n={};return t.forEach((function(e){return n[e]=""===I[e]})),f(n),void(Object.values(n).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):_e());case"refresh":return Ie(),V(!1),q(!1),X(!1),void m(e);default:return e}},disabledAction:je};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"salereturnManual",style:{display:!0===t.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},Re)),Object(Te.jsxs)("div",{className:"salereturnManualIn",children:[Object(Te.jsx)("div",{className:"box greyBg",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w65",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.InvoiceNo?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Sales Return No"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"edit"===j||"view"===j?Object(Te.jsx)(Hn.a,{open:"Invoiceno"===te,options:I.invoiceList,onChange:function(e,t){return De(t)},getOptionLabel:function(e){return e.Invoiceno.toString()},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("Invoiceno")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{type:"text",value:I.Invoiceno,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:!0===h.InvoiceDate?"formBox error":"formBox",children:[Object(Te.jsx)("img",{src:jt,className:"calIcon",alt:""}),Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Sales Return Date"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),Object(Te.jsx)(pa.a,{selected:I&&I.InvoiceDate,onChange:"add"===j?function(e){return y(Object(d.a)(Object(d.a)({},I),{},{InvoiceDate:e}))}:function(){return!1},minDate:I&&I.InvoiceDate})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col autoComp",children:Object(Te.jsxs)("div",{className:!0===h.vendorName?"formBox error":"formBox",children:[Object(Te.jsxs)("label",{htmlFor:"",children:[Object(Te.jsx)(ot,{content:"Vendor Name"}),Object(Te.jsx)("span",{className:"required",children:"*"})]}),"add"===j&&"name"!==ue?Object(Te.jsx)(Hn.a,{open:"VendorName"===te,options:I.vendorList,onChange:function(e,t){return function(e){if(e){var t="VendorName"===ce?"code":"name";y(Object(d.a)(Object(d.a)({},I),{},{PartyId:e.Id,vendorCode:e.PartyCode,vendorName:e.PartyName})),f(Object(d.a)(Object(d.a)({},h),{},{vendorName:!1,vendorCode:!1})),se(""),ne(""),le(t)}}(t)},getOptionLabel:function(e){return e.PartyName},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{placeholder:"Press ctrl + L",onFocus:function(){return se("VendorName")},onBlur:function(){se(""),ne("")}}))}}):Object(Te.jsx)("input",{name:"vendorName",type:"text",readOnly:!0,value:I&&I.vendorName})]})})})]}),Object(Te.jsx)("div",{className:"col w35"})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col mt-2 mb-2",children:Object(Te.jsx)("div",{className:"tableBox",children:Object(Te.jsx)(Na,{coulmn:es,data:I.items,overFlowScroll:!0,selectedTr:function(e){return function(e){if(_(!1),T(e),k&&M){console.log(M,"selectedTblRow1");var t=I.items.map((function(e){return void 0!==e.Id?e.Id===M.Id?Object(d.a)(Object(d.a)({},e),M):e:e.staticid===M.staticid?Object(d.a)(Object(d.a)({},e),M):e}));y(Object(d.a)(Object(d.a)({},I),{},{items:t}))}A(!1)}(e)},editColumn:F,editfunction:function(){A(!0)},optionList:I.itemList,editStatus:k,deleteRow:function(){return function(){var e=I.items.filter((function(e){return void 0!==e.Id?e.Id!==M.Id:e.staticid!==M.staticid}));if(e){var t=e.map((function(e,t){return void 0===e.Id?Object(d.a)(Object(d.a)({},e),{},{staticid:t+1}):e}));y(Object(d.a)(Object(d.a)({},I),{},{items:t}))}}()},tblInputOnchange:function(e){return function(e){return console.log("tableInputOnchange invice",e),K(Object(d.a)(Object(d.a)({},W),{},Object(l.a)({},e.target.name,e.target.value))),e.target.value}(e)},getAutocompleteOption:function(e){return Ae(e)},itemAdd:!0===Z&&function(){return function(){var e=Object(d.a)(Object(d.a)({},r),{},{staticid:I.items.length+1}),t=[].concat(Object(R.a)(I.items),[Object(d.a)({},e)]);y(Object(d.a)(Object(d.a)({},I),{},{items:t})),X(!0)}()},refreshTable:D,editbtnText:"Add Item detail"})})})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsx)(ts,{taxObject:I.taxpage})})}),Object(Te.jsx)("div",{className:"box blueBg mt-2",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col w25 mr-auto",children:Object(Te.jsx)("div",{className:"formBox"})}),Object(Te.jsx)("div",{className:"col w25",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Total"})}),Object(Te.jsx)("input",{type:"text",className:"bgWhite",value:I.taxpage.netamount,readOnly:!0})]})})]})}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col w100",children:Object(Te.jsxs)("div",{className:"RemarkForm mt-2 mb-2",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Remark"})}),Object(Te.jsx)("textarea",{name:"remark",value:I.remark,onChange:function(e){return function(e){y(Object(d.a)(Object(d.a)({},I),{},Object(l.a)({},e.target.name,e.target.value))),""===e.target.value?(console.log(e.target.name,"ll"),f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,"")))):(console.log(e.target.name,"mm"),f(Object(d.a)(Object(d.a)({},h),{},Object(l.a)({},e.target.name,!1))))}(e)},cols:"30",rows:"10"})]})})})]}),pe&&Object(Te.jsx)("div",{className:"voucherPop",children:Object(Te.jsxs)("div",{className:"voucherPopin",children:[Object(Te.jsx)("h3",{children:Object(Te.jsx)(ot,{content:"Voucher List"})}),Object(Te.jsx)("ul",{children:ve.map((function(e){return Object(Te.jsx)("li",{onClick:function(t){return we(t,e)},children:e.VoucherName})}))})]})})]})})},is=n(91),us=(n(448),function(e){var t=e.onlinestatus,n=e.pageNav,r={godownname:"",godowncode:"",IsActive:"",isauthorized:!1,godownList:[]},c=Object(a.useState)(),s=Object(o.a)(c,2),b=s[0],j=s[1],m=Object(a.useState)(r),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(a.useState)(!1),x=Object(o.a)(f,2),g=x[0],I=x[1],y=Object(a.useState)({godownname:"",godowncode:""}),w=Object(o.a)(y,2),N=w[0],k=w[1],A=Object(a.useState)(!1),S=Object(o.a)(A,2),C=S[0],D=S[1],_=Object(a.useState)({add:!1===n.AllowNew?"disable":"",view:!1===n.AllowView?"disable":"",edit:!1===n.AllowEdit?"disable":"",authorize:!1===n.AllowAuthorize?"disable":"",print:!1===n.AllowPrint?"disable":""}),P=Object(o.a)(_,2),R=P[0],B=(P[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.GodownMaster.toArray().then().catch((function(e){return console.log(e)}));case 2:(t=e.sent)&&h(Object(d.a)(Object(d.a)({},p),{},{godownList:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),M=function(e){h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},e.target.name,e.target.value)))},T=function(){var e=Object(u.a)(Object(i.a)().mark((function e(n){var a,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=6;break}if(!t){e.next=5;break}return e.abrupt("return",j(n));case 5:alert("you are not online please try again after some time when you online");case 6:if("view"!==n){e.next=9;break}return B(),e.abrupt("return",j(n));case 9:if("save"===n&&(a=Object.keys(N),c={},a.forEach((function(e){return c[e]=""===p[e]||null===p[e]||!0===N[e]})),k(c),Object.values(c).filter((function(e){return!0===e})).length>0?alert("please fill all the field"):t?E():alert("you are not online please try again after some time when you online")),"refresh"!==n){e.next=13;break}return h(r),e.abrupt("return",j(n));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){};Object(a.useEffect)((function(){var e=function(e){g&&(!e.ctrlKey||"l"!==e.key&&"L"!==e.key||(e.preventDefault(),D(!0)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[p,g,b]);var L={val:b,change_state:T,disabledAction:R};return Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===n.hide?"none":"block"},children:[Object(Te.jsx)(zn,Object(d.a)({},L)),Object(Te.jsx)("div",{className:"godownMaster",children:Object(Te.jsxs)("div",{className:"box",children:[Object(Te.jsx)("div",{className:"formBox",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w35",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Godown Name"})}),"view"===b&&""===p.godownname?Object(Te.jsx)(Hn.a,{open:C,options:p.godownList,onChange:function(e,t){!function(e){console.log(e,"value"),e&&h(Object(d.a)(Object(d.a)({},p),{},{godownname:e.Storename,godowncode:e.Storecode,IsActive:e.inactive,isauthorized:e.isauthorized})),I(!1),D(!1)}(t)},getOptionLabel:function(e){return e.Storename},renderInput:function(e){return Object(Te.jsx)(Wn.a,Object(d.a)(Object(d.a)({},e),{},{value:"",placeholder:"Press ctrl + L",onFocus:function(){return I(!0)},onBlur:function(){I(!1),D(!1)}}))}}):Object(Te.jsx)("input",{type:"text",onChange:function(e){return M(e)},name:"godownname",value:p.godownname})]}),!0===p.isauthorized?Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsx)("span",{style:{marginTop:"27px",color:"#f00",display:"inline-block"},children:"Authorised"})}):""]})}),Object(Te.jsx)("div",{className:"formBox",children:Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w35",children:[Object(Te.jsx)("label",{htmlFor:"",children:Object(Te.jsx)(ot,{content:"Godown Code"})}),Object(Te.jsx)("input",{type:"text",readOnly:"add"!==b,onChange:function(e){return M(e)},name:"godowncode",value:p.godowncode})]}),Object(Te.jsx)("div",{className:"col w35",children:Object(Te.jsxs)("div",{className:"checkboxNew",children:[Object(Te.jsx)("input",{type:"checkbox",id:"godownIsactive",disabled:"add"!==b,name:"IsActive",checked:p.IsActive,onChange:function(e){return function(e){var t=e.target,n=t.name,a=t.checked;h(Object(d.a)(Object(d.a)({},p),{},Object(l.a)({},n,a)))}(e)}}),Object(Te.jsx)("label",{htmlFor:"godownIsactive",children:Object(Te.jsx)(ot,{content:"IsActive"})})]})})]})})]})})]})})}),ls=(n(449),function(e){e.onlinestatus;var t=e.pageNav,n={Address:"",City:"",CompanyName:"",CompanyShortName:"",Contact1:"",Contact2:"",Country:"",Currency:"",Email:"",FaxNo:"",LicenceNo:"",PinCode:"",RegisterDate:"",RegisterNo:"",State:"",TallyCompanyname:"",TallyIpAndPort:"",WebUrl:"",companylogo:""},r=Object(a.useState)(n),c=Object(o.a)(r,2),s=c[0],l=c[1],b=Object(a.useState)(),j=Object(o.a)(b,2),m=j[0],O=j[1],p=Object(a.useState)({add:!0===t.AllowNew?"disable":"",view:!1===t.AllowView?"disable":"",edit:!1===t.AllowEdit?"disable":"",authorize:!1===t.AllowAuthorize?"disable":"",print:!1===t.AllowPrint?"disable":""}),h=Object(o.a)(p,2),f=h[0],x=(h[1],function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("view"!==t){e.next=3;break}return g(),e.abrupt("return",O(t));case 3:if("refresh"!==t){e.next=6;break}return l(n),e.abrupt("return",O(t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.CompanySettings.toArray();case 2:return t=e.sent,e.next=5,v.cityMaster.where("CityId").equals(parseInt(t[0].City)).first();case 5:return n=e.sent,e.next=8,v.currencyMaster.where("Id").equals(parseInt(t[0].Currency)).first();case 8:return a=e.sent,e.next=11,v.stateMaster.where("StateId").equals(parseInt(t[0].State)).first();case 11:r=e.sent,t.length>0&&(c=Object(d.a)(Object(d.a)({},t[0]),{},{State:r.StateName,Country:r.CountryName,Currency:a.CurrencySymbol,City:n.CityName}),l(c));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I={val:m,change_state:x,disabledAction:f};return Object(a.useEffect)((function(){}),[s]),Object(Te.jsx)(Te.Fragment,{children:Object(Te.jsxs)("div",{className:"tabBox",style:{display:!0===t.hide?"none":"block",marginBottom:"10px"},children:[Object(Te.jsx)(zn,Object(d.a)({},I)),Object(Te.jsxs)("div",{className:"box",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsxs)("div",{className:"col w75",children:[Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Company Name"})}),Object(Te.jsx)("input",{name:"CompanyName",type:"text",value:s.CompanyName,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Company Short Name"})}),Object(Te.jsx)("input",{name:"CompanyShortName",type:"text",value:s.CompanyShortName,readOnly:!0})]})})]}),Object(Te.jsx)("div",{className:"row",children:Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Adress"})}),Object(Te.jsx)("textarea",{className:"textarea",name:"Address",value:s.Address,readOnly:!0})]})})})]}),Object(Te.jsx)("div",{className:"col w25"})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Country"})}),Object(Te.jsx)("input",{name:"Commission",type:"text",value:s.Country,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"State"})}),Object(Te.jsx)("input",{name:"State",type:"text",value:s.State,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"City"})}),Object(Te.jsx)("input",{name:"City",type:"text",value:s.City,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Pincode"})}),Object(Te.jsx)("input",{name:"PinCode",type:"text",value:s.PinCode,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Contact No 1"})}),Object(Te.jsx)("input",{name:"Contact1",type:"text",value:s.Contact1,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Contact No 2"})}),Object(Te.jsx)("input",{name:"Contact2",type:"text",value:s.Contact2,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Fax No"})}),Object(Te.jsx)("input",{name:"FaxNo",type:"text",value:s.FaxNo,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Currency"})}),Object(Te.jsx)("input",{name:"Currency",type:"text",value:s.Currency,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Registration Date"})}),Object(Te.jsx)("input",{name:"RegisterDate",type:"text",value:s.RegisterDate,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Registration No"})}),Object(Te.jsx)("input",{name:"RegisterNo",type:"text",value:s.RegisterNo,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Web Url"})}),Object(Te.jsx)("input",{name:"WebUrl",type:"text",value:s.WebUrl,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Licence No"})}),Object(Te.jsx)("input",{name:"LicenceNo",type:"text",value:s.LicenceNo,readOnly:!0})]})})]}),Object(Te.jsxs)("div",{className:"row",children:[Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Email Adress"})}),Object(Te.jsx)("input",{name:"Email",type:"text",value:s.Email,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{children:Object(Te.jsx)(ot,{content:"Tally Ip and Port"})}),Object(Te.jsx)("input",{name:"TallyIpAndPort",type:"text",value:s.TallyIpAndPort,readOnly:!0})]})}),Object(Te.jsx)("div",{className:"col",children:Object(Te.jsxs)("div",{className:"formBox",children:[Object(Te.jsx)("label",{htmlFor:"Commission",children:Object(Te.jsx)(ot,{content:"Tally Company Name"})}),Object(Te.jsx)("input",{name:"TallyCompanyname",type:"text",value:s.TallyCompanyname,readOnly:!0})]})})]})]})]})})}),ds=function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t,n,a,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.globelsetting.where("globsettingid").equals(541).first().then().catch((function(e){return console.log(e)}));case 2:if(t=e.sent)for(n=new Date(Date.now()-24*t.value*60*60*1e3),a=0,r=[{prTbl:"salesInvoice",chTbl:"saleInvoiceDetail",fltstr:"invoiceid",createon:"createdon"},{prTbl:"salesInvoiceWithSO",chTbl:"saleInvoiceDetailWithSO",fltstr:"invoiceid",createon:"createdon"},{prTbl:"salesReturn",chTbl:"SaleReturnDetail",fltstr:"InvoiceId",createon:"CreatedOn"},{prTbl:"PurchaseInvoice",chTbl:"PurchaseInvoiceDetail",fltstr:"InvoiceId",createon:"CreatedOn"},{prTbl:"IndentMaster",chTbl:"IndentDetail",fltstr:"IndentId",createon:"CreatedOn"},{prTbl:"IC_Master",chTbl:"IC_Detail",fltstr:"InwardId",createon:"CreatedOn"}];a<r.length;a++)bs(r[a],n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bs=function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,n){var a,r,c,s,o,u,l,d,b,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.table(t.prTbl).where(t.createon).below(n).toArray().then().catch((function(e){return console.log(e)}));case 2:if(!((a=e.sent)&&a.length>0)){e.next=33;break}if(!((r=a.filter((function(e){return 0===e.new&&0===e.update})))&&r.length>0)){e.next=33;break}c=[],s=Object(Jn.a)(r),e.prev=8,s.s();case 10:if((o=s.n()).done){e.next=19;break}return u=o.value,l=0===u.Id||""===u.Id?u.id:u.Id,e.next=15,v.table(t.chTbl).where(t.fltstr).equals(l).toArray().then().catch((function(e){return console.log((function(e){return console.log(e)}))}));case 15:d=e.sent,c=[].concat(Object(R.a)(c),Object(R.a)(d));case 17:e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:return b=c.map((function(e){return e.id})),j=r.map((function(e){return e.id})),e.next=31,v.table(t.prTbl).bulkDelete(j);case 31:return e.next=33,v.table(t.chTbl).bulkDelete(b);case 33:case"end":return e.stop()}}),e,null,[[8,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}(),js=function(e){var t=Object(Ha.b)((function(e){return e.navUpdateReducer})),n=Object(a.useState)(t),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!0),u=Object(o.a)(i,2),l=u[0],b=u[1],j=Object(a.useState)([]),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(a.useState)(!1),f=Object(o.a)(h,2),x=f[0],v=f[1],g=Object(a.useState)(!1),I=Object(o.a)(g,2),y=I[0],w=I[1];return Object(a.useEffect)((function(){s(t)}),[c,t]),Object(a.useEffect)((function(){var e=setInterval((function(){var e=new Date(localStorage.getItem("currentDate"));e?(new Date).getTime()>e.getTime()&&(ds(),localStorage.setItem("currentDate",new Date)):localStorage.setItem("currentDate",new Date)}),6e4);return function(){return clearInterval(e)}}),[]),Object(Te.jsxs)("div",{className:!0===y?"wrapper active":"wrapper",children:[Object(Te.jsx)(lt,Object(d.a)(Object(d.a)({},c),{},{getArr:function(e){return function(e){var t=[];e.map((function(e){return e.subMenu.length>0&&(t=[].concat(Object(R.a)(t),Object(R.a)(e.subMenu))),e})),p(t)}(e)},navFunction:function(e){return function(e){var t=O.map((function(t){return t.menuid===e.menuid?Object(d.a)(Object(d.a)({},t),{},{append:!0,hide:!1}):Object(d.a)(Object(d.a)({},t),{},{hide:!0})}));if(p(t),void 0===c.navArray.find((function(t){return t.menuname===e.menuname})))St([e].concat(Object(R.a)(c.navArray)));else{var n=c.navArray.filter((function(t){return t.menuname!==e.menuname}));St([e].concat(Object(R.a)(n)))}}(e)},lodding:b})),Object(Te.jsxs)("div",{className:"rightWrapper",children:[Object(Te.jsx)(Ht,Object(d.a)(Object(d.a)({},e),{},{navToggle:function(){w(!y)},checkonline:function(e){return function(e){v(e)}(e)}})),Object(Te.jsxs)("div",{className:"rightPage",children:[Object(Te.jsx)(Wt,Object(d.a)(Object(d.a)({},c),{},{tabFunction:function(e,t){return function(e,t){if("true"===t){var n=c.navArray.length>1?c.navArray[1]:void 0,a=O.map((function(t){return void 0!==n&&t.menuid===n.menuid?Object(d.a)(Object(d.a)({},t),{},{hide:!1}):t.menuid===e.menuid?Object(d.a)(Object(d.a)({},t),{},{append:!1,hide:!0}):t}));p(a);var r=c.navArray.filter((function(t){return t.menuid!==e.menuid}));St(Object(R.a)(r))}else{var s=O.map((function(t){return t.menuid===e.menuid?Object(d.a)(Object(d.a)({},t),{},{hide:!1}):Object(d.a)(Object(d.a)({},t),{},{hide:!0})}));p(s);var o=c.navArray.filter((function(t){return t.menuid!==e.menuid}));St([e].concat(Object(R.a)(o)))}}(e,t)}})),O&&O.map((function(e,t){return"Unit Master"===e.menuname&&!0===e.append?Object(Te.jsx)(Kn,{onlinestatus:x,pageNav:e},t):"Item Group"===e.menuname&&!0===e.append?Object(Te.jsx)(gc,{onlinestatus:x,pageNav:e},t):"Multi Record Alteration"===e.menuname&&!0===e.append?Object(Te.jsx)(Dc,{onlinestatus:x,pageNav:e},t):"Change Password"===e.menuname&&!0===e.append?Object(Te.jsx)(za,{onlinestatus:x,pageNav:e},t):"Bill (POS)"===e.menuname&&!0===e.append?Object(Te.jsx)(Qa,{onlinestatus:x,pageNav:e},t):"Item Master"===e.menuname&&!0===e.append?Object(Te.jsx)(tr,{onlinestatus:x,pageNav:e},t):"GST Classification"===e.menuname&&!0===e.append?Object(Te.jsx)(yc,{onlinestatus:x,pageNav:e},t):"Geographical Location"===e.menuname&&!0===e.append?Object(Te.jsx)(cr,{onlinestatus:x,pageNav:e},t):"Customer Master"===e.menuname&&!0===e.append?Object(Te.jsx)(or,{onlinestatus:x,pageNav:e},t):"Employee Master"===e.menuname&&!0===e.append?Object(Te.jsx)(ir,{onlinestatus:x,pageNav:e},t):"Reason Master"===e.menuname&&!0===e.append?Object(Te.jsx)(ur,{onlinestatus:x,pageNav:e},t):"Designation Master"===e.menuname&&!0===e.append?Object(Te.jsx)(wc,{onlinestatus:x,pageNav:e},t):"Sale Person Master"===e.menuname&&!0===e.append?Object(Te.jsx)(lr,{onlinestatus:x,pageNav:e},t):"Sale Return (Bill Wise)"===e.menuname&&!0===e.append?Object(Te.jsx)(br,{onlinestatus:x,pageNav:e},t):"Sale Return (Manual)"===e.menuname&&!0===e.append?Object(Te.jsx)(os,{onlinestatus:x,pageNav:e},t):"Purchase Return"===e.menuname&&!0===e.append?Object(Te.jsx)(mr,{onlinestatus:x,pageNav:e},t):"Advance Adjustment"===e.menuname&&!0===e.append?Object(Te.jsx)(pr,{onlinestatus:x,pageNav:e},t):"Credit Note"===e.menuname&&!0===e.append?Object(Te.jsx)(Ar,{onlinestatus:x,pageNav:e},t):"Purchase Order"===e.menuname&&!0===e.append?Object(Te.jsx)(_r,{onlinestatus:x,pageNav:e},t):"Material Inward With G.I.T."===e.menuname&&!0===e.append?Object(Te.jsx)(Rr,{onlinestatus:x,pageNav:e},t):"Stock Journal"===e.menuname&&!0===e.append?Object(Te.jsx)(Mr,{onlinestatus:x,pageNav:e},t):"Indent"===e.menuname&&!0===e.append?Object(Te.jsx)(Lr,{onlinestatus:x,pageNav:e},t):"Vendor Master"===e.menuname&&!0===e.append?Object(Te.jsx)(qr,{onlinestatus:x,pageNav:e},t):"Debit Note"===e.menuname&&!0===e.append?Object(Te.jsx)(Fr,{onlinestatus:x,pageNav:e},t):"Counter Master"===e.menuname&&!0===e.append?Object(Te.jsx)(Nc,{onlinestatus:x,pageNav:e},t):"Purchase Inward with GIT"===e.menuname&&!0===e.append?Object(Te.jsx)(Vr,{onlinestatus:x,pageNav:e},t):"Purchase Return Without Inward"===e.menuname&&!0===e.append?Object(Te.jsx)(Hr,{onlinestatus:x,pageNav:e},t):"Purchase Invoice"===e.menuname&&!0===e.append?Object(Te.jsx)(ac,{onlinestatus:x,pageNav:e},t):"Sale Order"===e.menuname&&!0===e.append?Object(Te.jsx)(vc,{onlinestatus:x,pageNav:e},t):"Voucher Type"===e.menuname&&!0===e.append?Object(Te.jsx)(kc,{onlinestatus:x,pageNav:e},t):"Currency Master"===e.menuname&&!0===e.append?Object(Te.jsx)(Sc,{onlinestatus:x,pageNav:e},t):"Item Attribute"===e.menuname&&!0===e.append?Object(Te.jsx)(Rc,{onlinestatus:x,pageNav:e},t):"Series Master (Transaction)"===e.menuname&&!0===e.append?Object(Te.jsx)(Bc,{onlinestatus:x,pageNav:e},t):"Apply Series"===e.menuname&&!0===e.append?Object(Te.jsx)(Mc,{onlinestatus:x,pageNav:e},t):"Credit Note Refund"===e.menuname&&!0===e.append?Object(Te.jsx)(Tc,{onlinestatus:x,pageNav:e},t):"Bill (POS) With Sales Order"===e.menuname&&!0===e.append?Object(Te.jsx)(Zc,{onlinestatus:x,pageNav:e},t):"Role Management"===e.menuname&&!0===e.append?Object(Te.jsx)(Xc,{onlinestatus:x,pageNav:e},t):"User Management"===e.menuname&&!0===e.append?Object(Te.jsx)($c,{onlinestatus:x,pageNav:e},t):"Bill Detail"===e.menuname&&!0===e.append||"Bill Detail Item Wise"===e.menuname&&!0===e.append||"Bill Wise Payment Detail"===e.menuname&&!0===e.append||"Bill Detail With Tax"===e.menuname&&!0===e.append||"Tax Detail Report"===e.menuname&&!0===e.append||"Goods In Transit Report"===e.menuname&&!0===e.append||"Stock Report"===e.menuname&&!0===e.append||"Discount Slab Report"===e.menuname&&!0===e.append||"Customer Report"===e.menuname&&!0===e.append?Object(Te.jsx)(is.a,{lodding:b,onlinestatus:x,pageNav:e},t):"Godown Master"===e.menuname&&!0===e.append?Object(Te.jsx)(us,{lodding:b,onlinestatus:x,pageNav:e},t):"Company Settings"===e.menuname&&!0===e.append?Object(Te.jsx)(ls,{lodding:b,onlinestatus:x,pageNav:e},t):""}))]})]}),l&&Object(Te.jsx)("div",{className:"loding_div",children:Object(Te.jsx)("h1",{"data-text":"Loading...",children:"Loading..."})})]})},ms=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useCallback)((function(){return r(!n)}),[n]);Object(a.useEffect)((function(){localStorage.getItem("token")&&r(!0)}),[]);return Object(Te.jsx)(Te.Fragment,{children:n?Object(Te.jsx)(js,{refresh:c}):Object(Te.jsx)(ut,{refresh:c,loginfailed:function(){if(sessionStorage.getItem("loginfailed")){var e=sessionStorage.getItem("loginfailed");sessionStorage.setItem("loginfailed",JSON.parse(e)+1)}else sessionStorage.setItem("loginfailed",1)}})})},Os=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,528)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(Te.jsx)(r.a.StrictMode,{children:Object(Te.jsx)(Ha.a,{store:At,children:Object(Te.jsx)(ms,{})})}),document.getElementById("root")),Os(),console.log("ddd","".concat("http://easypos.emgurukul.com")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("".concat("http://easypos.emgurukul.com","/sw.js")).then((function(e){return console.log("service worker:Registered")})).catch((function(e){return console.log("service worker: Error:".concat(e))}))}))},91:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40),_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39),_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(50),_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(99),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_syncfusion_ej2_react_grids__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(276),_syncfusion_ej2_react_grids__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(277),_dropdown_scss__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(445),_dropdown_scss__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_dropdown_scss__WEBPACK_IMPORTED_MODULE_10__),_svgr_webpack_svgo_titleProp_ref_images_icon_restart_line_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(125),react_datepicker__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(28),react_datepicker__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_datepicker__WEBPACK_IMPORTED_MODULE_12__),react_datepicker_dist_react_datepicker_css__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(55),react_datepicker_dist_react_datepicker_css__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react_datepicker_dist_react_datepicker_css__WEBPACK_IMPORTED_MODULE_13__),_app_css__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(446),_app_css__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_app_css__WEBPACK_IMPORTED_MODULE_14__),_ReportData__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(267),_ReportDataSource__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(447),_getReportData__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(151),axios__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(19),axios__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_18__),_Dropdown__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(205),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__),BillDetail=function(_React$Component){Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_5__.a)(BillDetail,_React$Component);var _super=Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_6__.a)(BillDetail);function BillDetail(props){var _this;return Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_3__.a)(this,BillDetail),_this=_super.call(this,props),_this.getData=Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function e(){var t,n,a,r,c;return Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_regeneratorRuntime_js__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_getReportData__WEBPACK_IMPORTED_MODULE_17__.a)(_this.props.pageNav.formid);case 2:if(!(t=e.sent)){e.next=27;break}return e.t0=_this,e.t1=t,e.next=8,Object(_getReportData__WEBPACK_IMPORTED_MODULE_17__.b)();case 8:if(e.t2=e.sent,e.t3={IsPeriodObj:e.t1,clientId:e.t2},e.t0.setState.call(e.t0,e.t3),!1!==t.IsDefaultLoad){e.next=19;break}if(!0!==t.IsShowPeriod){e.next=17;break}return e.next=15,Object(_getReportData__WEBPACK_IMPORTED_MODULE_17__.c)(_this.props.pageNav.formid);case 15:(n=e.sent)&&_this.setState({periodList:n});case 17:e.next=27;break;case 19:if(!0!==t.IsShowPeriod){e.next=26;break}return e.next=22,Object(_getReportData__WEBPACK_IMPORTED_MODULE_17__.c)(_this.props.pageNav.formid);case 22:(a=e.sent)&&(""!==(r=a[0].DefaultPeriod)?(c=a.find((function(e){return e.PeriodName===r})),_this.setState({periodList:a,preiodId:c.PeriodId,fromDate:new Date(c.FromDate),toDate:new Date(c.ToDate),DefaultPeriod:a[0].DefaultPeriod}),_this.getReportsData()):_this.setState({periodList:a})),e.next=27;break;case 26:_this.getonloadreport();case 27:case"end":return e.stop()}}),e)}))),_this.processAggrColumnHeader=function(AggrCol){var aggrgtheader=eval(_this.replaceAll(_this.replaceAll(_this.replaceAll(_this.replaceAll(AggrCol,"ej.Grid.SummaryType.Sum","Sum"),"ej.TextAlign.Left",'"left"'),"ej.TextAlign.Right",'"left"'),"{0:n2}","N2"));return aggrgtheader},_this.processColumnHeader=function(Headercols){var colheader=eval(_this.replaceAll(_this.replaceAll(_this.replaceAll(Headercols,"ej.TextAlign.Left",'"left"'),"ej.TextAlign.Right",'"right"'),"{0:n2}","N2"));return colheader},_this.replaceAll=function(e,t,n){return e.split(t).join(n)},_this.onGridFilterChange=function(e){_this.reportData.clearFiltering(),_this.reportData.filterSettings.type=e,_this.setState({filterVlu:e})},_this.toolbarClick=function(e){var t=Math.floor(Date.now()/1e3),n=_this.props.pageNav.menuname.replaceAll(" ","_")+"_"+t;"downloadExcel"===e||"Excel Export"===e.item.text?_this.reportData.excelExport({fileName:n+".xlsx"}):"CSV Export"===e.item.text&&_this.reportData.csvExport({fileName:n+".csv"})},_this.PreiodOnchange=function(e){if(e){var t=_this.state.periodList.find((function(t){return t.PeriodId===parseInt(e)}));10===parseInt(e)?_this.setState({fromDate:"",toDate:"",datebox:!0,preiodId:parseInt(e)}):_this.setState({fromDate:new Date(t.FromDate),toDate:new Date(t.ToDate),datebox:!1,preiodId:parseInt(e)})}},_this.formatDate=function(e){var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return"".concat(t,"-").concat(n,"-").concat(a,"T00:00:00")},_this.getonloadreport=function(){_this.props.lodding(!0);var e={ClientId:"",filteredDists:"nothingselected",formId:_this.props.pageNav.formid,formName:_this.props.pageNav.menuname,jsonFilter:[],loginUserId:localStorage.getItem("UserId"),loginUserName:localStorage.getItem("fname")},t={headers:{token:localStorage.getItem("token")}};axios__WEBPACK_IMPORTED_MODULE_18___default.a.post("api/reports/getreports",e,t).then((function(e){e.data.Data.Rows.length<1?(_this.setState({IsPeriodObj:Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)(Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)({},_this.state.IsPeriodObj),{},{IsDefaultLoad:!1})}),_this.setState({errorMsg:"No data Available",ReportData:[]}),_this.props.lodding(!1),setTimeout((function(){_this.setState({errorMsg:""})}),2e3)):(_this.setState({ReportData:e.data.Data.Rows,reportheader:_this.processColumnHeader(e.data.Data.ReportHeaders),IsPeriodObj:Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)(Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)({},_this.state.IsPeriodObj),{},{IsDefaultLoad:!0})}),_this.props.lodding(!1))})).catch((function(e){return console.log(e)}))},_this.getReportsData=function(){if(_this.props.lodding(!0),""===_this.state.fromDate||""===_this.state.toDate)_this.setState({errorMsg:10===_this.state.preiodId?"Please select fromdate and Todate":"Please select any one value from Select List"}),_this.props.lodding(!1),setTimeout((function(){_this.setState({errorMsg:""})}),2e3);else{var e={ClientId:_this.state.clientId,filteredDists:"nothingselected",formId:_this.props.pageNav.formid,formName:_this.props.pageNav.menuname,jsonFilter:[],loginUserId:localStorage.getItem("UserId"),loginUserName:localStorage.getItem("fname"),endDate:_this.formatDate(_this.state.toDate),startDate:_this.formatDate(_this.state.fromDate)},t={headers:{token:localStorage.getItem("token")}};axios__WEBPACK_IMPORTED_MODULE_18___default.a.post("api/reports/getreports",e,t).then((function(e){null===e.data.Data.Rows||e.data.Data.Rows.length<1?(_this.setState({IsPeriodObj:Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)(Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)({},_this.state.IsPeriodObj),{},{IsDefaultLoad:!1})}),_this.setState({errorMsg:"No data Available",ReportData:[]}),_this.props.lodding(!1),setTimeout((function(){_this.setState({errorMsg:""})}),2e3)):(_this.setState({ReportData:e.data.Data.Rows,reportheader:_this.processColumnHeader(e.data.Data.ReportHeaders),IsPeriodObj:Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)(Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.a)({},_this.state.IsPeriodObj),{},{IsDefaultLoad:!0}),reportAggrgtHeader:_this.processAggrColumnHeader(JSON.stringify(e.data.Data.WebAggregates)),showAggregate:e.data.Data.ShowWebAggregate}),_this.props.lodding(!1))})).catch((function(e){return console.log(e)}))}},_this.state={isLoading:!1,reportheader:[],reportAggrgtHeader:[],showAggregate:!1,reportName:"",fromDate:"",toDate:"",clientId:"",preiodId:"",filterVlu:"",DefaultPeriod:"",datebox:!1,errorMsg:"",periodList:[],ReportData:[],IsPeriodObj:{IsDefaultLoad:!1,IsReportOnlineMode:!1,IsShowPeriod:!1,IsShowRequestExportToExcel:!1}},_this.toolbarOptions=["Search","ExcelExport","CsvExport","ColumnChooser"],_this}return Object(_home_mindz_React_pos_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_4__.a)(BillDetail,[{key:"componentDidMount",value:function(){this.getData()}},{key:"footerAggr",value:function(e,t){switch(t){case"Average":return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{children:["Average: ",e.Average]});case"Min":return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{children:["Min: ",e.Min]});case"Max":return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{children:["Max: ",e.Max]});case"Count":return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{children:["Count: ",e.Count]});case"Truecount":return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{children:["True Count: ",e.Truecount]});case"Falsecount":return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{children:["False Count: ",e.Falsecount]});default:return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("span",{children:["Sum: ",e.Sum]})}}},{key:"render",value:function(){var e=this,t=this.state.reportAggrgtHeader,n=t.length>0&&this.state.showAggregate?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_syncfusion_ej2_react_grids__WEBPACK_IMPORTED_MODULE_8__.b,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_syncfusion_ej2_react_grids__WEBPACK_IMPORTED_MODULE_8__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_syncfusion_ej2_react_grids__WEBPACK_IMPORTED_MODULE_9__.b,{children:t.map((function(t){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_syncfusion_ej2_react_grids__WEBPACK_IMPORTED_MODULE_9__.a,{field:t.displayColumn,type:t.summaryType,format:t.format,footerTemplate:function(n){return e.footerAggr(n,t.summaryType)},groupCaptionTemplate:function(n){return e.footerAggr(n,t.summaryType)}},e.state.reportName+"_"+t.displayColumn)}))})})}):null;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"advanceAdjustment",style:{display:!0===this.props.pageNav.hide?"none":"block"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"flterSection",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"row",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"col",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_Dropdown__WEBPACK_IMPORTED_MODULE_19__.a,{preiodlist:this.state.periodList,onchange:this.PreiodOnchange,value:this.state.preiodId})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"col",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"formBox",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("label",{htmlFor:"",children:"From Date"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(react_datepicker__WEBPACK_IMPORTED_MODULE_12___default.a,{dropdownMode:"select",onChange:function(t){return e.setState({fromDate:t,toDate:""})},maxDate:new Date,scrollableYearDropdown:!0,showYearDropdown:!0,showMonthDropdown:!0,disabled:!1===this.state.datebox,selected:this.state.fromDate,onChangeRaw:function(e){return e.preventDefault()},dateFormat:"dd/MM/yyyy"})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"col",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"formBox",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("label",{htmlFor:"",children:"To Date"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(react_datepicker__WEBPACK_IMPORTED_MODULE_12___default.a,{dropdownMode:"select",onChange:function(t){return e.setState({toDate:t})},disabled:!1===this.state.datebox,minDate:this.state.fromDate,maxDate:new Date,scrollableYearDropdown:!0,showYearDropdown:!0,showMonthDropdown:!0,selected:this.state.toDate,onChangeRaw:function(e){return e.preventDefault()},dateFormat:"dd/MM/yyyy"})]})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"col",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_Dropdown__WEBPACK_IMPORTED_MODULE_19__.a,{preiodlist:[{PeriodId:"Menu",PeriodName:"Menu"},{PeriodId:"CheckBox",PeriodName:"CheckBox"},{PeriodId:"Excel",PeriodName:"Excel"},{PeriodId:"FilterBar",PeriodName:"FilterBar"}],onchange:this.onGridFilterChange,value:this.state.filterVlu,disabled:!(this.state.ReportData.length>0)})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{className:"col",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("button",{className:"fltr_Submit",onClick:this.getReportsData,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_svgr_webpack_svgo_titleProp_ref_images_icon_restart_line_svg__WEBPACK_IMPORTED_MODULE_11__.a,{fill:"#ffffff"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("button",{className:this.state.ReportData.length>0?"download_excel green":"download_excel grey",onClick:this.state.ReportData.length>0?function(){return e.toolbarClick("downloadExcel")}:function(){return!1},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("span",{className:"icon_excelD"})})]})]}),""!==this.state.errorMsg?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"errorShow",children:this.state.errorMsg}):""]}),this.state.IsPeriodObj.IsDefaultLoad&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"report-master-form",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{className:"tab-content",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("section",{className:"contentWrapper",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_ReportData__WEBPACK_IMPORTED_MODULE_15__.a,{isLoading:this.state.isLoading,formId:this.props.FormId,reportData:function(t){e.reportData=t},dataSources:this.state.ReportData,toolbarClick:this.toolbarClick,toolbarOptions:this.toolbarOptions,report_header:this.state.reportheader,aggrt:n})})})})]})}}]),BillDetail}(react__WEBPACK_IMPORTED_MODULE_7___default.a.Component);__webpack_exports__.a=BillDetail}},[[450,1,2]]]);
//# sourceMappingURL=main.75ca0070.chunk.js.map